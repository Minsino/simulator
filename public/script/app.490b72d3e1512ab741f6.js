!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){n(4),t.exports=n(301)},,,,function(t,e,n){(function(t){"use strict";function e(t,e,n){t[e]||Object[i](t,e,{writable:!0,configurable:!0,value:n})}if(n(5),n(296),n(298),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var i="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,function(){return this}())},function(t,e,n){n(6),n(55),n(56),n(57),n(58),n(60),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(73),n(75),n(77),n(79),n(82),n(83),n(84),n(88),n(90),n(92),n(95),n(96),n(97),n(98),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(108),n(109),n(110),n(112),n(113),n(114),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(134),n(135),n(139),n(140),n(141),n(142),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(162),n(163),n(169),n(170),n(172),n(173),n(174),n(178),n(179),n(180),n(181),n(182),n(184),n(185),n(186),n(187),n(190),n(192),n(193),n(194),n(196),n(198),n(200),n(201),n(202),n(204),n(205),n(206),n(207),n(214),n(217),n(218),n(220),n(221),n(224),n(225),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(247),n(248),n(249),n(250),n(251),n(252),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(263),n(264),n(266),n(267),n(268),n(269),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(294),n(295),t.exports=n(12)},function(t,e,n){"use strict";var i=n(7),r=n(8),o=n(9),s=n(11),a=n(21),c=n(25).KEY,l=n(10),u=n(26),h=n(27),f=n(22),d=n(28),p=n(29),g=n(30),m=n(32),v=n(45),y=n(48),w=n(15),b=n(35),x=n(19),A=n(20),E=n(49),_=n(52),S=n(54),C=n(14),M=n(33),$=S.f,F=C.f,T=_.f,L=i.Symbol,k=i.JSON,R=k&&k.stringify,D="prototype",B=d("_hidden"),P=d("toPrimitive"),O={}.propertyIsEnumerable,I=u("symbol-registry"),N=u("symbols"),U=u("op-symbols"),j=Object[D],z="function"==typeof L,H=i.QObject,W=!H||!H[D]||!H[D].findChild,V=o&&l(function(){return 7!=E(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=$(j,e);i&&delete j[e],F(t,e,n),i&&t!==j&&F(j,e,i)}:F,G=function(t){var e=N[t]=E(L[D]);return e._k=t,e},q=z&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},X=function(t,e,n){return t===j&&X(U,e,n),w(t),e=x(e,!0),w(n),r(N,e)?(n.enumerable?(r(t,B)&&t[B][e]&&(t[B][e]=!1),n=E(n,{enumerable:A(0,!1)})):(r(t,B)||F(t,B,A(1,{})),t[B][e]=!0),V(t,e,n)):F(t,e,n)},Y=function(t,e){w(t);for(var n,i=v(e=b(e)),r=0,o=i.length;o>r;)X(t,n=i[r++],e[n]);return t},K=function(t,e){return void 0===e?E(t):Y(E(t),e)},Z=function(t){var e=O.call(this,t=x(t,!0));return!(this===j&&r(N,t)&&!r(U,t))&&(!(e||!r(this,t)||!r(N,t)||r(this,B)&&this[B][t])||e)},Q=function(t,e){if(t=b(t),e=x(e,!0),t!==j||!r(N,e)||r(U,e)){var n=$(t,e);return!n||!r(N,e)||r(t,B)&&t[B][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=T(b(t)),i=[],o=0;n.length>o;)r(N,e=n[o++])||e==B||e==c||i.push(e);return i},tt=function(t){for(var e,n=t===j,i=T(n?U:b(t)),o=[],s=0;i.length>s;)!r(N,e=i[s++])||n&&!r(j,e)||o.push(N[e]);return o};z||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===j&&e.call(U,n),r(this,B)&&r(this[B],t)&&(this[B][t]=!1),V(this,t,A(1,n))};return o&&W&&V(j,t,{configurable:!0,set:e}),G(t)},a(L[D],"toString",function(){return this._k}),S.f=Q,C.f=X,n(53).f=_.f=J,n(47).f=Z,n(46).f=tt,o&&!n(31)&&a(j,"propertyIsEnumerable",Z,!0),p.f=function(t){return G(d(t))}),s(s.G+s.W+s.F*!z,{Symbol:L});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var et=M(d.store),nt=0;et.length>nt;)g(et[nt++]);s(s.S+s.F*!z,"Symbol",{"for":function(t){return r(I,t+="")?I[t]:I[t]=L(t)},keyFor:function(t){if(q(t))return m(I,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!z,"Object",{create:K,defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:tt}),k&&s(s.S+s.F*(!z||l(function(){var t=L();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!q(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return e=i[1],"function"==typeof e&&(n=e),!n&&y(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!q(e))return e}),i[1]=e,R.apply(k,i)}}}),L[D][P]||n(13)(L[D],P,L[D].valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var i=n(7),r=n(12),o=n(13),s=n(21),a=n(23),c="prototype",l=function(t,e,n){var u,h,f,d,p=t&l.F,g=t&l.G,m=t&l.S,v=t&l.P,y=t&l.B,w=g?i:m?i[e]||(i[e]={}):(i[e]||{})[c],b=g?r:r[e]||(r[e]={}),x=b[c]||(b[c]={});g&&(n=e);for(u in n)h=!p&&w&&void 0!==w[u],f=(h?w:n)[u],d=y&&h?a(f,i):v&&"function"==typeof f?a(Function.call,f):f,w&&s(w,u,f,t&l.U),b[u]!=f&&o(b,u,d),v&&x[u]!=f&&(x[u]=f)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(14),r=n(20);t.exports=n(9)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(15),r=n(17),o=n(19),s=Object.defineProperty;e.f=n(9)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(16);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(9)&&!n(10)(function(){return 7!=Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(16),r=n(7).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(16);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(7),r=n(13),o=n(8),s=n(22)("src"),a="toString",c=Function[a],l=(""+c).split(a);n(12).inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,a){var c="function"==typeof n;c&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(c&&(o(n,s)||r(n,s,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||c.call(this)})},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(24);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(22)("meta"),r=n(16),o=n(8),s=n(14).f,a=0,c=Object.isExtensible||function(){return!0},l=!n(10)(function(){return c(Object.preventExtensions({}))}),u=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[i].i},f=function(t,e){if(!o(t,i)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[i].w},d=function(t){return l&&p.NEED&&c(t)&&!o(t,i)&&u(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(t,e,n){var i=n(7),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var i=n(14).f,r=n(8),o=n(28)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(26)("wks"),r=n(22),o=n(7).Symbol,s="function"==typeof o,a=t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))};a.store=i},function(t,e,n){e.f=n(28)},function(t,e,n){var i=n(7),r=n(12),o=n(31),s=n(29),a=n(14).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e){t.exports=!1},function(t,e,n){var i=n(33),r=n(35);t.exports=function(t,e){for(var n,o=r(t),s=i(o),a=s.length,c=0;a>c;)if(o[n=s[c++]]===e)return n}},function(t,e,n){var i=n(34),r=n(44);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(8),r=n(35),o=n(39)(!1),s=n(43)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),c=0,l=[];for(n in a)n!=s&&i(a,n)&&l.push(n);for(;e.length>c;)i(a,n=e[c++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var i=n(36),r=n(38);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(37);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(35),r=n(40),o=n(42);t.exports=function(t){return function(e,n,s){var a,c=i(e),l=r(c.length),u=o(s,l);if(t&&n!=n){for(;l>u;)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var i=n(41),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(41),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(26)("keys"),r=n(22);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(33),r=n(46),o=n(47);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,a=n(t),c=o.f,l=0;a.length>l;)c.call(t,s=a[l++])&&e.push(s);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(37);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(15),r=n(50),o=n(44),s=n(43)("IE_PROTO"),a=function(){},c="prototype",l=function(){var t,e=n(18)("iframe"),i=o.length,r="<",s=">";for(e.style.display="none",n(51).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+s+"document.F=Object"+r+"/script"+s),t.close(),l=t.F;i--;)delete l[c][o[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[c]=i(t),n=new a,a[c]=null,n[s]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(14),r=n(15),o=n(33);t.exports=n(9)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,c=0;a>c;)i.f(t,n=s[c++],e[n]);return t}},function(t,e,n){t.exports=n(7).document&&document.documentElement},function(t,e,n){var i=n(35),r=n(53).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(i(t))}},function(t,e,n){var i=n(34),r=n(44).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(47),r=n(20),o=n(35),s=n(19),a=n(8),c=n(17),l=Object.getOwnPropertyDescriptor;e.f=n(9)?l:function(t,e){if(t=o(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(11);i(i.S,"Object",{create:n(49)})},function(t,e,n){var i=n(11);i(i.S+i.F*!n(9),"Object",{defineProperty:n(14).f})},function(t,e,n){var i=n(11);i(i.S+i.F*!n(9),"Object",{defineProperties:n(50)})},function(t,e,n){var i=n(35),r=n(54).f;n(59)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){var i=n(11),r=n(12),o=n(10);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){var i=n(61),r=n(62);n(59)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(38);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(8),r=n(61),o=n(43)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(61),r=n(33);n(59)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){n(59)("getOwnPropertyNames",function(){return n(52).f})},function(t,e,n){var i=n(16),r=n(25).onFreeze;n(59)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(16),r=n(25).onFreeze;n(59)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(16),r=n(25).onFreeze;n(59)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(16);n(59)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(16);n(59)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(16);n(59)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(11);i(i.S+i.F,"Object",{assign:n(72)})},function(t,e,n){"use strict";var i=n(33),r=n(46),o=n(47),s=n(61),a=n(36),c=Object.assign;t.exports=!c||n(10)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=i})?function(t,e){for(var n=s(t),c=arguments.length,l=1,u=r.f,h=o.f;c>l;)for(var f,d=a(arguments[l++]),p=u?i(d).concat(u(d)):i(d),g=p.length,m=0;g>m;)h.call(d,f=p[m++])&&(n[f]=d[f]);return n}:c},function(t,e,n){var i=n(11);i(i.S,"Object",{is:n(74)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var i=n(11);i(i.S,"Object",{setPrototypeOf:n(76).set})},function(t,e,n){var i=n(16),r=n(15),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(23)(Function.call,n(54).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var i=n(78),r={};r[n(28)("toStringTag")]="z",r+""!="[object z]"&&n(21)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(37),r=n(28)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var i=n(11);i(i.P,"Function",{bind:n(80)})},function(t,e,n){"use strict";var i=n(24),r=n(16),o=n(81),s=[].slice,a={},c=function(t,e,n){if(!(e in a)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";a[e]=Function("F,a","return new F("+i.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=s.call(arguments,1),a=function(){var i=n.concat(s.call(arguments));return this instanceof a?c(e,i.length,i):o(e,i,t)};return r(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(14).f,r=n(20),o=n(8),s=Function.prototype,a=/^\s*function ([^ (]*)/,c="name",l=Object.isExtensible||function(){return!0};c in s||n(9)&&i(s,c,{configurable:!0,get:function(){try{var t=this,e=(""+t).match(a)[1];return o(t,c)||!l(t)||i(t,c,r(5,e)),e}catch(n){return""}}})},function(t,e,n){"use strict";var i=n(16),r=n(62),o=n(28)("hasInstance"),s=Function.prototype;o in s||n(14).f(s,o,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(11),r=n(85);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(t,e,n){var i=n(7).parseInt,r=n(86).trim,o=n(87),s=/^[\-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,e){var n=r(String(t),3);return i(n,e>>>0||(s.test(n)?16:10))}:i},function(t,e,n){var i=n(11),r=n(38),o=n(10),s=n(87),a="["+s+"]",c="​",l=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),h=function(t,e,n){var r={},a=o(function(){return!!s[t]()||c[t]()!=c}),l=r[t]=a?e(f):s[t];n&&(r[n]=l),i(i.P+i.F*a,"String",r)},f=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=h},function(t,e){t.exports="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i=n(11),r=n(89);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(t,e,n){var i=n(7).parseFloat,r=n(86).trim;t.exports=1/i(n(87)+"-0")!==-(1/0)?function(t){var e=r(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){"use strict";var i=n(7),r=n(8),o=n(37),s=n(91),a=n(19),c=n(10),l=n(53).f,u=n(54).f,h=n(14).f,f=n(86).trim,d="Number",p=i[d],g=p,m=p.prototype,v=o(n(49)(m))==d,y="trim"in String.prototype,w=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():f(e,3);var n,i,r,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var s,c=e.slice(2),l=0,u=c.length;l<u;l++)if(s=c.charCodeAt(l),s<48||s>r)return NaN;return parseInt(c,i)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(v?c(function(){m.valueOf.call(n)}):o(n)!=d)?s(new g(w(e)),n,p):w(e)};for(var b,x=n(9)?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;x.length>A;A++)r(g,b=x[A])&&!r(p,b)&&h(p,b,u(g,b));p.prototype=m,m.constructor=p,n(21)(i,d,p)}},function(t,e,n){var i=n(16),r=n(76).set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},function(t,e,n){"use strict";var i=n(11),r=n(41),o=n(93),s=n(94),a=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h="0",f=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*l[n],l[n]=i%1e7,i=c(i/1e7)},d=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=c(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+s.call(h,7-n.length)+n}return e},g=function(t,e,n){return 0===e?n:e%2===1?g(t,e-1,n*t):g(t*t,e/2,n)},m=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(10)(function(){a.call({})})),"Number",{toFixed:function(t){var e,n,i,a,c=o(this,u),l=r(t),v="",y=h;if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(e=m(c*g(2,69,1))-69,n=e<0?c*g(2,-e,1):c/g(2,e,1),n*=4503599627370496,e=52-e,e>0){for(f(0,n),i=l;i>=7;)f(1e7,0),i-=7;for(f(g(10,i,1),0),i=e-1;i>=23;)d(1<<23),i-=23;d(1<<i),f(1,1),d(2),y=p()}else f(0,n),f(1<<-e,0),y=p()+s.call(h,l);return l>0?(a=y.length,y=v+(a<=l?"0."+s.call(h,l-a)+y:y.slice(0,a-l)+"."+y.slice(a-l))):y=v+y,y}})},function(t,e,n){var i=n(37);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var i=n(41),r=n(38);t.exports=function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var i=n(11),r=n(10),o=n(93),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,n){var i=n(11);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(11),r=n(7).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){var i=n(11);i(i.S,"Number",{isInteger:n(99)})},function(t,e,n){var i=n(16),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(11);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(11),r=n(99),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,n){var i=n(11);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(11);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(11),r=n(89);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,n){var i=n(11),r=n(85);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,n){var i=n(11),r=n(107),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+o(t-1)*o(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var r=n(11),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(11),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(11),r=n(111);i(i.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var i=n(11);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(11),r=Math.exp;i(i.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,n){var i=n(11),r=n(115);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var i=n(11),r=n(111),o=Math.pow,s=o(2,-52),a=o(2,-23),c=o(2,127)*(2-a),l=o(2,-126),u=function(t){return t+1/s-1/s};i(i.S,"Math",{fround:function(t){var e,n,i=Math.abs(t),o=r(t);return i<l?o*u(i/l/a)*l*a:(e=(1+a/s)*i,n=e-(e-i),n>c||n!=n?o*(1/0):o*n)}})},function(t,e,n){var i=n(11),r=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,o=0,s=0,a=arguments.length,c=0;s<a;)n=r(arguments[s++]),c<n?(i=c/n,o=o*i*i+1,c=n):n>0?(i=n/c,o+=i*i):o+=n;return c===1/0?1/0:c*Math.sqrt(o)}})},function(t,e,n){var i=n(11),r=Math.imul;i(i.S+i.F*n(10)(function(){return r(4294967295,5)!=-5||2!=r.length}),"Math",{imul:function(t,e){var n=65535,i=+t,r=+e,o=n&i,s=n&r;return 0|o*s+((n&i>>>16)*s+o*(n&r>>>16)<<16>>>0)}})},function(t,e,n){var i=n(11);i(i.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){var i=n(11);i(i.S,"Math",{log1p:n(107)})},function(t,e,n){var i=n(11);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(11);i(i.S,"Math",{sign:n(111)})},function(t,e,n){var i=n(11),r=n(115),o=Math.exp;i(i.S+i.F*n(10)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(11),r=n(115),o=Math.exp;i(i.S,"Math",{tanh:function(t){var e=r(t=+t),n=r(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var i=n(11);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var i=n(11),r=n(42),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,s=0;i>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var i=n(11),r=n(35),o=n(40);i(i.S,"String",{raw:function(t){for(var e=r(t.raw),n=o(e.length),i=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),a<i&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,n){"use strict";n(86)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(130)(!0);n(131)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(41),r=n(38);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),c=i(n),l=a.length;return c<0||c>=l?t?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):o:t?a.slice(c,c+2):(o-55296<<10)+(s-56320)+65536)}}},function(t,e,n){"use strict";var i=n(31),r=n(11),o=n(21),s=n(13),a=n(8),c=n(132),l=n(133),u=n(27),h=n(62),f=n(28)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",g="keys",m="values",v=function(){return this};t.exports=function(t,e,n,y,w,b,x){l(n,e,y);var A,E,_,S=function(t){if(!d&&t in F)return F[t];switch(t){case g:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},C=e+" Iterator",M=w==m,$=!1,F=t.prototype,T=F[f]||F[p]||w&&F[w],L=T||S(w),k=w?M?S("entries"):L:void 0,R="Array"==e?F.entries||T:T;if(R&&(_=h(R.call(new t)),_!==Object.prototype&&(u(_,C,!0),i||a(_,f)||s(_,f,v))),M&&T&&T.name!==m&&($=!0,L=function(){return T.call(this)}),i&&!x||!d&&!$&&F[f]||s(F,f,L),c[e]=L,c[C]=v,w)if(A={values:M?L:S(m),keys:b?L:S(g),entries:k},x)for(E in A)E in F||o(F,E,A[E]);else r(r.P+r.F*(d||$),e,A);return A}},function(t,e){t.exports={}},function(t,e,n){"use strict";var i=n(49),r=n(20),o=n(27),s={};n(13)(s,n(28)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var i=n(11),r=n(130)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(11),r=n(40),o=n(136),s="endsWith",a=""[s];i(i.P+i.F*n(138)(s),"String",{endsWith:function(t){var e=o(this,t,s),n=arguments.length>1?arguments[1]:void 0,i=r(e.length),c=void 0===n?i:Math.min(r(n),i),l=String(t);return a?a.call(e,l,c):e.slice(c-l.length,c)===l}})},function(t,e,n){var i=n(137),r=n(38);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){var i=n(16),r=n(37),o=n(28)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(28)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(r){}}return!0}},function(t,e,n){"use strict";var i=n(11),r=n(136),o="includes";i(i.P+i.F*n(138)(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(11);i(i.P,"String",{repeat:n(94)})},function(t,e,n){"use strict";var i=n(11),r=n(40),o=n(136),s="startsWith",a=""[s];i(i.P+i.F*n(138)(s),"String",{startsWith:function(t){var e=o(this,t,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(143)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){var i=n(11),r=n(10),o=n(38),s=/"/g,a=function(t,e,n,i){var r=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),i(i.P+i.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";n(143)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(143)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(143)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(143)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(143)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(143)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(143)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(143)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(143)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(143)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(143)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(143)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var i=n(11);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var i=n(11),r=n(61),o=n(19);i(i.P+i.F*n(10)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=r(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){"use strict";var i=n(11),r=n(10),o=Date.prototype.getTime,s=function(t){return t>9?t:"0"+t};i(i.P+i.F*(r(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";
return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}})},function(t,e,n){var i=Date.prototype,r="Invalid Date",o="toString",s=i[o],a=i.getTime;new Date(NaN)+""!=r&&n(21)(i,o,function(){var t=a.call(this);return t===t?s.call(this):r})},function(t,e,n){var i=n(28)("toPrimitive"),r=Date.prototype;i in r||n(13)(r,i,n(161))},function(t,e,n){"use strict";var i=n(15),r=n(19),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return r(i(this),t!=o)}},function(t,e,n){var i=n(11);i(i.S,"Array",{isArray:n(48)})},function(t,e,n){"use strict";var i=n(23),r=n(11),o=n(61),s=n(164),a=n(165),c=n(40),l=n(166),u=n(167);r(r.S+r.F*!n(168)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,h,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=u(f);if(m&&(g=i(g,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&a(y))for(e=c(f.length),n=new d(e);e>v;v++)l(n,v,m?g(f[v],v):f[v]);else for(h=y.call(f),n=new d;!(r=h.next()).done;v++)l(n,v,m?s(h,g,[r.value,v],!0):r.value);return n.length=v,n}})},function(t,e,n){var i=n(15);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(o){var s=t["return"];throw void 0!==s&&i(s.call(t)),o}}},function(t,e,n){var i=n(132),r=n(28)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){"use strict";var i=n(14),r=n(20);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(78),r=n(28)("iterator"),o=n(132);t.exports=n(12).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(28)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(a){}return n}},function(t,e,n){"use strict";var i=n(11),r=n(166);i(i.S+i.F*n(10)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)r(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(11),r=n(35),o=[].join;i(i.P+i.F*(n(36)!=Object||!n(171)(o)),"Array",{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,n){var i=n(10);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";var i=n(11),r=n(51),o=n(37),s=n(42),a=n(40),c=[].slice;i(i.P+i.F*n(10)(function(){r&&c.call(r)}),"Array",{slice:function(t,e){var n=a(this.length),i=o(this);if(e=void 0===e?n:e,"Array"==i)return c.call(this,t,e);for(var r=s(t,n),l=s(e,n),u=a(l-r),h=Array(u),f=0;f<u;f++)h[f]="String"==i?this.charAt(r+f):this[r+f];return h}})},function(t,e,n){"use strict";var i=n(11),r=n(24),o=n(61),s=n(10),a=[].sort,c=[1,2,3];i(i.P+i.F*(s(function(){c.sort(void 0)})||!s(function(){c.sort(null)})||!n(171)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),r(t))}})},function(t,e,n){"use strict";var i=n(11),r=n(175)(0),o=n(171)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,n){var i=n(23),r=n(36),o=n(61),s=n(40),a=n(176);t.exports=function(t,e){var n=1==t,c=2==t,l=3==t,u=4==t,h=6==t,f=5==t||h,d=e||a;return function(e,a,p){for(var g,m,v=o(e),y=r(v),w=i(a,p,3),b=s(y.length),x=0,A=n?d(e,b):c?d(e,0):void 0;b>x;x++)if((f||x in y)&&(g=y[x],m=w(g,x,v),t))if(n)A[x]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:A.push(g)}else if(u)return!1;return h?-1:l||u?u:A}}},function(t,e,n){var i=n(177);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(16),r=n(48),o=n(28)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(11),r=n(175)(1);i(i.P+i.F*!n(171)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(11),r=n(175)(2);i(i.P+i.F*!n(171)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(11),r=n(175)(3);i(i.P+i.F*!n(171)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(11),r=n(175)(4);i(i.P+i.F*!n(171)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(11),r=n(183);i(i.P+i.F*!n(171)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){var i=n(24),r=n(61),o=n(36),s=n(40);t.exports=function(t,e,n,a,c){i(e);var l=r(t),u=o(l),h=s(l.length),f=c?h-1:0,d=c?-1:1;if(n<2)for(;;){if(f in u){a=u[f],f+=d;break}if(f+=d,c?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;c?f>=0:h>f;f+=d)f in u&&(a=e(a,u[f],f,l));return a}},function(t,e,n){"use strict";var i=n(11),r=n(183);i(i.P+i.F*!n(171)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(11),r=n(39)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n(171)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(11),r=n(35),o=n(41),s=n(40),a=[].lastIndexOf,c=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(c||!n(171)(a)),"Array",{lastIndexOf:function(t){if(c)return a.apply(this,arguments)||0;var e=r(this),n=s(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){var i=n(11);i(i.P,"Array",{copyWithin:n(188)}),n(189)("copyWithin")},function(t,e,n){"use strict";var i=n(61),r=n(42),o=n(40);t.exports=[].copyWithin||function(t,e){var n=i(this),s=o(n.length),a=r(t,s),c=r(e,s),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?s:r(l,s))-c,s-a),h=1;for(c<a&&a<c+u&&(h=-1,c+=u-1,a+=u-1);u-- >0;)c in n?n[a]=n[c]:delete n[a],a+=h,c+=h;return n}},function(t,e,n){var i=n(28)("unscopables"),r=Array.prototype;void 0==r[i]&&n(13)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){var i=n(11);i(i.P,"Array",{fill:n(191)}),n(189)("fill")},function(t,e,n){"use strict";var i=n(61),r=n(42),o=n(40);t.exports=function(t){for(var e=i(this),n=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,l=void 0===c?n:r(c,n);l>a;)e[a++]=t;return e}},function(t,e,n){"use strict";var i=n(11),r=n(175)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(189)(o)},function(t,e,n){"use strict";var i=n(11),r=n(175)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(189)(o)},function(t,e,n){n(195)("Array")},function(t,e,n){"use strict";var i=n(7),r=n(14),o=n(9),s=n(28)("species");t.exports=function(t){var e=i[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(189),r=n(197),o=n(132),s=n(35);t.exports=n(131)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(7),r=n(91),o=n(14).f,s=n(53).f,a=n(137),c=n(199),l=i.RegExp,u=l,h=l.prototype,f=/a/g,d=/a/g,p=new l(f)!==f;if(n(9)&&(!p||n(10)(function(){return d[n(28)("match")]=!1,l(f)!=f||l(d)==d||"/a/i"!=l(f,"i")}))){l=function(t,e){var n=this instanceof l,i=a(t),o=void 0===e;return!n&&i&&t.constructor===l&&o?t:r(p?new u(i&&!o?t.source:t,e):u((i=t instanceof l)?t.source:t,i&&o?c.call(t):e),n?this:h,l)};for(var g=(function(t){t in l||o(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})}),m=s(u),v=0;m.length>v;)g(m[v++]);h.constructor=l,l.prototype=h,n(21)(i,"RegExp",l)}n(195)("RegExp")},function(t,e,n){"use strict";var i=n(15);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";n(201);var i=n(15),r=n(199),o=n(9),s="toString",a=/./[s],c=function(t){n(21)(RegExp.prototype,s,t,!0)};n(10)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?c(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)}):a.name!=s&&c(function(){return a.call(this)})},function(t,e,n){n(9)&&"g"!=/./g.flags&&n(14).f(RegExp.prototype,"flags",{configurable:!0,get:n(199)})},function(t,e,n){n(203)("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){"use strict";var i=n(13),r=n(21),o=n(10),s=n(38),a=n(28);t.exports=function(t,e,n){var c=a(t),l=n(s,c,""[t]),u=l[0],h=l[1];o(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,u),i(RegExp.prototype,c,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,n){n(203)("replace",2,function(t,e,n){return[function(i,r){"use strict";var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},function(t,e,n){n(203)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(203)("split",2,function(t,e,i){"use strict";var r=n(137),o=i,s=[].push,a="split",c="length",l="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[c]||2!="ab"[a](/(?:ab)*/)[c]||4!="."[a](/(.?)(.?)/)[c]||"."[a](/()()/)[c]>1||""[a](/.?/)[c]){var u=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(n,t,e);var i,a,h,f,d,p=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,v=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,g+"g");for(u||(i=new RegExp("^"+y.source+"$(?!\\s)",g));(a=y.exec(n))&&(h=a.index+a[0][c],!(h>m&&(p.push(n.slice(m,a.index)),!u&&a[c]>1&&a[0].replace(i,function(){for(d=1;d<arguments[c]-2;d++)void 0===arguments[d]&&(a[d]=void 0)}),a[c]>1&&a.index<n[c]&&s.apply(p,a.slice(1)),f=a[0][c],m=h,p[c]>=v)));)y[l]===a.index&&y[l]++;return m===n[c]?!f&&y.test("")||p.push(""):p.push(n.slice(m)),p[c]>v?p.slice(0,v):p}}else"0"[a](void 0,0)[c]&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,r){var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},i]})},function(t,e,n){"use strict";var i,r,o,s=n(31),a=n(7),c=n(23),l=n(78),u=n(11),h=n(16),f=n(24),d=n(208),p=n(209),g=n(210),m=n(211).set,v=n(212)(),y="Promise",w=a.TypeError,b=a.process,x=a[y],b=a.process,A="process"==l(b),E=function(){},_=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[n(28)("species")]=function(t){t(E,E)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e}catch(i){}}(),S=function(t,e){return t===e||t===x&&e===o},C=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},M=function(t){return S(x,t)?new $(t):new r(t)},$=r=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw w("Bad Promise constructor");e=t,n=i}),this.resolve=f(e),this.reject=f(n)},F=function(t){try{t()}catch(e){return{error:e}}},T=function(t,e){if(!t._n){t._n=!0;var n=t._c;v(function(){for(var i=t._v,r=1==t._s,o=0,s=function(e){var n,o,s=r?e.ok:e.fail,a=e.resolve,c=e.reject,l=e.domain;try{s?(r||(2==t._h&&R(t),t._h=1),s===!0?n=i:(l&&l.enter(),n=s(i),l&&l.exit()),n===e.promise?c(w("Promise-chain cycle")):(o=C(n))?o.call(n,a,c):a(n)):c(i)}catch(u){c(u)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&L(t)})}},L=function(t){m.call(a,function(){var e,n,i,r=t._v;if(k(t)&&(e=F(function(){A?b.emit("unhandledRejection",r,t):(n=a.onunhandledrejection)?n({promise:t,reason:r}):(i=a.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=A||k(t)?2:1),t._a=void 0,e)throw e.error})},k=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!k(e.promise))return!1;return!0},R=function(t){m.call(a,function(){var e;A?b.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),T(e,!0))},B=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=C(t))?v(function(){var i={_w:n,_d:!1};try{e.call(t,c(B,i,1),c(D,i,1))}catch(r){D.call(i,r)}}):(n._v=t,n._s=1,T(n,!1))}catch(i){D.call({_w:n,_d:!1},i)}}};_||(x=function(t){d(this,x,y,"_h"),f(t),i.call(this);try{t(c(B,this,1),c(D,this,1))}catch(e){D.call(this,e)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(213)(x.prototype,{then:function(t,e){var n=M(g(this,x));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=A?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&T(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),$=function(){var t=new i;this.promise=t,this.resolve=c(B,t,1),this.reject=c(D,t,1)}),u(u.G+u.W+u.F*!_,{Promise:x}),n(27)(x,y),n(195)(y),o=n(12)[y],u(u.S+u.F*!_,y,{reject:function(t){var e=M(this),n=e.reject;return n(t),e.promise}}),u(u.S+u.F*(s||!_),y,{resolve:function(t){if(t instanceof x&&S(t.constructor,this))return t;var e=M(this),n=e.resolve;return n(t),e.promise}}),u(u.S+u.F*!(_&&n(168)(function(t){x.all(t)["catch"](E)})),y,{all:function(t){var e=this,n=M(e),i=n.resolve,r=n.reject,o=F(function(){var n=[],o=0,s=1;p(t,!1,function(t){var a=o++,c=!1;n.push(void 0),s++,e.resolve(t).then(function(t){c||(c=!0,n[a]=t,--s||i(n))},r)}),--s||i(n)});return o&&r(o.error),n.promise},race:function(t){var e=this,n=M(e),i=n.reject,r=F(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(23),r=n(164),o=n(165),s=n(15),a=n(40),c=n(167),l={},u={},e=t.exports=function(t,e,n,h,f){var d,p,g,m,v=f?function(){return t}:c(t),y=i(n,h,e?2:1),w=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(d=a(t.length);d>w;w++)if(m=e?y(s(p=t[w])[0],p[1]):y(t[w]),m===l||m===u)return m}else for(g=v.call(t);!(p=g.next()).done;)if(m=r(g,y,p.value,e),m===l||m===u)return m};e.BREAK=l,e.RETURN=u},function(t,e,n){var i=n(15),r=n(24),o=n(28)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}},function(t,e,n){var i,r,o,s=n(23),a=n(81),c=n(51),l=n(18),u=n(7),h=u.process,f=u.setImmediate,d=u.clearImmediate,p=u.MessageChannel,g=0,m={},v="onreadystatechange",y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},w=function(t){y.call(t.data)};f&&d||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){a("function"==typeof t?t:Function(t),e)},i(g),g},d=function(t){delete m[t]},"process"==n(37)(h)?i=function(t){h.nextTick(s(y,t,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=w,i=s(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",w,!1)):i=v in l("script")?function(t){c.appendChild(l("script"))[v]=function(){c.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:f,clear:d}},function(t,e,n){var i=n(7),r=n(211).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,c="process"==n(37)(s);t.exports=function(){var t,e,n,l=function(){var i,r;for(c&&(i=s.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(o){throw t?n():e=void 0,o}}e=void 0,i&&i.enter()};if(c)n=function(){s.nextTick(l)};else if(o){var u=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=u=!u}}else if(a&&a.resolve){var f=a.resolve();n=function(){f.then(l)}}else n=function(){r.call(i,l)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(21);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){"use strict";var i=n(215);t.exports=n(216)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(this,t);return e&&e.v},set:function(t,e){return i.def(this,0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(14).f,r=n(49),o=n(213),s=n(23),a=n(208),c=n(38),l=n(209),u=n(131),h=n(197),f=n(195),d=n(9),p=n(25).fastKey,g=d?"_s":"size",m=function(t,e){var n,i=p(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var h=t(function(t,i){a(t,h,e,"_i"),t._i=r(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=i&&l(i,n,t[u],t)});return o(h.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[g]=0},"delete":function(t){var e=this,n=m(e,t);if(n){var i=n.n,r=n.p;delete e._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),e._f==n&&(e._f=i),e._l==n&&(e._l=r),e[g]--}return!!n},forEach:function(t){a(this,h,"forEach");for(var e,n=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(this,t)}}),d&&i(h.prototype,"size",{get:function(){return c(this[g])}}),h},def:function(t,e,n){var i,r,o=m(t,e);return o?o.v=n:(t._l=o={i:r=p(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[g]++,"F"!==r&&(t._i[r]=o)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?h(0,n.k):"values"==e?h(0,n.v):h(0,[n.k,n.v]):(t._t=void 0,h(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var i=n(7),r=n(11),o=n(21),s=n(213),a=n(25),c=n(209),l=n(208),u=n(16),h=n(10),f=n(168),d=n(27),p=n(91);t.exports=function(t,e,n,g,m,v){var y=i[t],w=y,b=m?"set":"add",x=w&&w.prototype,A={},E=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof w&&(v||x.forEach&&!h(function(){(new w).entries().next()}))){var _=new w,S=_[b](v?{}:-0,1)!=_,C=h(function(){_.has(1)}),M=f(function(t){new w(t)}),$=!v&&h(function(){for(var t=new w,e=5;e--;)t[b](e,e);return!t.has(-0)});M||(w=e(function(e,n){l(e,w,t);var i=p(new y,e,w);return void 0!=n&&c(n,m,i[b],i),i}),w.prototype=x,x.constructor=w),(C||$)&&(E("delete"),E("has"),m&&E("get")),($||S)&&E(b),v&&x.clear&&delete x.clear}else w=g.getConstructor(e,t,m,b),s(w.prototype,n),a.NEED=!0;return d(w,t),A[t]=w,r(r.G+r.W+r.F*(w!=y),A),v||g.setStrong(w,t,m),w}},function(t,e,n){"use strict";var i=n(215);t.exports=n(216)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i,r=n(175)(0),o=n(21),s=n(25),a=n(72),c=n(219),l=n(16),u=s.getWeak,h=Object.isExtensible,f=c.ufstore,d={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(l(t)){var e=u(t);return e===!0?f(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(this,t,e)}},m=t.exports=n(216)("WeakMap",p,g,c,!0,!0);7!=(new m).set((Object.freeze||Object)(d),7).get(d)&&(i=c.getConstructor(p),a(i.prototype,g),s.NEED=!0,r(["delete","has","get","set"],function(t){var e=m.prototype,n=e[t];o(e,t,function(e,r){if(l(e)&&!h(e)){this._f||(this._f=new i);var o=this._f[t](e,r);return"set"==t?this:o}return n.call(this,e,r)})}))},function(t,e,n){"use strict";var i=n(213),r=n(25).getWeak,o=n(15),s=n(16),a=n(208),c=n(209),l=n(175),u=n(8),h=l(5),f=l(6),d=0,p=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},m=function(t,e){return h(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=f(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var l=t(function(t,i){a(t,l,e,"_i"),t._i=d++,t._l=void 0,void 0!=i&&c(i,n,t[o],t)});return i(l.prototype,{"delete":function(t){if(!s(t))return!1;var e=r(t);return e===!0?p(this)["delete"](t):e&&u(e,this._i)&&delete e[this._i]},has:function(t){if(!s(t))return!1;var e=r(t);return e===!0?p(this).has(t):e&&u(e,this._i)}}),l},def:function(t,e,n){var i=r(o(e),!0);return i===!0?p(t).set(e,n):i[t._i]=n,t},ufstore:p}},function(t,e,n){"use strict";var i=n(219);n(216)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(11),r=n(222),o=n(223),s=n(15),a=n(42),c=n(40),l=n(16),u=n(7).ArrayBuffer,h=n(210),f=o.ArrayBuffer,d=o.DataView,p=r.ABV&&u.isView,g=f.prototype.slice,m=r.VIEW,v="ArrayBuffer";i(i.G+i.W+i.F*(u!==f),{ArrayBuffer:f}),i(i.S+i.F*!r.CONSTR,v,{isView:function(t){return p&&p(t)||l(t)&&m in t}}),i(i.P+i.U+i.F*n(10)(function(){return!new f(2).slice(1,void 0).byteLength}),v,{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(s(this),t);for(var n=s(this).byteLength,i=a(t,n),r=a(void 0===e?n:e,n),o=new(h(this,f))(c(r-i)),l=new d(this),u=new d(o),p=0;i<r;)u.setUint8(p++,l.getUint8(i++));return o}}),n(195)(v)},function(t,e,n){for(var i,r=n(7),o=n(13),s=n(22),a=s("typed_array"),c=s("view"),l=!(!r.ArrayBuffer||!r.DataView),u=l,h=0,f=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<f;)(i=r[d[h++]])?(o(i.prototype,a,!0),o(i.prototype,c,!0)):u=!1;t.exports={ABV:l,CONSTR:u,TYPED:a,VIEW:c}},function(t,e,n){"use strict";var i=n(7),r=n(9),o=n(31),s=n(222),a=n(13),c=n(213),l=n(10),u=n(208),h=n(41),f=n(40),d=n(53).f,p=n(14).f,g=n(191),m=n(27),v="ArrayBuffer",y="DataView",w="prototype",b="Wrong length!",x="Wrong index!",A=i[v],E=i[y],_=i.Math,S=i.RangeError,C=i.Infinity,M=A,$=_.abs,F=_.pow,T=_.floor,L=_.log,k=_.LN2,R="buffer",D="byteLength",B="byteOffset",P=r?"_b":R,O=r?"_l":D,I=r?"_o":B,N=function(t,e,n){var i,r,o,s=Array(n),a=8*n-e-1,c=(1<<a)-1,l=c>>1,u=23===e?F(2,-24)-F(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for(t=$(t),t!=t||t===C?(r=t!=t?1:0,i=c):(i=T(L(t)/k),t*(o=F(2,-i))<1&&(i--,o*=2),t+=i+l>=1?u/o:u*F(2,1-l),t*o>=2&&(i++,o/=2),i+l>=c?(r=0,i=c):i+l>=1?(r=(t*o-1)*F(2,e),i+=l):(r=t*F(2,l-1)*F(2,e),i=0));e>=8;s[h++]=255&r,r/=256,e-=8);for(i=i<<e|r,a+=e;a>0;s[h++]=255&i,i/=256,a-=8);return s[--h]|=128*f,s},U=function(t,e,n){var i,r=8*n-e-1,o=(1<<r)-1,s=o>>1,a=r-7,c=n-1,l=t[c--],u=127&l;for(l>>=7;a>0;u=256*u+t[c],c--,a-=8);for(i=u&(1<<-a)-1,u>>=-a,a+=e;a>0;i=256*i+t[c],c--,a-=8);if(0===u)u=1-s;else{if(u===o)return i?NaN:l?-C:C;i+=F(2,e),u-=s}return(l?-1:1)*i*F(2,u-e)},j=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},z=function(t){return[255&t]},H=function(t){return[255&t,t>>8&255]},W=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},V=function(t){return N(t,52,8)},G=function(t){return N(t,23,4)},q=function(t,e,n){p(t[w],e,{get:function(){return this[n]}})},X=function(t,e,n,i){var r=+n,o=h(r);if(r!=o||o<0||o+e>t[O])throw S(x);var s=t[P]._b,a=o+t[I],c=s.slice(a,a+e);return i?c:c.reverse()},Y=function(t,e,n,i,r,o){var s=+n,a=h(s);if(s!=a||a<0||a+e>t[O])throw S(x);for(var c=t[P]._b,l=a+t[I],u=i(+r),f=0;f<e;f++)c[l+f]=u[o?f:e-f-1]},K=function(t,e){u(t,A,v);var n=+e,i=f(n);if(n!=i)throw S(b);return i};if(s.ABV){if(!l(function(){new A})||!l(function(){new A(.5)})){A=function(t){return new M(K(this,t))};for(var Z,Q=A[w]=M[w],J=d(M),tt=0;J.length>tt;)(Z=J[tt++])in A||a(A,Z,M[Z]);o||(Q.constructor=A)}var et=new E(new A(2)),nt=E[w].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||c(E[w],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else A=function(t){var e=K(this,t);this._b=g.call(Array(e),0),this[O]=e},E=function(t,e,n){u(this,E,y),u(t,A,y);var i=t[O],r=h(e);if(r<0||r>i)throw S("Wrong offset!");if(n=void 0===n?i-r:f(n),r+n>i)throw S(b);this[P]=t,this[I]=r,this[O]=n},r&&(q(A,D,"_l"),q(E,R,"_b"),q(E,D,"_l"),q(E,B,"_o")),c(E[w],{getInt8:function(t){return X(this,1,t)[0]<<24>>24},getUint8:function(t){return X(this,1,t)[0]},getInt16:function(t){var e=X(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=X(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return j(X(this,4,t,arguments[1]))},getUint32:function(t){return j(X(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return U(X(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return U(X(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){Y(this,1,t,z,e)},setUint8:function(t,e){Y(this,1,t,z,e)},setInt16:function(t,e){Y(this,2,t,H,e,arguments[2])},setUint16:function(t,e){Y(this,2,t,H,e,arguments[2])},setInt32:function(t,e){Y(this,4,t,W,e,arguments[2])},setUint32:function(t,e){Y(this,4,t,W,e,arguments[2])},setFloat32:function(t,e){Y(this,4,t,G,e,arguments[2])},setFloat64:function(t,e){Y(this,8,t,V,e,arguments[2])}});m(A,v),m(E,y),a(E[w],s.VIEW,!0),e[v]=A,e[y]=E},function(t,e,n){var i=n(11);i(i.G+i.W+i.F*!n(222).ABV,{DataView:n(223).DataView})},function(t,e,n){n(226)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){"use strict";if(n(9)){var i=n(31),r=n(7),o=n(10),s=n(11),a=n(222),c=n(223),l=n(23),u=n(208),h=n(20),f=n(13),d=n(213),p=n(41),g=n(40),m=n(42),v=n(19),y=n(8),w=n(74),b=n(78),x=n(16),A=n(61),E=n(165),_=n(49),S=n(62),C=n(53).f,M=n(167),$=n(22),F=n(28),T=n(175),L=n(39),k=n(210),R=n(196),D=n(132),B=n(168),P=n(195),O=n(191),I=n(188),N=n(14),U=n(54),j=N.f,z=U.f,H=r.RangeError,W=r.TypeError,V=r.Uint8Array,G="ArrayBuffer",q="Shared"+G,X="BYTES_PER_ELEMENT",Y="prototype",K=Array[Y],Z=c.ArrayBuffer,Q=c.DataView,J=T(0),tt=T(2),et=T(3),nt=T(4),it=T(5),rt=T(6),ot=L(!0),st=L(!1),at=R.values,ct=R.keys,lt=R.entries,ut=K.lastIndexOf,ht=K.reduce,ft=K.reduceRight,dt=K.join,pt=K.sort,gt=K.slice,mt=K.toString,vt=K.toLocaleString,yt=F("iterator"),wt=F("toStringTag"),bt=$("typed_constructor"),xt=$("def_constructor"),At=a.CONSTR,Et=a.TYPED,_t=a.VIEW,St="Wrong length!",Ct=T(1,function(t,e){return kt(k(t,t[xt]),e)}),Mt=o(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),$t=!!V&&!!V[Y].set&&o(function(){new V(1).set({})}),Ft=function(t,e){if(void 0===t)throw W(St);var n=+t,i=g(t);if(e&&!w(n,i))throw H(St);return i},Tt=function(t,e){var n=p(t);if(n<0||n%e)throw H("Wrong offset!");return n},Lt=function(t){if(x(t)&&Et in t)return t;throw W(t+" is not a typed array!")},kt=function(t,e){if(!(x(t)&&bt in t))throw W("It is not a typed array constructor!");return new t(e)},Rt=function(t,e){return Dt(k(t,t[xt]),e)},Dt=function(t,e){for(var n=0,i=e.length,r=kt(t,i);i>n;)r[n]=e[n++];return r},Bt=function(t,e,n){j(t,e,{get:function(){return this._d[n]}})},Pt=function(t){var e,n,i,r,o,s,a=A(t),c=arguments.length,u=c>1?arguments[1]:void 0,h=void 0!==u,f=M(a);if(void 0!=f&&!E(f)){for(s=f.call(a),i=[],e=0;!(o=s.next()).done;e++)i.push(o.value);a=i}for(h&&c>2&&(u=l(u,arguments[2],2)),e=0,n=g(a.length),r=kt(this,n);n>e;e++)r[e]=h?u(a[e],e):a[e];return r},Ot=function(){for(var t=0,e=arguments.length,n=kt(this,e);e>t;)n[t]=arguments[t++];return n},It=!!V&&o(function(){vt.call(new V(1))}),Nt=function(){return vt.apply(It?gt.call(Lt(this)):Lt(this),arguments)},Ut={copyWithin:function(t,e){return I.call(Lt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return O.apply(Lt(this),arguments)},filter:function(t){return Rt(this,tt(Lt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Lt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return rt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){J(Lt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Lt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Lt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return dt.apply(Lt(this),arguments)},lastIndexOf:function(t){return ut.apply(Lt(this),arguments)},map:function(t){return Ct(Lt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ht.apply(Lt(this),arguments)},reduceRight:function(t){return ft.apply(Lt(this),arguments)},reverse:function(){for(var t,e=this,n=Lt(e).length,i=Math.floor(n/2),r=0;r<i;)t=e[r],e[r++]=e[--n],e[n]=t;return e},some:function(t){return et(Lt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Lt(this),t)},subarray:function(t,e){var n=Lt(this),i=n.length,r=m(t,i);return new(k(n,n[xt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,g((void 0===e?i:m(e,i))-r))}},jt=function(t,e){return Rt(this,gt.call(Lt(this),t,e))},zt=function(t){Lt(this);var e=Tt(arguments[1],1),n=this.length,i=A(t),r=g(i.length),o=0;if(r+e>n)throw H(St);for(;o<r;)this[e+o]=i[o++]},Ht={entries:function(){return lt.call(Lt(this))},keys:function(){return ct.call(Lt(this))},values:function(){return at.call(Lt(this))}},Wt=function(t,e){return x(t)&&t[Et]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Vt=function(t,e){return Wt(t,e=v(e,!0))?h(2,t[e]):z(t,e)},Gt=function(t,e,n){return!(Wt(t,e=v(e,!0))&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?j(t,e,n):(t[e]=n.value,t)};At||(U.f=Vt,N.f=Gt),s(s.S+s.F*!At,"Object",{getOwnPropertyDescriptor:Vt,defineProperty:Gt}),o(function(){mt.call({})})&&(mt=vt=function(){return dt.call(this)});var qt=d({},Ut);d(qt,Ht),f(qt,yt,Ht.values),d(qt,{slice:jt,set:zt,constructor:function(){},toString:mt,toLocaleString:Nt}),Bt(qt,"buffer","b"),Bt(qt,"byteOffset","o"),Bt(qt,"byteLength","l"),Bt(qt,"length","e"),j(qt,wt,{get:function(){return this[Et]}}),t.exports=function(t,e,n,c){c=!!c;var l=t+(c?"Clamped":"")+"Array",h="Uint8Array"!=l,d="get"+t,p="set"+t,m=r[l],v=m||{},y=m&&S(m),w=!m||!a.ABV,A={},E=m&&m[Y],M=function(t,n){var i=t._d;return i.v[d](n*e+i.o,Mt)},$=function(t,n,i){var r=t._d;c&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*e+r.o,i,Mt)},F=function(t,e){j(t,e,{get:function(){return M(this,e)},set:function(t){return $(this,e,t)},enumerable:!0})};w?(m=n(function(t,n,i,r){u(t,m,l,"_d");var o,s,a,c,h=0,d=0;if(x(n)){if(!(n instanceof Z||(c=b(n))==G||c==q))return Et in n?Dt(m,n):Pt.call(m,n);o=n,d=Tt(i,e);var p=n.byteLength;if(void 0===r){if(p%e)throw H(St);if(s=p-d,s<0)throw H(St)}else if(s=g(r)*e,s+d>p)throw H(St);a=s/e}else a=Ft(n,!0),s=a*e,o=new Z(s);for(f(t,"_d",{b:o,o:d,l:s,e:a,v:new Q(o)});h<a;)F(t,h++)}),E=m[Y]=_(qt),f(E,"constructor",m)):B(function(t){new m(null),new m(t)},!0)||(m=n(function(t,n,i,r){u(t,m,l);var o;return x(n)?n instanceof Z||(o=b(n))==G||o==q?void 0!==r?new v(n,Tt(i,e),r):void 0!==i?new v(n,Tt(i,e)):new v(n):Et in n?Dt(m,n):Pt.call(m,n):new v(Ft(n,h));
}),J(y!==Function.prototype?C(v).concat(C(y)):C(v),function(t){t in m||f(m,t,v[t])}),m[Y]=E,i||(E.constructor=m));var T=E[yt],L=!!T&&("values"==T.name||void 0==T.name),k=Ht.values;f(m,bt,!0),f(E,Et,l),f(E,_t,!0),f(E,xt,m),(c?new m(1)[wt]==l:wt in E)||j(E,wt,{get:function(){return l}}),A[l]=m,s(s.G+s.W+s.F*(m!=v),A),s(s.S,l,{BYTES_PER_ELEMENT:e,from:Pt,of:Ot}),X in E||f(E,X,e),s(s.P,l,Ut),P(l),s(s.P+s.F*$t,l,{set:zt}),s(s.P+s.F*!L,l,Ht),s(s.P+s.F*(E.toString!=mt),l,{toString:mt}),s(s.P+s.F*o(function(){new m(1).slice()}),l,{slice:jt}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!o(function(){E.toLocaleString.call([1,2])})),l,{toLocaleString:Nt}),D[l]=L?T:k,i||L||f(E,yt,k)}}else t.exports=function(){}},function(t,e,n){n(226)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(226)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){n(226)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(226)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(226)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(226)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(226)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(226)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){var i=n(11),r=n(24),o=n(15),s=(n(7).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!n(10)(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var i=r(t),c=o(n);return s?s(i,e,c):a.call(i,e,c)}})},function(t,e,n){var i=n(11),r=n(49),o=n(24),s=n(15),a=n(16),c=n(10),l=n(80),u=(n(7).Reflect||{}).construct,h=c(function(){function t(){}return!(u(function(){},[],t)instanceof t)}),f=!c(function(){u(function(){})});i(i.S+i.F*(h||f),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return u(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(l.apply(t,i))}var c=n.prototype,d=r(a(c)?c:Object.prototype),p=Function.apply.call(t,d,e);return a(p)?p:d}})},function(t,e,n){var i=n(14),r=n(11),o=n(15),s=n(19);r(r.S+r.F*n(10)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=s(e,!0),o(n);try{return i.f(t,e,n),!0}catch(r){return!1}}})},function(t,e,n){var i=n(11),r=n(54).f,o=n(15);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=r(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(11),r=n(15),o=function(t){this._t=r(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(133)(o,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function i(t,e){var n,a,u=arguments.length<3?t:arguments[2];return l(t)===u?t[e]:(n=r.f(t,e))?s(n,"value")?n.value:void 0!==n.get?n.get.call(u):void 0:c(a=o(t))?i(a,e,u):void 0}var r=n(54),o=n(62),s=n(8),a=n(11),c=n(16),l=n(15);a(a.S,"Reflect",{get:i})},function(t,e,n){var i=n(54),r=n(11),o=n(15);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(o(t),e)}})},function(t,e,n){var i=n(11),r=n(62),o=n(15);i(i.S,"Reflect",{getPrototypeOf:function(t){return r(o(t))}})},function(t,e,n){var i=n(11);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(11),r=n(15),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return r(t),!o||o(t)}})},function(t,e,n){var i=n(11);i(i.S,"Reflect",{ownKeys:n(246)})},function(t,e,n){var i=n(53),r=n(46),o=n(15),s=n(7).Reflect;t.exports=s&&s.ownKeys||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(11),r=n(15),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){r(t);try{return o&&o(t),!0}catch(e){return!1}}})},function(t,e,n){function i(t,e,n){var c,f,d=arguments.length<4?t:arguments[3],p=o.f(u(t),e);if(!p){if(h(f=s(t)))return i(f,e,n,d);p=l(0)}return a(p,"value")?!(p.writable===!1||!h(d))&&(c=o.f(d,e)||l(0),c.value=n,r.f(d,e,c),!0):void 0!==p.set&&(p.set.call(d,n),!0)}var r=n(14),o=n(54),s=n(62),a=n(8),c=n(11),l=n(20),u=n(15),h=n(16);c(c.S,"Reflect",{set:i})},function(t,e,n){var i=n(11),r=n(76);r&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(n){return!1}}})},function(t,e,n){"use strict";var i=n(11),r=n(39)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(189)("includes")},function(t,e,n){"use strict";var i=n(11),r=n(130)(!0);i(i.P,"String",{at:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(11),r=n(253);i(i.P,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var i=n(40),r=n(94),o=n(38);t.exports=function(t,e,n,s){var a=String(o(t)),c=a.length,l=void 0===n?" ":String(n),u=i(e);if(u<=c||""==l)return a;var h=u-c,f=r.call(l,Math.ceil(h/l.length));return f.length>h&&(f=f.slice(0,h)),s?f+a:a+f}},function(t,e,n){"use strict";var i=n(11),r=n(253);i(i.P,"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(86)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(86)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var i=n(11),r=n(38),o=n(40),s=n(137),a=n(199),c=RegExp.prototype,l=function(t,e){this._r=t,this._s=e};n(133)(l,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),i(i.P,"String",{matchAll:function(t){if(r(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in c?String(t.flags):a.call(t),i=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=o(t.lastIndex),new l(i,e)}})},function(t,e,n){n(30)("asyncIterator")},function(t,e,n){n(30)("observable")},function(t,e,n){var i=n(11),r=n(246),o=n(35),s=n(54),a=n(166);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n=o(t),i=s.f,c=r(n),l={},u=0;c.length>u;)a(l,e=c[u++],i(n,e));return l}})},function(t,e,n){var i=n(11),r=n(262)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(33),r=n(35),o=n(47).f;t.exports=function(t){return function(e){for(var n,s=r(e),a=i(s),c=a.length,l=0,u=[];c>l;)o.call(s,n=a[l++])&&u.push(t?[n,s[n]]:s[n]);return u}}},function(t,e,n){var i=n(11),r=n(262)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(11),r=n(61),o=n(24),s=n(14);n(9)&&i(i.P+n(265),"Object",{__defineGetter__:function(t,e){s.f(r(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){t.exports=n(31)||!n(10)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(7)[t]})},function(t,e,n){"use strict";var i=n(11),r=n(61),o=n(24),s=n(14);n(9)&&i(i.P+n(265),"Object",{__defineSetter__:function(t,e){s.f(r(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var i=n(11),r=n(61),o=n(19),s=n(62),a=n(54).f;n(9)&&i(i.P+n(265),"Object",{__lookupGetter__:function(t){var e,n=r(this),i=o(t,!0);do if(e=a(n,i))return e.get;while(n=s(n))}})},function(t,e,n){"use strict";var i=n(11),r=n(61),o=n(19),s=n(62),a=n(54).f;n(9)&&i(i.P+n(265),"Object",{__lookupSetter__:function(t){var e,n=r(this),i=o(t,!0);do if(e=a(n,i))return e.set;while(n=s(n))}})},function(t,e,n){var i=n(11);i(i.P+i.R,"Map",{toJSON:n(270)("Map")})},function(t,e,n){var i=n(78),r=n(271);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(209);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(11);i(i.P+i.R,"Set",{toJSON:n(270)("Set")})},function(t,e,n){var i=n(11);i(i.S,"System",{global:n(7)})},function(t,e,n){var i=n(11),r=n(37);i(i.S,"Error",{isError:function(t){return"Error"===r(t)}})},function(t,e,n){var i=n(11);i(i.S,"Math",{iaddh:function(t,e,n,i){var r=t>>>0,o=e>>>0,s=n>>>0;return o+(i>>>0)+((r&s|(r|s)&~(r+s>>>0))>>>31)|0}})},function(t,e,n){var i=n(11);i(i.S,"Math",{isubh:function(t,e,n,i){var r=t>>>0,o=e>>>0,s=n>>>0;return o-(i>>>0)-((~r&s|~(r^s)&r-s>>>0)>>>31)|0}})},function(t,e,n){var i=n(11);i(i.S,"Math",{imulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,s=r&n,a=i>>16,c=r>>16,l=(a*s>>>0)+(o*s>>>16);return a*c+(l>>16)+((o*c>>>0)+(l&n)>>16)}})},function(t,e,n){var i=n(11);i(i.S,"Math",{umulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,s=r&n,a=i>>>16,c=r>>>16,l=(a*s>>>0)+(o*s>>>16);return a*c+(l>>>16)+((o*c>>>0)+(l&n)>>>16)}})},function(t,e,n){var i=n(280),r=n(15),o=i.key,s=i.set;i.exp({defineMetadata:function(t,e,n,i){s(t,e,r(n),o(i))}})},function(t,e,n){var i=n(214),r=n(11),o=n(26)("metadata"),s=o.store||(o.store=new(n(218))),a=function(t,e,n){var r=s.get(t);if(!r){if(!n)return;s.set(t,r=new i)}var o=r.get(e);if(!o){if(!n)return;r.set(e,o=new i)}return o},c=function(t,e,n){var i=a(e,n,!1);return void 0!==i&&i.has(t)},l=function(t,e,n){var i=a(e,n,!1);return void 0===i?void 0:i.get(t)},u=function(t,e,n,i){a(n,i,!0).set(t,e)},h=function(t,e){var n=a(t,e,!1),i=[];return n&&n.forEach(function(t,e){i.push(e)}),i},f=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},d=function(t){r(r.S,"Reflect",t)};t.exports={store:s,map:a,has:c,get:l,set:u,keys:h,key:f,exp:d}},function(t,e,n){var i=n(280),r=n(15),o=i.key,s=i.map,a=i.store;i.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),i=s(r(e),n,!1);if(void 0===i||!i["delete"](t))return!1;if(i.size)return!0;var c=a.get(e);return c["delete"](n),!!c.size||a["delete"](e)}})},function(t,e,n){var i=n(280),r=n(15),o=n(62),s=i.has,a=i.get,c=i.key,l=function(t,e,n){var i=s(t,e,n);if(i)return a(t,e,n);var r=o(e);return null!==r?l(t,r,n):void 0};i.exp({getMetadata:function(t,e){return l(t,r(e),arguments.length<3?void 0:c(arguments[2]))}})},function(t,e,n){var i=n(217),r=n(271),o=n(280),s=n(15),a=n(62),c=o.keys,l=o.key,u=function(t,e){var n=c(t,e),o=a(t);if(null===o)return n;var s=u(o,e);return s.length?n.length?r(new i(n.concat(s))):s:n};o.exp({getMetadataKeys:function(t){return u(s(t),arguments.length<2?void 0:l(arguments[1]))}})},function(t,e,n){var i=n(280),r=n(15),o=i.get,s=i.key;i.exp({getOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(280),r=n(15),o=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(t){return o(r(t),arguments.length<2?void 0:s(arguments[1]))}})},function(t,e,n){var i=n(280),r=n(15),o=n(62),s=i.has,a=i.key,c=function(t,e,n){var i=s(t,e,n);if(i)return!0;var r=o(e);return null!==r&&c(t,r,n)};i.exp({hasMetadata:function(t,e){return c(t,r(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var i=n(280),r=n(15),o=i.has,s=i.key;i.exp({hasOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(280),r=n(15),o=n(24),s=i.key,a=i.set;i.exp({metadata:function(t,e){return function(n,i){a(t,e,(void 0!==i?r:o)(n),s(i))}}})},function(t,e,n){var i=n(11),r=n(212)(),o=n(7).process,s="process"==n(37)(o);i(i.G,{asap:function(t){var e=s&&o.domain;r(e?e.bind(t):t)}})},function(t,e,n){"use strict";var i=n(11),r=n(7),o=n(12),s=n(212)(),a=n(28)("observable"),c=n(24),l=n(15),u=n(208),h=n(213),f=n(13),d=n(209),p=d.RETURN,g=function(t){return null==t?void 0:c(t)},m=function(t){var e=t._c;e&&(t._c=void 0,e())},v=function(t){return void 0===t._o},y=function(t){v(t)||(t._o=void 0,m(t))},w=function(t,e){l(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:c(n),this._c=n)}catch(r){return void t.error(r)}v(this)&&m(this)};w.prototype=h({},{unsubscribe:function(){y(this)}});var b=function(t){this._s=t};b.prototype=h({},{next:function(t){var e=this._s;if(!v(e)){var n=e._o;try{var i=g(n.next);if(i)return i.call(n,t)}catch(r){try{y(e)}finally{throw r}}}},error:function(t){var e=this._s;if(v(e))throw t;var n=e._o;e._o=void 0;try{var i=g(n.error);if(!i)throw t;t=i.call(n,t)}catch(r){try{m(e)}finally{throw r}}return m(e),t},complete:function(t){var e=this._s;if(!v(e)){var n=e._o;e._o=void 0;try{var i=g(n.complete);t=i?i.call(n,t):void 0}catch(r){try{m(e)}finally{throw r}}return m(e),t}}});var x=function(t){u(this,x,"Observable","_f")._f=c(t)};h(x.prototype,{subscribe:function(t){return new w(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||r.Promise)(function(n,i){c(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(n){i(n),r.unsubscribe()}},error:i,complete:n})})}}),h(x,{from:function(t){var e="function"==typeof this?this:x,n=g(l(t)[a]);if(n){var i=l(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return s(function(){if(!n){try{if(d(t,!1,function(t){if(e.next(t),n)return p})===p)return}catch(i){if(n)throw i;return void e.error(i)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return s(function(){if(!e){for(var i=0;i<n.length;++i)if(t.next(n[i]),e)return;t.complete()}}),function(){e=!0}})}}),f(x.prototype,a,function(){return this}),i(i.G,{Observable:x}),n(195)("Observable")},function(t,e,n){var i=n(7),r=n(11),o=n(81),s=n(292),a=i.navigator,c=!!a&&/MSIE .\./.test(a.userAgent),l=function(t){return c?function(e,n){return t(o(s,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};r(r.G+r.B+r.F*c,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(t,e,n){"use strict";var i=n(293),r=n(81),o=n(24);t.exports=function(){for(var t=o(this),e=arguments.length,n=Array(e),s=0,a=i._,c=!1;e>s;)(n[s]=arguments[s++])===a&&(c=!0);return function(){var i,o=this,s=arguments.length,l=0,u=0;if(!c&&!s)return r(t,n,o);if(i=n.slice(),c)for(;e>l;l++)i[l]===a&&(i[l]=arguments[u++]);for(;s>u;)i.push(arguments[u++]);return r(t,i,o)}}},function(t,e,n){t.exports=n(7)},function(t,e,n){var i=n(11),r=n(211);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){for(var i=n(196),r=n(21),o=n(7),s=n(13),a=n(132),c=n(28),l=c("iterator"),u=c("toStringTag"),h=a.Array,f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var p,g=f[d],m=o[g],v=m&&m.prototype;if(v){v[l]||s(v,l,h),v[u]||s(v,u,g),a[g]=h;for(p in i)v[p]||r(v,p,i[p],!0)}}},function(t,e,n){(function(e,n){!function(e){"use strict";function i(t,e,n,i){var r=Object.create((e||o).prototype),s=new p(i||[]);return r._invoke=h(t,n,s),r}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function o(){}function s(){}function a(){}function c(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){this.arg=t}function u(t){function e(e,n){var i=t[e](n),r=i.value;return r instanceof l?Promise.resolve(r.arg).then(o,s):Promise.resolve(r).then(function(t){return i.value=t,i})}function i(t,n){function i(){return e(t,n)}return r=r?r.then(i,i):new Promise(function(t){t(i())})}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var r,o=e.bind(t,"next"),s=e.bind(t,"throw");e.bind(t,"return");this._invoke=i}function h(t,e,n){var i=A;return function(o,s){if(i===_)throw new Error("Generator is already running");if(i===S){if("throw"===o)throw s;return m()}for(;;){var a=n.delegate;if(a){if("return"===o||"throw"===o&&a.iterator[o]===v){n.delegate=null;var c=a.iterator["return"];if(c){var l=r(c,a.iterator,s);if("throw"===l.type){o="throw",s=l.arg;continue}}if("return"===o)continue}var l=r(a.iterator[o],a.iterator,s);if("throw"===l.type){n.delegate=null,o="throw",s=l.arg;continue}o="next",s=v;var u=l.arg;if(!u.done)return i=E,u;n[a.resultName]=u.value,n.next=a.nextLoc,n.delegate=null}if("next"===o)n._sent=s,i===E?n.sent=s:n.sent=v;else if("throw"===o){if(i===A)throw i=S,s;n.dispatchException(s)&&(o="next",s=v)}else"return"===o&&n.abrupt("return",s);i=_;var l=r(t,e,n);if("normal"===l.type){i=n.done?S:E;var u={value:l.arg,done:n.done};if(l.arg!==C)return u;n.delegate&&"next"===o&&(s=v)}else"throw"===l.type&&(i=S,o="throw",s=l.arg)}}}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function g(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(y.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=v,r.done=!0,r};return i.next=i}}return{next:m}}function m(){return{value:v,done:!0}}var v,y=Object.prototype.hasOwnProperty,w="function"==typeof Symbol&&Symbol.iterator||"@@iterator",b="object"==typeof t,x=e.regeneratorRuntime;if(x)return void(b&&(t.exports=x));x=e.regeneratorRuntime=b?t.exports:{},x.wrap=i;var A="suspendedStart",E="suspendedYield",_="executing",S="completed",C={},M=a.prototype=o.prototype;s.prototype=M.constructor=a,a.constructor=s,s.displayName="GeneratorFunction",x.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},x.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a,t.prototype=Object.create(M),t},x.awrap=function(t){return new l(t)},c(u.prototype),x.async=function(t,e,n,r){var o=new u(i(t,e,n,r));return x.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},c(M),M[w]=function(){return this},M.toString=function(){return"[object Generator]"},x.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},x.values=g,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=y.call(r,"catchLoc"),a=y.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&y.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?this.next=r.finallyLoc:this.complete(o),C},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),C}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;d(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:g(t),resultName:e,nextLoc:n},C}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(297))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){g&&d&&(g=!1,d.length?p=d.concat(p):m=-1,p.length&&a())}function a(){if(!g){var t=r(s);g=!0;for(var e=p.length;e;){for(d=p,p=[];++m<e;)d&&d[m].run();m=-1,e=p.length}d=null,g=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var u,h,f=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var d,p=[],g=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new c(t,e)),1!==p.length||g||r(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){n(299),t.exports=n(12).RegExp.escape},function(t,e,n){var i=n(11),r=n(300)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(t){return r(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){"use strict";n(302)},function(t,e,n){"use strict";n(303);var i=n(308),r=n(310),o=n(561),s=n(571),a=n(580),c=n(614),l=n(660),u=n(661),h=i.module("simulator",[n(560),r,o,s,u,a,c]).config(l);t.exports=h},function(t,e){},,,,,function(t,e,n){n(309),t.exports=angular},function(t,e){/**
	 * @license AngularJS v1.5.5
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(t){"use strict";function e(t,e){return e=e||Error,function(){var n,i,r=2,o=arguments,s=o[0],a="["+(t?t+":":"")+s+"] ",c=o[1];for(a+=c.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1),n=e+r;return n<o.length?yt(o[n]):t}),a+="\nhttp://errors.angularjs.org/1.5.5/"+(t?t+"/":"")+s,i=r,n="?";i<o.length;i++,n="&")a+=n+"p"+(i-r)+"="+encodeURIComponent(yt(o[i]));return new e(a)}}function n(t){if(null==t||C(t))return!1;if(Gi(t)||x(t)||Bi&&t instanceof Bi)return!0;var e="length"in Object(t)&&t.length;return A(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function i(t,e,r){var o,s;if(t)if(_(t))for(o in t)"prototype"==o||"length"==o||"name"==o||t.hasOwnProperty&&!t.hasOwnProperty(o)||e.call(r,t[o],o,t);else if(Gi(t)||n(t)){var a="object"!=typeof t;for(o=0,s=t.length;o<s;o++)(a||o in t)&&e.call(r,t[o],o,t)}else if(t.forEach&&t.forEach!==i)t.forEach(e,r,t);else if(b(t))for(o in t)e.call(r,t[o],o,t);else if("function"==typeof t.hasOwnProperty)for(o in t)t.hasOwnProperty(o)&&e.call(r,t[o],o,t);else for(o in t)Fi.call(t,o)&&e.call(r,t[o],o,t);return t}function r(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function o(t){return function(e,n){t(n,e)}}function s(){return++Vi}function a(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function c(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var s=e[r];if(w(s)||_(s))for(var l=Object.keys(s),u=0,h=l.length;u<h;u++){var f=l[u],d=s[f];n&&w(d)?E(d)?t[f]=new Date(d.valueOf()):S(d)?t[f]=new RegExp(d):d.nodeName?t[f]=d.cloneNode(!0):B(d)?t[f]=d.clone():(w(t[f])||(t[f]=Gi(d)?[]:{}),c(t[f],[d],!0)):t[f]=d}}return a(t,i),t}function l(t){return c(t,Ii.call(arguments,1),!1)}function u(t){return c(t,Ii.call(arguments,1),!0)}function h(t){return parseInt(t,10)}function f(t,e){return l(Object.create(t),e)}function d(){}function p(t){return t}function g(t){return function(){return t}}function m(t){return _(t.toString)&&t.toString!==ji}function v(t){return"undefined"==typeof t}function y(t){return"undefined"!=typeof t}function w(t){return null!==t&&"object"==typeof t}function b(t){return null!==t&&"object"==typeof t&&!zi(t)}function x(t){return"string"==typeof t}function A(t){return"number"==typeof t}function E(t){return"[object Date]"===ji.call(t)}function _(t){return"function"==typeof t}function S(t){return"[object RegExp]"===ji.call(t)}function C(t){return t&&t.window===t}function M(t){return t&&t.$evalAsync&&t.$watch}function $(t){return"[object File]"===ji.call(t)}function F(t){return"[object FormData]"===ji.call(t)}function T(t){return"[object Blob]"===ji.call(t)}function L(t){return"boolean"==typeof t}function k(t){return t&&_(t.then)}function R(t){return t&&A(t.length)&&qi.test(ji.call(t))}function D(t){return"[object ArrayBuffer]"===ji.call(t)}function B(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function P(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}function O(t){return Ti(t.nodeName||t[0]&&t[0].nodeName)}function I(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function N(t,e){function n(t,e){var n,i=e.$$hashKey;if(Gi(t))for(var o=0,s=t.length;o<s;o++)e.push(r(t[o]));else if(b(t))for(n in t)e[n]=r(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=r(t[n]));else for(n in t)Fi.call(t,n)&&(e[n]=r(t[n]));return a(e,i),e}function r(t){if(!w(t))return t;var e=s.indexOf(t);if(e!==-1)return c[e];if(C(t)||M(t))throw Hi("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=o(t);return void 0===r&&(r=Gi(t)?[]:Object.create(zi(t)),i=!0),s.push(t),c.push(r),i?n(t,r):r}function o(t){switch(ji.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(r(t.buffer));case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(_(t.cloneNode))return t.cloneNode(!0)}var s=[],c=[];if(e){if(R(e)||D(e))throw Hi("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw Hi("cpi","Can't copy! Source and destination are identical.");return Gi(e)?e.length=0:i(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),s.push(t),c.push(e),n(t,e)}return r(t)}function U(t,e){if(Gi(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(w(t)){e=e||{};for(var r in t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r])}return e||t}function j(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var n,i,r,o=typeof t,s=typeof e;if(o==s&&"object"==o){if(!Gi(t)){if(E(t))return!!E(e)&&j(t.getTime(),e.getTime());if(S(t))return!!S(e)&&t.toString()==e.toString();if(M(t)||M(e)||C(t)||C(e)||Gi(e)||E(e)||S(e))return!1;r=gt();for(i in t)if("$"!==i.charAt(0)&&!_(t[i])){if(!j(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&y(e[i])&&!_(e[i]))return!1;return!0}if(!Gi(e))return!1;if((n=t.length)==e.length){for(i=0;i<n;i++)if(!j(t[i],e[i]))return!1;return!0}}return!1}function z(t,e,n){return t.concat(Ii.call(e,n))}function H(t,e){return Ii.call(t,e||0)}function W(t,e){var n=arguments.length>2?H(arguments,2):[];return!_(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,z(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function V(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:C(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":M(n)&&(i="$SCOPE"),i}function G(t,e){if(!v(t))return A(e)||(e=e?2:null),JSON.stringify(t,V,e)}function q(t){return x(t)?JSON.parse(t):t}function X(t,e){t=t.replace(Qi,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Y(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function K(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset(),r=X(e,i);return Y(t,n*(r-i))}function Z(t){t=Bi(t).clone();try{t.empty()}catch(e){}var n=Bi("<div>").append(t).html();try{return t[0].nodeType===rr?Ti(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+Ti(e)})}catch(e){return Ti(n)}}function Q(t){try{return decodeURIComponent(t)}catch(e){}}function J(t){var e={};return i((t||"").split("&"),function(t){var n,i,r;t&&(i=t=t.replace(/\+/g,"%20"),n=t.indexOf("="),n!==-1&&(i=t.substring(0,n),r=t.substring(n+1)),i=Q(i),y(i)&&(r=!y(r)||Q(r),Fi.call(e,i)?Gi(e[i])?e[i].push(r):e[i]=[e[i],r]:e[i]=r))}),e}function tt(t){var e=[];return i(t,function(t,n){Gi(t)?i(t,function(t){e.push(nt(n,!0)+(t===!0?"":"="+nt(t,!0)))}):e.push(nt(n,!0)+(t===!0?"":"="+nt(t,!0)))}),e.length?e.join("&"):""}function et(t){return nt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function nt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function it(t,e){var n,i,r=Ji.length;for(i=0;i<r;++i)if(n=Ji[i]+e,x(n=t.getAttribute(n)))return n;return null}function rt(t,e){var n,r,o={};i(Ji,function(e){var i=e+"app";!n&&t.hasAttribute&&t.hasAttribute(i)&&(n=t,r=t.getAttribute(i))}),i(Ji,function(e){var i,o=e+"app";!n&&(i=t.querySelector("["+o.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(o))}),n&&(o.strictDi=null!==it(n,"strict-di"),e(n,r?[r]:[],o))}function ot(e,n,r){w(r)||(r={});var o={strictDi:!1};r=l(o,r);var s=function(){if(e=Bi(e),e.injector()){var i=e[0]===t.document?"document":Z(e);throw Hi("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=ne(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),o},a=/^NG_ENABLE_DEBUG_INFO!/,c=/^NG_DEFER_BOOTSTRAP!/;return t&&a.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!c.test(t.name)?s():(t.name=t.name.replace(c,""),Wi.resumeBootstrap=function(t){return i(t,function(t){n.push(t)}),s()},void(_(Wi.resumeDeferredBootstrap)&&Wi.resumeDeferredBootstrap()))}function st(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function at(t){var e=Wi.element(t).injector();if(!e)throw Hi("test","no injector found for element argument to getTestability");return e.get("$$testability")}function ct(t,e){return e=e||"_",t.replace(tr,function(t,n){return(n?e:"")+t.toLowerCase()})}function lt(){var e;if(!er){var n=Zi();Pi=v(n)?t.jQuery:n?t[n]:void 0,Pi&&Pi.fn.on?(Bi=Pi,l(Pi.fn,{scope:Er.scope,isolateScope:Er.isolateScope,controller:Er.controller,injector:Er.injector,inheritedData:Er.inheritedData}),e=Pi.cleanData,Pi.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)n=Pi._data(i,"events"),n&&n.$destroy&&Pi(i).triggerHandler("$destroy");e(t)}):Bi=Ft,Wi.element=Bi,er=!0}}function ut(t,e,n){if(!t)throw Hi("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function ht(t,e,n){return n&&Gi(t)&&(t=t[t.length-1]),ut(_(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function ft(t,e){if("hasOwnProperty"===t)throw Hi("badname","hasOwnProperty is not a valid {0} name",e)}function dt(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,s=r.length,a=0;a<s;a++)i=r[a],t&&(t=(o=t)[i]);return!n&&_(t)?W(o,t):t}function pt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=Bi(Ii.call(t,0,r))),e.push(n));return e||t}function gt(){return Object.create(null)}function mt(t){function n(t,e,n){return t[e]||(t[e]=n())}var i=e("$injector"),r=e("ng"),o=n(t,"angular",Object);return o.$$minErr=o.$$minErr||e,n(o,"module",function(){var t={};return function(e,o,s){var a=function(t,e){if("hasOwnProperty"===t)throw r("badname","hasOwnProperty is not a valid {0} name",e)};return a(e,"module"),o&&t.hasOwnProperty(e)&&(t[e]=null),n(t,e,function(){function t(t,e,n,i){return i||(i=r),function(){return i[n||"push"]([t,e,arguments]),u}}function n(t,n){return function(i,o){return o&&_(o)&&(o.$$moduleName=e),r.push([t,n,arguments]),u}}if(!o)throw i("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",e);var r=[],a=[],c=[],l=t("$injector","invoke","push",a),u={_invokeQueue:r,_configBlocks:a,_runBlocks:c,requires:o,name:e,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:l,run:function(t){return c.push(t),this}};return s&&l(s),u})}})}function vt(t){var e=[];return JSON.stringify(t,function(t,n){if(n=V(t,n),w(n)){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}function yt(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):v(t)?"undefined":"string"!=typeof t?vt(t):t}function wt(n){l(n,{bootstrap:ot,copy:N,extend:l,merge:u,equals:j,element:Bi,forEach:i,injector:ne,noop:d,bind:W,toJson:G,fromJson:q,identity:p,isUndefined:v,isDefined:y,isString:x,isFunction:_,isObject:w,isNumber:A,isElement:B,isArray:Gi,version:cr,isDate:E,lowercase:Ti,uppercase:Li,callbacks:{counter:0},getTestability:at,$$minErr:e,$$csp:Ki,reloadWithDebugInfo:st}),(Oi=mt(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:En}),t.provider("$compile",de).directive({a:Lo,input:Ko,textarea:Ko,form:Po,script:Vs,select:Xs,style:Ks,option:Ys,ngBind:Jo,ngBindHtml:es,ngBindTemplate:ts,ngClass:is,ngClassEven:os,ngClassOdd:rs,ngCloak:ss,ngController:as,ngForm:Oo,ngHide:Is,ngIf:us,ngInclude:hs,ngInit:ds,ngNonBindable:Fs,ngPluralize:Rs,ngRepeat:Ds,ngShow:Os,ngStyle:Ns,ngSwitch:Us,ngSwitchWhen:js,ngSwitchDefault:zs,ngOptions:ks,ngTransclude:Ws,ngModel:Cs,ngList:ps,ngChange:ns,pattern:Qs,ngPattern:Qs,required:Zs,ngRequired:Zs,minlength:ta,ngMinlength:ta,maxlength:Js,ngMaxlength:Js,ngValue:Qo,ngModelOptions:$s}).directive({ngInclude:fs}).directive(ko).directive(cs),t.provider({$anchorScroll:ie,$animate:Nr,$animateCss:zr,$$animateJs:Or,$$animateQueue:Ir,$$AnimateRunner:jr,$$animateAsyncRun:Ur,$browser:le,$cacheFactory:ue,$controller:we,$document:be,$exceptionHandler:xe,$filter:On,$$forceReflow:Xr,$interpolate:Be,$interval:Pe,$http:Le,$httpParamSerializer:Ee,$httpParamSerializerJQLike:_e,$httpBackend:Re,$xhrFactory:ke,$location:Ke,$log:Ze,$parse:vn,$rootScope:An,$q:yn,$$q:wn,$sce:Mn,$sceDelegate:Cn,$sniffer:$n,$templateCache:he,$templateRequest:Fn,$$testability:Tn,$timeout:Ln,$window:Dn,$$rAF:xn,$$jqLite:Kt,$$HashMap:Mr,$$cookieReader:Pn})}])}function bt(){return++ur}function xt(t){return t.replace(dr,function(t,e,n,i){return i?n.toUpperCase():n}).replace(pr,"Moz$1")}function At(t){return!yr.test(t)}function Et(t){var e=t.nodeType;return e===nr||!e||e===sr}function _t(t){for(var e in lr[t.ng339])return!0;return!1}function St(t){for(var e=0,n=t.length;e<n;e++)Rt(t[e])}function Ct(t,e){var n,r,o,s,a=e.createDocumentFragment(),c=[];if(At(t))c.push(e.createTextNode(t));else{for(n=n||a.appendChild(e.createElement("div")),r=(wr.exec(t)||["",""])[1].toLowerCase(),o=xr[r]||xr._default,n.innerHTML=o[1]+t.replace(br,"<$1></$2>")+o[2],s=o[0];s--;)n=n.lastChild;c=z(c,n.childNodes),n=a.firstChild,n.textContent=""}return a.textContent="",a.innerHTML="",i(c,function(t){a.appendChild(t)}),a}function Mt(e,n){n=n||t.document;var i;return(i=vr.exec(e))?[n.createElement(i[1])]:(i=Ct(e,n))?i.childNodes:[]}function $t(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}function Ft(t){if(t instanceof Ft)return t;var e;if(x(t)&&(t=Xi(t),e=!0),!(this instanceof Ft)){if(e&&"<"!=t.charAt(0))throw mr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ft(t)}e?Nt(this,Mt(t)):Nt(this,t)}function Tt(t){return t.cloneNode(!0)}function Lt(t,e){if(e||Rt(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),i=0,r=n.length;i<r;i++)Rt(n[i])}function kt(t,e,n,r){if(y(r))throw mr("offargs","jqLite#off() does not support the `selector` argument");var o=Dt(t),s=o&&o.events,a=o&&o.handle;if(a)if(e){var c=function(e){var i=s[e];y(n)&&I(i||[],n),y(n)&&i&&i.length>0||(fr(t,e,a),delete s[e])};i(e.split(" "),function(t){c(t),gr[t]&&c(gr[t])})}else for(e in s)"$destroy"!==e&&fr(t,e,a),delete s[e]}function Rt(t,e){var n=t.ng339,i=n&&lr[n];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),kt(t)),delete lr[n],t.ng339=void 0}}function Dt(t,e){var n=t.ng339,i=n&&lr[n];return e&&!i&&(t.ng339=n=bt(),i=lr[n]={events:{},data:{},handle:void 0}),i}function Bt(t,e,n){if(Et(t)){var i=y(n),r=!i&&e&&!w(e),o=!e,s=Dt(t,!r),a=s&&s.data;if(i)a[e]=n;else{if(o)return a;if(r)return a&&a[e];l(a,e)}}}function Pt(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function Ot(t,e){e&&t.setAttribute&&i(e.split(" "),function(e){t.setAttribute("class",Xi((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Xi(e)+" "," ")))})}function It(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");i(e.split(" "),function(t){t=Xi(t),n.indexOf(" "+t+" ")===-1&&(n+=t+" ")}),t.setAttribute("class",Xi(n))}}function Nt(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function Ut(t,e){return jt(t,"$"+(e||"ngController")+"Controller")}function jt(t,e,n){t.nodeType==sr&&(t=t.documentElement);for(var i=Gi(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(y(n=Bi.data(t,i[r])))return n;t=t.parentNode||t.nodeType===ar&&t.host}}function zt(t){for(Lt(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Ht(t,e){e||Lt(t);var n=t.parentNode;n&&n.removeChild(t)}function Wt(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):Bi(n).on("load",e)}function Vt(t,e){var n=_r[e.toLowerCase()];return n&&Sr[O(t)]&&n}function Gt(t){return Cr[t]}function qt(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(v(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var a=r.specialHandlerWrapper||Xt;o>1&&(r=U(r));for(var c=0;c<o;c++)n.isImmediatePropagationStopped()||a(t,n,r[c])}};return n.elem=t,n}function Xt(t,e,n){n.call(t,e)}function Yt(t,e,n){var i=e.relatedTarget;i&&(i===t||Ar.call(t,i))||n.call(t,e)}function Kt(){this.$get=function(){return l(Ft,{hasClass:function(t,e){return t.attr&&(t=t[0]),Pt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),It(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Ot(t,e)}})}}function Zt(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"==i||"object"==i&&null!==t?t.$$hashKey=i+":"+(e||s)():i+":"+t}function Qt(t,e){if(e){var n=0;this.nextUid=function(){return++n}}i(t,this.put,this)}function Jt(t){var e=Function.prototype.toString.call(t).replace(kr,""),n=e.match($r)||e.match(Fr);return n}function te(t){var e=Jt(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ee(t,e,n){var r,o,s;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw x(n)&&n||(n=t.name||te(t)),Rr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=Jt(t),i(o[1].split(Tr),function(t){t.replace(Lr,function(t,e,n){r.push(n)})})}t.$inject=r}}else Gi(t)?(s=t.length-1,ht(t[s],"fn"),r=t.slice(0,s)):ht(t,"fn",!0);return r}function ne(t,e){function n(t){return function(e,n){return w(e)?void i(e,o(t)):t(e,n)}}function r(t,e){if(ft(t,"service"),(_(e)||Gi(e))&&(e=E.instantiate(e)),!e.$get)throw Rr("pget","Provider '{0}' must define $get factory method.",t);return A[t+m]=e}function s(t,e){return function(){var n=M.invoke(e,this);if(v(n))throw Rr("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function a(t,e,n){return r(t,{$get:n!==!1?s(t,e):e})}function c(t,e){return a(t,["$injector",function(t){return t.instantiate(e)}])}function l(t,e){return a(t,g(e),!1)}function u(t,e){ft(t,"constant"),A[t]=e,S[t]=e}function h(t,e){var n=E.get(t+m),i=n.$get;n.$get=function(){var t=M.invoke(i,n);return M.invoke(e,null,{$delegate:t})}}function f(t){ut(v(t)||Gi(t),"modulesToLoad","not an array");var e,n=[];return i(t,function(t){function i(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=E.get(i[0]);r[i[1]].apply(r,i[2])}}if(!b.get(t)){b.put(t,!0);try{x(t)?(e=Oi(t),n=n.concat(f(e.requires)).concat(e._runBlocks),i(e._invokeQueue),i(e._configBlocks)):_(t)?n.push(E.invoke(t)):Gi(t)?n.push(E.invoke(t)):ht(t,"module")}catch(r){throw Gi(t)&&(t=t[t.length-1]),r.message&&r.stack&&r.stack.indexOf(r.message)==-1&&(r=r.message+"\n"+r.stack),Rr("modulerr","Failed to instantiate module {0} due to:\n{1}",t,r.stack||r.message||r)}}}),n}function d(t,n){function i(e,i){if(t.hasOwnProperty(e)){if(t[e]===p)throw Rr("cdep","Circular dependency found: {0}",e+" <- "+y.join(" <- "));return t[e]}try{return y.unshift(e),t[e]=p,t[e]=n(e,i)}catch(r){throw t[e]===p&&delete t[e],r}finally{y.shift()}}function r(t,n,r){for(var o=[],s=ne.$$annotate(t,e,r),a=0,c=s.length;a<c;a++){var l=s[a];if("string"!=typeof l)throw Rr("itkn","Incorrect injection token! Expected service name as string, got {0}",l);o.push(n&&n.hasOwnProperty(l)?n[l]:i(l,r))}return o}function o(t){return!(Di<=11)&&("function"==typeof t&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(t)))}function s(t,e,n,i){"string"==typeof n&&(i=n,n=null);var s=r(t,n,i);return Gi(t)&&(t=t[t.length-1]),o(t)?(s.unshift(null),new(Function.prototype.bind.apply(t,s))):t.apply(e,s)}function a(t,e,n){var i=Gi(t)?t[t.length-1]:t,o=r(t,e,n);return o.unshift(null),new(Function.prototype.bind.apply(i,o))}return{invoke:s,instantiate:a,get:i,annotate:ne.$$annotate,has:function(e){return A.hasOwnProperty(e+m)||t.hasOwnProperty(e)}}}e=e===!0;var p={},m="Provider",y=[],b=new Qt([],(!0)),A={$provide:{provider:n(r),factory:n(a),service:n(c),value:n(l),constant:n(u),decorator:h}},E=A.$injector=d(A,function(t,e){throw Wi.isString(e)&&y.push(e),Rr("unpr","Unknown provider: {0}",y.join(" <- "))}),S={},C=d(S,function(t,e){var n=E.get(t+m,e);return M.invoke(n.$get,n,void 0,t)}),M=C;A["$injector"+m]={$get:g(C)};var $=f(t);return M=C.get("$injector"),M.strictDi=e,i($,function(t){t&&M.invoke(t)}),M}function ie(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,i){function r(t){var e=null;return Array.prototype.some.call(t,function(t){if("a"===O(t))return e=t,!0}),e}function o(){var t=a.yOffset;if(_(t))t=t();else if(B(t)){var n=t[0],i=e.getComputedStyle(n);t="fixed"!==i.position?0:n.getBoundingClientRect().bottom}else A(t)||(t=0);return t}function s(t){if(t){t.scrollIntoView();var n=o();if(n){var i=t.getBoundingClientRect().top;e.scrollBy(0,i-n)}}else e.scrollTo(0,0)}function a(t){t=x(t)?t:n.hash();var e;t?(e=c.getElementById(t))?s(e):(e=r(c.getElementsByName(t)))?s(e):"top"===t&&s(null):s(null)}var c=e.document;return t&&i.$watch(function(){return n.hash()},function(t,e){t===e&&""===t||Wt(function(){i.$evalAsync(a)})}),a}]}function re(t,e){return t||e?t?e?(Gi(t)&&(t=t.join(" ")),Gi(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function oe(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Br)return n}}function se(t){x(t)&&(t=t.split(" "));var e=gt();return i(t,function(t){t.length&&(e[t]=!0)}),e}function ae(t){return w(t)?t:{}}function ce(t,e,n,r){function o(t){try{t.apply(null,H(arguments,1))}finally{if(y--,0===y)for(;w.length;)try{w.pop()()}catch(e){n.error(e)}}}function s(t){var e=t.indexOf("#");return e===-1?"":t.substr(e)}function a(){_=null,c(),l()}function c(){b=S(),b=v(b)?null:b,j(b,$)&&(b=$),$=b}function l(){A===u.url()&&x===b||(A=u.url(),x=b,i(C,function(t){t(u.url(),b)}))}var u=this,h=t.location,f=t.history,p=t.setTimeout,g=t.clearTimeout,m={};u.isMock=!1;var y=0,w=[];u.$$completeOutstandingRequest=o,u.$$incOutstandingRequestCount=function(){y++},u.notifyWhenNoOutstandingRequests=function(t){0===y?t():w.push(t)};var b,x,A=h.href,E=e.find("base"),_=null,S=r.history?function(){try{return f.state}catch(t){}}:d;c(),x=b,u.url=function(e,n,i){if(v(i)&&(i=null),h!==t.location&&(h=t.location),f!==t.history&&(f=t.history),e){var o=x===i;if(A===e&&(!r.history||o))return u;var a=A&&je(A)===je(e);return A=e,x=i,!r.history||a&&o?(a&&!_||(_=e),n?h.replace(e):a?h.hash=s(e):h.href=e,h.href!==e&&(_=e)):(f[n?"replaceState":"pushState"](i,"",e),c(),x=b),u}return _||h.href.replace(/%27/g,"'")},u.state=function(){return b};var C=[],M=!1,$=null;u.onUrlChange=function(e){return M||(r.history&&Bi(t).on("popstate",a),Bi(t).on("hashchange",a),M=!0),C.push(e),e},u.$$applicationDestroyed=function(){Bi(t).off("hashchange popstate",a)},u.$$checkUrlChange=l,u.baseHref=function(){var t=E.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},u.defer=function(t,e){var n;return y++,n=p(function(){delete m[n],o(t)},e||0),m[n]=!0,n},u.defer.cancel=function(t){return!!m[t]&&(delete m[t],g(t),o(d),!0)}}function le(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new ce(t,i,e,n)}]}function ue(){this.$get=function(){function t(t,i){function r(t){t!=f&&(d?d==t&&(d=t.n):d=t,o(t.n,t.p),o(t,f),f=t,f.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in n)throw e("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var s=0,a=l({},i,{id:t}),c=gt(),u=i&&i.capacity||Number.MAX_VALUE,h=gt(),f=null,d=null;return n[t]={put:function(t,e){if(!v(e)){if(u<Number.MAX_VALUE){var n=h[t]||(h[t]={key:t});r(n)}return t in c||s++,c[t]=e,s>u&&this.remove(d.key),e}},get:function(t){if(u<Number.MAX_VALUE){var e=h[t];if(!e)return;r(e)}return c[t]},remove:function(t){if(u<Number.MAX_VALUE){var e=h[t];if(!e)return;e==f&&(f=e.p),e==d&&(d=e.n),o(e.n,e.p),delete h[t]}t in c&&(delete c[t],s--)},removeAll:function(){c=gt(),s=0,h=gt(),f=d=null},destroy:function(){c=null,a=null,h=null,delete n[t]},info:function(){return l({},a,{size:s})}}}var n={};return t.info=function(){var t={};return i(n,function(e,n){t[n]=e.info()}),t},t.get=function(t){return n[t]},t}}function he(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function fe(){}function de(e,n){function r(t,e,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o=gt();return i(t,function(t,i){if(t in S)return void(o[i]=S[t]);var s=t.match(r);if(!s)throw Hr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,i,t,n?"controller bindings definition":"isolate scope definition");o[i]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||i},s[4]&&(S[t]=o[i])}),o}function s(t,e){var n={isolateScope:null,bindToController:null};if(w(t.scope)&&(t.bindToController===!0?(n.bindToController=r(t.scope,e,!0),n.isolateScope={}):n.isolateScope=r(t.scope,e,!1)),w(t.bindToController)&&(n.bindToController=r(t.bindToController,e,!0)),w(n.bindToController)){var i=t.controller,o=t.controllerAs;if(!i)throw Hr("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!ye(i,o))throw Hr("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}function a(t){var e=t.charAt(0);if(!e||e!==Ti(e))throw Hr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw Hr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}var c={},u="Directive",h=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,m=/(([\w\-]+)(?:\:([^;]+))?;?)/,b=P("ngSrc,ngSrcset,src,srcset"),A=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,E=/^(on[a-z]+|formaction)$/,S=gt();this.directive=function F(t,n){return ft(t,"directive"),x(t)?(a(t),ut(n,"directiveFactory"),c.hasOwnProperty(t)||(c[t]=[],e.factory(t+u,["$injector","$exceptionHandler",function(e,n){var r=[];return i(c[t],function(i,o){try{var s=e.invoke(i);_(s)?s={compile:g(s)}:!s.compile&&s.link&&(s.compile=g(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",s.$$moduleName=i.$$moduleName,r.push(s)}catch(a){n(a)}}),r}])),c[t].push(n)):i(t,o(F)),this},this.component=function(t,e){function n(t){function n(e){return _(e)||Gi(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var o=e.template||e.templateUrl?e.template:"",s={controller:r,controllerAs:ye(e.controller)||e.controllerAs||"$ctrl",template:n(o),templateUrl:n(e.templateUrl),transclude:e.transclude,scope:{},bindToController:e.bindings||{},restrict:"E",require:e.require};return i(e,function(t,e){"$"===e.charAt(0)&&(s[e]=t)}),s}var r=e.controller||function(){};return i(e,function(t,e){"$"===e.charAt(0)&&(n[e]=t,_(r)&&(r[e]=t))}),n.$inject=["$injector"],this.directive(t,n)},this.aHrefSanitizationWhitelist=function(t){return y(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return y(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var C=!0;this.debugInfoEnabled=function(t){return y(t)?(C=t,this):C};var $=10;this.onChangesTtl=function(t){return arguments.length?($=t,this):$},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,r,o,a,g,y,S,F,T){function k(){try{if(!--wt)throw mt=void 0,Hr("infchng","{0} $onChanges() iterations reached. Aborting!\n",$);y.$apply(function(){for(var t=0,e=mt.length;t<e;++t)mt[t]();mt=void 0})}finally{wt++}}function R(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)r=o[n],this[r]=e[r]}else this.$attr={};this.$$element=t}function D(t,e,n){yt.innerHTML="<span "+e+">";var i=yt.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}function B(t,e){try{t.addClass(e)}catch(n){}}function P(e,n,i,r,o){e instanceof Bi||(e=Bi(e));for(var s=/\S+/,a=0,c=e.length;a<c;a++){var l=e[a];l.nodeType===rr&&l.nodeValue.match(s)&&$t(l,e[a]=t.document.createElement("span"))}var u=U(e,n,e,i,r,o);P.$$addScopeClass(e);var h=null;return function(t,n,i){ut(t,"scope"),o&&o.needsNewScope&&(t=t.$parent.$new()),i=i||{};var r=i.parentBoundTranscludeFn,s=i.transcludeControllers,a=i.futureParentElement;r&&r.$$boundTransclude&&(r=r.$$boundTransclude),h||(h=N(a));var c;if(c="html"!==h?Bi(st(h,Bi("<div>").append(e).html())):n?Er.clone.call(e):e,s)for(var l in s)c.data("$"+l+"Controller",s[l].instance);return P.$$addScopeInfo(c,t),n&&n(c,t),u&&u(t,c,c,r),c}}function N(t){var e=t&&t[0];return e&&"foreignobject"!==O(e)&&ji.call(e).match(/SVG/)?"svg":"html"}function U(t,e,n,i,r,o){function s(t,n,i,r){var o,s,a,c,l,u,h,f,g;if(d){var m=n.length;for(g=new Array(m),l=0;l<p.length;l+=3)h=p[l],g[h]=n[h]}else g=n;for(l=0,u=p.length;l<u;)a=g[p[l++]],o=p[l++],s=p[l++],o?(o.scope?(c=t.$new(),P.$$addScopeInfo(Bi(a),c)):c=t,f=o.transcludeOnThisElement?z(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?z(t,e):null,o(s,c,a,i,f)):s&&s(t,a.childNodes,void 0,r)}for(var a,c,l,u,h,f,d,p=[],g=0;g<t.length;g++)a=new R,c=W(t[g],[],a,0===g?i:void 0,r),l=c.length?X(c,t[g],a,e,n,null,[],[],o):null,l&&l.scope&&P.$$addScopeClass(a.$$element),h=l&&l.terminal||!(u=t[g].childNodes)||!u.length?null:U(u,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||h)&&(p.push(g,l,h),f=!0,d=d||l),o=null;return f?s:null}function z(t,e,n){function i(i,r,o,s,a){return i||(i=t.$new(!1,a),i.$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}var r=i.$$slots=gt();for(var o in e.$$slots)e.$$slots[o]?r[o]=z(t,e.$$slots[o],n):r[o]=null;return i}function W(t,e,n,i,r){var o,s,a=t.nodeType,c=n.$attr;switch(a){case nr:J(e,ge(O(t)),"E",i,r);for(var l,u,f,d,p,g,v=t.attributes,y=0,b=v&&v.length;y<b;y++){var A=!1,E=!1;l=v[y],u=l.name,p=Xi(l.value),d=ge(u),(g=_t.test(d))&&(u=u.replace(Vr,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var _=d.match(St);_&&tt(_[1])&&(A=u,E=u.substr(0,u.length-5)+"end",u=u.substr(0,u.length-6)),f=ge(u.toLowerCase()),c[f]=u,!g&&n.hasOwnProperty(f)||(n[f]=p,Vt(t,f)&&(n[f]=!0)),lt(t,e,p,f,g),J(e,f,"A",i,r,A,E)}if(s=t.className,w(s)&&(s=s.animVal),x(s)&&""!==s)for(;o=m.exec(s);)f=ge(o[2]),J(e,f,"C",i,r)&&(n[f]=Xi(o[3])),s=s.substr(o.index+o[0].length);break;case rr:if(11===Di)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===rr;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);ot(e,t.nodeValue);break;case or:try{o=h.exec(t.nodeValue),o&&(f=ge(o[1]),J(e,f,"M",i,r)&&(n[f]=Xi(o[2])))}catch(S){}}return e.sort(it),e}function V(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Hr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==nr&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),
i.push(t),t=t.nextSibling}while(r>0)}else i.push(t);return Bi(i)}function G(t,e,n){return function(i,r,o,s,a){return r=V(r[0],e,n),t(i,r,o,s,a)}}function q(t,e,n,i,r,o){var s;return t?P(e,n,i,r,o):function(){return s||(s=P(e,n,i,r,o),e=n=o=null),s.apply(this,arguments)}}function X(t,e,n,o,s,a,c,u,h){function f(t,e,n,i){t&&(n&&(t=G(t,n,i)),t.require=p.require,t.directiveName=g,(S===p||p.$$isolateScope)&&(t=ft(t,{isolateScope:!0})),c.push(t)),e&&(n&&(e=G(e,n,i)),e.require=p.require,e.directiveName=g,(S===p||p.$$isolateScope)&&(e=ft(e,{isolateScope:!0})),u.push(e))}function d(t,r,o,s,a){function h(t,e,n,i){var r;if(M(t)||(i=n,n=e,e=t,t=void 0),L&&(r=y),n||(n=L?x.parent():x),!i)return a(t,e,r,n,I);var o=a.$$slots[i];if(o)return o(t,e,r,n,I);if(v(o))throw Hr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,Z(x))}var f,d,p,g,m,y,b,x,$,F;e===o?($=n,x=n.$$element):(x=Bi(o),$=new R(x,n)),m=r,S?g=r.$new(!0):A&&(m=r.$parent),a&&(b=h,b.$$boundTransclude=a,b.isSlotFilled=function(t){return!!a.$$slots[t]}),E&&(y=K(x,$,b,E,g,r,S)),S&&(P.$$addScopeInfo(x,g,!0,!(C&&(C===S||C===S.$$originalDirective))),P.$$addScopeClass(x,!0),g.$$isolateBindings=S.$$isolateBindings,F=pt(r,$,g,g.$$isolateBindings,S),F.removeWatches&&g.$on("$destroy",F.removeWatches));for(var T in y){var k=E[T],D=y[T],B=k.$$bindings.bindToController;D.identifier&&B?D.bindingInfo=pt(m,$,D.instance,B,k):D.bindingInfo={};var O=D();O!==D.instance&&(D.instance=O,x.data("$"+k.name+"Controller",O),D.bindingInfo.removeWatches&&D.bindingInfo.removeWatches(),D.bindingInfo=pt(m,$,D.instance,B,k))}for(i(E,function(t,e){var n=t.require;t.bindToController&&!Gi(n)&&w(n)&&l(y[e].instance,Y(e,n,x,y))}),i(y,function(t){var e=t.instance;_(e.$onChanges)&&e.$onChanges(t.bindingInfo.initialChanges),_(e.$onInit)&&e.$onInit(),_(e.$onDestroy)&&m.$on("$destroy",function(){e.$onDestroy()})}),f=0,d=c.length;f<d;f++)p=c[f],dt(p,p.isolateScope?g:r,x,$,p.require&&Y(p.directiveName,p.require,x,y),b);var I=r;for(S&&(S.template||null===S.templateUrl)&&(I=g),t&&t(I,o.childNodes,void 0,a),f=u.length-1;f>=0;f--)p=u[f],dt(p,p.isolateScope?g:r,x,$,p.require&&Y(p.directiveName,p.require,x,y),b);i(y,function(t){var e=t.instance;_(e.$postLink)&&e.$postLink()})}h=h||{};for(var p,g,m,y,b,x=-Number.MAX_VALUE,A=h.newScopeDirective,E=h.controllerDirectives,S=h.newIsolateScopeDirective,C=h.templateDirective,$=h.nonTlbTranscludeDirective,F=!1,T=!1,L=h.hasElementTranscludeDirective,k=n.$$element=Bi(e),D=a,B=o,I=!1,N=!1,U=0,j=t.length;U<j;U++){p=t[U];var z=p.$$start,X=p.$$end;if(z&&(k=V(e,z,X)),m=void 0,x>p.priority)break;if((b=p.scope)&&(p.templateUrl||(w(b)?(rt("new/isolated scope",S||A,p,k),S=p):rt("new/isolated scope",S,p,k)),A=A||p),g=p.name,!I&&(p.replace&&(p.templateUrl||p.template)||p.transclude&&!p.$$tlb)){for(var J,tt=U+1;J=t[tt++];)if(J.transclude&&!J.$$tlb||J.replace&&(J.templateUrl||J.template)){N=!0;break}I=!0}if(!p.templateUrl&&p.controller&&(b=p.controller,E=E||gt(),rt("'"+g+"' controller",E[g],p,k),E[g]=p),b=p.transclude)if(F=!0,p.$$tlb||(rt("transclusion",$,p,k),$=p),"element"==b)L=!0,x=p.priority,m=k,k=n.$$element=Bi(P.$$createComment(g,n[g])),e=k[0],ht(s,H(m),e),m[0].$$parentNode=m[0].parentNode,B=q(N,m,o,x,D&&D.name,{nonTlbTranscludeDirective:$});else{var it=gt();if(m=Bi(Tt(e)).contents(),w(b)){m=[];var ot=gt(),at=gt();i(b,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,ot[t]=e,it[e]=null,at[e]=n}),i(k.contents(),function(t){var e=ot[ge(O(t))];e?(at[e]=!0,it[e]=it[e]||[],it[e].push(t)):m.push(t)}),i(at,function(t,e){if(!t)throw Hr("reqslot","Required transclusion slot `{0}` was not filled.",e)});for(var ct in it)it[ct]&&(it[ct]=q(N,it[ct],o))}k.empty(),B=q(N,m,o,void 0,void 0,{needsNewScope:p.$$isolateScope||p.$$newScope}),B.$$slots=it}if(p.template)if(T=!0,rt("template",C,p,k),C=p,b=_(p.template)?p.template(k,n):p.template,b=Et(b),p.replace){if(D=p,m=At(b)?[]:ve(st(p.templateNamespace,Xi(b))),e=m[0],1!=m.length||e.nodeType!==nr)throw Hr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g,"");ht(s,k,e);var lt={$attr:{}},ut=W(e,[],lt),mt=t.splice(U+1,t.length-(U+1));(S||A)&&Q(ut,S,A),t=t.concat(ut).concat(mt),et(n,lt),j=t.length}else k.html(b);if(p.templateUrl)T=!0,rt("template",C,p,k),C=p,p.replace&&(D=p),d=nt(t.splice(U,t.length-U),k,n,s,F&&B,c,u,{controllerDirectives:E,newScopeDirective:A!==p&&A,newIsolateScopeDirective:S,templateDirective:C,nonTlbTranscludeDirective:$}),j=t.length;else if(p.compile)try{y=p.compile(k,n,B),_(y)?f(null,y,z,X):y&&f(y.pre,y.post,z,X)}catch(vt){r(vt,Z(k))}p.terminal&&(d.terminal=!0,x=Math.max(x,p.priority))}return d.scope=A&&A.scope===!0,d.transcludeOnThisElement=F,d.templateOnThisElement=T,d.transclude=B,h.hasElementTranscludeDirective=L,d}function Y(t,e,n,r){var o;if(x(e)){var s=e.match(A),a=e.substring(s[0].length),c=s[1]||s[3],l="?"===s[2];if("^^"===c?n=n.parent():(o=r&&r[a],o=o&&o.instance),!o){var u="$"+a+"Controller";o=c?n.inheritedData(u):n.data(u)}if(!o&&!l)throw Hr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(Gi(e)){o=[];for(var h=0,f=e.length;h<f;h++)o[h]=Y(t,e[h],n,r)}else w(e)&&(o={},i(e,function(e,i){o[i]=Y(t,e,n,r)}));return o||null}function K(t,e,n,i,r,o,s){var a=gt();for(var c in i){var l=i[c],u={$scope:l===s||l.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},h=l.controller;"@"==h&&(h=e[l.name]);var f=g(h,u,!0,l.controllerAs);a[l.name]=f,t.data("$"+l.name+"Controller",f.instance)}return a}function Q(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=f(t[i],{$$isolateScope:e,$$newScope:n})}function J(t,n,i,o,a,l,h){if(n===a)return null;var d=null;if(c.hasOwnProperty(n))for(var p,g=e.get(n+u),m=0,y=g.length;m<y;m++)try{if(p=g[m],(v(o)||o>p.priority)&&p.restrict.indexOf(i)!=-1){if(l&&(p=f(p,{$$start:l,$$end:h})),!p.$$bindings){var b=p.$$bindings=s(p,p.name);w(b.isolateScope)&&(p.$$isolateBindings=b.isolateScope)}t.push(p),d=p}}catch(x){r(x)}return d}function tt(t){if(c.hasOwnProperty(t))for(var n,i=e.get(t+u),r=0,o=i.length;r<o;r++)if(n=i[r],n.multiElement)return!0;return!1}function et(t,e){var n=e.$attr,r=t.$attr,o=t.$$element;i(t,function(i,r){"$"!=r.charAt(0)&&(e[r]&&e[r]!==i&&(i+=("style"===r?";":" ")+e[r]),t.$set(r,i,!0,n[r]))}),i(e,function(e,i){"class"==i?(B(o,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==i?(o.attr("style",o.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==i.charAt(0)||t.hasOwnProperty(i)||(t[i]=e,r[i]=n[i])})}function nt(t,e,n,r,s,a,c,l){var u,h,d=[],p=e[0],g=t.shift(),m=f(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),v=_(g.templateUrl)?g.templateUrl(e,n):g.templateUrl,y=g.templateNamespace;return e.empty(),o(v).then(function(o){var f,b,x,A;if(o=Et(o),g.replace){if(x=At(o)?[]:ve(st(y,Xi(o))),f=x[0],1!=x.length||f.nodeType!==nr)throw Hr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,v);b={$attr:{}},ht(r,e,f);var E=W(f,[],b);w(g.scope)&&Q(E,!0),t=E.concat(t),et(n,b)}else f=p,e.html(o);for(t.unshift(m),u=X(t,f,n,s,e,g,a,c,l),i(r,function(t,n){t==f&&(r[n]=e[0])}),h=U(e[0].childNodes,s);d.length;){var _=d.shift(),S=d.shift(),C=d.shift(),M=d.shift(),$=e[0];if(!_.$$destroyed){if(S!==p){var F=S.className;l.hasElementTranscludeDirective&&g.replace||($=Tt(f)),ht(C,Bi(S),$),B(Bi($),F)}A=u.transcludeOnThisElement?z(_,u.transclude,M):M,u(h,_,$,r,A)}}d=null}),function(t,e,n,i,r){var o=r;e.$$destroyed||(d?d.push(e,n,i,o):(u.transcludeOnThisElement&&(o=z(e,u.transclude,r)),u(h,e,n,i,o)))}}function it(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function rt(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw Hr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,Z(i))}function ot(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&P.$$addBindingClass(e),function(t,e){var r=e.parent();n||P.$$addBindingClass(r),P.$$addBindingInfo(r,i.expressions),t.$watch(i,function(t){e[0].nodeValue=t})}}})}function st(e,n){switch(e=Ti(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function at(t,e){if("srcdoc"==e)return S.HTML;var n=O(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?S.RESOURCE_URL:void 0}function lt(t,e,i,r,o){var s=at(t,r);o=b[r]||o;var a=n(i,!0,s,o);if(a){if("multiple"===r&&"select"===O(t))throw Hr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(t));e.push({priority:100,compile:function(){return{pre:function(t,e,c){var l=c.$$observers||(c.$$observers=gt());if(E.test(r))throw Hr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var u=c[r];u!==i&&(a=u&&n(u,!0,s,o),i=u),a&&(c[r]=a(t),(l[r]||(l[r]=[])).$$inter=!0,(c.$$observers&&c.$$observers[r].$$scope||t).$watch(a,function(t,e){"class"===r&&t!=e?c.$updateClass(t,e):c.$set(r,t)}))}}}})}}function ht(e,n,i){var r,o,s=n[0],a=n.length,c=s.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]==s){e[r++]=i;for(var l=r,u=l+a-1,h=e.length;l<h;l++,u++)u<h?e[l]=e[u]:delete e[l];e.length-=a-1,e.context===s&&(e.context=i);break}c&&c.replaceChild(i,s);var f=t.document.createDocumentFragment();for(r=0;r<a;r++)f.appendChild(n[r]);for(Bi.hasData(s)&&(Bi.data(i,Bi.data(s)),Bi(s).off("$destroy")),Bi.cleanData(f.querySelectorAll("*")),r=1;r<a;r++)delete n[r];n[0]=i,n.length=1}function ft(t,e){return l(function(){return t.apply(null,arguments)},t,e)}function dt(t,e,n,i,o,s){try{t(e,n,i,o,s)}catch(a){r(a,Z(n))}}function pt(t,e,r,o,s){function c(e,n,i){_(r.$onChanges)&&n!==i&&(mt||(t.$$postDigest(k),mt=[]),u||(u={},mt.push(l)),u[e]&&(i=u[e].previousValue),u[e]=new pe(i,n))}function l(){r.$onChanges(u),u=void 0}var u,h=[],f={};return i(o,function(i,o){var l,u,p,g,m,v=i.attrName,y=i.optional,w=i.mode;switch(w){case"@":y||Fi.call(e,v)||(r[o]=e[v]=void 0),e.$observe(v,function(t){if(x(t)||L(t)){var e=r[o];c(o,t,e),r[o]=t}}),e.$$observers[v].$$scope=t,l=e[v],x(l)?r[o]=n(l)(t):L(l)&&(r[o]=l),f[o]=new pe(Wr,r[o]);break;case"=":if(!Fi.call(e,v)){if(y)break;e[v]=void 0}if(y&&!e[v])break;u=a(e[v]),g=u.literal?j:function(t,e){return t===e||t!==t&&e!==e},p=u.assign||function(){throw l=r[o]=u(t),Hr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[v],v,s.name)},l=r[o]=u(t);var b=function(e){return g(e,r[o])||(g(e,l)?p(t,e=r[o]):r[o]=e),l=e};b.$stateful=!0,m=i.collection?t.$watchCollection(e[v],b):t.$watch(a(e[v],b),null,u.literal),h.push(m);break;case"<":if(!Fi.call(e,v)){if(y)break;e[v]=void 0}if(y&&!e[v])break;u=a(e[v]),r[o]=u(t),f[o]=new pe(Wr,r[o]),m=t.$watch(u,function(t,e){t===e&&(e=r[o]),c(o,t,e),r[o]=t},u.literal),h.push(m);break;case"&":if(u=e.hasOwnProperty(v)?a(e[v]):d,u===d&&y)break;r[o]=function(e){return u(t,e)}}}),{initialChanges:f,removeWatches:h.length&&function(){for(var t=0,e=h.length;t<e;++t)h[t]()}}}var mt,vt=/^\w/,yt=t.document.createElement("div"),wt=$;R.prototype={$normalize:ge,$addClass:function(t){t&&t.length>0&&F.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&F.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=me(t,e);n&&n.length&&F.addClass(this.$$element,n);var i=me(e,t);i&&i.length&&F.removeClass(this.$$element,i)},$set:function(t,e,n,o){var s,a=this.$$element[0],c=Vt(a,t),l=Gt(t),u=t;if(c?(this.$$element.prop(t,e),o=c):l&&(this[l]=e,u=l),this[t]=e,o?this.$attr[t]=o:(o=this.$attr[t],o||(this.$attr[t]=o=ct(t,"-"))),s=O(this.$$element),"a"===s&&("href"===t||"xlinkHref"===t)||"img"===s&&"src"===t)this[t]=e=T(e,"src"===t);else if("img"===s&&"srcset"===t){for(var h="",f=Xi(e),d=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(f)?d:/(,)/,g=f.split(p),m=Math.floor(g.length/2),y=0;y<m;y++){var w=2*y;h+=T(Xi(g[w]),!0),h+=" "+Xi(g[w+1])}var b=Xi(g[2*y]).split(/\s/);h+=T(Xi(b[0]),!0),2===b.length&&(h+=" "+Xi(b[1])),this[t]=e=h}n!==!1&&(null===e||v(e)?this.$$element.removeAttr(o):vt.test(o)?this.$$element.attr(o,e):D(this.$$element[0],o,e));var x=this.$$observers;x&&i(x[u],function(t){try{t(e)}catch(n){r(n)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=gt()),r=i[t]||(i[t]=[]);return r.push(e),y.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(t)||v(n[t])||e(n[t])}),function(){I(r,e)}}};var bt=n.startSymbol(),xt=n.endSymbol(),Et="{{"==bt&&"}}"==xt?p:function(t){return t.replace(/\{\{/g,bt).replace(/}}/g,xt)},_t=/^ngAttr[A-Z]/,St=/^(.+)Start$/;return P.$$addBindingInfo=C?function(t,e){var n=t.data("$binding")||[];Gi(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:d,P.$$addBindingClass=C?function(t){B(t,"ng-binding")}:d,P.$$addScopeInfo=C?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:d,P.$$addScopeClass=C?function(t,e){B(t,e?"ng-isolate-scope":"ng-scope")}:d,P.$$createComment=function(e,n){var i="";return C&&(i=" "+(e||"")+": "+(n||"")+" "),t.document.createComment(i)},P}]}function pe(t,e){this.previousValue=t,this.currentValue=e}function ge(t){return xt(t.replace(Vr,""))}function me(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s==r[a])continue t;n+=(n.length>0?" ":"")+s}return n}function ve(t){t=Bi(t);var e=t.length;if(e<=1)return t;for(;e--;){var n=t[e];n.nodeType===or&&Ni.call(t,e,1)}return t}function ye(t,e){if(e&&x(e))return e;if(x(t)){var n=qr.exec(t);if(n)return n[3]}}function we(){var t={},n=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){ft(e,"controller"),w(e)?l(t,e):t[e]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(i,r){function o(t,n,i,r){if(!t||!w(t.$scope))throw e("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,n);t.$scope[n]=i}return function(e,s,a,c){var u,h,f,d;if(a=a===!0,c&&x(c)&&(d=c),x(e)){if(h=e.match(qr),!h)throw Gr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);f=h[1],d=d||h[3],e=t.hasOwnProperty(f)?t[f]:dt(s.$scope,f,!0)||(n?dt(r,f,!0):void 0),ht(e,f,!0)}if(a){var p=(Gi(e)?e[e.length-1]:e).prototype;u=Object.create(p||null),d&&o(s,d,u,f||e.name);var g;return g=l(function(){var t=i.invoke(e,u,s,f);return t!==u&&(w(t)||_(t))&&(u=t,d&&o(s,d,u,f||e.name)),u},{instance:u,identifier:d})}return u=i.instantiate(e,s,f),d&&o(s,d,u,f||e.name),u}}]}function be(){this.$get=["$window",function(t){return Bi(t.document)}]}function xe(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function Ae(t){return w(t)?E(t)?t.toISOString():G(t):t}function Ee(){this.$get=function(){return function(t){if(!t)return"";var e=[];return r(t,function(t,n){null===t||v(t)||(Gi(t)?i(t,function(t){e.push(nt(n)+"="+nt(Ae(t)))}):e.push(nt(n)+"="+nt(Ae(t))))}),e.join("&")}}}function _e(){this.$get=function(){return function(t){function e(t,o,s){null===t||v(t)||(Gi(t)?i(t,function(t,n){e(t,o+"["+(w(t)?n:"")+"]")}):w(t)&&!E(t)?r(t,function(t,n){e(t,o+(s?"":"[")+n+(s?"":"]"))}):n.push(nt(o)+"="+nt(Ae(t))))}if(!t)return"";var n=[];return e(t,"",!0),n.join("&")}}}function Se(t,e){if(x(t)){var n=t.replace(Jr,"").trim();if(n){var i=e("Content-Type");(i&&0===i.indexOf(Yr)||Ce(n))&&(t=q(n))}}return t}function Ce(t){var e=t.match(Zr);return e&&Qr[e[0]].test(t)}function Me(t){function e(t,e){t&&(r[t]=r[t]?r[t]+", "+e:e)}var n,r=gt();return x(t)?i(t.split("\n"),function(t){n=t.indexOf(":"),e(Ti(Xi(t.substr(0,n))),Xi(t.substr(n+1)))}):w(t)&&i(t,function(t,n){e(Ti(n),Xi(t))}),r}function $e(t){var e;return function(n){if(e||(e=Me(t)),n){var i=e[Ti(n)];return void 0===i&&(i=null),i}return e}}function Fe(t,e,n,r){return _(r)?r(t,e,n):(i(r,function(i){t=i(t,e,n)}),t)}function Te(t){return 200<=t&&t<300}function Le(){var t=this.defaults={transformResponse:[Se],transformRequest:[function(t){return!w(t)||$(t)||T(t)||F(t)?t:G(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:U(Kr),put:U(Kr),patch:U(Kr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(t){return y(t)?(n=!!t,this):n};var r=!0;this.useLegacyPromiseExtensions=function(t){return y(t)?(r=!!t,this):r};var o=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,a,c,u,h,f){function d(n){function o(t){var e=l({},t);return e.data=Fe(t.data,t.headers,t.status,c.transformResponse),Te(t.status)?e:h.reject(e)}function s(t,e){var n,r={};return i(t,function(t,i){_(t)?(n=t(e),null!=n&&(r[i]=n)):r[i]=t}),r}function a(e){var n,i,r,o=t.headers,a=l({},e.headers);o=l({},o.common,o[Ti(e.method)]);t:for(n in o){i=Ti(n);for(r in a)if(Ti(r)===i)continue t;a[n]=o[n]}return s(a,U(e))}if(!w(n))throw e("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!x(n.url))throw e("$http")("badreq","Http request configuration url must be a string.  Received: {0}",n.url);var c=l({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},n);c.headers=a(n),c.method=Li(c.method),c.paramSerializer=x(c.paramSerializer)?f.get(c.paramSerializer):c.paramSerializer;var u=function(e){var n=e.headers,r=Fe(e.data,$e(n),void 0,e.transformRequest);return v(r)&&i(n,function(t,e){"content-type"===Ti(e)&&delete n[e]}),v(e.withCredentials)&&!v(t.withCredentials)&&(e.withCredentials=t.withCredentials),m(e,r).then(o,o)},d=[u,void 0],p=h.when(c);for(i(E,function(t){(t.request||t.requestError)&&d.unshift(t.request,t.requestError),(t.response||t.responseError)&&d.push(t.response,t.responseError)});d.length;){var g=d.shift(),y=d.shift();p=p.then(g,y)}return r?(p.success=function(t){return ht(t,"fn"),p.then(function(e){t(e.data,e.status,e.headers,c)}),p},p.error=function(t){return ht(t,"fn"),p.then(null,function(e){t(e.data,e.status,e.headers,c)}),p}):(p.success=eo("success"),p.error=eo("error")),p}function p(t){i(arguments,function(t){d[t]=function(e,n){return d(l({},n||{},{method:t,url:e}))}})}function g(t){i(arguments,function(t){d[t]=function(e,n,i){return d(l({},i||{},{method:t,url:e,data:n}))}})}function m(e,r){function o(t){if(t){var e={};return i(t,function(t,i){e[i]=function(e){function i(){t(e)}n?u.$applyAsync(i):u.$$phase?i():u.$apply(i)}}),e}}function c(t,e,i,r){function o(){l(e,t,i,r)}g&&(Te(t)?g.put(S,[t,e,Me(i),r]):g.remove(S)),n?u.$applyAsync(o):(o(),u.$$phase||u.$apply())}function l(t,n,i,r){n=n>=-1?n:0,(Te(n)?x.resolve:x.reject)({data:t,status:n,headers:$e(i),config:e,statusText:r})}function f(t){l(t.data,t.status,U(t.headers()),t.statusText)}function p(){var t=d.pendingRequests.indexOf(e);t!==-1&&d.pendingRequests.splice(t,1)}var g,m,x=h.defer(),E=x.promise,_=e.headers,S=b(e.url,e.paramSerializer(e.params));if(d.pendingRequests.push(e),E.then(p,p),!e.cache&&!t.cache||e.cache===!1||"GET"!==e.method&&"JSONP"!==e.method||(g=w(e.cache)?e.cache:w(t.cache)?t.cache:A),g&&(m=g.get(S),y(m)?k(m)?m.then(f,f):Gi(m)?l(m[1],m[0],U(m[2]),m[3]):l(m,200,{},"OK"):g.put(S,E)),v(m)){var C=Rn(e.url)?a()[e.xsrfCookieName||t.xsrfCookieName]:void 0;C&&(_[e.xsrfHeaderName||t.xsrfHeaderName]=C),s(e.method,S,r,c,_,e.timeout,e.withCredentials,e.responseType,o(e.eventHandlers),o(e.uploadEventHandlers))}return E}function b(t,e){return e.length>0&&(t+=(t.indexOf("?")==-1?"?":"&")+e),t}var A=c("$http");t.paramSerializer=x(t.paramSerializer)?f.get(t.paramSerializer):t.paramSerializer;var E=[];return i(o,function(t){E.unshift(x(t)?f.get(t):f.invoke(t))}),d.pendingRequests=[],p("get","delete","head","jsonp"),g("post","put","patch"),d.defaults=t,d}]}function ke(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Re(){this.$get=["$browser","$window","$document","$xhrFactory",function(t,e,n,i){return De(t,i,t.defer,e.angular.callbacks,n[0])}]}function De(t,e,n,r,o){function s(t,e,n){var i=o.createElement("script"),s=null;return i.type="text/javascript",i.src=t,i.async=!0,s=function(t){fr(i,"load",s),fr(i,"error",s),o.body.removeChild(i),i=null;var a=-1,c="unknown";t&&("load"!==t.type||r[e].called||(t={type:"error"}),c=t.type,a="error"===t.type?404:200),n&&n(a,c)},hr(i,"load",s),hr(i,"error",s),o.body.appendChild(i),s}return function(o,a,c,l,u,h,f,p,g,m){function w(){A&&A(),E&&E.abort()}function b(e,i,r,o,s){y(C)&&n.cancel(C),A=E=null,e(i,r,o,s),t.$$completeOutstandingRequest(d)}if(t.$$incOutstandingRequestCount(),a=a||t.url(),"jsonp"==Ti(o)){var x="_"+(r.counter++).toString(36);r[x]=function(t){r[x].data=t,r[x].called=!0};var A=s(a.replace("JSON_CALLBACK","angular.callbacks."+x),x,function(t,e){b(l,t,r[x].data,"",e),r[x]=d})}else{var E=e(o,a);E.open(o,a,!0),i(u,function(t,e){y(t)&&E.setRequestHeader(e,t)}),E.onload=function(){var t=E.statusText||"",e="response"in E?E.response:E.responseText,n=1223===E.status?204:E.status;0===n&&(n=e?200:"file"==kn(a).protocol?404:0),b(l,n,e,E.getAllResponseHeaders(),t)};var _=function(){b(l,-1,null,null,"")};if(E.onerror=_,E.onabort=_,i(g,function(t,e){E.addEventListener(e,t)}),i(m,function(t,e){E.upload.addEventListener(e,t)}),f&&(E.withCredentials=!0),p)try{E.responseType=p}catch(S){if("json"!==p)throw S}E.send(v(c)?null:c)}if(h>0)var C=n(w,h);else k(h)&&h.then(w)}}function Be(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function o(t){return"\\\\\\"+t}function s(n){return n.replace(d,t).replace(p,e)}function a(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=G(t)}return t}function c(t,e,n,i){var r;return r=t.$watch(function(t){return r(),i(t)},e,n)}function u(o,u,d,p){function m(t){try{return t=k(t),p&&!y(t)?t:a(t)}catch(e){i(no.interr(o,e))}}if(!o.length||o.indexOf(t)===-1){var w;if(!u){var b=s(o);w=g(b),w.exp=o,w.expressions=[],w.$$watchDelegate=c}return w}p=!!p;for(var x,A,E,S=0,C=[],M=[],$=o.length,F=[],T=[];S<$;){if((x=o.indexOf(t,S))==-1||(A=o.indexOf(e,x+h))==-1){S!==$&&F.push(s(o.substring(S)));break}S!==x&&F.push(s(o.substring(S,x))),E=o.substring(x+h,A),C.push(E),M.push(n(E,m)),S=A+f,T.push(F.length),F.push("")}if(d&&F.length>1&&no.throwNoconcat(o),!u||C.length){var L=function(t){for(var e=0,n=C.length;e<n;e++){if(p&&v(t[e]))return;F[T[e]]=t[e]}return F.join("")},k=function(t){return d?r.getTrusted(d,t):r.valueOf(t)};return l(function(t){var e=0,n=C.length,r=new Array(n);try{for(;e<n;e++)r[e]=M[e](t);return L(r)}catch(s){i(no.interr(o,s))}},{exp:o,expressions:C,$$watchDelegate:function(t,e){var n;return t.$watchGroup(M,function(i,r){var o=L(i);_(e)&&e.call(this,o,i!==r?n:o,t),n=o})}})}}var h=t.length,f=e.length,d=new RegExp(t.replace(/./g,o),"g"),p=new RegExp(e.replace(/./g,o),"g");return u.startSymbol=function(){return t},u.endSymbol=function(){return e},u}]}function Pe(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,i,r){function o(o,a,c,l){function u(){h?o.apply(null,f):o(g)}var h=arguments.length>4,f=h?H(arguments,4):[],d=e.setInterval,p=e.clearInterval,g=0,m=y(l)&&!l,v=(m?i:n).defer(),w=v.promise;return c=y(c)?c:0,w.$$intervalId=d(function(){m?r.defer(u):t.$evalAsync(u),v.notify(g++),c>0&&g>=c&&(v.resolve(g),p(w.$$intervalId),delete s[w.$$intervalId]),m||t.$apply()},a),s[w.$$intervalId]=v,w}var s={};return o.cancel=function(t){return!!(t&&t.$$intervalId in s)&&(s[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete s[t.$$intervalId],!0)},o}]}function Oe(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=et(e[n]);return e.join("/")}function Ie(t,e){var n=kn(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=h(n.port)||ro[n.protocol]||null}function Ne(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var i=kn(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=J(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Ue(t,e){if(0===e.indexOf(t))return e.substr(t.length)}function je(t){var e=t.indexOf("#");return e==-1?t:t.substr(0,e)}function ze(t){return t.replace(/(#.+)|#$/,"$1")}function He(t){return t.substr(0,je(t).lastIndexOf("/")+1)}function We(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function Ve(t,e,n){this.$$html5=!0,n=n||"",Ie(t,this),this.$$parse=function(t){var n=Ue(e,t);if(!x(n))throw oo("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Ne(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=tt(this.$$search),n=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Oe(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,s,a;return y(o=Ue(t,i))?(s=o,a=y(o=Ue(n,o))?e+(Ue("/",o)||o):t+s):y(o=Ue(e,i))?a=e+o:e==i+"/"&&(a=e),a&&this.$$parse(a),!!a}}function Ge(t,e,n){Ie(t,this),this.$$parse=function(i){function r(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;return 0===e.indexOf(n)&&(e=e.replace(n,"")),r.exec(e)?t:(i=r.exec(t),i?i[1]:t)}var o,s=Ue(t,i)||Ue(e,i);v(s)||"#"!==s.charAt(0)?this.$$html5?o=s:(o="",v(s)&&(t=i,this.replace())):(o=Ue(n,s),v(o)&&(o=s)),Ne(o,this),this.$$path=r(this.$$path,o,t),this.$$compose()},this.$$compose=function(){var e=tt(this.$$search),i=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Oe(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return je(t)==je(e)&&(this.$$parse(e),!0)}}function qe(t,e,n){this.$$html5=!0,Ge.apply(this,arguments),this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,s;return t==je(i)?o=i:(s=Ue(e,i))?o=t+n+s:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o},this.$$compose=function(){var e=tt(this.$$search),i=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Oe(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+n+this.$$url}}function Xe(t){return function(){return this[t]}}function Ye(t,e){return function(n){return v(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function Ke(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return y(e)?(t=e,this):t},this.html5Mode=function(t){return L(t)?(e.enabled=t,this):w(t)?(L(t.enabled)&&(e.enabled=t.enabled),L(t.requireBase)&&(e.requireBase=t.requireBase),L(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,s){function a(t,e,n){var r=l.url(),o=l.$$state;try{i.url(t,e,n),l.$$state=i.state()}catch(s){throw l.url(r),l.$$state=o,s}}function c(t,e){n.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}var l,u,h,f=i.baseHref(),d=i.url();if(e.enabled){if(!f&&e.requireBase)throw oo("nobase","$location in HTML5 mode requires a <base> tag to be present!");h=We(d)+(f||"/"),u=r.history?Ve:qe}else h=je(d),u=Ge;var p=He(h);l=new u(h,p,"#"+t),l.$$parseLinkUrl(d,d),l.$$state=i.state();var g=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var r=Bi(t.target);"a"!==O(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var a=r.prop("href"),c=r.attr("href")||r.attr("xlink:href");w(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=kn(a.animVal).href),g.test(a)||!a||r.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(a,c)&&(t.preventDefault(),l.absUrl()!=i.url()&&(n.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}),ze(l.absUrl())!=ze(d)&&i.url(l.absUrl(),!0);var m=!0;return i.onUrlChange(function(t,e){return v(Ue(p,t))?void(s.location.href=t):(n.$evalAsync(function(){var i,r=l.absUrl(),o=l.$$state;t=ze(t),l.$$parse(t),l.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,l.absUrl()===t&&(i?(l.$$parse(r),l.$$state=o,a(r,!1,o)):(m=!1,c(r,o)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var t=ze(i.url()),e=ze(l.absUrl()),o=i.state(),s=l.$$replace,u=t!==e||l.$$html5&&r.history&&o!==l.$$state;(m||u)&&(m=!1,n.$evalAsync(function(){var e=l.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,l.$$state,o).defaultPrevented;l.absUrl()===e&&(i?(l.$$parse(t),l.$$state=o):(u&&a(e,s,o===l.$$state?null:l.$$state),c(t,o)))})),l.$$replace=!1}),l}]}function Ze(){var t=!0,e=this;this.debugEnabled=function(e){return y(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return t instanceof Error&&(t.stack?t=t.message&&t.stack.indexOf(t.message)===-1?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function o(t){var e=n.console||{},o=e[t]||e.log||d,s=!1;try{s=!!o.apply}catch(a){}return s?function(){var t=[];return i(arguments,function(e){t.push(r(e))}),o.apply(e,t)}:function(t,e){o(t,null==e?"":e)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function Qe(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ao("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function Je(t){return t+""}function tn(t,e){if(t){if(t.constructor===t)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw ao("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ao("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw ao("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function en(t,e){if(t){if(t.constructor===t)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===co||t===lo||t===uo)throw ao("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function nn(t,e){if(t&&(t===(0).constructor||t===(!1).constructor||t==="".constructor||t==={}.constructor||t===[].constructor||t===Function.constructor))throw ao("isecaf","Assigning to a constructor is disallowed! Expression: {0}",e)}function rn(t,e){return"undefined"!=typeof t?t:e}function on(t,e){return"undefined"==typeof t?e:"undefined"==typeof e?t:t+e}function sn(t,e){var n=t(e);return!n.$stateful}function an(t,e){var n,r;switch(t.type){case go.Program:n=!0,i(t.body,function(t){an(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case go.Literal:t.constant=!0,t.toWatch=[];break;case go.UnaryExpression:an(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case go.BinaryExpression:an(t.left,e),an(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case go.LogicalExpression:an(t.left,e),an(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case go.ConditionalExpression:an(t.test,e),an(t.alternate,e),an(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case go.Identifier:t.constant=!1,t.toWatch=[t];break;case go.MemberExpression:an(t.object,e),t.computed&&an(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case go.CallExpression:n=!!t.filter&&sn(e,t.callee.name),r=[],i(t.arguments,function(t){an(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&sn(e,t.callee.name)?r:[t];break;case go.AssignmentExpression:an(t.left,e),an(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case go.ArrayExpression:n=!0,r=[],i(t.elements,function(t){an(t,e),
n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=r;break;case go.ObjectExpression:n=!0,r=[],i(t.properties,function(t){an(t.value,e),n=n&&t.value.constant,t.value.constant||r.push.apply(r,t.value.toWatch)}),t.constant=n,t.toWatch=r;break;case go.ThisExpression:t.constant=!1,t.toWatch=[];break;case go.LocalsExpression:t.constant=!1,t.toWatch=[]}}function cn(t){if(1==t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function ln(t){return t.type===go.Identifier||t.type===go.MemberExpression}function un(t){if(1===t.body.length&&ln(t.body[0].expression))return{type:go.AssignmentExpression,left:t.body[0].expression,right:{type:go.NGValueParameter},operator:"="}}function hn(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===go.Literal||t.body[0].expression.type===go.ArrayExpression||t.body[0].expression.type===go.ObjectExpression)}function fn(t){return t.constant}function dn(t,e){this.astBuilder=t,this.$filter=e}function pn(t,e){this.astBuilder=t,this.$filter=e}function gn(t){return"constructor"==t}function mn(t){return _(t.valueOf)?t.valueOf():vo.call(t)}function vn(){var t,e,n=gt(),r=gt(),o={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(t,e){o[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(s){function a(t,e,i){var o,a,l;switch(i=i||b,typeof t){case"string":t=t.trim(),l=t;var m=i?r:n;if(o=m[l],!o){":"===t.charAt(0)&&":"===t.charAt(1)&&(a=!0,t=t.substring(2));var y=i?w:v,x=new po(y),A=new mo(x,s,y);o=A.parse(t),o.constant?o.$$watchDelegate=p:a?o.$$watchDelegate=o.literal?f:h:o.inputs&&(o.$$watchDelegate=u),i&&(o=c(o)),m[l]=o}return g(o,e);case"function":return g(t,e);default:return g(d,e)}}function c(t){function e(e,n,i,r){var o=b;b=!0;try{return t(e,n,i,r)}finally{b=o}}if(!t)return t;e.$$watchDelegate=t.$$watchDelegate,e.assign=c(t.assign),e.constant=t.constant,e.literal=t.literal;for(var n=0;t.inputs&&n<t.inputs.length;++n)t.inputs[n]=c(t.inputs[n]);return e.inputs=t.inputs,e}function l(t,e){return null==t||null==e?t===e:("object"!=typeof t||(t=mn(t),"object"!=typeof t))&&(t===e||t!==t&&e!==e)}function u(t,e,n,i,r){var o,s=i.inputs;if(1===s.length){var a=l;return s=s[0],t.$watch(function(t){var e=s(t);return l(e,a)||(o=i(t,void 0,void 0,[e]),a=e&&mn(e)),o},e,n,r)}for(var c=[],u=[],h=0,f=s.length;h<f;h++)c[h]=l,u[h]=null;return t.$watch(function(t){for(var e=!1,n=0,r=s.length;n<r;n++){var a=s[n](t);(e||(e=!l(a,c[n])))&&(u[n]=a,c[n]=a&&mn(a))}return e&&(o=i(t,void 0,void 0,u)),o},e,n,r)}function h(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,_(e)&&e.apply(this,arguments),y(t)&&i.$$postDigest(function(){y(o)&&r()})},n)}function f(t,e,n,r){function o(t){var e=!0;return i(t,function(t){y(t)||(e=!1)}),e}var s,a;return s=t.$watch(function(t){return r(t)},function(t,n,i){a=t,_(e)&&e.call(this,t,n,i),o(t)&&i.$$postDigest(function(){o(a)&&s()})},n)}function p(t,e,n,i){var r;return r=t.$watch(function(t){return r(),i(t)},e,n)}function g(t,e){if(!e)return t;var n=t.$$watchDelegate,i=!1,r=n!==f&&n!==h,o=r?function(n,r,o,s){var a=i&&s?s[0]:t(n,r,o,s);return e(a,n,r)}:function(n,i,r,o){var s=t(n,i,r,o),a=e(s,n,i);return y(s)?a:s};return t.$$watchDelegate&&t.$$watchDelegate!==u?o.$$watchDelegate=t.$$watchDelegate:e.$stateful||(o.$$watchDelegate=u,i=!t.inputs,o.inputs=t.inputs?t.inputs:[t]),o}var m=Ki().noUnsafeEval,v={csp:m,expensiveChecks:!1,literals:N(o),isIdentifierStart:_(t)&&t,isIdentifierContinue:_(e)&&e},w={csp:m,expensiveChecks:!0,literals:N(o),isIdentifierStart:_(t)&&t,isIdentifierContinue:_(e)&&e},b=!1;return a.$$runningExpensiveChecks=function(){return b},a}]}function yn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return bn(function(e){t.$evalAsync(e)},e)}]}function wn(){this.$get=["$browser","$exceptionHandler",function(t,e){return bn(function(e){t.defer(e)},e)}]}function bn(t,n){function r(){this.$$state={status:0}}function o(t,e){return function(n){e.call(t,n)}}function s(t){var e,i,r;r=t.pending,t.processScheduled=!1,t.pending=void 0;for(var o=0,s=r.length;o<s;++o){i=r[o][0],e=r[o][t.status];try{_(e)?i.resolve(e(t.value)):1===t.status?i.resolve(t.value):i.reject(t.value)}catch(a){i.reject(a),n(a)}}}function a(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){s(e)}))}function c(){this.promise=new r}function u(t){var e=new c,n=0,r=Gi(t)?[]:{};return i(t,function(t,i){n++,m(t).then(function(t){r.hasOwnProperty(i)||(r[i]=t,--n||e.resolve(r))},function(t){r.hasOwnProperty(i)||e.reject(t)})}),0===n&&e.resolve(r),e.promise}var h=e("$q",TypeError),f=function(){var t=new c;return t.resolve=o(t,t.resolve),t.reject=o(t,t.reject),t.notify=o(t,t.notify),t};l(r.prototype,{then:function(t,e,n){if(v(t)&&v(e)&&v(n))return this;var i=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&a(this.$$state),i.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return g(e,!0,t)},function(e){return g(e,!1,t)},e)}}),l(c.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(h("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){function e(t){c||(c=!0,s.$$resolve(t))}function i(t){c||(c=!0,s.$$reject(t))}var r,s=this,c=!1;try{(w(t)||_(t))&&(r=t&&t.then),_(r)?(this.promise.$$state.status=-1,r.call(t,e,i,o(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,a(this.promise.$$state))}catch(l){i(l),n(l)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,a(this.promise.$$state)},notify:function(e){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&t(function(){for(var t,r,o=0,s=i.length;o<s;o++){r=i[o][0],t=i[o][3];try{r.notify(_(t)?t(e):e)}catch(a){n(a)}}})}});var d=function(t){var e=new c;return e.reject(t),e.promise},p=function(t,e){var n=new c;return e?n.resolve(t):n.reject(t),n.promise},g=function(t,e,n){var i=null;try{_(n)&&(i=n())}catch(r){return p(r,!1)}return k(i)?i.then(function(){return p(t,e)},function(t){return p(t,!1)}):p(t,e)},m=function(t,e,n,i){var r=new c;return r.resolve(t),r.promise.then(e,n,i)},y=m,b=function(t){function e(t){i.resolve(t)}function n(t){i.reject(t)}if(!_(t))throw h("norslvr","Expected resolverFn, got '{0}'",t);var i=new c;return t(e,n),i.promise};return b.prototype=r.prototype,b.defer=f,b.reject=d,b.when=m,b.resolve=y,b.all=u,b}function xn(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function An(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=s(),this.$$ChildScope=null}return e.prototype=t,e}var r=10,o=e("$rootScope"),a=null,c=null;this.digestTtl=function(t){return arguments.length&&(r=t),r},this.$get=["$exceptionHandler","$parse","$browser",function(e,l,u){function h(t){t.currentScope.$$destroyed=!0}function f(t){9===Di&&(t.$$childHead&&f(t.$$childHead),t.$$nextSibling&&f(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function p(){this.$id=s(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function g(t){if(S.$$phase)throw o("inprog","{0} already in progress",S.$$phase);S.$$phase=t}function m(){S.$$phase=null}function y(t,e){do t.$$watchersCount+=e;while(t=t.$parent)}function b(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function x(){}function A(){for(;$.length;)try{$.shift()()}catch(t){e(t)}c=null}function E(){null===c&&(c=u.defer(function(){S.$apply(A)}))}p.prototype={constructor:p,$new:function(e,n){var i;return n=n||this,e?(i=new p,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),i=new this.$$ChildScope),i.$parent=n,i.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=i,n.$$childTail=i):n.$$childHead=n.$$childTail=i,(e||n!=this)&&i.$on("$destroy",h),i},$watch:function(t,e,n,i){var r=l(t);if(r.$$watchDelegate)return r.$$watchDelegate(this,e,n,r,t);var o=this,s=o.$$watchers,c={fn:e,last:x,get:r,exp:i||t,eq:!!n};return a=null,_(e)||(c.fn=d),s||(s=o.$$watchers=[]),s.unshift(c),y(this,1),function(){I(s,c)>=0&&y(o,-1),a=null}},$watchGroup:function(t,e){function n(){c=!1,l?(l=!1,e(o,o,a)):e(o,r,a)}var r=new Array(t.length),o=new Array(t.length),s=[],a=this,c=!1,l=!0;if(!t.length){var u=!0;return a.$evalAsync(function(){u&&e(o,o,a)}),function(){u=!1}}return 1===t.length?this.$watch(t[0],function(t,n,i){o[0]=t,r[0]=n,e(o,t===n?o:r,i)}):(i(t,function(t,e){var i=a.$watch(t,function(t,i){o[e]=t,r[e]=i,c||(c=!0,a.$evalAsync(n))});s.push(i)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(t,e){function i(t){o=t;var e,i,r,a,c;if(!v(o)){if(w(o))if(n(o)){s!==d&&(s=d,m=s.length=0,h++),e=o.length,m!==e&&(h++,s.length=m=e);for(var l=0;l<e;l++)c=s[l],a=o[l],r=c!==c&&a!==a,r||c===a||(h++,s[l]=a)}else{s!==p&&(s=p={},m=0,h++),e=0;for(i in o)Fi.call(o,i)&&(e++,a=o[i],c=s[i],i in s?(r=c!==c&&a!==a,r||c===a||(h++,s[i]=a)):(m++,s[i]=a,h++));if(m>e){h++;for(i in s)Fi.call(o,i)||(m--,delete s[i])}}else s!==o&&(s=o,h++);return h}}function r(){if(g?(g=!1,e(o,o,c)):e(o,a,c),u)if(w(o))if(n(o)){a=new Array(o.length);for(var t=0;t<o.length;t++)a[t]=o[t]}else{a={};for(var i in o)Fi.call(o,i)&&(a[i]=o[i])}else a=o}i.$stateful=!0;var o,s,a,c=this,u=e.length>1,h=0,f=l(t,i),d=[],p={},g=!0,m=0;return this.$watch(f,r)},$digest:function(){var t,n,i,s,l,h,f,d,p,v,y,w,b=r,E=this,$=[];g("$digest"),u.$$checkUrlChange(),this===S&&null!==c&&(u.defer.cancel(c),A()),a=null;do{for(d=!1,v=E;C.length;){try{w=C.shift(),w.scope.$eval(w.expression,w.locals)}catch(F){e(F)}a=null}t:do{if(h=v.$$watchers)for(f=h.length;f--;)try{if(t=h[f])if(l=t.get,(n=l(v))===(i=t.last)||(t.eq?j(n,i):"number"==typeof n&&"number"==typeof i&&isNaN(n)&&isNaN(i))){if(t===a){d=!1;break t}}else d=!0,a=t,t.last=t.eq?N(n,null):n,s=t.fn,s(n,i===x?n:i,v),b<5&&(y=4-b,$[y]||($[y]=[]),$[y].push({msg:_(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:n,oldVal:i}))}catch(F){e(F)}if(!(p=v.$$watchersCount&&v.$$childHead||v!==E&&v.$$nextSibling))for(;v!==E&&!(p=v.$$nextSibling);)v=v.$parent}while(v=p);if((d||C.length)&&!b--)throw m(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",r,$)}while(d||C.length);for(m();M.length;)try{M.shift()()}catch(F){e(F)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===S&&u.$$applicationDestroyed(),y(this,-this.$$watchersCount);for(var e in this.$$listenerCount)b(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=d,this.$on=this.$watch=this.$watchGroup=function(){return d},this.$$listeners={},this.$$nextSibling=null,f(this)}},$eval:function(t,e){return l(t)(this,e)},$evalAsync:function(t,e){S.$$phase||C.length||u.defer(function(){C.length&&S.$digest()}),C.push({scope:this,expression:l(t),locals:e})},$$postDigest:function(t){M.push(t)},$apply:function(t){try{g("$apply");try{return this.$eval(t)}finally{m()}}catch(n){e(n)}finally{try{S.$digest()}catch(n){throw e(n),n}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&$.push(e),t=l(t),E()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);i!==-1&&(n[i]=null,b(r,1,t))}},$emit:function(t,n){var i,r,o,s=[],a=this,c=!1,l={name:t,targetScope:a,stopPropagation:function(){c=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=z([l],arguments,1);do{for(i=a.$$listeners[t]||s,l.currentScope=a,r=0,o=i.length;r<o;r++)if(i[r])try{i[r].apply(null,u)}catch(h){e(h)}else i.splice(r,1),r--,o--;if(c)return l.currentScope=null,l;a=a.$parent}while(a);return l.currentScope=null,l},$broadcast:function(t,n){var i=this,r=i,o=i,s={name:t,targetScope:i,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!i.$$listenerCount[t])return s;for(var a,c,l,u=z([s],arguments,1);r=o;){for(s.currentScope=r,a=r.$$listeners[t]||[],c=0,l=a.length;c<l;c++)if(a[c])try{a[c].apply(null,u)}catch(h){e(h)}else a.splice(c,1),c--,l--;if(!(o=r.$$listenerCount[t]&&r.$$childHead||r!==i&&r.$$nextSibling))for(;r!==i&&!(o=r.$$nextSibling);)r=r.$parent}return s.currentScope=null,s}};var S=new p,C=S.$$asyncQueue=[],M=S.$$postDigestQueue=[],$=S.$$applyAsyncQueue=[];return S}]}function En(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r,o=i?e:t;return r=kn(n).href,""===r||r.match(o)?n:"unsafe:"+r}}}function _n(t){if("self"===t)return t;if(x(t)){if(t.indexOf("***")>-1)throw yo("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Yi(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(S(t))return new RegExp("^"+t.source+"$");throw yo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Sn(t){var e=[];return y(t)&&i(t,function(t){e.push(_n(t))}),e}function Cn(){this.SCE_CONTEXTS=wo;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Sn(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Sn(t)),e},this.$get=["$injector",function(n){function i(t,e){return"self"===t?Rn(e):!!t.exec(e.href)}function r(n){var r,o,s=kn(n.toString()),a=!1;for(r=0,o=t.length;r<o;r++)if(i(t[r],s)){a=!0;break}if(a)for(r=0,o=e.length;r<o;r++)if(i(e[r],s)){a=!1;break}return a}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}function s(t,e){var n=h.hasOwnProperty(t)?h[t]:null;if(!n)throw yo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||v(e)||""===e)return e;if("string"!=typeof e)throw yo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)}function a(t){return t instanceof u?t.$$unwrapTrustedValue():t}function c(t,e){if(null===e||v(e)||""===e)return e;var n=h.hasOwnProperty(t)?h[t]:null;if(n&&e instanceof n)return e.$$unwrapTrustedValue();if(t===wo.RESOURCE_URL){if(r(e))return e;throw yo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===wo.HTML)return l(e);throw yo("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(t){throw yo("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(l=n.get("$sanitize"));var u=o(),h={};return h[wo.HTML]=o(u),h[wo.CSS]=o(u),h[wo.URL]=o(u),h[wo.JS]=o(u),h[wo.RESOURCE_URL]=o(h[wo.URL]),{trustAs:s,getTrusted:c,valueOf:a}}]}function Mn(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&Di<8)throw yo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=U(wo);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=p),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var o=r.parseAs,s=r.getTrusted,a=r.trustAs;return i(wo,function(t,e){var n=Ti(e);r[xt("parse_as_"+n)]=function(e){return o(t,e)},r[xt("get_trusted_"+n)]=function(e){return s(t,e)},r[xt("trust_as_"+n)]=function(e){return a(t,e)}}),r}]}function $n(){this.$get=["$window","$document",function(t,e){var n,i,r={},o=t.chrome&&t.chrome.app&&t.chrome.app.runtime,s=!o&&t.history&&t.history.pushState,a=h((/android (\d+)/.exec(Ti((t.navigator||{}).userAgent))||[])[1]),c=/Boxee/i.test((t.navigator||{}).userAgent),l=e[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,f=l.body&&l.body.style,d=!1,p=!1;if(f){for(var g in f)if(i=u.exec(g)){n=i[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in f&&"webkit"),d=!!("transition"in f||n+"Transition"in f),p=!!("animation"in f||n+"Animation"in f),!a||d&&p||(d=x(f.webkitTransition),p=x(f.webkitAnimation))}return{history:!(!s||a<4||c),hasEvent:function(t){if("input"===t&&Di<=11)return!1;if(v(r[t])){var e=l.createElement("div");r[t]="on"+t in e}return r[t]},csp:Ki(),vendorPrefix:n,transitions:d,animations:p,android:a}}]}function Fn(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$templateCache","$http","$q","$sce",function(e,n,i,r){function o(s,a){function c(t){if(!a)throw bo("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText);return i.reject(t)}o.totalPendingRequests++,x(s)&&e.get(s)||(s=r.getTrustedResourceUrl(s));var u=n.defaults&&n.defaults.transformResponse;return Gi(u)?u=u.filter(function(t){return t!==Se}):u===Se&&(u=null),n.get(s,l({cache:e,transformResponse:u},t))["finally"](function(){o.totalPendingRequests--}).then(function(t){return e.put(s,t.data),t.data},c)}return o.totalPendingRequests=0,o}]}function Tn(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={};return r.findBindings=function(t,e,n){var r=t.getElementsByClassName("ng-binding"),o=[];return i(r,function(t){var r=Wi.element(t).data("$binding");r&&i(r,function(i){if(n){var r=new RegExp("(^|\\s)"+Yi(e)+"(\\s|\\||$)");r.test(i)&&o.push(t)}else i.indexOf(e)!=-1&&o.push(t)})}),o},r.findModels=function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o=n?"=":"*=",s="["+i[r]+"model"+o+'"'+e+'"]',a=t.querySelectorAll(s);if(a.length)return a}},r.getLocation=function(){return n.url()},r.setLocation=function(e){e!==n.url()&&(n.url(e),t.$digest())},r.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},r}]}function Ln(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){function o(o,a,c){_(o)||(c=a,a=o,o=d);var l,u=H(arguments,3),h=y(c)&&!c,f=(h?i:n).defer(),p=f.promise;return l=e.defer(function(){try{f.resolve(o.apply(null,u))}catch(e){f.reject(e),r(e)}finally{delete s[p.$$timeoutId]}h||t.$apply()},a),p.$$timeoutId=l,s[l]=f,p}var s={};return o.cancel=function(t){return!!(t&&t.$$timeoutId in s)&&(s[t.$$timeoutId].reject("canceled"),delete s[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},o}]}function kn(t){var e=t;return Di&&(xo.setAttribute("href",e),e=xo.href),xo.setAttribute("href",e),{href:xo.href,protocol:xo.protocol?xo.protocol.replace(/:$/,""):"",host:xo.host,search:xo.search?xo.search.replace(/^\?/,""):"",hash:xo.hash?xo.hash.replace(/^#/,""):"",hostname:xo.hostname,port:xo.port,pathname:"/"===xo.pathname.charAt(0)?xo.pathname:"/"+xo.pathname}}function Rn(t){var e=x(t)?kn(t):t;return e.protocol===Ao.protocol&&e.host===Ao.host}function Dn(){this.$get=g(t)}function Bn(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var n=t[0]||{},i={},r="";return function(){var t,o,s,a,c,l=n.cookie||"";if(l!==r)for(r=l,t=r.split("; "),i={},s=0;s<t.length;s++)o=t[s],a=o.indexOf("="),a>0&&(c=e(o.substring(0,a)),v(i[c])&&(i[c]=e(o.substring(a+1))));return i}}function Pn(){this.$get=Bn}function On(t){function e(r,o){if(w(r)){var s={};return i(r,function(t,n){s[n]=e(n,t)}),s}return t.factory(r+n,o)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",zn),e("date",ii),e("filter",In),e("json",ri),e("limitTo",oi),e("lowercase",Fo),e("number",Hn),e("orderBy",si),e("uppercase",To)}function In(){return function(t,i,r){if(!n(t)){if(null==t)return t;throw e("filter")("notarray","Expected array but received: {0}",t)}var o,s,a=jn(i);switch(a){case"function":o=i;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":o=Nn(i,r,s);break;default:return t}return Array.prototype.filter.call(t,o)}}function Nn(t,e,n){var i,r=w(t)&&"$"in t;return e===!0?e=j:_(e)||(e=function(t,e){return!v(t)&&(null===t||null===e?t===e:!(w(e)||w(t)&&!m(t))&&(t=Ti(""+t),e=Ti(""+e),t.indexOf(e)!==-1))}),i=function(i){return r&&!w(i)?Un(i,t.$,e,!1):Un(i,t,e,n)}}function Un(t,e,n,i,r){var o=jn(t),s=jn(e);if("string"===s&&"!"===e.charAt(0))return!Un(t,e.substring(1),n,i);if(Gi(t))return t.some(function(t){return Un(t,e,n,i)});switch(o){case"object":var a;if(i){for(a in t)if("$"!==a.charAt(0)&&Un(t[a],e,n,!0))return!0;return!r&&Un(t,e,n,!1)}if("object"===s){for(a in e){var c=e[a];if(!_(c)&&!v(c)){var l="$"===a,u=l?t:t[a];if(!Un(u,c,n,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function jn(t){return null===t?"null":typeof t}function zn(t){var e=t.NUMBER_FORMATS;return function(t,n,i){return v(n)&&(n=e.CURRENCY_SYM),v(i)&&(i=e.PATTERNS[1].maxFrac),null==t?t:Gn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function Hn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Gn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Wn(t){var e,n,i,r,o,s=0;for((n=t.indexOf(_o))>-1&&(t=t.replace(_o,"")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)==So;i++);if(i==(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)==So;)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>Eo&&(e=e.splice(0,Eo-1),s=n-1,n=1),{d:e,e:s,i:n}}function Vn(t,e,n,i){var r=t.d,o=r.length-t.i;e=v(e)?Math.min(Math.max(n,o),i):+e;var s=e+t.i,a=r[s];if(s>0){r.splice(Math.max(t.i,s));for(var c=s;c<r.length;c++)r[c]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,s=e+1),r[0]=0;for(var l=1;l<s;l++)r[l]=0}if(a>=5)if(s-1<0){for(var u=0;u>s;u--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[s-1]++;for(;o<Math.max(0,e);o++)r.push(0);var h=r.reduceRight(function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)},0);h&&(r.unshift(h),t.i++)}function Gn(t,e,n,i,r){if(!x(t)&&!A(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,c=Math.abs(t)+"",l="";if(s)l="∞";else{o=Wn(c),Vn(o,r,e.minFrac,e.maxFrac);var u=o.d,h=o.i,f=o.e,d=[];for(a=u.reduce(function(t,e){return t&&!e},!0);h<0;)u.unshift(0),h++;h>0?d=u.splice(h):(d=u,u=[0]);var p=[];for(u.length>=e.lgSize&&p.unshift(u.splice(-e.lgSize).join(""));u.length>e.gSize;)p.unshift(u.splice(-e.gSize).join(""));u.length&&p.unshift(u.join("")),l=p.join(n),d.length&&(l+=i+d.join("")),f&&(l+="e+"+f)}return t<0&&!a?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function qn(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,r="-")),t=""+t;t.length<e;)t=So+t;return n&&(t=t.substr(t.length-e)),r+t}function Xn(t,e,n,i,r){return n=n||0,function(o){var s=o["get"+t]();return(n>0||s>-n)&&(s+=n),0===s&&n==-12&&(s=12),qn(s,e,i,r)}}function Yn(t,e,n){return function(i,r){var o=i["get"+t](),s=(n?"STANDALONE":"")+(e?"SHORT":""),a=Li(s+t);return r[a][o]}}function Kn(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=qn(Math[i>0?"floor":"ceil"](i/60),2)+qn(Math.abs(i%60),2)}function Zn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Qn(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Jn(t){return function(e){var n=Zn(e.getFullYear()),i=Qn(e),r=+i-+n,o=1+Math.round(r/6048e5);return qn(o,t)}}function ti(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function ei(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function ni(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}function ii(t){function e(t){var e;if(e=t.match(n)){var i=new Date(0),r=0,o=0,s=e[8]?i.setUTCFullYear:i.setFullYear,a=e[8]?i.setUTCHours:i.setHours;e[9]&&(r=h(e[9]+e[10]),o=h(e[9]+e[11])),s.call(i,h(e[1]),h(e[2])-1,h(e[3]));var c=h(e[4]||0)-r,l=h(e[5]||0)-o,u=h(e[6]||0),f=Math.round(1e3*parseFloat("0."+(e[7]||0)));return a.call(i,c,l,u,f),i}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,o){var s,a,c="",l=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,x(n)&&(n=$o.test(n)?h(n):e(n)),A(n)&&(n=new Date(n)),!E(n)||!isFinite(n.getTime()))return n;for(;r;)a=Mo.exec(r),a?(l=z(l,a,1),r=l.pop()):(l.push(r),r=null);var u=n.getTimezoneOffset();return o&&(u=X(o,u),n=K(n,o,!0)),i(l,function(e){s=Co[e],c+=s?s(n,t.DATETIME_FORMATS,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}}function ri(){return function(t,e){return v(e)&&(e=2),G(t,e)}}function oi(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):h(e),isNaN(e)?t:(A(t)&&(t=t.toString()),Gi(t)||x(t)?(n=!n||isNaN(n)?0:h(n),n=n<0?Math.max(0,t.length+n):n,e>=0?t.slice(n,n+e):0===n?t.slice(e,t.length):t.slice(Math.max(0,n+e),n)):t)}}function si(t){function i(e,n){return n=n?-1:1,e.map(function(e){var i=1,r=p;if(_(e))r=e;else if(x(e)&&("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(i="-"==e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e),r.constant))){var o=r();r=function(t){return t[o]}}return{get:r,descending:i*n}})}function r(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function o(t,e){return"function"==typeof t.valueOf&&(t=t.valueOf(),r(t))?t:m(t)&&(t=t.toString(),r(t))?t:e}function s(t,e){var n=typeof t;return null===t?(n="string",t="null"):"string"===n?t=t.toLowerCase():"object"===n&&(t=o(t,e)),{value:t,type:n}}function a(t,e){var n=0;return t.type===e.type?t.value!==e.value&&(n=t.value<e.value?-1:1):n=t.type<e.type?-1:1,n}return function(t,r,o){function c(t,e){return{value:t,predicateValues:u.map(function(n){return s(n.get(t),e)})}}function l(t,e){for(var n=0,i=0,r=u.length;i<r&&!(n=a(t.predicateValues[i],e.predicateValues[i])*u[i].descending);++i);return n}if(null==t)return t;if(!n(t))throw e("orderBy")("notarray","Expected array but received: {0}",t);Gi(r)||(r=[r]),0===r.length&&(r=["+"]);var u=i(r,o);u.push({get:function(){return{}},descending:o?-1:1});var h=Array.prototype.map.call(t,c);return h.sort(l),t=h.map(function(t){return t.value})}}function ai(t){return _(t)&&(t={link:t}),t.restrict=t.restrict||"AC",g(t)}function ci(t,e){t.$name=e}function li(t,e,n,r,o){var s=this,a=[];s.$error={},s.$$success={},s.$pending=void 0,s.$name=o(e.name||e.ngForm||"")(n),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,s.$$parentForm=Ro,s.$rollbackViewValue=function(){i(a,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){i(a,function(t){t.$commitViewValue()})},s.$addControl=function(t){ft(t.$name,"input"),a.push(t),t.$name&&(s[t.$name]=t),t.$$parentForm=s},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],i(s.$pending,function(e,n){s.$setValidity(n,null,t)}),i(s.$error,function(e,n){s.$setValidity(n,null,t)}),i(s.$$success,function(e,n){s.$setValidity(n,null,t)}),I(a,t),t.$$parentForm=Ro},_i({ctrl:this,$element:t,set:function(t,e,n){var i=t[e];if(i){var r=i.indexOf(n);r===-1&&i.push(n)}else t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(I(i,n),0===i.length&&delete t[e])},$animate:r}),s.$setDirty=function(){r.removeClass(t,vs),r.addClass(t,ys),s.$dirty=!0,s.$pristine=!1,s.$$parentForm.$setDirty()},s.$setPristine=function(){r.setClass(t,vs,ys+" "+Do),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,i(a,function(t){t.$setPristine()})},s.$setUntouched=function(){i(a,function(t){t.$setUntouched()})},s.$setSubmitted=function(){r.addClass(t,Do),s.$submitted=!0,s.$$parentForm.$setSubmitted()}}function ui(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function hi(t,e,n,i,r,o){fi(t,e,n,i,r,o),ui(i)}function fi(t,e,n,i,r,o){var s=Ti(e[0].type);if(!r.android){var a=!1;e.on("compositionstart",function(){a=!0}),e.on("compositionend",function(){a=!1,l()})}var c,l=function(t){if(c&&(o.defer.cancel(c),c=null),!a){var r=e.val(),l=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(r=Xi(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,l)}};if(r.hasEvent("input"))e.on("input",l);else{var u=function(t,e,n){c||(c=o.defer(function(){c=null,e&&e.value===n||l(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||u(t,this,this.value)}),r.hasEvent("paste")&&e.on("paste cut",u)}e.on("change",l),Xo[s]&&i.$$hasNativeValidators&&s===n.type&&e.on(qo,function(t){if(!c){var e=this[$i],n=e.badInput,i=e.typeMismatch;c=o.defer(function(){c=null,e.badInput===n&&e.typeMismatch===i||l(t)})}}),i.$render=function(){var t=i.$isEmpty(i.$viewValue)?"":i.$viewValue;e.val()!==t&&e.val(t)}}function di(t,e){if(E(t))return t;if(x(t)){Wo.lastIndex=0;var n=Wo.exec(t);if(n){var i=+n[1],r=+n[2],o=0,s=0,a=0,c=0,l=Zn(i),u=7*(r-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),c=e.getMilliseconds()),new Date(i,0,l.getDate()+u,o,s,a,c)}}return NaN}function pi(t,e){return function(n,r){var o,s;if(E(n))return n;if(x(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Io.test(n))return new Date(n);if(t.lastIndex=0,o=t.exec(n))return o.shift(),s=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},i(o,function(t,n){n<e.length&&(s[e[n]]=+t)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,1e3*s.sss||0)}return NaN}}function gi(t,e,n,i){return function(r,o,s,a,c,l,u){function h(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function f(t){return y(t)&&!E(t)?n(t)||void 0:t}mi(r,o,s,a),fi(r,o,s,a,c,l);var d,p=a&&a.$options&&a.$options.timezone;if(a.$$parserName=t,a.$parsers.push(function(t){if(a.$isEmpty(t))return null;if(e.test(t)){var i=n(t,d);return p&&(i=K(i,p)),i}}),a.$formatters.push(function(t){if(t&&!E(t))throw _s("datefmt","Expected `{0}` to be a date",t);return h(t)?(d=t,d&&p&&(d=K(d,p,!0)),u("date")(t,i,p)):(d=null,"")}),y(s.min)||s.ngMin){var g;a.$validators.min=function(t){return!h(t)||v(g)||n(t)>=g},s.$observe("min",function(t){g=f(t),a.$validate()})}if(y(s.max)||s.ngMax){var m;a.$validators.max=function(t){return!h(t)||v(m)||n(t)<=m},s.$observe("max",function(t){m=f(t),a.$validate()})}}}function mi(t,e,n,i){var r=e[0],o=i.$$hasNativeValidators=w(r.validity);o&&i.$parsers.push(function(t){var n=e.prop($i)||{};return n.badInput||n.typeMismatch?void 0:t})}function vi(t,e,n,i,r,o){if(mi(t,e,n,i),fi(t,e,n,i,r,o),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:jo.test(t)?parseFloat(t):void 0}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!A(t))throw _s("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),y(n.min)||n.ngMin){var s;i.$validators.min=function(t){return i.$isEmpty(t)||v(s)||t>=s;
},n.$observe("min",function(t){y(t)&&!A(t)&&(t=parseFloat(t,10)),s=A(t)&&!isNaN(t)?t:void 0,i.$validate()})}if(y(n.max)||n.ngMax){var a;i.$validators.max=function(t){return i.$isEmpty(t)||v(a)||t<=a},n.$observe("max",function(t){y(t)&&!A(t)&&(t=parseFloat(t,10)),a=A(t)&&!isNaN(t)?t:void 0,i.$validate()})}}function yi(t,e,n,i,r,o){fi(t,e,n,i,r,o),ui(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||No.test(n)}}function wi(t,e,n,i,r,o){fi(t,e,n,i,r,o),ui(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||Uo.test(n)}}function bi(t,e,n,i){v(n.name)&&e.attr("name",s());var r=function(t){e[0].checked&&i.$setViewValue(n.value,t&&t.type)};e.on("click",r),i.$render=function(){var t=n.value;e[0].checked=t==i.$viewValue},n.$observe("value",i.$render)}function xi(t,e,n,i,r){var o;if(y(i)){if(o=t(i),!o.constant)throw _s("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}function Ai(t,e,n,i,r,o,s,a){var c=xi(a,t,"ngTrueValue",n.ngTrueValue,!0),l=xi(a,t,"ngFalseValue",n.ngFalseValue,!1),u=function(t){i.$setViewValue(e[0].checked,t&&t.type)};e.on("click",u),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return t===!1},i.$formatters.push(function(t){return j(t,c)}),i.$parsers.push(function(t){return t?c:l})}function Ei(t,e){return t="ngClass"+t,["$animate",function(n){function r(t,e){var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r==e[o])continue t;n.push(r)}return n}function o(t){var e=[];return Gi(t)?(i(t,function(t){e=e.concat(o(t))}),e):x(t)?t.split(" "):w(t)?(i(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}return{restrict:"AC",link:function(s,a,c){function l(t){var e=h(t,1);c.$addClass(e)}function u(t){var e=h(t,-1);c.$removeClass(e)}function h(t,e){var n=a.data("$classCounts")||gt(),r=[];return i(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&r.push(t))}),a.data("$classCounts",n),r.join(" ")}function f(t,e){var i=r(e,t),o=r(t,e);i=h(i,1),o=h(o,-1),i&&i.length&&n.addClass(a,i),o&&o.length&&n.removeClass(a,o)}function d(t){if(e===!0||s.$index%2===e){var n=o(t||[]);if(p){if(!j(t,p)){var i=o(p);f(i,n)}}else l(n)}p=Gi(t)?t.map(function(t){return U(t)}):U(t)}var p;s.$watch(c[t],d,!0),c.$observe("class",function(e){d(s.$eval(c[t]))}),"ngClass"!==t&&s.$watch("$index",function(n,i){var r=1&n;if(r!==(1&i)){var a=o(s.$eval(c[t]));r===e?l(a):u(a)}})}}}]}function _i(t){function e(t,e,a){v(e)?n("$pending",t,a):i("$pending",t,a),L(e)?e?(u(s.$error,t,a),l(s.$$success,t,a)):(l(s.$error,t,a),u(s.$$success,t,a)):(u(s.$error,t,a),u(s.$$success,t,a)),s.$pending?(r(xs,!0),s.$valid=s.$invalid=void 0,o("",null)):(r(xs,!1),s.$valid=Si(s.$error),s.$invalid=!s.$valid,o("",s.$valid));var c;c=s.$pending&&s.$pending[t]?void 0:!s.$error[t]&&(!!s.$$success[t]||null),o(t,c),s.$$parentForm.$setValidity(t,c,s)}function n(t,e,n){s[t]||(s[t]={}),l(s[t],e,n)}function i(t,e,n){s[t]&&u(s[t],e,n),Si(s[t])&&(s[t]=void 0)}function r(t,e){e&&!c[t]?(h.addClass(a,t),c[t]=!0):!e&&c[t]&&(h.removeClass(a,t),c[t]=!1)}function o(t,e){t=t?"-"+ct(t,"-"):"",r(gs+t,e===!0),r(ms+t,e===!1)}var s=t.ctrl,a=t.$element,c={},l=t.set,u=t.unset,h=t.$animate;c[ms]=!(c[gs]=a.hasClass(gs)),s.$setValidity=e}function Si(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ci(t){t[0].hasAttribute("selected")&&(t[0].selected=!0)}var Mi=/^\/(.+)\/([a-z]*)$/,$i="validity",Fi=Object.prototype.hasOwnProperty,Ti=function(t){return x(t)?t.toLowerCase():t},Li=function(t){return x(t)?t.toUpperCase():t},ki=function(t){return x(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Ri=function(t){return x(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)&-33)}):t};"i"!=="I".toLowerCase()&&(Ti=ki,Li=Ri);var Di,Bi,Pi,Oi,Ii=[].slice,Ni=[].splice,Ui=[].push,ji=Object.prototype.toString,zi=Object.getPrototypeOf,Hi=e("ng"),Wi=t.angular||(t.angular={}),Vi=0;Di=t.document.documentMode,d.$inject=[],p.$inject=[];var Gi=Array.isArray,qi=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Xi=function(t){return x(t)?t.trim():t},Yi=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ki=function(){function e(){try{return new Function(""),!1}catch(t){return!0}}if(!y(Ki.rules)){var n=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(n){var i=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");Ki.rules={noUnsafeEval:!i||i.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!i||i.indexOf("no-inline-style")!==-1}}else Ki.rules={noUnsafeEval:e(),noInlineStyle:!1}}return Ki.rules},Zi=function(){if(y(Zi.name_))return Zi.name_;var e,n,i,r,o=Ji.length;for(n=0;n<o;++n)if(i=Ji[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return Zi.name_=r},Qi=/:/g,Ji=["ng-","data-ng-","ng:","x-ng-"],tr=/[A-Z]/g,er=!1,nr=1,ir=2,rr=3,or=8,sr=9,ar=11,cr={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};Ft.expando="ng339";var lr=Ft.cache={},ur=1,hr=function(t,e,n){t.addEventListener(e,n,!1)},fr=function(t,e,n){t.removeEventListener(e,n,!1)};Ft._data=function(t){return this.cache[t[this.expando]]||{}};var dr=/([\:\-\_]+(.))/g,pr=/^moz([A-Z])/,gr={mouseleave:"mouseout",mouseenter:"mouseover"},mr=e("jqLite"),vr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,yr=/<|&#?\w+;/,wr=/<([\w:-]+)/,br=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,xr={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};xr.optgroup=xr.option,xr.tbody=xr.tfoot=xr.colgroup=xr.caption=xr.thead,xr.th=xr.td;var Ar=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))},Er=Ft.prototype={ready:function(e){function n(){i||(i=!0,e())}var i=!1;"complete"===t.document.readyState?t.setTimeout(n):(this.on("DOMContentLoaded",n),Ft(t).on("load",n))},toString:function(){var t=[];return i(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return Bi(t>=0?this[t]:this[this.length+t])},length:0,push:Ui,sort:[].sort,splice:[].splice},_r={};i("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){_r[Ti(t)]=t});var Sr={};i("input,select,option,textarea,button,form,details".split(","),function(t){Sr[t]=!0});var Cr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};i({data:Bt,removeData:Rt,hasData:_t,cleanData:St},function(t,e){Ft[e]=t}),i({data:Bt,inheritedData:jt,scope:function(t){return Bi.data(t,"$scope")||jt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return Bi.data(t,"$isolateScope")||Bi.data(t,"$isolateScopeNoTemplate")},controller:Ut,injector:function(t){return jt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Pt,css:function(t,e,n){return e=xt(e),y(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,n){var i=t.nodeType;if(i!==rr&&i!==ir&&i!==or){var r=Ti(e);if(_r[r]){if(!y(n))return t[e]||(t.attributes.getNamedItem(e)||d).specified?r:void 0;n?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(y(n))t.setAttribute(e,n);else if(t.getAttribute){var o=t.getAttribute(e,2);return null===o?void 0:o}}},prop:function(t,e,n){return y(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if(v(e)){var n=t.nodeType;return n===nr||n===rr?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(v(e)){if(t.multiple&&"select"===O(t)){var n=[];return i(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return v(e)?t.innerHTML:(Lt(t,!0),void(t.innerHTML=e))},empty:zt},function(t,e){Ft.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==zt&&v(2==t.length&&t!==Pt&&t!==Ut?e:n)){if(w(e)){for(i=0;i<o;i++)if(t===Bt)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var s=t.$dv,a=v(s)?Math.min(o,1):o,c=0;c<a;c++){var l=t(this[c],e,n);s=s?s+l:l}return s}for(i=0;i<o;i++)t(this[i],e,n);return this}}),i({removeData:Rt,on:function(t,e,n,i){if(y(i))throw mr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Et(t)){var r=Dt(t,!0),o=r.events,s=r.handle;s||(s=r.handle=qt(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],c=a.length,l=function(e,i,r){var a=o[e];a||(a=o[e]=[],a.specialHandlerWrapper=i,"$destroy"===e||r||hr(t,e,s)),a.push(n)};c--;)e=a[c],gr[e]?(l(gr[e],Yt),l(e,void 0,!0)):l(e)}},off:kt,one:function(t,e,n){t=Bi(t),t.on(e,function i(){t.off(e,n),t.off(e,i)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;Lt(t),i(new Ft(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return i(t.childNodes,function(t){t.nodeType===nr&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===nr||n===ar){e=new Ft(e);for(var i=0,r=e.length;i<r;i++){var o=e[i];t.appendChild(o)}}},prepend:function(t,e){if(t.nodeType===nr){var n=t.firstChild;i(new Ft(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){$t(t,Bi(e).eq(0).clone()[0])},remove:Ht,detach:function(t){Ht(t,!0)},after:function(t,e){var n=t,i=t.parentNode;e=new Ft(e);for(var r=0,o=e.length;r<o;r++){var s=e[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:It,removeClass:Ot,toggleClass:function(t,e,n){e&&i(e.split(" "),function(e){var i=n;v(i)&&(i=!Pt(t,e)),(i?It:Ot)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==ar?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:Tt,triggerHandler:function(t,e,n){var r,o,s,a=e.type||e,c=Dt(t),u=c&&c.events,h=u&&u[a];h&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:d,type:a,target:t},e.type&&(r=l(r,e)),o=U(h),s=n?[r].concat(n):[r],i(o,function(e){r.isImmediatePropagationStopped()||e.apply(t,s)}))}},function(t,e){Ft.prototype[e]=function(e,n,i){for(var r,o=0,s=this.length;o<s;o++)v(r)?(r=t(this[o],e,n,i),y(r)&&(r=Bi(r))):Nt(r,t(this[o],e,n,i));return y(r)?r:this},Ft.prototype.bind=Ft.prototype.on,Ft.prototype.unbind=Ft.prototype.off}),Qt.prototype={put:function(t,e){this[Zt(t,this.nextUid)]=e},get:function(t){return this[Zt(t,this.nextUid)]},remove:function(t){var e=this[t=Zt(t,this.nextUid)];return delete this[t],e}};var Mr=[function(){this.$get=[function(){return Qt}]}],$r=/^([^\(]+?)=>/,Fr=/^[^\(]*\(\s*([^\)]*)\)/m,Tr=/,/,Lr=/^\s*(_?)(\S+?)\1\s*$/,kr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Rr=e("$injector");ne.$$annotate=ee;var Dr=e("$animate"),Br=1,Pr="ng-animate",Or=function(){this.$get=d},Ir=function(){var t=new Qt,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function o(t,e,n){var r=!1;return e&&(e=x(e)?e.split(" "):Gi(e)?e:[],i(e,function(e){e&&(r=!0,t[e]=n)})),r}function s(){i(e,function(e){var n=t.get(e);if(n){var r=se(e.attr("class")),o="",s="";i(n,function(t,e){var n=!!r[e];t!==n&&(t?o+=(o.length?" ":"")+e:s+=(s.length?" ":"")+e)}),i(e,function(t){o&&It(t,o),s&&Ot(t,s)}),t.remove(e)}}),e.length=0}function a(n,i,a){var c=t.get(n)||{},l=o(c,i,!0),u=o(c,a,!1);(l||u)&&(t.put(n,c),e.push(n),1===e.length&&r.$$postDigest(s))}return{enabled:d,on:d,off:d,pin:d,push:function(t,e,i,r){r&&r(),i=i||{},i.from&&t.css(i.from),i.to&&t.css(i.to),(i.addClass||i.removeClass)&&a(t,i.addClass,i.removeClass);var o=new n;return o.complete(),o}}}]},Nr=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw Dr("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter)){var e=new RegExp("(\\s+|\\/)"+Pr+"(\\s+|\\/)");if(e.test(this.$$classNameFilter.toString()))throw Dr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Pr)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=oe(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,i,r,o){return i=i&&Bi(i),r=r&&Bi(r),i=i||r.parent(),e(n,i,r),t.push(n,"enter",ae(o))},move:function(n,i,r,o){return i=i&&Bi(i),r=r&&Bi(r),i=i||r.parent(),e(n,i,r),t.push(n,"move",ae(o))},leave:function(e,n){return t.push(e,"leave",ae(n),function(){e.remove()})},addClass:function(e,n,i){return i=ae(i),i.addClass=re(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return i=ae(i),i.removeClass=re(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return r=ae(r),r.addClass=re(r.addClass,n),r.removeClass=re(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return o=ae(o),o.from=o.from?l(o.from,n):n,o.to=o.to?l(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=re(o.tempClasses,r),t.push(e,"animate",o)}}}]}],Ur=function(){this.$get=["$$rAF",function(t){function e(e){n.push(e),n.length>1||t(function(){for(var t=0;t<n.length;t++)n[t]();n=[]})}var n=[];return function(){var t=!1;return e(function(){t=!0}),function(n){t?n():e(n)}}}]},jr=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,n,r,o){function s(t){this.setHost(t);var e=n(),i=function(t){o(t,0,!1)};this._doneCallbacks=[],this._tick=function(t){var n=r[0];n&&n.hidden?i(t):e(t)},this._state=0}var a=0,c=1,l=2;return s.chain=function(t,e){function n(){return i===t.length?void e(!0):void t[i](function(t){return t===!1?void e(!1):(i++,void n())})}var i=0;n()},s.all=function(t,e){function n(n){o=o&&n,++r===t.length&&e(o)}var r=0,o=!0;i(t,function(t){t.done(n)})},s.prototype={setHost:function(t){this.host=t||{}},done:function(t){this._state===l?t():this._doneCallbacks.push(t)},progress:d,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){e===!1?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},"catch":function(t){return this.getPromise()["catch"](t)},"finally":function(t){return this.getPromise()["finally"](t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;e._state===a&&(e._state=c,e._tick(function(){e._resolve(t)}))},_resolve:function(t){this._state!==l&&(i(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=l)}},s}]},zr=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){function r(){return t(function(){o(),a||c.complete(),a=!0}),c}function o(){s.addClass&&(e.addClass(s.addClass),s.addClass=null),s.removeClass&&(e.removeClass(s.removeClass),s.removeClass=null),s.to&&(e.css(s.to),s.to=null)}var s=i||{};s.$$prepared||(s=N(s)),s.cleanupStyles&&(s.from=s.to=null),s.from&&(e.css(s.from),s.from=null);var a,c=new n;return{start:r,end:r}}}]},Hr=e("$compile"),Wr=new fe;de.$inject=["$provide","$$sanitizeUriProvider"],pe.prototype.isFirstChange=function(){return this.previousValue===Wr};var Vr=/^((?:x|data)[\:\-_])/i,Gr=e("$controller"),qr=/^(\S+)(\s+as\s+([\w$]+))?$/,Xr=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof Bi&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Yr="application/json",Kr={"Content-Type":Yr+";charset=utf-8"},Zr=/^\[|^\{(?!\{)/,Qr={"[":/]$/,"{":/}$/},Jr=/^\)\]\}',?\n/,to=e("$http"),eo=function(t){return function(){throw to("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}},no=Wi.$interpolateMinErr=e("$interpolate");no.throwNoconcat=function(t){throw no("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},no.interr=function(t,e){return no("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var io=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ro={http:80,https:443,ftp:21},oo=e("$location"),so={$$html5:!1,$$replace:!1,absUrl:Xe("$$absUrl"),url:function(t){if(v(t))return this.$$url;var e=io.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Xe("$$protocol"),host:Xe("$$host"),port:Xe("$$port"),path:Ye("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(x(t)||A(t))t=t.toString(),this.$$search=J(t);else{if(!w(t))throw oo("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");t=N(t,{}),i(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:v(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Ye("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};i([qe,Ge,Ve],function(t){t.prototype=Object.create(so),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Ve||!this.$$html5)throw oo("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(e)?null:e,this}});var ao=e("$parse"),co=Function.prototype.call,lo=Function.prototype.apply,uo=Function.prototype.bind,ho=gt();i("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){ho[t]=!0});var fo={n:"\n",f:"\f",r:"\r",t:"\t",v:"\x0B","'":"'",'"':'"'},po=function(t){this.options=t};po.prototype={constructor:po,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=ho[e],o=ho[n],s=ho[i];if(r||o||s){var a=s?i:o?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return e.indexOf(t)!==-1},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\x0B"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=y(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw ao("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=Ti(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{var a=fo[o];n+=a||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var go=function(t,e){this.lexer=t,this.options=e};go.Program="Program",go.ExpressionStatement="ExpressionStatement",go.AssignmentExpression="AssignmentExpression",go.ConditionalExpression="ConditionalExpression",go.LogicalExpression="LogicalExpression",go.BinaryExpression="BinaryExpression",go.UnaryExpression="UnaryExpression",go.CallExpression="CallExpression",go.MemberExpression="MemberExpression",go.Identifier="Identifier",go.Literal="Literal",go.ArrayExpression="ArrayExpression",go.Property="Property",go.ObjectExpression="ObjectExpression",go.ThisExpression="ThisExpression",go.LocalsExpression="LocalsExpression",go.NGValueParameter="NGValueParameter",go.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:go.Program,body:t}},expressionStatement:function(){return{type:go.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t,e=this.expression();t=this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:go.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:go.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:go.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:go.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:go.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:go.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:go.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:go.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:go.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=N(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:go.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:go.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:go.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:go.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:go.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do t.push(this.expression());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:go.Identifier,name:t.text}},constant:function(){return{type:go.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:go.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:go.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:go.ObjectExpression,properties:e}},throwError:function(t,e){throw ao("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{"this":{type:go.ThisExpression},$locals:{type:go.LocalsExpression}}},dn.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},an(r,n.$filter);var o,s="";if(this.stage="assign",o=un(r)){this.state.computing="assign";var a=this.nextId();this.recurse(o,a),this.return_(a),s="fn.assign="+this.generateFunction("assign","s,v,l")}var c=cn(r.body);n.stage="inputs",i(c,function(t,e){var i="fn"+e;n.state[i]={vars:[],body:[],own:{}},n.state.computing=i;var r=n.nextId();n.recurse(t,r),n.return_(r),n.state.inputs.push(i),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(r);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",u=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",l)(this.$filter,Qe,tn,en,Je,nn,rn,on,t);return this.state=this.stage=void 0,u.literal=hn(r),u.constant=fn(r),u},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return i(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return i(this.state.filters,function(n,i){t.push(n+"=$filter("+e.escape(i)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,o,s){var a,c,l,u,h=this;if(r=r||d,!s&&y(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,o,!0));switch(t.type){case go.Program:i(t.body,function(e,n){h.recurse(e.expression,void 0,void 0,function(t){c=t}),n!==t.body.length-1?h.current().body.push(c,";"):h.return_(c)});break;case go.Literal:u=this.escape(t.value),this.assign(e,u),r(u);break;case go.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){c=t}),u=t.operator+"("+this.ifDefined(c,0)+")",this.assign(e,u),r(u);break;case go.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){c=t}),u="+"===t.operator?this.plus(a,c):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(c,0):"("+a+")"+t.operator+"("+c+")",this.assign(e,u),r(u);break;case go.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),r(e);break;case go.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),r(e);break;case go.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),Qe(t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),function(){h.if_("inputs"===h.stage||"s",function(){o&&1!==o&&h.if_(h.not(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))})},e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),(h.state.expensiveChecks||gn(t.name))&&h.addEnsureSafeObject(e),r(e);break;case go.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,a,void 0,function(){h.if_(h.notNull(a),function(){o&&1!==o&&h.addEnsureSafeAssignContext(a),t.computed?(c=h.nextId(),h.recurse(t.property,c),h.getStringValue(c),h.addEnsureSafeMemberName(c),o&&1!==o&&h.if_(h.not(h.computedMember(a,c)),h.lazyAssign(h.computedMember(a,c),"{}")),u=h.ensureSafeObject(h.computedMember(a,c)),h.assign(e,u),n&&(n.computed=!0,n.name=c)):(Qe(t.property.name),o&&1!==o&&h.if_(h.not(h.nonComputedMember(a,t.property.name)),h.lazyAssign(h.nonComputedMember(a,t.property.name),"{}")),u=h.nonComputedMember(a,t.property.name),(h.state.expensiveChecks||gn(t.property.name))&&(u=h.ensureSafeObject(u)),h.assign(e,u),n&&(n.computed=!1,n.name=t.property.name))},function(){h.assign(e,"undefined")}),r(e)},!!o);break;case go.CallExpression:e=e||this.nextId(),t.filter?(c=h.filter(t.callee.name),l=[],i(t.arguments,function(t){var e=h.nextId();h.recurse(t,e),l.push(e)}),u=c+"("+l.join(",")+")",h.assign(e,u),r(e)):(c=h.nextId(),a={},l=[],
h.recurse(t.callee,c,a,function(){h.if_(h.notNull(c),function(){h.addEnsureSafeFunction(c),i(t.arguments,function(t){h.recurse(t,h.nextId(),void 0,function(t){l.push(h.ensureSafeObject(t))})}),a.name?(h.state.expensiveChecks||h.addEnsureSafeObject(a.context),u=h.member(a.context,a.name,a.computed)+"("+l.join(",")+")"):u=c+"("+l.join(",")+")",u=h.ensureSafeObject(u),h.assign(e,u)},function(){h.assign(e,"undefined")}),r(e)}));break;case go.AssignmentExpression:if(c=this.nextId(),a={},!ln(t.left))throw ao("lval","Trying to assign a value to a non l-value");this.recurse(t.left,void 0,a,function(){h.if_(h.notNull(a.context),function(){h.recurse(t.right,c),h.addEnsureSafeObject(h.member(a.context,a.name,a.computed)),h.addEnsureSafeAssignContext(a.context),u=h.member(a.context,a.name,a.computed)+t.operator+c,h.assign(e,u),r(e||u)})},1);break;case go.ArrayExpression:l=[],i(t.elements,function(t){h.recurse(t,h.nextId(),void 0,function(t){l.push(t)})}),u="["+l.join(",")+"]",this.assign(e,u),r(u);break;case go.ObjectExpression:l=[],i(t.properties,function(t){h.recurse(t.value,h.nextId(),void 0,function(e){l.push(h.escape(t.key.type===go.Identifier?t.key.name:""+t.key.value)+":"+e)})}),u="{"+l.join(",")+"}",this.assign(e,u),r(u);break;case go.ThisExpression:this.assign(e,"s"),r("s");break;case go.LocalsExpression:this.assign(e,"l"),r("l");break;case go.NGValueParameter:this.assign(e,"v"),r("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(t===!0)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){var n=/[$_a-zA-Z][$_a-zA-Z0-9]*/,i=/[^$_a-zA-Z0-9]/g;return n.test(e)?t+"."+e:t+'["'+e.replace(i,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,i,r,o){var s=this;return function(){s.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(x(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(A(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(null===t)return"null";if("undefined"==typeof t)return"undefined";throw ao("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},pn.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,an(r,n.$filter);var o,s;(o=un(r))&&(s=this.recurse(o));var a,c=cn(r.body);c&&(a=[],i(c,function(t,e){var i=n.recurse(t);t.input=i,a.push(i),t.watchId=e}));var l=[];i(r.body,function(t){l.push(n.recurse(t.expression))});var u=0===r.body.length?d:1===r.body.length?l[0]:function(t,e){var n;return i(l,function(i){n=i(t,e)}),n};return s&&(u.assign=function(t,e,n){return s(t,n,e)}),a&&(u.inputs=a),u.literal=hn(r),u.constant=fn(r),u},recurse:function(t,e,n){var r,o,s,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case go.Literal:return this.value(t.value,e);case go.UnaryExpression:return o=this.recurse(t.argument),this["unary"+t.operator](o,e);case go.BinaryExpression:return r=this.recurse(t.left),o=this.recurse(t.right),this["binary"+t.operator](r,o,e);case go.LogicalExpression:return r=this.recurse(t.left),o=this.recurse(t.right),this["binary"+t.operator](r,o,e);case go.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case go.Identifier:return Qe(t.name,a.expression),a.identifier(t.name,a.expensiveChecks||gn(t.name),e,n,a.expression);case go.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(Qe(t.property.name,a.expression),o=t.property.name),t.computed&&(o=this.recurse(t.property)),t.computed?this.computedMember(r,o,e,n,a.expression):this.nonComputedMember(r,o,a.expensiveChecks,e,n,a.expression);case go.CallExpression:return s=[],i(t.arguments,function(t){s.push(a.recurse(t))}),t.filter&&(o=this.$filter(t.callee.name)),t.filter||(o=this.recurse(t.callee,!0)),t.filter?function(t,n,i,r){for(var a=[],c=0;c<s.length;++c)a.push(s[c](t,n,i,r));var l=o.apply(void 0,a,r);return e?{context:void 0,name:void 0,value:l}:l}:function(t,n,i,r){var c,l=o(t,n,i,r);if(null!=l.value){tn(l.context,a.expression),en(l.value,a.expression);for(var u=[],h=0;h<s.length;++h)u.push(tn(s[h](t,n,i,r),a.expression));c=tn(l.value.apply(l.context,u),a.expression)}return e?{value:c}:c};case go.AssignmentExpression:return r=this.recurse(t.left,!0,1),o=this.recurse(t.right),function(t,n,i,s){var c=r(t,n,i,s),l=o(t,n,i,s);return tn(c.value,a.expression),nn(c.context),c.context[c.name]=l,e?{value:l}:l};case go.ArrayExpression:return s=[],i(t.elements,function(t){s.push(a.recurse(t))}),function(t,n,i,r){for(var o=[],a=0;a<s.length;++a)o.push(s[a](t,n,i,r));return e?{value:o}:o};case go.ObjectExpression:return s=[],i(t.properties,function(t){s.push({key:t.key.type===go.Identifier?t.key.name:""+t.key.value,value:a.recurse(t.value)})}),function(t,n,i,r){for(var o={},a=0;a<s.length;++a)o[s[a].key]=s[a].value(t,n,i,r);return e?{value:o}:o};case go.ThisExpression:return function(t){return e?{value:t}:t};case go.LocalsExpression:return function(t,n){return e?{value:n}:n};case go.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=y(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=y(s)?-s:0,e?{value:s}:s}},"unary!":function(t,e){return function(n,i,r,o){var s=!t(n,i,r,o);return e?{value:s}:s}},"binary+":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s),c=e(i,r,o,s),l=on(a,c);return n?{value:l}:l}},"binary-":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s),c=e(i,r,o,s),l=(y(a)?a:0)-(y(c)?c:0);return n?{value:l}:l}},"binary*":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)*e(i,r,o,s);return n?{value:a}:a}},"binary/":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)/e(i,r,o,s);return n?{value:a}:a}},"binary%":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)%e(i,r,o,s);return n?{value:a}:a}},"binary===":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)===e(i,r,o,s);return n?{value:a}:a}},"binary!==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!==e(i,r,o,s);return n?{value:a}:a}},"binary==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)==e(i,r,o,s);return n?{value:a}:a}},"binary!=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!=e(i,r,o,s);return n?{value:a}:a}},"binary<":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<e(i,r,o,s);return n?{value:a}:a}},"binary>":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>e(i,r,o,s);return n?{value:a}:a}},"binary<=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<=e(i,r,o,s);return n?{value:a}:a}},"binary>=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>=e(i,r,o,s);return n?{value:a}:a}},"binary&&":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)&&e(i,r,o,s);return n?{value:a}:a}},"binary||":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)||e(i,r,o,s);return n?{value:a}:a}},"ternary?:":function(t,e,n,i){return function(r,o,s,a){var c=t(r,o,s,a)?e(r,o,s,a):n(r,o,s,a);return i?{value:c}:c}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n,i,r){return function(o,s,a,c){var l=s&&t in s?s:o;i&&1!==i&&l&&!l[t]&&(l[t]={});var u=l?l[t]:void 0;return e&&tn(u,r),n?{context:l,name:t,value:u}:u}},computedMember:function(t,e,n,i,r){return function(o,s,a,c){var l,u,h=t(o,s,a,c);return null!=h&&(l=e(o,s,a,c),l=Je(l),Qe(l,r),i&&1!==i&&(nn(h),h&&!h[l]&&(h[l]={})),u=h[l],tn(u,r)),n?{context:h,name:l,value:u}:u}},nonComputedMember:function(t,e,n,i,r,o){return function(s,a,c,l){var u=t(s,a,c,l);r&&1!==r&&(nn(u),u&&!u[e]&&(u[e]={}));var h=null!=u?u[e]:void 0;return(n||gn(e))&&tn(h,o),i?{context:u,name:e,value:h}:h}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}};var mo=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new go(t,n),this.astCompiler=n.csp?new pn(this.ast,e):new dn(this.ast,e)};mo.prototype={constructor:mo,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var vo=Object.prototype.valueOf,yo=e("$sce"),wo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},bo=e("$compile"),xo=t.document.createElement("a"),Ao=kn(t.location.href);Bn.$inject=["$document"],On.$inject=["$provide"];var Eo=22,_o=".",So="0";zn.$inject=["$locale"],Hn.$inject=["$locale"];var Co={yyyy:Xn("FullYear",4,0,!1,!0),yy:Xn("FullYear",2,0,!0,!0),y:Xn("FullYear",1,0,!1,!0),MMMM:Yn("Month"),MMM:Yn("Month",!0),MM:Xn("Month",2,1),M:Xn("Month",1,1),LLLL:Yn("Month",!1,!0),dd:Xn("Date",2),d:Xn("Date",1),HH:Xn("Hours",2),H:Xn("Hours",1),hh:Xn("Hours",2,-12),h:Xn("Hours",1,-12),mm:Xn("Minutes",2),m:Xn("Minutes",1),ss:Xn("Seconds",2),s:Xn("Seconds",1),sss:Xn("Milliseconds",3),EEEE:Yn("Day"),EEE:Yn("Day",!0),a:ti,Z:Kn,ww:Jn(2),w:Jn(1),G:ei,GG:ei,GGG:ei,GGGG:ni},Mo=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,$o=/^\-?\d+$/;ii.$inject=["$locale"];var Fo=g(Ti),To=g(Li);si.$inject=["$parse"];var Lo=g({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===ji.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),ko={};i(_r,function(t,e){function n(t,n,r){t.$watch(r[i],function(t){r.$set(e,!!t)})}if("multiple"!=t){var i=ge("ng-"+e),r=n;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[i]&&n(t,e,r)}),ko[i]=function(){return{restrict:"A",priority:100,link:r}}}}),i(Cr,function(t,e){ko[e]=function(){return{priority:100,link:function(t,n,i){if("ngPattern"===e&&"/"==i.ngPattern.charAt(0)){var r=i.ngPattern.match(Mi);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}t.$watch(i[e],function(t){i.$set(e,t)})}}}}),i(["src","srcset","href"],function(t){var e=ge("ng-"+t);ko[e]=function(){return{priority:99,link:function(n,i,r){var o=t,s=t;"href"===t&&"[object SVGAnimatedString]"===ji.call(i.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",o=null),r.$observe(e,function(e){return e?(r.$set(s,e),void(Di&&o&&i.prop(o,r[s]))):void("href"===t&&r.$set(s,null))})}}}});var Ro={$addControl:d,$$renameControl:ci,$removeControl:d,$setValidity:d,$setDirty:d,$setPristine:d,$setSubmitted:d},Do="ng-submitted";li.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Bo=function(t){return["$timeout","$parse",function(e,n){function i(t){return""===t?n('this[""]').assign:n(t).assign||d}var r={name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:li,compile:function(n,r){n.addClass(vs).addClass(gs);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,s){var a=s[0];if(!("action"in r)){var c=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};hr(n[0],"submit",c),n.on("$destroy",function(){e(function(){fr(n[0],"submit",c)},0,!1)})}var u=s[1]||a.$$parentForm;u.$addControl(a);var h=o?i(a.$name):d;o&&(h(t,a),r.$observe(o,function(e){a.$name!==e&&(h(t,void 0),a.$$parentForm.$$renameControl(a,e),(h=i(a.$name))(t,a))})),n.on("$destroy",function(){a.$$parentForm.$removeControl(a),h(t,void 0),l(a,Ro)})}}}};return r}]},Po=Bo(),Oo=Bo(!0),Io=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,No=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Uo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,jo=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,zo=/^(\d{4,})-(\d{2})-(\d{2})$/,Ho=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Wo=/^(\d{4,})-W(\d\d)$/,Vo=/^(\d{4,})-(\d\d)$/,Go=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,qo="keydown wheel mousedown",Xo=gt();i("date,datetime-local,month,time,week".split(","),function(t){Xo[t]=!0});var Yo={text:hi,date:gi("date",zo,pi(zo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":gi("datetimelocal",Ho,pi(Ho,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:gi("time",Go,pi(Go,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:gi("week",Wo,di,"yyyy-Www"),month:gi("month",Vo,pi(Vo,["yyyy","MM"]),"yyyy-MM"),number:vi,url:yi,email:wi,radio:bi,checkbox:Ai,hidden:d,button:d,submit:d,reset:d,file:d},Ko=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,s,a){a[0]&&(Yo[Ti(s.type)]||Yo.text)(r,o,s,a[0],e,t,n,i)}}}}],Zo=/^(true|false|\d+)$/,Qo=function(){return{restrict:"A",priority:100,compile:function(t,e){return Zo.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Jo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,function(t){n.textContent=v(t)?"":t})}}}}],ts=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(t){i.textContent=v(t)?"":t})}}}}],es=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),s=e(r.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(s,function(){i.html(t.getTrustedHtml(o(e))||"")})}}}}],ns=g({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),is=Ei("",!0),rs=Ei("Odd",0),os=Ei("Even",1),ss=ai({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),as=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],cs={},ls={blur:!0,focus:!0};i("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=ge("ng-"+t);cs[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var s=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var r=function(){s(e,{$event:n})};ls[t]&&i.$$phase?e.$evalAsync(r):e.$apply(r)})}}}}]});var us=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,c,l;n.$watch(r.ngIf,function(n){n?c||s(function(n,o){c=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),a={clone:n},t.enter(n,i.parent(),i)}):(l&&(l.remove(),l=null),c&&(c.$destroy(),c=null),a&&(l=pt(a.clone),t.leave(l).then(function(){l=null}),a=null))})}}}],hs=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Wi.noop,compile:function(i,r){var o=r.ngInclude||r.src,s=r.onload||"",a=r.autoscroll;return function(i,r,c,l,u){var h,f,d,p=0,g=function(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),d&&(n.leave(d).then(function(){f=null}),f=d,d=null)};i.$watch(o,function(o){var c=function(){!y(a)||a&&!i.$eval(a)||e()},f=++p;o?(t(o,!0).then(function(t){if(!i.$$destroyed&&f===p){var e=i.$new();l.template=t;var a=u(e,function(t){g(),n.enter(t,null,r).then(c)});h=e,d=a,h.$emit("$includeContentLoaded",o),i.$eval(s)}},function(){i.$$destroyed||f===p&&(g(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(g(),l.template=null)})}}}}],fs=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){return ji.call(i[0]).match(/SVG/)?(i.empty(),void e(Ct(o.template,t.document).childNodes)(n,function(t){i.append(t)},{futureParentElement:i})):(i.html(o.template),void e(i.contents())(n))}}}],ds=ai({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),ps=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var o=e.attr(n.$attr.ngList)||", ",s="false"!==n.ngTrim,a=s?Xi(o):o,c=function(t){if(!v(t)){var e=[];return t&&i(t.split(a),function(t){t&&e.push(s?Xi(t):t)}),e}};r.$parsers.push(c),r.$formatters.push(function(t){if(Gi(t))return t.join(o)}),r.$isEmpty=function(t){return!t||!t.length}}}},gs="ng-valid",ms="ng-invalid",vs="ng-pristine",ys="ng-dirty",ws="ng-untouched",bs="ng-touched",xs="ng-pending",As="ng-empty",Es="ng-not-empty",_s=e("ngModel"),Ss=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,n,r,o,s,a,c,l,u){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(t),this.$$parentForm=Ro;var h,f=o(n.ngModel),p=f.assign,g=f,m=p,w=null,b=this;this.$$setOptions=function(t){if(b.$options=t,t&&t.getterSetter){var e=o(n.ngModel+"()"),i=o(n.ngModel+"($$$p)");g=function(t){var n=f(t);return _(n)&&(n=e(t)),n},m=function(t,e){_(f(t))?i(t,{$$$p:e}):p(t,e)}}else if(!f.assign)throw _s("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,Z(r))},this.$render=d,this.$isEmpty=function(t){return v(t)||""===t||null===t||t!==t},this.$$updateEmptyClasses=function(t){b.$isEmpty(t)?(s.removeClass(r,Es),s.addClass(r,As)):(s.removeClass(r,As),s.addClass(r,Es))};var x=0;_i({ctrl:this,$element:r,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:s}),this.$setPristine=function(){b.$dirty=!1,b.$pristine=!0,s.removeClass(r,ys),s.addClass(r,vs)},this.$setDirty=function(){b.$dirty=!0,b.$pristine=!1,s.removeClass(r,vs),s.addClass(r,ys),b.$$parentForm.$setDirty()},this.$setUntouched=function(){b.$touched=!1,b.$untouched=!0,s.setClass(r,ws,bs)},this.$setTouched=function(){b.$touched=!0,b.$untouched=!1,s.setClass(r,bs,ws)},this.$rollbackViewValue=function(){a.cancel(w),b.$viewValue=b.$$lastCommittedViewValue,b.$render()},this.$validate=function(){if(!A(b.$modelValue)||!isNaN(b.$modelValue)){var t=b.$$lastCommittedViewValue,e=b.$$rawModelValue,n=b.$valid,i=b.$modelValue,r=b.$options&&b.$options.allowInvalid;b.$$runValidators(e,t,function(t){r||n===t||(b.$modelValue=t?e:void 0,b.$modelValue!==i&&b.$$writeModelToScope())})}},this.$$runValidators=function(t,e,n){function r(){var t=b.$$parserName||"parse";return v(h)?(a(t,null),!0):(h||(i(b.$validators,function(t,e){a(e,null)}),i(b.$asyncValidators,function(t,e){a(e,null)})),a(t,h),h)}function o(){var n=!0;return i(b.$validators,function(i,r){var o=i(t,e);n=n&&o,a(r,o)}),!!n||(i(b.$asyncValidators,function(t,e){a(e,null)}),!1)}function s(){var n=[],r=!0;i(b.$asyncValidators,function(i,o){var s=i(t,e);if(!k(s))throw _s("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(o,void 0),n.push(s.then(function(){a(o,!0)},function(){r=!1,a(o,!1)}))}),n.length?l.all(n).then(function(){c(r)},d):c(!0)}function a(t,e){u===x&&b.$setValidity(t,e)}function c(t){u===x&&n(t)}x++;var u=x;return r()&&o()?void s():void c(!1)},this.$commitViewValue=function(){var t=b.$viewValue;a.cancel(w),(b.$$lastCommittedViewValue!==t||""===t&&b.$$hasNativeValidators)&&(b.$$updateEmptyClasses(t),b.$$lastCommittedViewValue=t,b.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){b.$modelValue!==o&&b.$$writeModelToScope()}var n=b.$$lastCommittedViewValue,i=n;if(h=!v(i)||void 0)for(var r=0;r<b.$parsers.length;r++)if(i=b.$parsers[r](i),v(i)){h=!1;break}A(b.$modelValue)&&isNaN(b.$modelValue)&&(b.$modelValue=g(t));var o=b.$modelValue,s=b.$options&&b.$options.allowInvalid;b.$$rawModelValue=i,s&&(b.$modelValue=i,e()),b.$$runValidators(i,b.$$lastCommittedViewValue,function(t){s||(b.$modelValue=t?i:void 0,e())})},this.$$writeModelToScope=function(){m(t,b.$modelValue),i(b.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){b.$viewValue=t,b.$options&&!b.$options.updateOnDefault||b.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,i=0,r=b.$options;r&&y(r.debounce)&&(n=r.debounce,A(n)?i=n:A(n[e])?i=n[e]:A(n["default"])&&(i=n["default"])),a.cancel(w),i?w=a(function(){b.$commitViewValue()},i):c.$$phase?b.$commitViewValue():t.$apply(function(){b.$commitViewValue()})},t.$watch(function(){var e=g(t);if(e!==b.$modelValue&&(b.$modelValue===b.$modelValue||e===e)){b.$modelValue=b.$$rawModelValue=e,h=void 0;for(var n=b.$formatters,i=n.length,r=e;i--;)r=n[i](r);b.$viewValue!==r&&(b.$$updateEmptyClasses(r),b.$viewValue=b.$$lastCommittedViewValue=r,b.$render(),b.$$runValidators(e,r,d))}return e})}],Cs=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ss,priority:1,compile:function(e){return e.addClass(vs).addClass(ws).addClass(gs),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)}),t.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(e,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],Ms=/(\s+|^)default(\s+|$)/,$s=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=N(t.$eval(e.ngModelOptions)),y(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Xi(this.$options.updateOn.replace(Ms,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Fs=ai({terminal:!0,priority:1e3}),Ts=e("ngOptions"),Ls=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ks=["$compile","$document","$parse",function(e,r,o){function s(t,e,i){function r(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function s(t){var e;if(!l&&n(t))e=t;else{e=[];for(var i in t)t.hasOwnProperty(i)&&"$"!==i.charAt(0)&&e.push(i)}return e}var a=t.match(Ls);if(!a)throw Ts("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,Z(e));var c=a[5]||a[7],l=a[6],u=/ as /.test(a[0])&&a[1],h=a[9],f=o(a[2]?a[1]:c),d=u&&o(u),p=d||f,g=h&&o(h),m=h?function(t,e){return g(i,e)}:function(t){return Zt(t)},v=function(t,e){return m(t,E(t,e))},y=o(a[2]||a[1]),w=o(a[3]||""),b=o(a[4]||""),x=o(a[8]),A={},E=l?function(t,e){return A[l]=e,A[c]=t,A}:function(t){return A[c]=t,A};return{trackBy:h,getTrackByValue:v,getWatchables:o(x,function(t){var e=[];t=t||[];for(var n=s(t),r=n.length,o=0;o<r;o++){var c=t===n?o:n[o],l=t[c],u=E(l,c),h=m(l,u);if(e.push(h),a[2]||a[1]){var f=y(i,u);e.push(f)}if(a[4]){var d=b(i,u);e.push(d)}}return e}),getOptions:function(){for(var t=[],e={},n=x(i)||[],o=s(n),a=o.length,c=0;c<a;c++){var l=n===o?c:o[c],u=n[l],f=E(u,l),d=p(i,f),g=m(d,f),A=y(i,f),_=w(i,f),S=b(i,f),C=new r(g,d,A,_,S);t.push(C),e[g]=C}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[v(t)]},getViewValueFromOption:function(t){return h?Wi.copy(t.viewValue):t.viewValue}}}}}function a(t,n,o,a){function u(t,e){var n=c.cloneNode(!1);e.appendChild(n),h(t,n)}function h(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),t.value!==e.value&&(e.value=t.selectValue)}function f(){var t=E&&p.readValue();if(E)for(var e=E.items.length-1;e>=0;e--){var i=E.items[e];Ht(i.group?i.element.parentNode:i.element)}E=_.getOptions();var r={};if(x&&n.prepend(d),E.items.forEach(function(t){var e;y(t.group)?(e=r[t.group],e||(e=l.cloneNode(!1),S.appendChild(e),e.label=t.group,r[t.group]=e),u(t,e)):u(t,S)}),n[0].appendChild(S),g.$render(),!g.$isEmpty(t)){var o=p.readValue(),s=_.trackBy||m;(s?j(t,o):t===o)||(g.$setViewValue(o),g.$render())}}for(var d,p=a[0],g=a[1],m=o.multiple,v=0,w=n.children(),b=w.length;v<b;v++)if(""===w[v].value){d=w.eq(v);break}var x=!!d,A=Bi(c.cloneNode(!1));A.val("?");var E,_=s(o.ngOptions,n,t),S=r[0].createDocumentFragment(),C=function(){x||n.prepend(d),n.val(""),d.prop("selected",!0),d.attr("selected",!0)},M=function(){x||d.remove()},$=function(){n.prepend(A),n.val("?"),A.prop("selected",!0),A.attr("selected",!0)},F=function(){A.remove()};m?(g.$isEmpty=function(t){return!t||0===t.length},p.writeValue=function(t){E.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=E.getOptionFromViewValue(t);e&&(e.element.selected=!0)})},p.readValue=function(){var t=n.val()||[],e=[];return i(t,function(t){var n=E.selectValueMap[t];n&&!n.disabled&&e.push(E.getViewValueFromOption(n))}),e},_.trackBy&&t.$watchCollection(function(){if(Gi(g.$viewValue))return g.$viewValue.map(function(t){return _.getTrackByValue(t)})},function(){g.$render()})):(p.writeValue=function(t){var e=E.getOptionFromViewValue(t);e?(n[0].value!==e.selectValue&&(F(),M(),n[0].value=e.selectValue,e.element.selected=!0),e.element.setAttribute("selected","selected")):null===t||x?(F(),C()):(M(),$())},p.readValue=function(){var t=E.selectValueMap[n.val()];return t&&!t.disabled?(M(),F(),E.getViewValueFromOption(t)):null},_.trackBy&&t.$watch(function(){return _.getTrackByValue(g.$viewValue)},function(){g.$render()})),x?(d.remove(),e(d)(t),d.removeClass("ng-scope")):d=Bi(c.cloneNode(!1)),n.empty(),f(),t.$watchCollection(_.getWatchables,f)}var c=t.document.createElement("option"),l=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=d},post:a}}}],Rs=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(s,a,c){function l(t){a.text(t||"")}var u,h=c.count,f=c.$attr.when&&a.attr(c.$attr.when),p=c.offset||0,g=s.$eval(f)||{},m={},y=e.startSymbol(),w=e.endSymbol(),b=y+h+"-"+p+w,x=Wi.noop;i(c,function(t,e){var n=o.exec(e);if(n){var i=(n[1]?"-":"")+Ti(n[2]);g[i]=a.attr(c.$attr[e])}}),i(g,function(t,n){m[n]=e(t.replace(r,b))}),s.$watch(h,function(e){var i=parseFloat(e),r=isNaN(i);if(r||i in g||(i=t.pluralCat(i-p)),i!==u&&!(r&&A(u)&&isNaN(u))){x();var o=m[i];v(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+f),x=d,l()):x=s.$watch(o,l),u=i}})}}}],Ds=["$parse","$animate","$compile",function(t,r,o){var s="$$NG_REMOVED",a=e("ngRepeat"),c=function(t,e,n,i,r,o,s){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))},l=function(t){return t.clone[0]},u=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,h){var f=h.ngRepeat,d=o.$$createComment("end ngRepeat",f),p=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var g=p[1],m=p[2],v=p[3],y=p[4];if(p=g.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!p)throw a("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var w=p[3]||p[1],b=p[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw a("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var x,A,E,_,S={$id:Zt};return y?x=t(y):(E=function(t,e){return Zt(e)},_=function(t){return t}),function(t,e,o,h,p){x&&(A=function(e,n,i){return b&&(S[b]=e),S[w]=n,S.$index=i,x(t,S)});var g=gt();t.$watchCollection(m,function(o){var h,m,y,x,S,C,M,$,F,T,L,k,R=e[0],D=gt();if(v&&(t[v]=o),n(o))F=o,$=A||E;else{$=A||_,F=[];for(var B in o)Fi.call(o,B)&&"$"!==B.charAt(0)&&F.push(B)}for(x=F.length,L=new Array(x),h=0;h<x;h++)if(S=o===F?h:F[h],C=o[S],M=$(S,C,h),g[M])T=g[M],delete g[M],D[M]=T,L[h]=T;else{if(D[M])throw i(L,function(t){t&&t.scope&&(g[t.id]=t)}),a("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,M,C);L[h]={id:M,scope:void 0,clone:void 0},D[M]=!0}for(var P in g){if(T=g[P],k=pt(T.clone),r.leave(k),k[0].parentNode)for(h=0,m=k.length;h<m;h++)k[h][s]=!0;T.scope.$destroy()}for(h=0;h<x;h++)if(S=o===F?h:F[h],C=o[S],T=L[h],T.scope){y=R;do y=y.nextSibling;while(y&&y[s]);l(T)!=y&&r.move(pt(T.clone),null,R),R=u(T),c(T.scope,h,w,C,b,S,x)}else p(function(t,e){T.scope=e;var n=d.cloneNode(!1);t[t.length++]=n,r.enter(t,null,R),R=n,T.clone=t,D[T.id]=T,c(T.scope,h,w,C,b,S,x)});g=D})}}}}],Bs="ng-hide",Ps="ng-hide-animate",Os=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,function(e){t[e?"removeClass":"addClass"](n,Bs,{tempClasses:Ps})})}}}],Is=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,function(e){t[e?"addClass":"removeClass"](n,Bs,{tempClasses:Ps})})}}}],Ns=ai(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&i(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),Us=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,o,s){var a=o.ngSwitch||o.on,c=[],l=[],u=[],h=[],f=function(t,e){return function(){t.splice(e,1)}};n.$watch(a,function(n){var r,o;for(r=0,o=u.length;r<o;++r)t.cancel(u[r]);for(u.length=0,r=0,o=h.length;r<o;++r){var a=pt(l[r].clone);h[r].$destroy();var d=u[r]=t.leave(a);d.then(f(u,r))}l.length=0,h.length=0,(c=s.cases["!"+n]||s.cases["?"])&&i(c,function(n){n.transclude(function(i,r){h.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");
var s={clone:i};l.push(s),t.enter(i,o.parent(),o)})})})}}}],js=ai({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:e})}}),zs=ai({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),Hs=e("ngTransclude"),Ws=ai({restrict:"EAC",link:function(t,e,n,i,r){function o(t){t.length&&(e.empty(),e.append(t))}if(n.ngTransclude===n.$attr.ngTransclude&&(n.ngTransclude=""),!r)throw Hs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(e));var s=n.ngTransclude||n.ngTranscludeSlot;r(o,null,s)}}),Vs=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],Gs={$setViewValue:d,$render:d},qs=["$element","$scope",function(e,n){var i=this,r=new Qt;i.ngModelCtrl=Gs,i.unknownOption=Bi(t.document.createElement("option")),i.renderUnknownOption=function(t){var n="? "+Zt(t)+" ?";i.unknownOption.val(n),e.prepend(i.unknownOption),e.val(n)},n.$on("$destroy",function(){i.renderUnknownOption=d}),i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.readValue=function(){return i.removeUnknownOption(),e.val()},i.writeValue=function(t){i.hasOption(t)?(i.removeUnknownOption(),e.val(t),""===t&&i.emptyOption.prop("selected",!0)):null==t&&i.emptyOption?(i.removeUnknownOption(),e.val("")):i.renderUnknownOption(t)},i.addOption=function(t,e){if(e[0].nodeType!==or){ft(t,'"option value"'),""===t&&(i.emptyOption=e);var n=r.get(t)||0;r.put(t,n+1),i.ngModelCtrl.$render(),Ci(e)}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.remove(t),""===t&&(i.emptyOption=void 0)):r.put(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.registerOption=function(t,e,n,r,o){if(r){var s;n.$observe("value",function(t){y(s)&&i.removeOption(s),s=t,i.addOption(t,e)})}else o?t.$watch(o,function(t,r){n.$set("value",t),r!==t&&i.removeOption(r),i.addOption(t,e)}):i.addOption(n.value,e);e.on("$destroy",function(){i.removeOption(n.value),i.ngModelCtrl.$render()})}}],Xs=function(){function t(t,e,n,r){var o=r[1];if(o){var s=r[0];if(s.ngModelCtrl=o,e.on("change",function(){t.$apply(function(){o.$setViewValue(s.readValue())})}),n.multiple){s.readValue=function(){var t=[];return i(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},s.writeValue=function(t){var n=new Qt(t);i(e.find("option"),function(t){t.selected=y(n.get(t.value))})};var a,c=NaN;t.$watch(function(){c!==o.$viewValue||j(a,o.$viewValue)||(a=U(o.$viewValue),o.$render()),c=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}}}function e(t,e,n,i){var r=i[1];if(r){var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:qs,priority:1,link:{pre:t,post:e}}},Ys=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){if(y(n.value))var i=t(n.value,!0);else{var r=t(e.text(),!0);r||n.$set("value",e.text())}return function(t,e,n){var o="$selectController",s=e.parent(),a=s.data(o)||s.parent().data(o);a&&a.registerOption(t,e,n,i,r)}}}}],Ks=g({restrict:"E",terminal:!1}),Zs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},Qs=function(){return{restrict:"A",require:"?ngModel",link:function(t,n,i,r){if(r){var o,s=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(x(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw e("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,Z(n));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||v(o)||o.test(e)}}}}},Js=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",function(t){var e=h(t);r=isNaN(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(t,e){return r<0||i.$isEmpty(e)||e.length<=r}}}}},ta=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",function(t){r=h(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};return t.angular.bootstrap?void(t.console&&console.log("WARNING: Tried to load angular more than once.")):(lt(),wt(Wi),Wi.module("ngLocale",[],["$provide",function(t){function e(t){t+="";var e=t.indexOf(".");return e==-1?0:t.length-e-1}function n(t,n){var i=n;void 0===i&&(i=Math.min(e(t),3));var r=Math.pow(10,i),o=(t*r|0)%r;return{v:i,f:o}}var i={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var r=0|t,o=n(t,e);return 1==r&&0==o.v?i.ONE:i.OTHER}})}]),void Bi(t.document).ready(function(){rt(t.document,ot)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e,n){"use strict";var i=n(311);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(312),o=n(313),s=n(314),a=n(374),c=i.module("simulator.common",[n(560),s,a]).constant("CONFIG",window.APP_CONFIG||{}).constant("DEVICES_CONFIG",window.DEVICES_CONFIG||{}).constant("EVENTS",r).run(o);t.exports=c},function(t,e){"use strict";var n={NOTIFICATION:"simulator.notification"};t.exports=n},function(t,e){"use strict";function n(t,e){t.$on("$stateChangeStart",function(t,n,i){n.redirectTo&&(t.preventDefault(),e.go(n.redirectTo,i))})}n.$inject=["$rootScope","$state"],t.exports=n},function(t,e,n){"use strict";var i=n(315);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(316),o=n(322),s=n(327),a=n(333),c=n(339),l=n(345),u=n(353),h=n(358),f=n(364),d=n(372),p=n(373),g=i.module("simulator.common.components",[r,o,s,a,c,l,u,h,f]).directive("bindHtmlCompile",d).directive("collapse",p);t.exports=g},function(t,e,n){"use strict";var i=n(317);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(318),o=i.module("simulator.common.components.boldchat",[]).component("boldchat",r);t.exports=o},function(t,e,n){"use strict";n(319);var i=n(321),r={template:'\n    <div class="boldchat-button" ng-click="boldchat.open()">\n      <p>'+i+" Contact a Representative</p>\n    </div>\n  ",controllerAs:"boldchat",controller:["$log","$element","$scope","$window","$location",function(t,e,n,i,r){var o=angular.element(e[0]),s="457830310750908782",a=[["setAccountID","461159850398350203"],["setParameter","WebsiteID","457763915474596414"],["addStatic",{type:"chat",bdid:s}]];i._bcvma=a,i.bcLoaded=!0,i.pageViewer&&i.pageViewer.load(),this.open=function(){var t=n.$watch(function(){return document.getElementById("bc-chat-container")},function(e){e&&(o.append(e),angular.element(e).addClass("show"),t())});i._bcvmw.chatWindow({bdid:s,element:"boldchat",embed:!0,height:530,html:!1,type:"chat",video:!1,width:350})}}]};t.exports=r},function(t,e){},,function(t,e){t.exports='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M640 896q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm384 0q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm384 0q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-512-512q-204 0-381.5 69.5t-282 187.5-104.5 255q0 112 71.5 213.5t201.5 175.5l87 50-27 96q-24 91-70 172 152-63 275-171l43-38 57 6q69 8 130 8 204 0 381.5-69.5t282-187.5 104.5-255-104.5-255-282-187.5-381.5-69.5zm896 512q0 174-120 321.5t-326 233-450 85.5q-70 0-145-8-198 175-460 242-49 14-114 22h-5q-15 0-27-10.5t-16-27.5v-1q-3-4-.5-12t2-10 4.5-9.5l6-9 7-8.5 8-9q7-8 31-34.5t34.5-38 31-39.5 32.5-51 27-59 26-76q-157-89-247.5-220t-90.5-281q0-130 71-248.5t191-204.5 286-136.5 348-50.5 348 50.5 286 136.5 191 204.5 71 248.5z"></path></svg>'},function(t,e,n){"use strict";var i=n(323);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(324),o=i.module("simulator.common.components.copy",[]).directive("copy",r);t.exports=o},function(t,e,n){"use strict";function i(t,e){return{restrict:"A",scope:{copy:"<"},link:function(n,i,r){var o=angular.element(i[0]),s=t[0];i.bind("click",function(){var t=s.createElement("textarea");t.textContent=n.copy,s.body.appendChild(t);var i=s.getSelection();i.removeAllRanges(),t.select(),s.execCommand("copy")&&o.addClass("copying"),i.removeAllRanges(),s.body.removeChild(t),e(function(){o.removeClass("copying")},500)})}}}i.$inject=["$document","$timeout"],n(325),t.exports=i},function(t,e){},,function(t,e,n){"use strict";var i=n(328);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(329),o=i.module("simulator.common.components.header-bar",[]).component("headerBar",r);t.exports=o},function(t,e,n){"use strict";n(330);var i=n(332),r={template:'\n    <nav class="header-bar">\n      <div class="logo">\n        <img src="'+i+'"></img>\n        <div>Product Simulator</div>\n      </div>\n    </nav>\n  '};t.exports=r},function(t,e){},,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQwAAABiCAYAAAClBe0NAAAABGdBTUEAALGPC/xhBQAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAG7pJREFUeAHtnQe4HMWRxy1A5AyWQSSJI4NlBJhoGyFy0JHzYYExwYSP40gmCQQYkzE+TPQRBIiMCQIECAQimgwiG2EEAgQSQQiECEL3+z92xbx9s7tdtTP7dvd1fd//zWx3VXV1dU9Ndc/svm4/6SI0ffr0FehqP7AuWBKIPgIPg5HdunV7SQWRogeiB7qwBwgU3cEx4B1Qjt6j4iQwRxd2VVN1nbHqBmZ2oFtTdbTBjG1p5zGZZsPfF4GBIKSvN8H3O7KNyRwjNbAHGNv+mHet0cSJ8O/I+L5ilIvsBQ/M0qqe0J2Hvv0e/BaEBAu5YgfwFrLHMKmmqSBSw3pAN4MeRutmgr9l57zRFy52ObBVaSU6dhKw9vEgZNZsVae0UL+mO/ryvUMmiiQ8YL2YEqINf7orFi7osHJOZLYhy2hl3zjcEkWiB+x336bwGRe7liBb1GDsxsgqcESKHogeSHigVe+i89LHxRP9tJ4ug4DWyJGiB6IHEh5o1YChja3Qjc6EO2acdq9RfoaieBI90EoeaNWAMYlB+qSGgRqH7Lc1yEfR6IGW9EBLBgweiX7HaOkNTi89guCXXuEoFz3Qqh5oyYBRGKybOX7jGDgFm7sKQcchHkWiB1rXA60cMEYwbNc4hu5BZO50yEWR6IGW90DLBgwyhK8ZvcHgecMovgnv4chOMchE1uiBLuOBlg0YGkEu/LEc9gaP6nMVepr6PZF5oQpfrI4e6LIeaOmAoVElADzLYQDQK9+jwVdA+xTCVKAvIh0ONoc3JLDAGil6oGt6QO8rtDwRCD6lk3/jDdDLOC4G9NsY+nLaa2Ac9fGJCI6IFD1QzQNdImAUnUBgUHahfQohUvRA9IDRAy2/JDH6I7JHD0QPVPBADBgVnBOrogeiB9p7oEstSdp3PX7yeoC9IO3/9ALLg+KP2CzMuV7J1w8P6bH02+D1wv4Rpw1Dnt/RaBjjO9uQGQGDSaBz/Tiu50tb+t7Fu0yOzAYDe2ZF5xLAQ9qr+ADo9zDmNyrQBqjeEF3AKCd2+UGbqLn/UAv+Ub8WUqNGko3vY6OeEgURbc0FY2+wHugPVgNzA5UXv9WrL+xJp+aAgobG4Etkx3N8BNwDnqfdDzl2Fsm2ObGpF0cFPQtJdjz25/6ODvbVMvdlY/6b+Bg5P7gXeGgSQppImRH6TvAYUpA5lqN+IPZch457kNkZfOuQ/QyZNTNzQgVFtDPUYZ9ERoF5KqieUQVfL7AXuBV8DWql11BwGlh7RiPOE3Rs5jDmfWS2BKMdshI52mmuSYx2dnPa9zFyq5oaq4WZxlYCcqqHnkRokVraL8qiZ0Mw2WMEMg8A3fl+wvEch44RyMwDnnbIfo/M2cV+5HWkDV3InzrsUxA8tJpd8CwK9Cvqb4A8SLbfBNaoZku5emQ9AeND5JYD6puHnkIo91+Wpw3dtDx0O0LWzKmci1PL2216ksq8AtcJwPMDuL9E7qjUVgyFdFh3v5OBUl4rTURAP+BbS0qmJZnkr7I2Dr9k16cPnp8GtDS3I8zWpZb0vwdu0kkaYfdsQD+E/BA4HiybxpdBmWzfHig4nwK0/1EvUrqvsdVXB6ykPRstx3IjfLEWyj1taBk8hLnvuXaD+9MuYBSkrud4b7CG9oz70OFN2heFf0JWF9xeYJ1wqXacZ+GwJ9qV+D/cjahnvb0ycn38zVaWxEfaM/D+/OAI/PNuWgvoXYzy88B1IK9AUdr0fBQcC5RtrFRamdNnzTG9hzPCoV83s36FeeoQDxLZEi5PAFWfvNdtkGFi6hAwmFCfU3440N3ISloKnI5De1oFC/yrczzRKXsjcprwWdDMKBkDdPFYaXYEts1xUmmN2tdqFPzakLwoTQ5bte8yDOwH1Pd60/o0qDR8mzo0zBRv25y/0tnWtsj9zClbUYz+K/PatCJT+corCtdueY4MajoEDOmkYS1NTgSe9EYT+kBgIpylJcjpYAGT4A/MH3AYjN1THbJpIjOhS31XluFJXZVue55gpNkyowwf6e7YD+jObKUHENC4tiN09qdAwVbj1pm0OI1fhj171smIx2jndUdbuqmt4ZALEVGW5RkH3eTvDGmgVp7UgFFQOoTj350N/DcDv6VR9mj4daexkh53DeICf9kqGMCvx4EevUrvBwTot7IoVd3ZKlTgvwofTUnKMkY78VlL0CWT5Z14rpvFedi1Q9424Atl0Pc529nTKVdWjD7rZqB+a4/FSiMR8AQ/azsdlyRFDThU7yKcAd4qlhmOc8J7Mk7oESIDn9b83nT4ZmS96WVF8/DBlzDcVpGpfOVOhUlQnsNeo80wzx3o38g9mmwO23SXPA8oCDUSzYsxf8E+Tz+t/dAG8GSrEPzax+jtkKskon5vV4mhTJ2u0zuZq55MuIzK8sWVMgwtTRQs/gy+L6+ibE1fao7DsRXXxNQrog4GnhR+PHLHYue3HPOioSj2TCr1f7mMjdodfboTWWkUPlLQaCN8rsffl4JMHoP/oDXTv4uh7ULsnD9TrR2VjaLo2Y7FVUsWgGP7qlw2hs1h17LMShrXW61CXv6KAaOg9DKOVzgb2Au5/lVkD6B+myo8adXarziZC+GNtMoMyxQ0PQOi7Kpa34PN5OJZCuaNggV+ZPyK06uKH9GjMT8TrFoscx61xzMSKPCcCA4GfwTahxoCXgO10NoIH4q9FW84tTTA3JmOvOy3kny4FbbNZRWswL8rdZ6+3kw/JlTQW/8qHLM0GAM8pBe6UjfpKF8evONRisx1oHslb1DveXHrfuRmS+rls94OnAasdAcCSjVrJvTo4vHY8ARysxQN4FxPcDx6EGujcfwdDPqA+UCHMaBM73P0ABuBi4HnJTPE2l7eW7doe/JInffFrT4lenqiS/+A20rq05pJXd5z9CwL5FcrTUFgRW+7HjlFyqpEBNNd9iyg9ZKVfonAkaVCdFRLkcPBEqV1AZ/HwpP3UiRpxpN8eClZEHi+AXw1Dyi+UgDbFASNV4ltVzJ+36kMPVr2yecePVqWXgO2QN8J4EUwCXxLWTui7GvwEdB7H/tRuTVQNmIlPTk7Crs9d97QtrSsvT6UOcE3P+dZvZPxK3RpGWalYQjo2qwbWSaOnphc7bTsEAZ9vRLZ/+LzniVlIR81QY9kIo4JYc6Ch7aU8g136FLKuoNDrlRkZQrWKi0M+KzJpEfDRdqfk9Q7dpGhzFE3isPAHvjixTI8ZYuRGUWlgsZfyzKVr1CgzOOJU1uL2KZAqAvv87YC2x8tI1Kz51A1XBcKituG8if4tJy6FvvrstlZbDc4YGCYLtQTwOtFYcNRF47e39cdTne6ZTicCGakypyH0o0wCvWmG2jwE0ej29Nf97IEWW1y9gO6o1npFgSUjcnnC3PYV+cO0mPrvwBNUhchOxnBI4D2OCx6lF3pC3CeuYJoED0DlzkQIqN9oNWDWijPpGthk/LVZWtepeaJsrU5VQQHDLXPoI/jMAhoI81K/RHYl4HXmlc6PEsR3TEH1zJxkXcRbWpS/dMhvDgyukt6aQ4Ed3YIa4zuSfhqdz73dOhRun6OQ66DCLYoU9HS1upHbYCu2EFhRgXYNRVVdwBlG1aSX2shZRcKilZ6ALs/sArVym8KGIXGdNe61tnw/yCnyee5ANrSYpz0hrPtLMQudihRgPT0t9iU9oDWKH4wHF+C92HxE6Tn4bAjsN6l30RGX+ZTdpkJoWsiio4FGs9Q0hOnzUKZnXxDkJNtVtoY/y5lFRI/clqOaFljJWVrV1iFsuA3BwwG/DsaVobwisMApcUHAW14Wul8BHQX6Ex6hMY9qetaTI5lnYbvgZx5nJDR47bi+lZ7IH2M7WvZcAk6lNVlTaNQeKdR6Rb4cHajTDA7/RwPs26GVloUge2sQgX+zTku6ZB9DHuV8dadPBNRS5P3sPRQ8EWdLH6edk6j3Wl1aq9cM59QMaRcZYVyLUvWr1CfWsUF0puK/qmVlQsnUH11gmUdzpVlWEhjfKtFIJSXcdRN58pQ/gLfWhw9y1hLM9fAXAyyoXJ6gqNHvHOECogPfl17OwDPcuRi6egMcgWMgqH3cfxbHYzW+vI4Jpkugk4lbNBddwTwpK5bM0n0yryFBsDsuQPdjq264DUxNSHX07mRRsM/xihjYVeGalmD64LsZ2nAwas+6+ZkJS0blzMKaRmjIGilFxB4zCqUFb87YBQunvMwRB3Iky6kLWv6mqc9L6P8aUcDGyGzdKgcF7qWbRsD6zsI2m+4PtGOMgttGlrpCfz+vVXIwK8lwNsGfrGua+Q3sdPfSQjoRmjt9wLI9AMWUtanoGGlG7HzQ6tQVvzWTbB27WL4B0zswym8DVjvnu10lfnwHOWnlKnrlGL6/B19HkrjCgAW/2n9vRs4BoTQMjD9OoSxhEc+eypRpjR+scTnkNNpMOnn7LSUct9UqjQkvVOq8JRWr4JNs2gMSisy/Kxguxew+mwgtmnP56tqtsCnrG+Xanwp9VoSD08pr1uRZcKnGoWD9DNrF1CpwJElfY6yk9AvJzUaKUCOA72MhmlZ8if69GWA3IbwWF8Kalsyof+zhP5lE+ehp7qY/wQGgW6hQkY+2ao7s4XEvwiQ73MhfPcSY/QQyhXcLfRzmLU0GRUgtDQ8GwXwlbLoZuBZMpXqcX+uOWAUWj6b42ZgFbclHQUVrXPZdOvYlK0Euz5nUinLCM0Wig305mRzcFOxIO2I7u6UWyesVGmfJ7kcUZkn7VWQWEjCDUbKYhcFuQWMQn+HcLT6X9fSriAkYGizcw5gIQVYvdmp7K/TaKYsWqYTWo/+EXyahT50KMLrDtfIpIvemv1okmwb0Kk14ekbwFfK8hBjUfrYV3fkVqG56IiWSXnTIzSQXNaFtqcv2/WoxEz9vNR7HsO+g9wtlXTXoy6TgCFDmajamMzicY+Cjl4WSqbVaqLR6DUMusth1LpMml5V5HanXutcC+kOdFmKgCZoq5B8Mn/enWHuack4xNFOL2S0mVmJNqHSs0wcil1Z3ZAr2VexLrOAUWhlbMXWwiq1dzExjLXzuBg8bW4NA98aregFv9a6qUQw0Tr9V6mVlQuVWTyewmJNfVNUNEyR0n5tHteDHqQR6zyUfXrzU0+4OhDlut62AMqULKQAdrtFIC/ezAIGzlgbI4/PwFCtuU9FXzNM9Pux1RMk9Z+tNLnSSMFihbSKKmWXU69gW0p5PlEobSvvz3rEnMfTuDS7lUFqaWyl7RFYsoyQnrz0K1NXqVg3Am14djplEjCY/EoVTwE9M+qRnL53RrpyU0OWoTvQcEcDSkt7lcrhR10Q2jzWpqeFPoRZX0bSsqSUdHdqJUq9e2fdQXypQHsz+MaoexH4Nb5ppL2p3mkVFcq0yVm33+ysYEdbVSYBA02HAD0GzJL0q079s1SYk65L0fu1UbfuknukyOjOtFNKebWih2F4tQzT5DLlzVrcrY6G30FbyjSsNLAQ/GfI8VnX2sAZBeEn/4b12nD2fDnLpcXBreKI1WE+MlggnHFBWE9A/zNE+0nhYnXn1IU6EigzsJC+THUqfUsGm41QsLBFCbzaQ9EXzcotPT4w6iuya48maVuxvDOPChZT62UAPv2CMbqR9voY21wF/rXBowk5ZRbrJz6Hnt6NHcogG4JqChg4c256cQZYKKfe/Aa9+xXayKmJ2tQymPoHx1ejZVNgufstD/8aoG1SoUN3oN2BlXQH0uZrOXqzXEWVcj1xOQfUNEeqtGGtln8nWIVq5L8J+SOA5WmTMsgdQTJg7MxnvaZvIS2HhlgE8uatdTLsj4H9cjZS/6rgSS7MB3Nupxb1oxDWhbmsQYkmzyb0TV9Vns65HsetZpAvsl6J/BfFDynH1ymTfkswk5pF0fuWTro4jaH/yjKse2r9Gduf4sMJHPVUZCtgHYPhyIwGDUO6q7kIJyjlOga4dQQ2rAvrNNqbL5C/M9jG0aiChpUGILBIQWgHjsrYLPQJzLdVEfiYemUhVloJn/ewCrUaPxe8lnzay9Dmo4VWglkZpGhVsHLbWfgfBfnrab+hloWui71w8WoponcG6kFr0chBtOuyN28DGVQN7nXA+kSiLzKr0i+lu1p+We9AejZfLQuQTU8BKy2FgPanIv3wfov2qiykJ16bMrbdOfYDliUN7G3jmlzSqKzTyXsBHovlv3ZYr7c3tTa2Rms1dRTYWCcNSg9il+dZ+a7IKSCuAiyk9e2tBKuvKglRL74RlXjK1Ok9mF2Z8M3wPkyZLmRTjA8/QtPdDm3ax/g5UPZopftpd6xVKG9+c8BgAulOqL0LDylYHADudAhraXIm7RdTeIeK/EQYXD2luNzRgta2BwHr+wXaM3kksD1lGBMCeZNsu/Fhi2RBFz6/hr5bM8ieyBwNtCSx0BSYr7YI1IvXFDC4WLWPcCLQxWulZxA4kwtLa7LBwPOoSNH6eOyYhWMj0j0Y9Z7RMC3r/tMoI/b78OXHgXJvwPdiIG+STWm1/j2EJn5XJ/kvNEAnfeXJLl5AwWNJJY1ybgoYGH0c2MBh/OfI6J8PjZcsx2c5SJeHtFu9pUewDjIf0MaQOrSjoHtJaDv4W8uWG4CyICuthMD/ETQWtAqG8qNbG6y3gD6hMvXmw4fap7q0Tu1eTHueZXvu5gUHDAZzO6zZx2nRFTjggRLZoXwWrDQbAmdgzxJWwbz56eP3tKFHYUop86R7Ua6swULy9b8sAgnezTj/Kz7PdDmIvpnBTujWEnVb8Gc+z8WxUelxDPP6MLRPGtf7Q5nrzRcUMBjEnhh2KvA82nwCOS1B2hEXly6qQeDddhVhH5aD7Wzsmj2Mva5c2i94MucWL8d/pmwB/i+w6Ywa7Nod2eH4fJsadMwQRY+WYTcCrdV7AdEm4Ki2swb8gw/fxywF6zxpKMrVTkNSUMDA8iPA8o4eTEVGv/j9SZos5WMo1yRWumel7RHwZjzWtoL56ZPSfz239/QppB3dgf4ZwpjC8w/K7kspDy36BYxXcrH/HawGlO0FEbzdwYJAjxqVhWnppqyie0KB9qb0+FztNCrdjmF62pcHaemuvSllqs1JDN4AMBVY6XsELqjWa3hmBbdblRf43+ZYNpBRd45D7/3IBF8Iaf1DvifQj+jmQRemtRlahkHrgy8zMGwKOm4A+r+n64EVweKgRwFLctSP9qrud+Aq8B7QvKhGw2ComD1Sr/8FYiWNSU37JMjPAkaCPOhhlNY090LnQS58GK9Bf9XpmSeR+2mIYfBp0+tdZzsKNqlOprxTAob6TNsXOPtTSexTKn8d4tNKPOjQk6YsSTeUceBl8GwBmjf6VXnPzQax6RU3xanvlIBRGNuBMjBjUiA9sNK4NUJdtSXJoRi5gsNQpeVHkVpNCJGF7xX4/jeEN4VnAGV/SCnv7CKtRadlbMRz6Hs0A51noePWDPQUVShgLwb0RKVvAZo32iRNDeaUV6ODuYCkqxHpLozy7L1V6stHVN5QiaER6soGDAZL68sDnEaei9xDRtnz4dfa1kNHYO/KHsEcZUajW++eZElDsljfokMB/RDwbJbGZayrB/oGMa5zZqw3C3V6/+XaLBQldGgDOPS9moRYfU9TAwaDtAxmnAlmdZjzNDJnWCc2/FOQOwx4doj1FOd07J6PY0MQ/ZmEIXdnaMyb6NKdLRPCvndQtAt4PBOF+SjRE5mB+aj2ay3MbWVok/1a2klO5ZO+aNbwm50dAgYXnXaqTwH/0a5LYR/kwGMLF0uYRIILuVf4eBLwpPJbIndgQl0jnN6MEe9lZIgmlNLWzAh9eqdgZ5BlYMvMPhTdAfT2bCPSCxiVVYamTPTFRuxkqU0dAgYMiupblzIGftY/H6r1OfV1tDUysL1StsMIeOuVFnbWZ3wxmraz2HPQdxi8y7WK3cdGrcV/Cy4Hpnc7KiqurVLZ5gVgIPa9VZuqfKSxSzZqTDw3t6RRktejVD1SbXhqFzC42Hpj8Rmg4iOtMr0aQfmpZeqCi3GcUvnDwIRgoR8ZF+RUL3Qt9GNRp59dhAW1pppPoUPIhfD5RBTvA3YByvI6i+Qn9XNLbDoQfNpZhgS2exV8tWZ949EhPU1BMwIGF5mCxGlAQcNKkxEYxACnvqBlVYYepWdaFnlefloLuYOtbebIr5eslHJ6ST64BZ/o+yO5EfqnAS2hfgOOAq/l1lhHxerjk2B/sAF2PMix4Qk7tdy8o0ZDlV00ZBZVsV8EjKPBd8BDgyoqd1RixBzgao8xyHwNtgX6OryVRiLgfRSY2lP07Ws1IsGv9xuC3mdJbdxZSJs/A38Aep8mL9J7GhcC/ZPqOS2mwr85sNJEBH5haacaL/rWBt9YDSnw6/dg16nWRiPVa4NTLxn14LAa0BMOyzq2G/xjwXkgUyLqfoVdyni0zJgfKF0NJfVrU6DIrTvXtyCE9FRI2Y2lrRC998OkjcUFgGXNOzP8+p8UnuUZon6iTf38gC7mf3DU25GbgI1ALzAv0NhbSP3+Cigb1b7OMKAnNG/RlmXOIdJGWq5ovoZmXsqmlQFrPyhLegllWo5v7lA6ChltnjYNtQ06k0JHOdR8oTDYnmVDsIMKtgXzJxhd/ZF8Hn3y9iMPWxI+Mp3SB/l0ebAZ0J1aj7PnAwogpaQgrQv0czAOjAYKxi/Tp8841kwFe0zzLw9/YsfRdMazf7cv9lxasyPqqMB6l6ijabGpZvAAF8s82KkMMHnhal59AyZyQVgyKkSai+i/skbtY1ifzo1FZkP8M6a5ehytjR6IHnB7gICxFQj5Qh1s7Uj7c013w1aKGSl6IHrA4YHCBa8nO9YLX9nX0DyWR45uRJHogeiBeniAgNEPTAZWegqBtgcO9bAzyzZihpGlN6OuLuMBLnhlFYeAuR2d1k9Wep4MOZqKItED0QOd7gECxgFAj/6t9D4Cy3R6B6IB0QPRA7V7gItZP0ycmnlTPgvoDS4F3h8G0suEer+mKakp11FN6elodLN4QK/FL81F/RxHvWgmmh3onZMVwAZALxN6SPqGNfOj5hgwPMMeZVrZA33p3A45dXAkevV2a9NSaurVtL2JhkcP1O6BvF4001vU+vkHPVJtWooBo2mHLhreZB54GHvvaTKbO5gbA0YHl8SC6IHMPTAJjfr5h6mZa66zwhgw6uzw2FyX9IC+YKYMo+kpBoymH8LYgQb3wG3YdwrZRfLLeQ1ucnnzYsAo75tYEz1QqwduR8HvCRZakrQExYDREsMYO9FgHtBr39eAvQkW+r3UlqH4HkbLDGXsSIN4YBx2nAvOJ1g09SPUNH/GgJHmlVjWlT1g/ap60Vf6GcVLwJUEin8VC1vtGANGq41o7E+tHggNGPptUv2LgXfAcHAtgeJdji1Noc5paSfEzkUPFD3Ad0jW5nx1sDRYBBT3+cZzru+CKJPQskOfxxIkFDC6DMWA0WWGOnbU6gGCh/71QfEamUJwaIlHo1Y/RP7ogeiB6IHogeiB6IHogXw98P+KycUOAejJrwAAAABJRU5ErkJggg=="},function(t,e,n){"use strict";var i=n(334);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(335),o=i.module("simulator.common.components.iphoneFrame",[]).component("iphoneFrame",r);t.exports=o},function(t,e,n){"use strict";n(336);var i={template:'\n    <div class="iphone-frame-wrapper" ng-transclude></div>\n  ',transclude:!0};t.exports=i},function(t,e){},,,function(t,e,n){"use strict";var i=n(340);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(341),o=n(342),s=i.module("simulator.common.components.loading",[]).config(r).component("loadingBar",o);t.exports=s},function(t,e){"use strict";function n(t){function e(t){return{request:function(e){var n=t.get("$rootScope");return n.$broadcast("simulator.loading",{loading:!0}),e},response:function(e){var n=t.get("$rootScope");return n.$broadcast("simulator.loading",{loading:!1}),e},responseError:function(e){var n=t.get("$rootScope");return n.$broadcast("simulator.loading",{loading:!1}),e}}}e.$inject=["$injector"],t.interceptors.push(e)}n.$inject=["$httpProvider"],t.exports=n},function(t,e,n){"use strict";n(343);var i={template:'\n    <div class="loading-bar">\n      <div ng-show="loadingBar.loading">\n        <div class="bar-1"></div>\n        <div class="bar-2"></div>\n      </div>\n    </div>\n  ',controllerAs:"loadingBar",controller:["$scope",function(t){var e=this;t.$on("simulator.loading",function(t,n){e.loading=n.loading})}]};t.exports=i},function(t,e){},,function(t,e,n){"use strict";var i=n(346);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(347),o=n(350),s=i.module("simulator.common.components.modal",[]).factory("modalService",r).component("modal",o);t.exports=s},function(t,e,n){"use strict";function i(t,e){var n={modals:{},register:function(t){var e=this;t.opened=!1,t.open=function(){t.opened=!0;var e=r.element(document).find("body");e.addClass("scroll-lock")},t.close=function(){t.opened=!1;var n=r.element(t.element).find("modal").controller("modal");if(n&&n.close(),!o.some(e.modals,"opened")){var i=r.element(document).find("body");i.removeClass("scroll-lock")}},this.modals[t.name]=t},open:function(t){var e=this.modals[t];e&&e.open()},close:function(t){var e=this.modals[t];e&&e.close()},closeAll:function(){o.forEach(this.modals,function(t){return t.close()})}};return e.on("keyup",function(e){27===e.keyCode&&t.$applyAsync(function(){n.closeAll()})}),n}i.$inject=["$rootScope","$document"];var r=n(308),o=n(348);t.exports=i},function(t,e,n){var i;(function(t,r){(function(){function o(t,e){return t.set(e[0],e[1]),t}function s(t,e){return t.add(e),t}function a(t,e,n){var i=n.length;switch(i){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function c(t,e,n,i){for(var r=-1,o=t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function l(t,e){for(var n=-1,i=t.length,r=-1,o=e.length,s=Array(i+o);++n<i;)s[n]=t[n];for(;++r<o;)s[n++]=e[r];return s}function u(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function h(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function f(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function d(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function p(t,e){return!!t.length&&_(t,e,0)>-1}function g(t,e,n){for(var i=-1,r=t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function m(t,e){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function v(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function y(t,e,n,i){var r=-1,o=t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function w(t,e,n,i){var r=t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function b(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function x(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],s=e(o);if(null!=s&&(a===et?s===s:n(s,a)))var a=s,c=o}return c}function A(t,e,n,i){var r;return n(t,function(t,n,o){if(e(t,n,o))return r=i?n:t,!1}),r}function E(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function _(t,e,n){if(e!==e)return W(t,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function S(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function C(t,e){var n=t?t.length:0;return n?F(t,e)/n:Ft}function M(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function $(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function F(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==et&&(n=n===et?o:n+o)}return n}function T(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function L(t,e){return m(e,function(e){return[e,t[e]]})}function k(t){return function(e){return t(e)}}function R(t,e){return m(e,function(e){return t[e]})}function D(t,e){for(var n=-1,i=t.length;++n<i&&_(e,t[n],0)>-1;);return n}function B(t,e){for(var n=t.length;n--&&_(e,t[n],0)>-1;);return n}function P(t){return t&&t.Object===Object?t:null}function O(t,e){if(t!==e){var n=null===t,i=t===et,r=t===t,o=null===e,s=e===et,a=e===e;if(t>e&&!o||!r||n&&!s&&a||i&&a)return 1;if(t<e&&!n||!a||o&&!i&&r||s&&r)return-1}return 0}function I(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var c=O(r[i],o[i]);if(c){if(i>=a)return c;var l=n[i];return c*("desc"==l?-1:1)}}return t.index-e.index}function N(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&i++;return i}function U(t){return function(e,n){var i;return e===et&&n===et?0:(e!==et&&(i=e),n!==et&&(i=i===et?n:t(i,n)),i)}}function j(t){return kn[t]}function z(t){return Rn[t]}function H(t){return"\\"+Pn[t]}function W(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var o=t[r];if(o!==o)return r}return-1}function V(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function G(t,e){return t="number"==typeof t||De.test(t)?+t:-1,e=null==e?Mt:e,t>-1&&t%1==0&&t<e}function q(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function X(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function Y(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n];s!==e&&s!==st||(t[n]=st,o[r++]=n)}return o}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Z(t){if(!t||!Cn.test(t))return t.length;for(var e=_n.lastIndex=0;_n.test(t);)e++;return e}function Q(t){return t.match(_n)}function J(t){return Dn[t]}function tt(t){function e(t){if(sa(t)&&!Zu(t)&&!(t instanceof r)){if(t instanceof i)return t;if(dl.call(t,"__wrapped__"))return Kr(t)}return new i(t)}function n(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=et}function r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Tt,this.__views__=[]}function P(){var t=new r(this.__wrapped__);return t.__actions__=Xi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Xi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Xi(this.__views__),t}function De(){if(this.__filtered__){var t=new r(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ie(){var t=this.__wrapped__.value(),e=this.__dir__,n=Zu(t),i=e<0,r=n?t.length:0,o=Fr(0,r,this.__views__),s=o.start,a=o.end,c=a-s,l=i?a:s-1,u=this.__iteratees__,h=u.length,f=0,d=Il(c,this.__takeCount__);if(!n||r<it||r==c&&d==c)return Li(t,this.__actions__);var p=[];t:for(;c--&&f<d;){l+=e;for(var g=-1,m=t[l];++g<h;){var v=u[g],y=v.iteratee,w=v.type,b=y(m);if(w==_t)m=b;else if(!b){if(w==Et)continue t;break t}}p[f++]=m}return p}function Ne(){}function Ue(t,e){return ze(t,e)&&delete t[e]}function je(t,e){if(Yl){var n=t[e];return n===ot?et:n}return dl.call(t,e)?t[e]:et}function ze(t,e){return Yl?t[e]!==et:dl.call(t,e)}function He(t,e,n){t[e]=Yl&&n===et?ot:n}function We(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ve(){this.__data__={hash:new Ne,map:Vl?new Vl:[],string:new Ne}}function Ge(t){var e=this.__data__;return Nr(t)?Ue("string"==typeof t?e.string:e.hash,t):Vl?e.map["delete"](t):sn(e.map,t)}function qe(t){var e=this.__data__;return Nr(t)?je("string"==typeof t?e.string:e.hash,t):Vl?e.map.get(t):an(e.map,t)}function Xe(t){var e=this.__data__;return Nr(t)?ze("string"==typeof t?e.string:e.hash,t):Vl?e.map.has(t):cn(e.map,t)}function Ye(t,e){var n=this.__data__;return Nr(t)?He("string"==typeof t?n.string:n.hash,t,e):Vl?n.map.set(t,e):un(n.map,t,e),this}function Ke(t){var e=-1,n=t?t.length:0;for(this.__data__=new We;++e<n;)this.push(t[e])}function Ze(t,e){var n=t.__data__;if(Nr(e)){var i=n.__data__,r="string"==typeof e?i.string:i.hash;return r[e]===ot}return n.has(e)}function Qe(t){var e=this.__data__;if(Nr(t)){var n=e.__data__,i="string"==typeof t?n.string:n.hash;i[t]=ot}else e.set(t,ot)}function Je(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function tn(){this.__data__={array:[],map:null}}function en(t){var e=this.__data__,n=e.array;return n?sn(n,t):e.map["delete"](t)}function nn(t){var e=this.__data__,n=e.array;return n?an(n,t):e.map.get(t)}function rn(t){var e=this.__data__,n=e.array;return n?cn(n,t):e.map.has(t)}function on(t,e){var n=this.__data__,i=n.array;i&&(i.length<it-1?un(i,t,e):(n.array=null,n.map=new We(i)));var r=n.map;return r&&r.set(t,e),this}function sn(t,e){var n=ln(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():Tl.call(t,n,1),!0}function an(t,e){var n=ln(t,e);return n<0?et:t[n][1]}function cn(t,e){return ln(t,e)>-1}function ln(t,e){for(var n=t.length;n--;)if(js(t[n][0],e))return n;return-1}function un(t,e,n){var i=ln(t,e);i<0?t.push([e,n]):t[i][1]=n}function hn(t,e,n,i){return t===et||js(t,ul[n])&&!dl.call(i,n)?e:t}function fn(t,e,n){(n===et||js(t[e],n))&&("number"!=typeof e||n!==et||e in t)||(t[e]=n)}function dn(t,e,n){var i=t[e];dl.call(t,e)&&js(i,n)&&(n!==et||e in t)||(t[e]=n)}function pn(t,e,n,i){return au(t,function(t,r,o){e(i,t,n(t),o)}),i}function gn(t,e){return t&&Yi(e,Ga(e),t)}function mn(t,e){for(var n=-1,i=null==t,r=e.length,o=Array(r);++n<r;)o[n]=i?et:Ha(t,e[n]);return o}function vn(t,e,n){return t===t&&(n!==et&&(t=t<=n?t:n),e!==et&&(t=t>=e?t:e)),t}function yn(t,e,n,i,r,o,s){var a;if(i&&(a=o?i(t,r,o,s):i(t)),a!==et)return a;if(!oa(t))return t;var c=Zu(t);if(c){if(a=Lr(t),!e)return Xi(t,a)}else{var l=$r(t),h=l==It||l==Nt;if(Qu(t))return Ii(t,e);if(l==zt||l==Rt||h&&!o){if(V(t))return o?t:{};if(a=kr(h?{}:t),!e)return Ki(t,gn(a,t))}else{if(!Ln[l])return o?t:{};a=Rr(t,l,yn,e)}}s||(s=new Je);var f=s.get(t);if(f)return f;if(s.set(t,a),!c)var d=n?wr(t):Ga(t);return u(d||t,function(r,o){d&&(o=r,r=t[o]),dn(a,o,yn(r,e,n,i,o,t,s))}),a}function wn(t){var e=Ga(t),n=e.length;return function(i){if(null==i)return!n;for(var r=n;r--;){var o=e[r],s=t[o],a=i[o];if(a===et&&!(o in Object(i))||!s(a))return!1}return!0}}function bn(t){return oa(t)?Ml(t):{}}function xn(t,e,n){if("function"!=typeof t)throw new cl(rt);return Fl(function(){t.apply(et,n)},e)}function _n(t,e,n,i){var r=-1,o=p,s=!0,a=t.length,c=[],l=e.length;if(!a)return c;n&&(e=m(e,k(n))),i?(o=g,s=!1):e.length>=it&&(o=Ze,s=!1,e=new Ke(e));t:for(;++r<a;){var u=t[r],h=n?n(u):u;if(s&&h===h){for(var f=l;f--;)if(e[f]===h)continue t;
c.push(u)}else o(e,h,i)||c.push(u)}return c}function kn(t,e){var n=!0;return au(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Rn(t,e,n,i){var r=t.length;for(n=$a(n),n<0&&(n=-n>r?0:r+n),i=i===et||i>r?r:$a(i),i<0&&(i+=r),i=n>i?0:Fa(i);n<i;)t[n++]=e;return t}function Dn(t,e){var n=[];return au(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Bn(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=Br),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?Bn(a,e-1,n,i,r):v(r,a):i||(r[r.length]=a)}return r}function Pn(t,e){return t&&lu(t,e,Ga)}function Nn(t,e){return t&&uu(t,e,Ga)}function Un(t,e){return d(e,function(e){return na(t[e])})}function zn(t,e){e=Ir(e,t)?[e]:Pi(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[e[n++]];return n&&n==i?t:et}function Hn(t,e,n){var i=e(t);return Zu(t)?i:v(i,n(t))}function Wn(t,e){return dl.call(t,e)||"object"==typeof t&&e in t&&null===Cr(t)}function Vn(t,e){return e in Object(t)}function Xn(t,e,n){return t>=Il(e,n)&&t<Ol(e,n)}function Yn(t,e,n){for(var i=n?g:p,r=t[0].length,o=t.length,s=o,a=Array(o),c=1/0,l=[];s--;){var u=t[s];s&&e&&(u=m(u,k(e))),c=Il(u.length,c),a[s]=!n&&(e||r>=120&&u.length>=120)?new Ke(s&&u):et}u=t[0];var h=-1,f=a[0];t:for(;++h<r&&l.length<c;){var d=u[h],v=e?e(d):d;if(!(f?Ze(f,v):i(l,v,n))){for(s=o;--s;){var y=a[s];if(!(y?Ze(y,v):i(t[s],v,n)))continue t}f&&f.push(v),l.push(d)}}return l}function Kn(t,e,n,i){return Pn(t,function(t,r,o){e(i,n(t),r,o)}),i}function Zn(t,e,n){Ir(e,t)||(e=Pi(e),t=Gr(t,e),e=mo(e));var i=null==t?t:t[e];return null==i?et:a(i,t,n)}function Qn(t,e,n,i,r){return t===e||(null==t||null==e||!oa(t)&&!sa(e)?t!==t&&e!==e:Jn(t,e,Qn,n,i,r))}function Jn(t,e,n,i,r,o){var s=Zu(t),a=Zu(e),c=Dt,l=Dt;s||(c=$r(t),c=c==Rt?zt:c),a||(l=$r(e),l=l==Rt?zt:l);var u=c==zt&&!V(t),h=l==zt&&!V(e),f=c==l;if(f&&!u)return o||(o=new Je),s||xa(t)?mr(t,e,n,i,r,o):vr(t,e,c,n,i,r,o);if(!(r&yt)){var d=u&&dl.call(t,"__wrapped__"),p=h&&dl.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,m=p?e.value():e;return o||(o=new Je),n(g,m,i,r,o)}}return!!f&&(o||(o=new Je),yr(t,e,n,i,r,o))}function ti(t,e,n,i){var r=n.length,o=r,s=!i;if(null==t)return!o;for(t=Object(t);r--;){var a=n[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){a=n[r];var c=a[0],l=t[c],u=a[1];if(s&&a[2]){if(l===et&&!(c in t))return!1}else{var h=new Je;if(i)var f=i(l,u,c,t,e,h);if(!(f===et?Qn(u,l,i,vt|yt,h):f))return!1}}return!0}function ei(t){return"function"==typeof t?t:null==t?Oc:"object"==typeof t?Zu(t)?si(t[0],t[1]):oi(t):Vc(t)}function ni(t){return Pl(Object(t))}function ii(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function ri(t,e){var n=-1,i=Gs(t)?Array(t.length):[];return au(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function oi(t){var e=Er(t);return 1==e.length&&e[0][2]?Hr(e[0][0],e[0][1]):function(n){return n===t||ti(n,t,e)}}function si(t,e){return Ir(t)&&zr(e)?Hr(t,e):function(n){var i=Ha(n,t);return i===et&&i===e?Va(n,t):Qn(e,i,et,vt|yt)}}function ai(t,e,n,i,r){if(t!==e){if(!Zu(e)&&!xa(e))var o=qa(e);u(o||e,function(s,a){if(o&&(a=s,s=e[a]),oa(s))r||(r=new Je),ci(t,e,a,n,ai,i,r);else{var c=i?i(t[a],s,a+"",t,e,r):et;c===et&&(c=s),fn(t,a,c)}})}}function ci(t,e,n,i,r,o,s){var a=t[n],c=e[n],l=s.get(c);if(l)return void fn(t,n,l);var u=o?o(a,c,n+"",t,e,s):et,h=u===et;h&&(u=c,Zu(c)||xa(c)?Zu(a)?u=a:qs(a)?u=Xi(a):(h=!1,u=yn(c,!0)):ga(c)||Ws(c)?Ws(a)?u=La(a):!oa(a)||i&&na(a)?(h=!1,u=yn(c,!0)):u=a:h=!1),s.set(c,u),h&&r(u,c,i,o,s),s["delete"](c),fn(t,n,u)}function li(t,e){var n=t.length;if(n)return e+=e<0?n:0,G(e,n)?t[e]:et}function ui(t,e,n){var i=-1;e=m(e.length?e:[Oc],k(Ar()));var r=ri(t,function(t,n,r){var o=m(e,function(e){return e(t)});return{criteria:o,index:++i,value:t}});return $(r,function(t,e){return I(t,e,n)})}function hi(t,e){return t=Object(t),y(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function fi(t,e){for(var n=-1,i=br(t),r=i.length,o={};++n<r;){var s=i[n],a=t[s];e(a,s)&&(o[s]=a)}return o}function di(t){return function(e){return null==e?et:e[t]}}function pi(t){return function(e){return zn(e,t)}}function gi(t,e,n,i){var r=i?S:_,o=-1,s=e.length,a=t;for(n&&(a=m(t,k(n)));++o<s;)for(var c=0,l=e[o],u=n?n(l):l;(c=r(a,u,c,i))>-1;)a!==t&&Tl.call(a,c,1),Tl.call(t,c,1);return t}function mi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(i==n||r!=o){var o=r;if(G(r))Tl.call(t,r,1);else if(Ir(r,t))delete t[r];else{var s=Pi(r),a=Gr(t,s);null!=a&&delete a[mo(s)]}}}return t}function vi(t,e){return t+kl(Ul()*(e-t+1))}function yi(t,e,n,i){for(var r=-1,o=Ol(Ll((e-t)/(n||1)),0),s=Array(o);o--;)s[i?o:++r]=t,t+=n;return s}function wi(t,e){var n="";if(!t||e<1||e>Mt)return n;do e%2&&(n+=t),e=kl(e/2),e&&(t+=t);while(e);return n}function bi(t,e,n,i){e=Ir(e,t)?[e]:Pi(e);for(var r=-1,o=e.length,s=o-1,a=t;null!=a&&++r<o;){var c=e[r];if(oa(a)){var l=n;if(r!=s){var u=a[c];l=i?i(u,c,a):et,l===et&&(l=null==u?G(e[r+1])?[]:{}:u)}dn(a,c,l)}a=a[c]}return t}function xi(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}function Ai(t,e){var n;return au(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function Ei(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e===e&&r<=kt){for(;i<r;){var o=i+r>>>1,s=t[o];(n?s<=e:s<e)&&null!==s?i=o+1:r=o}return r}return _i(t,e,Oc,n)}function _i(t,e,n,i){e=n(e);for(var r=0,o=t?t.length:0,s=e!==e,a=null===e,c=e===et;r<o;){var l=kl((r+o)/2),u=n(t[l]),h=u!==et,f=u===u;if(s)var d=f||i;else d=a?f&&h&&(i||null!=u):c?f&&(i||h):null!=u&&(i?u<=e:u<e);d?r=l+1:o=l}return Il(o,Lt)}function Si(t){return Ci(t)}function Ci(t,e){for(var n=0,i=t.length,r=t[0],o=e?e(r):r,s=o,a=1,c=[r];++n<i;)r=t[n],o=e?e(r):r,js(o,s)||(s=o,c[a++]=r);return c}function Mi(t,e,n){var i=-1,r=p,o=t.length,s=!0,a=[],c=a;if(n)s=!1,r=g;else if(o>=it){var l=e?null:fu(t);if(l)return K(l);s=!1,r=Ze,c=new Ke}else c=e?[]:a;t:for(;++i<o;){var u=t[i],h=e?e(u):u;if(s&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue t;e&&c.push(h),a.push(u)}else r(c,h,n)||(c!==a&&c.push(h),a.push(u))}return a}function $i(t,e){e=Ir(e,t)?[e]:Pi(e),t=Gr(t,e);var n=mo(e);return null==t||!Wa(t,n)||delete t[n]}function Fi(t,e,n,i){return bi(t,e,n(zn(t,e)),i)}function Ti(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?xi(t,i?0:o,i?o+1:r):xi(t,i?o+1:0,i?r:o)}function Li(t,e){var n=t;return n instanceof r&&(n=n.value()),y(e,function(t,e){return e.func.apply(e.thisArg,v([t],e.args))},n)}function ki(t,e,n){for(var i=-1,r=t.length;++i<r;)var o=o?v(_n(o,t[i],e,n),_n(t[i],o,e,n)):t[i];return o&&o.length?Mi(o,e,n):[]}function Ri(t,e,n){for(var i=-1,r=t.length,o=e.length,s={};++i<r;){var a=i<o?e[i]:et;n(s,t[i],a)}return s}function Di(t){return qs(t)?t:[]}function Bi(t){return"function"==typeof t?t:Oc}function Pi(t){return Zu(t)?t:vu(t)}function Oi(t,e,n){var i=t.length;return n=n===et?i:n,!e&&n>=i?t:xi(t,e,n)}function Ii(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function Ni(t){var e=new t.constructor(t.byteLength);return new Al(e).set(new Al(t)),e}function Ui(t,e){var n=e?Ni(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function ji(t,e,n){var i=e?n(X(t),!0):X(t);return y(i,o,new t.constructor)}function zi(t){var e=new t.constructor(t.source,$e.exec(t));return e.lastIndex=t.lastIndex,e}function Hi(t,e,n){var i=e?n(K(t),!0):K(t);return y(i,s,new t.constructor)}function Wi(t){return ou?Object(ou.call(t)):{}}function Vi(t,e){var n=e?Ni(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Gi(t,e,n,i){for(var r=-1,o=t.length,s=n.length,a=-1,c=e.length,l=Ol(o-s,0),u=Array(c+l),h=!i;++a<c;)u[a]=e[a];for(;++r<s;)(h||r<o)&&(u[n[r]]=t[r]);for(;l--;)u[a++]=t[r++];return u}function qi(t,e,n,i){for(var r=-1,o=t.length,s=-1,a=n.length,c=-1,l=e.length,u=Ol(o-a,0),h=Array(u+l),f=!i;++r<u;)h[r]=t[r];for(var d=r;++c<l;)h[d+c]=e[c];for(;++s<a;)(f||r<o)&&(h[d+n[s]]=t[r++]);return h}function Xi(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function Yi(t,e,n,i){n||(n={});for(var r=-1,o=e.length;++r<o;){var s=e[r],a=i?i(n[s],t[s],s,n,t):t[s];dn(n,s,a)}return n}function Ki(t,e){return Yi(t,Mr(t),e)}function Zi(t,e){return function(n,i){var r=Zu(n)?c:pn,o=e?e():{};return r(n,t,Ar(i),o)}}function Qi(t){return Ls(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:et,s=r>2?n[2]:et;for(o="function"==typeof o?(r--,o):et,s&&Or(n[0],n[1],s)&&(o=r<3?et:o,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e})}function Ji(t,e){return function(n,i){if(null==n)return n;if(!Gs(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=Object(n);(e?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function tr(t){return function(e,n,i){for(var r=-1,o=Object(e),s=i(e),a=s.length;a--;){var c=s[t?a:++r];if(n(o[c],c,o)===!1)break}return e}}function er(t,e,n){function i(){var e=this&&this!==Gn&&this instanceof i?o:t;return e.apply(r?n:this,arguments)}var r=e&at,o=rr(t);return i}function nr(t){return function(e){e=Ra(e);var n=Cn.test(e)?Q(e):et,i=n?n[0]:e.charAt(0),r=n?Oi(n,1).join(""):e.slice(1);return i[t]()+r}}function ir(t){return function(e){return y(Rc(dc(e).replace(An,"")),t,"")}}function rr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=bn(t.prototype),i=t.apply(n,e);return oa(i)?i:n}}function or(t,e,n){function i(){for(var o=arguments.length,s=Array(o),c=o,l=Sr(i);c--;)s[c]=arguments[c];var u=o<3&&s[0]!==l&&s[o-1]!==l?[]:Y(s,l);if(o-=u.length,o<n)return dr(t,e,ar,i.placeholder,et,s,u,et,et,n-o);var h=this&&this!==Gn&&this instanceof i?r:t;return a(h,this,s)}var r=rr(t);return i}function sr(t){return Ls(function(e){e=Bn(e,1);var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new cl(rt);if(o&&!a&&"wrapper"==xr(s))var a=new i([],(!0))}for(r=a?r:n;++r<n;){s=e[r];var c=xr(s),l="wrapper"==c?du(s):et;a=l&&Ur(l[0])&&l[1]==(pt|ut|ft|gt)&&!l[4].length&&1==l[9]?a[xr(l[0])].apply(a,l[3]):1==s.length&&Ur(s)?a[c]():a.thru(s)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&Zu(i)&&i.length>=it)return a.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function ar(t,e,n,i,r,o,s,a,c,l){function u(){for(var v=arguments.length,y=v,w=Array(v);y--;)w[y]=arguments[y];if(p)var b=Sr(u),x=N(w,b);if(i&&(w=Gi(w,i,r,p)),o&&(w=qi(w,o,s,p)),v-=x,p&&v<l){var A=Y(w,b);return dr(t,e,ar,u.placeholder,n,w,A,a,c,l-v)}var E=f?n:this,_=d?E[t]:t;return v=w.length,a?w=qr(w,a):g&&v>1&&w.reverse(),h&&c<v&&(w.length=c),this&&this!==Gn&&this instanceof u&&(_=m||rr(_)),_.apply(E,w)}var h=e&pt,f=e&at,d=e&ct,p=e&(ut|ht),g=e&mt,m=d?et:rr(t);return u}function cr(t,e){return function(n,i){return Kn(n,t,e(i),{})}}function lr(t){return Ls(function(e){return e=1==e.length&&Zu(e[0])?m(e[0],k(Ar())):m(Bn(e,1,Pr),k(Ar())),Ls(function(n){var i=this;return t(e,function(t){return a(t,i,n)})})})}function ur(t,e){e=e===et?" ":e+"";var n=e.length;if(n<2)return n?wi(e,t):e;var i=wi(e,Ll(t/Z(e)));return Cn.test(e)?Oi(Q(i),0,t).join(""):i.slice(0,t)}function hr(t,e,n,i){function r(){for(var e=-1,c=arguments.length,l=-1,u=i.length,h=Array(u+c),f=this&&this!==Gn&&this instanceof r?s:t;++l<u;)h[l]=i[l];for(;c--;)h[l++]=arguments[++e];return a(f,o?n:this,h)}var o=e&at,s=rr(t);return r}function fr(t){return function(e,n,i){return i&&"number"!=typeof i&&Or(e,n,i)&&(n=i=et),e=Ta(e),e=e===e?e:0,n===et?(n=e,e=0):n=Ta(n)||0,i=i===et?e<n?1:-1:Ta(i)||0,yi(e,n,i,t)}}function dr(t,e,n,i,r,o,s,a,c,l){var u=e&ut,h=u?s:et,f=u?et:s,d=u?o:et,p=u?et:o;e|=u?ft:dt,e&=~(u?dt:ft),e&lt||(e&=~(at|ct));var g=[t,e,r,d,h,p,f,a,c,l],m=n.apply(et,g);return Ur(t)&&mu(m,g),m.placeholder=i,m}function pr(t){var e=sl[t];return function(t,n){if(t=Ta(t),n=$a(n)){var i=(Ra(t)+"e").split("e"),r=e(i[0]+"e"+(+i[1]+n));return i=(Ra(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function gr(t,e,n,i,r,o,s,a){var c=e&ct;if(!c&&"function"!=typeof t)throw new cl(rt);var l=i?i.length:0;if(l||(e&=~(ft|dt),i=r=et),s=s===et?s:Ol($a(s),0),a=a===et?a:$a(a),l-=r?r.length:0,e&dt){var u=i,h=r;i=r=et}var f=c?et:du(t),d=[t,e,n,i,r,u,h,o,s,a];if(f&&Wr(d,f),t=d[0],e=d[1],n=d[2],i=d[3],r=d[4],a=d[9]=null==d[9]?c?0:t.length:Ol(d[9]-l,0),!a&&e&(ut|ht)&&(e&=~(ut|ht)),e&&e!=at)p=e==ut||e==ht?or(t,e,a):e!=ft&&e!=(at|ft)||r.length?ar.apply(et,d):hr(t,e,n,i);else var p=er(t,e,n);var g=f?hu:mu;return g(p,d)}function mr(t,e,n,i,r,o){var s=-1,a=r&yt,c=r&vt,l=t.length,u=e.length;if(l!=u&&!(a&&u>l))return!1;var h=o.get(t);if(h)return h==e;var f=!0;for(o.set(t,e);++s<l;){var d=t[s],p=e[s];if(i)var g=a?i(p,d,s,e,t,o):i(d,p,s,t,e,o);if(g!==et){if(g)continue;f=!1;break}if(c){if(!b(e,function(t){return d===t||n(d,t,i,r,o)})){f=!1;break}}else if(d!==p&&!n(d,p,i,r,o)){f=!1;break}}return o["delete"](t),f}function vr(t,e,n,i,r,o,s){switch(n){case Zt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Kt:return!(t.byteLength!=e.byteLength||!i(new Al(t),new Al(e)));case Bt:case Pt:return+t==+e;case Ot:return t.name==e.name&&t.message==e.message;case jt:return t!=+t?e!=+e:t==+e;case Wt:case Gt:return t==e+"";case Ut:var a=X;case Vt:var c=o&yt;if(a||(a=K),t.size!=e.size&&!c)return!1;var l=s.get(t);return l?l==e:(o|=vt,s.set(t,e),mr(a(t),a(e),i,r,o,s));case qt:if(ou)return ou.call(t)==ou.call(e)}return!1}function yr(t,e,n,i,r,o){var s=r&yt,a=Ga(t),c=a.length,l=Ga(e),u=l.length;if(c!=u&&!s)return!1;for(var h=c;h--;){var f=a[h];if(!(s?f in e:Wn(e,f)))return!1}var d=o.get(t);if(d)return d==e;var p=!0;o.set(t,e);for(var g=s;++h<c;){f=a[h];var m=t[f],v=e[f];if(i)var y=s?i(v,m,f,e,t,o):i(m,v,f,t,e,o);if(!(y===et?m===v||n(m,v,i,r,o):y)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var w=t.constructor,b=e.constructor;w!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o["delete"](t),p}function wr(t){return Hn(t,Ga,Mr)}function br(t){return Hn(t,qa,gu)}function xr(t){for(var e=t.name+"",n=Ql[e],i=dl.call(Ql,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Ar(){var t=e.iteratee||Ic;return t=t===Ic?ei:t,arguments.length?t(arguments[0],arguments[1]):t}function Er(t){for(var e=ec(t),n=e.length;n--;)e[n][2]=zr(e[n][1]);return e}function _r(t,e){var n=t[e];return ha(n)?n:et}function Sr(t){var n=dl.call(e,"placeholder")?e:t;return n.placeholder}function Cr(t){return Rl(Object(t))}function Mr(t){return Sl(Object(t))}function $r(t){return ml.call(t)}function Fr(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Il(e,t+s);break;case"takeRight":t=Ol(t,e-s)}}return{start:t,end:e}}function Tr(t,e,n){e=Ir(e,t)?[e]:Pi(e);for(var i,r=-1,o=e.length;++r<o;){var s=e[r];if(!(i=null!=t&&n(t,s)))break;t=t[s]}if(i)return i;var o=t?t.length:0;return!!o&&ra(o)&&G(s,o)&&(Zu(t)||wa(t)||Ws(t))}function Lr(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&dl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function kr(t){return"function"!=typeof t.constructor||jr(t)?{}:bn(Cr(t))}function Rr(t,e,n,i){var r=t.constructor;switch(e){case Kt:return Ni(t);case Bt:case Pt:return new r((+t));case Zt:return Ui(t,i);case Qt:case Jt:case te:case ee:case ne:case ie:case re:case oe:case se:return Vi(t,i);case Ut:return ji(t,i,n);case jt:case Gt:return new r(t);case Wt:return zi(t);case Vt:return Hi(t,i,n);case qt:return Wi(t)}}function Dr(t){var e=t?t.length:et;return ra(e)&&(Zu(t)||wa(t)||Ws(t))?T(e,String):null}function Br(t){return qs(t)&&(Zu(t)||Ws(t))}function Pr(t){return Zu(t)&&!(2==t.length&&!na(t[0]))}function Or(t,e,n){if(!oa(n))return!1;var i=typeof e;return!!("number"==i?Gs(n)&&G(e,n.length):"string"==i&&e in n)&&js(n[e],t)}function Ir(t,e){var n=typeof t;return"number"==n||"symbol"==n||!Zu(t)&&(ba(t)||ye.test(t)||!ve.test(t)||null!=e&&t in Object(e))}function Nr(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}function Ur(t){var n=xr(t),i=e[n];if("function"!=typeof i||!(n in r.prototype))return!1;if(t===i)return!0;var o=du(i);return!!o&&t===o[0]}function jr(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ul;return t===n}function zr(t){return t===t&&!oa(t)}function Hr(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==et||t in Object(n)))}}function Wr(t,e){var n=t[1],i=e[1],r=n|i,o=r<(at|ct|pt),s=i==pt&&n==ut||i==pt&&n==gt&&t[7].length<=e[8]||i==(pt|gt)&&e[7].length<=e[8]&&n==ut;if(!o&&!s)return t;i&at&&(t[2]=e[2],r|=n&at?0:lt);var a=e[3];if(a){var c=t[3];t[3]=c?Gi(c,a,e[4]):a,t[4]=c?Y(t[3],st):e[4]}return a=e[5],a&&(c=t[5],t[5]=c?qi(c,a,e[6]):a,t[6]=c?Y(t[5],st):e[6]),a=e[7],a&&(t[7]=a),i&pt&&(t[8]=null==t[8]?e[8]:Il(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Vr(t,e,n,i,r,o){return oa(t)&&oa(e)&&ai(t,e,et,Vr,o.set(e,t)),t}function Gr(t,e){return 1==e.length?t:zn(t,xi(e,0,-1))}function qr(t,e){for(var n=t.length,i=Il(e.length,n),r=Xi(t);i--;){var o=e[i];t[i]=G(o,n)?r[o]:et}return t}function Xr(t){return"string"==typeof t||ba(t)?t:t+""}function Yr(t){if(null!=t){try{return fl.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Kr(t){if(t instanceof r)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Xi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Zr(t,e,n){e=(n?Or(t,e,n):e===et)?1:Ol($a(e),0);var i=t?t.length:0;if(!i||e<1)return[];for(var r=0,o=0,s=Array(Ll(i/e));r<i;)s[o++]=xi(t,r,r+=e);return s}function Qr(t){for(var e=-1,n=t?t.length:0,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r}function Jr(){var t=arguments.length,e=Ps(arguments[0]);if(t<2)return t?Xi(e):[];for(var n=Array(t-1);t--;)n[t-1]=arguments[t];return l(e,Bn(n,1))}function to(t,e,n){var i=t?t.length:0;return i?(e=n||e===et?1:$a(e),xi(t,e<0?0:e,i)):[]}function eo(t,e,n){var i=t?t.length:0;return i?(e=n||e===et?1:$a(e),e=i-e,xi(t,0,e<0?0:e)):[]}function no(t,e){return t&&t.length?Ti(t,Ar(e,3),!0,!0):[]}function io(t,e){return t&&t.length?Ti(t,Ar(e,3),!0):[]}function ro(t,e,n,i){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Or(t,e,n)&&(n=0,i=r),Rn(t,e,n,i)):[]}function oo(t,e){return t&&t.length?E(t,Ar(e,3)):-1}function so(t,e){return t&&t.length?E(t,Ar(e,3),!0):-1}function ao(t){var e=t?t.length:0;return e?Bn(t,1):[]}function co(t){var e=t?t.length:0;return e?Bn(t,Ct):[]}function lo(t,e){var n=t?t.length:0;return n?(e=e===et?1:$a(e),Bn(t,e)):[]}function uo(t){for(var e=-1,n=t?t.length:0,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function ho(t){return t&&t.length?t[0]:et}function fo(t,e,n){var i=t?t.length:0;return i?(n=$a(n),n<0&&(n=Ol(i+n,0)),_(t,e,n)):-1}function po(t){return eo(t,1)}function go(t,e){return t?Bl.call(t,e):""}function mo(t){var e=t?t.length:0;return e?t[e-1]:et}function vo(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=i;if(n!==et&&(r=$a(n),r=(r<0?Ol(i+r,0):Il(r,i-1))+1),e!==e)return W(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function yo(t,e){return t&&t.length?li(t,$a(e)):et}function wo(t,e){return t&&t.length&&e&&e.length?gi(t,e):t}function bo(t,e,n){return t&&t.length&&e&&e.length?gi(t,e,Ar(n)):t}function xo(t,e,n){return t&&t.length&&e&&e.length?gi(t,e,et,n):t}function Ao(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Ar(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return mi(t,r),n}function Eo(t){return t?zl.call(t):t}function _o(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Or(t,e,n)?(e=0,n=i):(e=null==e?0:$a(e),n=n===et?i:$a(n)),xi(t,e,n)):[]}function So(t,e){return Ei(t,e)}function Co(t,e,n){return _i(t,e,Ar(n))}function Mo(t,e){var n=t?t.length:0;if(n){var i=Ei(t,e);if(i<n&&js(t[i],e))return i}return-1}function $o(t,e){return Ei(t,e,!0)}function Fo(t,e,n){return _i(t,e,Ar(n),!0)}function To(t,e){var n=t?t.length:0;if(n){var i=Ei(t,e,!0)-1;if(js(t[i],e))return i}return-1}function Lo(t){return t&&t.length?Si(t):[]}function ko(t,e){return t&&t.length?Ci(t,Ar(e)):[]}function Ro(t){return to(t,1)}function Do(t,e,n){return t&&t.length?(e=n||e===et?1:$a(e),xi(t,0,e<0?0:e)):[]}function Bo(t,e,n){var i=t?t.length:0;return i?(e=n||e===et?1:$a(e),e=i-e,xi(t,e<0?0:e,i)):[]}function Po(t,e){return t&&t.length?Ti(t,Ar(e,3),!1,!0):[]}function Oo(t,e){return t&&t.length?Ti(t,Ar(e,3)):[]}function Io(t){return t&&t.length?Mi(t):[]}function No(t,e){return t&&t.length?Mi(t,Ar(e)):[]}function Uo(t,e){return t&&t.length?Mi(t,et,e):[]}function jo(t){if(!t||!t.length)return[];var e=0;return t=d(t,function(t){if(qs(t))return e=Ol(t.length,e),!0}),T(e,function(e){return m(t,di(e))})}function zo(t,e){if(!t||!t.length)return[];var n=jo(t);return null==e?n:m(n,function(t){return a(e,et,t)})}function Ho(t,e){return Ri(t||[],e||[],dn)}function Wo(t,e){return Ri(t||[],e||[],bi)}function Vo(t){var n=e(t);return n.__chain__=!0,n}function Go(t,e){return e(t),t}function qo(t,e){return e(t)}function Xo(){return Vo(this)}function Yo(){return new i(this.value(),this.__chain__)}function Ko(){this.__values__===et&&(this.__values__=Ma(this.value()));var t=this.__index__>=this.__values__.length,e=t?et:this.__values__[this.__index__++];return{done:t,value:e}}function Zo(){return this}function Qo(t){for(var e,i=this;i instanceof n;){var r=Kr(i);r.__index__=0,r.__values__=et,e?o.__wrapped__=r:e=r;var o=r;i=i.__wrapped__}return o.__wrapped__=t,e}function Jo(){var t=this.__wrapped__;if(t instanceof r){var e=t;return this.__actions__.length&&(e=new r(this)),e=e.reverse(),e.__actions__.push({func:qo,args:[Eo],thisArg:et}),new i(e,this.__chain__)}return this.thru(Eo)}function ts(){return Li(this.__wrapped__,this.__actions__)}function es(t,e,n){var i=Zu(t)?f:kn;return n&&Or(t,e,n)&&(e=et),i(t,Ar(e,3))}function ns(t,e){var n=Zu(t)?d:Dn;return n(t,Ar(e,3))}function is(t,e){if(e=Ar(e,3),Zu(t)){var n=E(t,e);return n>-1?t[n]:et}return A(t,e,au)}function rs(t,e){if(e=Ar(e,3),Zu(t)){var n=E(t,e,!0);return n>-1?t[n]:et}return A(t,e,cu)}function os(t,e){return Bn(hs(t,e),1)}function ss(t,e){return Bn(hs(t,e),Ct)}function as(t,e,n){return n=n===et?1:$a(n),Bn(hs(t,e),n)}function cs(t,e){return"function"==typeof e&&Zu(t)?u(t,e):au(t,Ar(e))}function ls(t,e){return"function"==typeof e&&Zu(t)?h(t,e):cu(t,Ar(e))}function us(t,e,n,i){t=Gs(t)?t:ac(t),n=n&&!i?$a(n):0;var r=t.length;return n<0&&(n=Ol(r+n,0)),wa(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&_(t,e,n)>-1}function hs(t,e){var n=Zu(t)?m:ri;return n(t,Ar(e,3))}function fs(t,e,n,i){return null==t?[]:(Zu(e)||(e=null==e?[]:[e]),n=i?et:n,Zu(n)||(n=null==n?[]:[n]),ui(t,e,n))}function ds(t,e,n){var i=Zu(t)?y:M,r=arguments.length<3;return i(t,Ar(e,4),n,r,au)}function ps(t,e,n){var i=Zu(t)?w:M,r=arguments.length<3;return i(t,Ar(e,4),n,r,cu)}function gs(t,e){var n=Zu(t)?d:Dn;return e=Ar(e,3),n(t,function(t,n,i){return!e(t,n,i)})}function ms(t){var e=Gs(t)?t:ac(t),n=e.length;return n>0?e[vi(0,n-1)]:et}function vs(t,e,n){var i=-1,r=Ma(t),o=r.length,s=o-1;for(e=(n?Or(t,e,n):e===et)?1:vn($a(e),0,o);++i<e;){var a=vi(i,s),c=r[a];r[a]=r[i],r[i]=c}return r.length=e,r}function ys(t){return vs(t,Tt)}function ws(t){if(null==t)return 0;if(Gs(t)){var e=t.length;return e&&wa(t)?Z(t):e}if(sa(t)){var n=$r(t);if(n==Ut||n==Vt)return t.size}return Ga(t).length}function bs(t,e,n){var i=Zu(t)?b:Ai;return n&&Or(t,e,n)&&(e=et),i(t,Ar(e,3))}function xs(t,e){if("function"!=typeof e)throw new cl(rt);return t=$a(t),function(){if(--t<1)return e.apply(this,arguments)}}function As(t,e,n){return e=n?et:e,e=t&&null==e?t.length:e,gr(t,pt,et,et,et,et,e)}function Es(t,e){var n;if("function"!=typeof e)throw new cl(rt);return t=$a(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=et),n}}function _s(t,e,n){e=n?et:e;var i=gr(t,ut,et,et,et,et,et,e);return i.placeholder=_s.placeholder,i}function Ss(t,e,n){e=n?et:e;var i=gr(t,ht,et,et,et,et,et,e);return i.placeholder=Ss.placeholder,i}function Cs(t,e,n){function i(e){var n=f,i=d;return f=d=et,y=e,g=t.apply(i,n)}function r(t){return y=t,m=Fl(a,e),w?i(t):g}function o(t){var n=t-v,i=t-y,r=e-n;return b?Il(r,p-i):r}function s(t){var n=t-v,i=t-y;return!v||n>=e||n<0||b&&i>=p}function a(){var t=zu();return s(t)?c(t):void(m=Fl(a,o(t)))}function c(t){return El(m),m=et,x&&f?i(t):(f=d=et,g)}function l(){m!==et&&El(m),v=y=0,f=d=m=et}function u(){return m===et?g:c(zu())}function h(){var t=zu(),n=s(t);if(f=arguments,d=this,v=t,n){if(m===et)return r(v);if(b)return El(m),m=Fl(a,e),i(v)}return m===et&&(m=Fl(a,e)),g}var f,d,p,g,m,v=0,y=0,w=!1,b=!1,x=!0;if("function"!=typeof t)throw new cl(rt);return e=Ta(e)||0,oa(n)&&(w=!!n.leading,b="maxWait"in n,p=b?Ol(Ta(n.maxWait)||0,e):p,x="trailing"in n?!!n.trailing:x),h.cancel=l,h.flush=u,h}function Ms(t){return gr(t,mt)}function $s(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new cl(rt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new($s.Cache||We),n}function Fs(t){if("function"!=typeof t)throw new cl(rt);return function(){return!t.apply(this,arguments)}}function Ts(t){return Es(2,t)}function Ls(t,e){if("function"!=typeof t)throw new cl(rt);return e=Ol(e===et?t.length-1:$a(e),0),function(){for(var n=arguments,i=-1,r=Ol(n.length-e,0),o=Array(r);++i<r;)o[i]=n[e+i];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var s=Array(e+1);for(i=-1;++i<e;)s[i]=n[i];return s[e]=o,a(t,this,s)}}function ks(t,e){if("function"!=typeof t)throw new cl(rt);return e=e===et?0:Ol($a(e),0),Ls(function(n){var i=n[e],r=Oi(n,0,e);return i&&v(r,i),a(t,this,r)})}function Rs(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new cl(rt);return oa(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Cs(t,e,{leading:i,maxWait:e,trailing:r})}function Ds(t){return As(t,1)}function Bs(t,e){return e=null==e?Oc:e,Xu(e,t)}function Ps(){if(!arguments.length)return[];var t=arguments[0];return Zu(t)?t:[t]}function Os(t){return yn(t,!1,!0)}function Is(t,e){return yn(t,!1,!0,e)}function Ns(t){return yn(t,!0,!0)}function Us(t,e){return yn(t,!0,!0,e)}function js(t,e){return t===e||t!==t&&e!==e}function zs(t,e){return t>e}function Hs(t,e){return t>=e}function Ws(t){return qs(t)&&dl.call(t,"callee")&&(!$l.call(t,"callee")||ml.call(t)==Rt)}function Vs(t){return sa(t)&&ml.call(t)==Kt}function Gs(t){return null!=t&&ra(pu(t))&&!na(t)}function qs(t){return sa(t)&&Gs(t)}function Xs(t){return t===!0||t===!1||sa(t)&&ml.call(t)==Bt}function Ys(t){return sa(t)&&ml.call(t)==Pt}function Ks(t){return!!t&&1===t.nodeType&&sa(t)&&!ga(t)}function Zs(t){if(Gs(t)&&(Zu(t)||wa(t)||na(t.splice)||Ws(t)||Qu(t)))return!t.length;if(sa(t)){var e=$r(t);if(e==Ut||e==Vt)return!t.size}for(var n in t)if(dl.call(t,n))return!1;return!(Zl&&Ga(t).length)}function Qs(t,e){return Qn(t,e)}function Js(t,e,n){n="function"==typeof n?n:et;var i=n?n(t,e):et;return i===et?Qn(t,e,n):!!i}function ta(t){return!!sa(t)&&(ml.call(t)==Ot||"string"==typeof t.message&&"string"==typeof t.name)}function ea(t){return"number"==typeof t&&Dl(t)}function na(t){var e=oa(t)?ml.call(t):"";return e==It||e==Nt}function ia(t){return"number"==typeof t&&t==$a(t)}function ra(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Mt}function oa(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function sa(t){return!!t&&"object"==typeof t}function aa(t){return sa(t)&&$r(t)==Ut}function ca(t,e){return t===e||ti(t,e,Er(e))}function la(t,e,n){return n="function"==typeof n?n:et,ti(t,e,Er(e),n)}function ua(t){return pa(t)&&t!=+t}function ha(t){if(!oa(t))return!1;var e=na(t)||V(t)?yl:ke;return e.test(Yr(t))}function fa(t){return null===t}function da(t){return null==t}function pa(t){return"number"==typeof t||sa(t)&&ml.call(t)==jt}function ga(t){if(!sa(t)||ml.call(t)!=zt||V(t))return!1;var e=Cr(t);if(null===e)return!0;var n=dl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&fl.call(n)==gl}function ma(t){return oa(t)&&ml.call(t)==Wt}function va(t){return ia(t)&&t>=-Mt&&t<=Mt}function ya(t){return sa(t)&&$r(t)==Vt}function wa(t){return"string"==typeof t||!Zu(t)&&sa(t)&&ml.call(t)==Gt}function ba(t){return"symbol"==typeof t||sa(t)&&ml.call(t)==qt}function xa(t){return sa(t)&&ra(t.length)&&!!Tn[ml.call(t)]}function Aa(t){return t===et}function Ea(t){return sa(t)&&$r(t)==Xt}function _a(t){return sa(t)&&ml.call(t)==Yt}function Sa(t,e){return t<e}function Ca(t,e){return t<=e}function Ma(t){if(!t)return[];if(Gs(t))return wa(t)?Q(t):Xi(t);if(Cl&&t[Cl])return q(t[Cl]());var e=$r(t),n=e==Ut?X:e==Vt?K:ac;return n(t)}function $a(t){if(!t)return 0===t?t:0;if(t=Ta(t),t===Ct||t===-Ct){var e=t<0?-1:1;return e*$t}var n=t%1;return t===t?n?t-n:t:0}function Fa(t){return t?vn($a(t),0,Tt):0}function Ta(t){if("number"==typeof t)return t;if(ba(t))return Ft;if(oa(t)){var e=na(t.valueOf)?t.valueOf():t;t=oa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ae,"");var n=Le.test(t);return n||Re.test(t)?In(t.slice(2),n?2:8):Te.test(t)?Ft:+t}function La(t){return Yi(t,qa(t))}function ka(t){return vn($a(t),-Mt,Mt)}function Ra(t){if("string"==typeof t)return t;if(null==t)return"";if(ba(t))return su?su.call(t):"";var e=t+"";return"0"==e&&1/t==-Ct?"-0":e}function Da(t,e){var n=bn(t);return e?gn(n,e):n}function Ba(t,e){return A(t,Ar(e,3),Pn,!0)}function Pa(t,e){return A(t,Ar(e,3),Nn,!0)}function Oa(t,e){return null==t?t:lu(t,Ar(e),qa)}function Ia(t,e){return null==t?t:uu(t,Ar(e),qa)}function Na(t,e){return t&&Pn(t,Ar(e))}function Ua(t,e){return t&&Nn(t,Ar(e))}function ja(t){return null==t?[]:Un(t,Ga(t))}function za(t){return null==t?[]:Un(t,qa(t))}function Ha(t,e,n){var i=null==t?et:zn(t,e);return i===et?n:i}function Wa(t,e){return null!=t&&Tr(t,e,Wn)}function Va(t,e){return null!=t&&Tr(t,e,Vn)}function Ga(t){var e=jr(t);if(!e&&!Gs(t))return ni(t);var n=Dr(t),i=!!n,r=n||[],o=r.length;for(var s in t)!Wn(t,s)||i&&("length"==s||G(s,o))||e&&"constructor"==s||r.push(s);return r}function qa(t){for(var e=-1,n=jr(t),i=ii(t),r=i.length,o=Dr(t),s=!!o,a=o||[],c=a.length;++e<r;){var l=i[e];s&&("length"==l||G(l,c))||"constructor"==l&&(n||!dl.call(t,l))||a.push(l)}return a}function Xa(t,e){var n={};return e=Ar(e,3),Pn(t,function(t,i,r){n[e(t,i,r)]=t}),n}function Ya(t,e){var n={};return e=Ar(e,3),Pn(t,function(t,i,r){n[i]=e(t,i,r)}),n}function Ka(t,e){return e=Ar(e),fi(t,function(t,n){return!e(t,n)})}function Za(t,e){return null==t?{}:fi(t,Ar(e))}function Qa(t,e,n){e=Ir(e,t)?[e]:Pi(e);var i=-1,r=e.length;for(r||(t=et,r=1);++i<r;){var o=null==t?et:t[e[i]];o===et&&(i=r,o=n),t=na(o)?o.call(t):o}return t}function Ja(t,e,n){return null==t?t:bi(t,e,n)}function tc(t,e,n,i){return i="function"==typeof i?i:et,null==t?t:bi(t,e,n,i)}function ec(t){return L(t,Ga(t))}function nc(t){return L(t,qa(t))}function ic(t,e,n){var i=Zu(t)||xa(t);if(e=Ar(e,4),null==n)if(i||oa(t)){var r=t.constructor;n=i?Zu(t)?new r:[]:na(r)?bn(Cr(t)):{}}else n={};return(i?u:Pn)(t,function(t,i,r){return e(n,t,i,r)}),n}function rc(t,e){return null==t||$i(t,e)}function oc(t,e,n){return null==t?t:Fi(t,e,Bi(n))}function sc(t,e,n,i){return i="function"==typeof i?i:et,null==t?t:Fi(t,e,Bi(n),i)}function ac(t){return t?R(t,Ga(t)):[]}function cc(t){return null==t?[]:R(t,qa(t))}function lc(t,e,n){return n===et&&(n=e,e=et),n!==et&&(n=Ta(n),n=n===n?n:0),e!==et&&(e=Ta(e),e=e===e?e:0),vn(Ta(t),e,n)}function uc(t,e,n){return e=Ta(e)||0,n===et?(n=e,e=0):n=Ta(n)||0,t=Ta(t),Xn(t,e,n)}function hc(t,e,n){if(n&&"boolean"!=typeof n&&Or(t,e,n)&&(e=n=et),n===et&&("boolean"==typeof e?(n=e,e=et):"boolean"==typeof t&&(n=t,t=et)),t===et&&e===et?(t=0,e=1):(t=Ta(t)||0,e===et?(e=t,t=0):e=Ta(e)||0),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Ul();return Il(t+r*(e-t+On("1e-"+((r+"").length-1))),e)}return vi(t,e)}function fc(t){return bh(Ra(t).toLowerCase())}function dc(t){return t=Ra(t),t&&t.replace(Be,j).replace(En,"")}function pc(t,e,n){
t=Ra(t),e="string"==typeof e?e:e+"";var i=t.length;return n=n===et?i:vn($a(n),0,i),n-=e.length,n>=0&&t.indexOf(e,n)==n}function gc(t){return t=Ra(t),t&&de.test(t)?t.replace(he,z):t}function mc(t){return t=Ra(t),t&&xe.test(t)?t.replace(be,"\\$&"):t}function vc(t,e,n){t=Ra(t),e=$a(e);var i=e?Z(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return ur(kl(r),n)+t+ur(Ll(r),n)}function yc(t,e,n){t=Ra(t),e=$a(e);var i=e?Z(t):0;return e&&i<e?t+ur(e-i,n):t}function wc(t,e,n){t=Ra(t),e=$a(e);var i=e?Z(t):0;return e&&i<e?ur(e-i,n)+t:t}function bc(t,e,n){return n||null==e?e=0:e&&(e=+e),t=Ra(t).replace(Ae,""),Nl(t,e||(Fe.test(t)?16:10))}function xc(t,e,n){return e=(n?Or(t,e,n):e===et)?1:$a(e),wi(Ra(t),e)}function Ac(){var t=arguments,e=Ra(t[0]);return t.length<3?e:jl.call(e,t[1],t[2])}function Ec(t,e,n){return n&&"number"!=typeof n&&Or(t,e,n)&&(e=n=et),(n=n===et?Tt:n>>>0)?(t=Ra(t),t&&("string"==typeof e||null!=e&&!ma(e))&&(e+="",""==e&&Cn.test(t))?Oi(Q(t),0,n):Hl.call(t,e,n)):[]}function _c(t,e,n){return t=Ra(t),n=vn($a(n),0,t.length),t.lastIndexOf(e,n)==n}function Sc(t,n,i){var r=e.templateSettings;i&&Or(t,n,i)&&(n=et),t=Ra(t),n=eh({},n,r,hn);var o,s,a=eh({},n.imports,r.imports,hn),c=Ga(a),l=R(a,c),u=0,h=n.interpolate||Pe,f="__p += '",d=al((n.escape||Pe).source+"|"+h.source+"|"+(h===me?Me:Pe).source+"|"+(n.evaluate||Pe).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Fn+"]")+"\n";t.replace(d,function(e,n,i,r,a,c){return i||(i=r),f+=t.slice(u,c).replace(Oe,H),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+e.length,e}),f+="';\n";var g=n.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(ae,""):f).replace(ce,"$1").replace(le,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=xh(function(){return Function(c,p+"return "+f).apply(et,l)});if(m.source=f,ta(m))throw m;return m}function Cc(t){return Ra(t).toLowerCase()}function Mc(t){return Ra(t).toUpperCase()}function $c(t,e,n){if(t=Ra(t),!t)return t;if(n||e===et)return t.replace(Ae,"");if(!(e+=""))return t;var i=Q(t),r=Q(e),o=D(i,r),s=B(i,r)+1;return Oi(i,o,s).join("")}function Fc(t,e,n){if(t=Ra(t),!t)return t;if(n||e===et)return t.replace(_e,"");if(!(e+=""))return t;var i=Q(t),r=B(i,Q(e))+1;return Oi(i,0,r).join("")}function Tc(t,e,n){if(t=Ra(t),!t)return t;if(n||e===et)return t.replace(Ee,"");if(!(e+=""))return t;var i=Q(t),r=D(i,Q(e));return Oi(i,r).join("")}function Lc(t,e){var n=wt,i=bt;if(oa(e)){var r="separator"in e?e.separator:r;n="length"in e?$a(e.length):n,i="omission"in e?Ra(e.omission):i}t=Ra(t);var o=t.length;if(Cn.test(t)){var s=Q(t);o=s.length}if(n>=o)return t;var a=n-Z(i);if(a<1)return i;var c=s?Oi(s,0,a).join(""):t.slice(0,a);if(r===et)return c+i;if(s&&(a+=c.length-a),ma(r)){if(t.slice(a).search(r)){var l,u=c;for(r.global||(r=al(r.source,Ra($e.exec(r))+"g")),r.lastIndex=0;l=r.exec(u);)var h=l.index;c=c.slice(0,h===et?a:h)}}else if(t.indexOf(r,a)!=a){var f=c.lastIndexOf(r);f>-1&&(c=c.slice(0,f))}return c+i}function kc(t){return t=Ra(t),t&&fe.test(t)?t.replace(ue,J):t}function Rc(t,e,n){return t=Ra(t),e=n?et:e,e===et&&(e=Mn.test(t)?Sn:Se),t.match(e)||[]}function Dc(t){var e=t?t.length:0,n=Ar();return t=e?m(t,function(t){if("function"!=typeof t[1])throw new cl(rt);return[n(t[0]),t[1]]}):[],Ls(function(n){for(var i=-1;++i<e;){var r=t[i];if(a(r[0],this,n))return a(r[1],this,n)}})}function Bc(t){return wn(yn(t,!0))}function Pc(t){return function(){return t}}function Oc(t){return t}function Ic(t){return ei("function"==typeof t?t:yn(t,!0))}function Nc(t){return oi(yn(t,!0))}function Uc(t,e){return si(t,yn(e,!0))}function jc(t,e,n){var i=Ga(e),r=Un(e,i);null!=n||oa(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Un(e,Ga(e)));var o=!(oa(n)&&"chain"in n&&!n.chain),s=na(t);return u(r,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=Xi(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,v([this.value()],arguments))})}),t}function zc(){return Gn._===this&&(Gn._=vl),this}function Hc(){}function Wc(t){return t=$a(t),Ls(function(e){return li(e,t)})}function Vc(t){return Ir(t)?di(t):pi(t)}function Gc(t){return function(e){return null==t?et:zn(t,e)}}function qc(t,e){if(t=$a(t),t<1||t>Mt)return[];var n=Tt,i=Il(t,Tt);e=Ar(e),t-=Tt;for(var r=T(i,e);++n<t;)e(n);return r}function Xc(t){return Zu(t)?m(t,Xr):ba(t)?[t]:Xi(vu(t))}function Yc(t){var e=++pl;return Ra(t)+e}function Kc(t){return t&&t.length?x(t,Oc,zs):et}function Zc(t,e){return t&&t.length?x(t,Ar(e),zs):et}function Qc(t){return C(t,Oc)}function Jc(t,e){return C(t,Ar(e))}function tl(t){return t&&t.length?x(t,Oc,Sa):et}function el(t,e){return t&&t.length?x(t,Ar(e),Sa):et}function nl(t){return t&&t.length?F(t,Oc):0}function il(t,e){return t&&t.length?F(t,Ar(e)):0}t=t?qn.defaults({},t,qn.pick(Gn,$n)):Gn;var rl=t.Date,ol=t.Error,sl=t.Math,al=t.RegExp,cl=t.TypeError,ll=t.Array.prototype,ul=t.Object.prototype,hl=t.String.prototype,fl=t.Function.prototype.toString,dl=ul.hasOwnProperty,pl=0,gl=fl.call(Object),ml=ul.toString,vl=Gn._,yl=al("^"+fl.call(dl).replace(be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wl=jn?t.Buffer:et,bl=t.Reflect,xl=t.Symbol,Al=t.Uint8Array,El=t.clearTimeout,_l=bl?bl.enumerate:et,Sl=Object.getOwnPropertySymbols,Cl="symbol"==typeof(Cl=xl&&xl.iterator)?Cl:et,Ml=Object.create,$l=ul.propertyIsEnumerable,Fl=t.setTimeout,Tl=ll.splice,Ll=sl.ceil,kl=sl.floor,Rl=Object.getPrototypeOf,Dl=t.isFinite,Bl=ll.join,Pl=Object.keys,Ol=sl.max,Il=sl.min,Nl=t.parseInt,Ul=sl.random,jl=hl.replace,zl=ll.reverse,Hl=hl.split,Wl=_r(t,"DataView"),Vl=_r(t,"Map"),Gl=_r(t,"Promise"),ql=_r(t,"Set"),Xl=_r(t,"WeakMap"),Yl=_r(Object,"create"),Kl=Xl&&new Xl,Zl=!$l.call({valueOf:1},"valueOf"),Ql={},Jl=Yr(Wl),tu=Yr(Vl),eu=Yr(Gl),nu=Yr(ql),iu=Yr(Xl),ru=xl?xl.prototype:et,ou=ru?ru.valueOf:et,su=ru?ru.toString:et;e.templateSettings={escape:pe,evaluate:ge,interpolate:me,variable:"",imports:{_:e}},e.prototype=n.prototype,e.prototype.constructor=e,i.prototype=bn(n.prototype),i.prototype.constructor=i,r.prototype=bn(n.prototype),r.prototype.constructor=r,Ne.prototype=Yl?Yl(null):ul,We.prototype.clear=Ve,We.prototype["delete"]=Ge,We.prototype.get=qe,We.prototype.has=Xe,We.prototype.set=Ye,Ke.prototype.push=Qe,Je.prototype.clear=tn,Je.prototype["delete"]=en,Je.prototype.get=nn,Je.prototype.has=rn,Je.prototype.set=on;var au=Ji(Pn),cu=Ji(Nn,!0),lu=tr(),uu=tr(!0);_l&&!$l.call({valueOf:1},"valueOf")&&(ii=function(t){return q(_l(t))});var hu=Kl?function(t,e){return Kl.set(t,e),t}:Oc,fu=ql&&2===new ql([1,2]).size?function(t){return new ql(t)}:Hc,du=Kl?function(t){return Kl.get(t)}:Hc,pu=di("length");Sl||(Mr=function(){return[]});var gu=Sl?function(t){for(var e=[];t;)v(e,Mr(t)),t=Cr(t);return e}:Mr;(Wl&&$r(new Wl(new ArrayBuffer(1)))!=Zt||Vl&&$r(new Vl)!=Ut||Gl&&$r(Gl.resolve())!=Ht||ql&&$r(new ql)!=Vt||Xl&&$r(new Xl)!=Xt)&&($r=function(t){var e=ml.call(t),n=e==zt?t.constructor:et,i=n?Yr(n):et;if(i)switch(i){case Jl:return Zt;case tu:return Ut;case eu:return Ht;case nu:return Vt;case iu:return Xt}return e});var mu=function(){var t=0,e=0;return function(n,i){var r=zu(),o=At-(r-e);if(e=r,o>0){if(++t>=xt)return n}else t=0;return hu(n,i)}}(),vu=$s(function(t){var e=[];return Ra(t).replace(we,function(t,n,i,r){e.push(i?r.replace(Ce,"$1"):n||t)}),e}),yu=Ls(function(t,e){return qs(t)?_n(t,Bn(e,1,qs,!0)):[]}),wu=Ls(function(t,e){var n=mo(e);return qs(n)&&(n=et),qs(t)?_n(t,Bn(e,1,qs,!0),Ar(n)):[]}),bu=Ls(function(t,e){var n=mo(e);return qs(n)&&(n=et),qs(t)?_n(t,Bn(e,1,qs,!0),et,n):[]}),xu=Ls(function(t){var e=m(t,Di);return e.length&&e[0]===t[0]?Yn(e):[]}),Au=Ls(function(t){var e=mo(t),n=m(t,Di);return e===mo(n)?e=et:n.pop(),n.length&&n[0]===t[0]?Yn(n,Ar(e)):[]}),Eu=Ls(function(t){var e=mo(t),n=m(t,Di);return e===mo(n)?e=et:n.pop(),n.length&&n[0]===t[0]?Yn(n,et,e):[]}),_u=Ls(wo),Su=Ls(function(t,e){e=m(Bn(e,1),String);var n=mn(t,e);return mi(t,e.sort(O)),n}),Cu=Ls(function(t){return Mi(Bn(t,1,qs,!0))}),Mu=Ls(function(t){var e=mo(t);return qs(e)&&(e=et),Mi(Bn(t,1,qs,!0),Ar(e))}),$u=Ls(function(t){var e=mo(t);return qs(e)&&(e=et),Mi(Bn(t,1,qs,!0),et,e)}),Fu=Ls(function(t,e){return qs(t)?_n(t,e):[]}),Tu=Ls(function(t){return ki(d(t,qs))}),Lu=Ls(function(t){var e=mo(t);return qs(e)&&(e=et),ki(d(t,qs),Ar(e))}),ku=Ls(function(t){var e=mo(t);return qs(e)&&(e=et),ki(d(t,qs),et,e)}),Ru=Ls(jo),Du=Ls(function(t){var e=t.length,n=e>1?t[e-1]:et;return n="function"==typeof n?(t.pop(),n):et,zo(t,n)}),Bu=Ls(function(t){t=Bn(t,1);var e=t.length,n=e?t[0]:0,o=this.__wrapped__,s=function(e){return mn(e,t)};return!(e>1||this.__actions__.length)&&o instanceof r&&G(n)?(o=o.slice(n,+n+(e?1:0)),o.__actions__.push({func:qo,args:[s],thisArg:et}),new i(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(et),t})):this.thru(s)}),Pu=Zi(function(t,e,n){dl.call(t,n)?++t[n]:t[n]=1}),Ou=Zi(function(t,e,n){dl.call(t,n)?t[n].push(e):t[n]=[e]}),Iu=Ls(function(t,e,n){var i=-1,r="function"==typeof e,o=Ir(e),s=Gs(t)?Array(t.length):[];return au(t,function(t){var c=r?e:o&&null!=t?t[e]:et;s[++i]=c?a(c,t,n):Zn(t,e,n)}),s}),Nu=Zi(function(t,e,n){t[n]=e}),Uu=Zi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ju=Ls(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Or(t,e[0],e[1])?e=[]:n>2&&Or(e[0],e[1],e[2])&&(e=[e[0]]),e=1==e.length&&Zu(e[0])?e[0]:Bn(e,1,Pr),ui(t,e,[])}),zu=rl.now,Hu=Ls(function(t,e,n){var i=at;if(n.length){var r=Y(n,Sr(Hu));i|=ft}return gr(t,i,e,n,r)}),Wu=Ls(function(t,e,n){var i=at|ct;if(n.length){var r=Y(n,Sr(Wu));i|=ft}return gr(e,i,t,n,r)}),Vu=Ls(function(t,e){return xn(t,1,e)}),Gu=Ls(function(t,e,n){return xn(t,Ta(e)||0,n)});$s.Cache=We;var qu=Ls(function(t,e){e=1==e.length&&Zu(e[0])?m(e[0],k(Ar())):m(Bn(e,1,Pr),k(Ar()));var n=e.length;return Ls(function(i){for(var r=-1,o=Il(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return a(t,this,i)})}),Xu=Ls(function(t,e){var n=Y(e,Sr(Xu));return gr(t,ft,et,e,n)}),Yu=Ls(function(t,e){var n=Y(e,Sr(Yu));return gr(t,dt,et,e,n)}),Ku=Ls(function(t,e){return gr(t,gt,et,et,et,Bn(e,1))}),Zu=Array.isArray,Qu=wl?function(t){return t instanceof wl}:Pc(!1),Ju=Qi(function(t,e){if(Zl||jr(e)||Gs(e))return void Yi(e,Ga(e),t);for(var n in e)dl.call(e,n)&&dn(t,n,e[n])}),th=Qi(function(t,e){if(Zl||jr(e)||Gs(e))return void Yi(e,qa(e),t);for(var n in e)dn(t,n,e[n])}),eh=Qi(function(t,e,n,i){Yi(e,qa(e),t,i)}),nh=Qi(function(t,e,n,i){Yi(e,Ga(e),t,i)}),ih=Ls(function(t,e){return mn(t,Bn(e,1))}),rh=Ls(function(t){return t.push(et,hn),a(eh,et,t)}),oh=Ls(function(t){return t.push(et,Vr),a(uh,et,t)}),sh=cr(function(t,e,n){t[e]=n},Pc(Oc)),ah=cr(function(t,e,n){dl.call(t,e)?t[e].push(n):t[e]=[n]},Ar),ch=Ls(Zn),lh=Qi(function(t,e,n){ai(t,e,n)}),uh=Qi(function(t,e,n,i){ai(t,e,n,i)}),hh=Ls(function(t,e){return null==t?{}:(e=m(Bn(e,1),Xr),hi(t,_n(br(t),e)))}),fh=Ls(function(t,e){return null==t?{}:hi(t,Bn(e,1))}),dh=ir(function(t,e,n){return e=e.toLowerCase(),t+(n?fc(e):e)}),ph=ir(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),gh=ir(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),mh=nr("toLowerCase"),vh=ir(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),yh=ir(function(t,e,n){return t+(n?" ":"")+bh(e)}),wh=ir(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),bh=nr("toUpperCase"),xh=Ls(function(t,e){try{return a(t,et,e)}catch(n){return ta(n)?n:new ol(n)}}),Ah=Ls(function(t,e){return u(Bn(e,1),function(e){t[e]=Hu(t[e],t)}),t}),Eh=sr(),_h=sr(!0),Sh=Ls(function(t,e){return function(n){return Zn(n,t,e)}}),Ch=Ls(function(t,e){return function(n){return Zn(t,n,e)}}),Mh=lr(m),$h=lr(f),Fh=lr(b),Th=fr(),Lh=fr(!0),kh=U(function(t,e){return t+e}),Rh=pr("ceil"),Dh=U(function(t,e){return t/e}),Bh=pr("floor"),Ph=U(function(t,e){return t*e}),Oh=pr("round"),Ih=U(function(t,e){return t-e});return e.after=xs,e.ary=As,e.assign=Ju,e.assignIn=th,e.assignInWith=eh,e.assignWith=nh,e.at=ih,e.before=Es,e.bind=Hu,e.bindAll=Ah,e.bindKey=Wu,e.castArray=Ps,e.chain=Vo,e.chunk=Zr,e.compact=Qr,e.concat=Jr,e.cond=Dc,e.conforms=Bc,e.constant=Pc,e.countBy=Pu,e.create=Da,e.curry=_s,e.curryRight=Ss,e.debounce=Cs,e.defaults=rh,e.defaultsDeep=oh,e.defer=Vu,e.delay=Gu,e.difference=yu,e.differenceBy=wu,e.differenceWith=bu,e.drop=to,e.dropRight=eo,e.dropRightWhile=no,e.dropWhile=io,e.fill=ro,e.filter=ns,e.flatMap=os,e.flatMapDeep=ss,e.flatMapDepth=as,e.flatten=ao,e.flattenDeep=co,e.flattenDepth=lo,e.flip=Ms,e.flow=Eh,e.flowRight=_h,e.fromPairs=uo,e.functions=ja,e.functionsIn=za,e.groupBy=Ou,e.initial=po,e.intersection=xu,e.intersectionBy=Au,e.intersectionWith=Eu,e.invert=sh,e.invertBy=ah,e.invokeMap=Iu,e.iteratee=Ic,e.keyBy=Nu,e.keys=Ga,e.keysIn=qa,e.map=hs,e.mapKeys=Xa,e.mapValues=Ya,e.matches=Nc,e.matchesProperty=Uc,e.memoize=$s,e.merge=lh,e.mergeWith=uh,e.method=Sh,e.methodOf=Ch,e.mixin=jc,e.negate=Fs,e.nthArg=Wc,e.omit=hh,e.omitBy=Ka,e.once=Ts,e.orderBy=fs,e.over=Mh,e.overArgs=qu,e.overEvery=$h,e.overSome=Fh,e.partial=Xu,e.partialRight=Yu,e.partition=Uu,e.pick=fh,e.pickBy=Za,e.property=Vc,e.propertyOf=Gc,e.pull=_u,e.pullAll=wo,e.pullAllBy=bo,e.pullAllWith=xo,e.pullAt=Su,e.range=Th,e.rangeRight=Lh,e.rearg=Ku,e.reject=gs,e.remove=Ao,e.rest=Ls,e.reverse=Eo,e.sampleSize=vs,e.set=Ja,e.setWith=tc,e.shuffle=ys,e.slice=_o,e.sortBy=ju,e.sortedUniq=Lo,e.sortedUniqBy=ko,e.split=Ec,e.spread=ks,e.tail=Ro,e.take=Do,e.takeRight=Bo,e.takeRightWhile=Po,e.takeWhile=Oo,e.tap=Go,e.throttle=Rs,e.thru=qo,e.toArray=Ma,e.toPairs=ec,e.toPairsIn=nc,e.toPath=Xc,e.toPlainObject=La,e.transform=ic,e.unary=Ds,e.union=Cu,e.unionBy=Mu,e.unionWith=$u,e.uniq=Io,e.uniqBy=No,e.uniqWith=Uo,e.unset=rc,e.unzip=jo,e.unzipWith=zo,e.update=oc,e.updateWith=sc,e.values=ac,e.valuesIn=cc,e.without=Fu,e.words=Rc,e.wrap=Bs,e.xor=Tu,e.xorBy=Lu,e.xorWith=ku,e.zip=Ru,e.zipObject=Ho,e.zipObjectDeep=Wo,e.zipWith=Du,e.entries=ec,e.entriesIn=nc,e.extend=th,e.extendWith=eh,jc(e,e),e.add=kh,e.attempt=xh,e.camelCase=dh,e.capitalize=fc,e.ceil=Rh,e.clamp=lc,e.clone=Os,e.cloneDeep=Ns,e.cloneDeepWith=Us,e.cloneWith=Is,e.deburr=dc,e.divide=Dh,e.endsWith=pc,e.eq=js,e.escape=gc,e.escapeRegExp=mc,e.every=es,e.find=is,e.findIndex=oo,e.findKey=Ba,e.findLast=rs,e.findLastIndex=so,e.findLastKey=Pa,e.floor=Bh,e.forEach=cs,e.forEachRight=ls,e.forIn=Oa,e.forInRight=Ia,e.forOwn=Na,e.forOwnRight=Ua,e.get=Ha,e.gt=zs,e.gte=Hs,e.has=Wa,e.hasIn=Va,e.head=ho,e.identity=Oc,e.includes=us,e.indexOf=fo,e.inRange=uc,e.invoke=ch,e.isArguments=Ws,e.isArray=Zu,e.isArrayBuffer=Vs,e.isArrayLike=Gs,e.isArrayLikeObject=qs,e.isBoolean=Xs,e.isBuffer=Qu,e.isDate=Ys,e.isElement=Ks,e.isEmpty=Zs,e.isEqual=Qs,e.isEqualWith=Js,e.isError=ta,e.isFinite=ea,e.isFunction=na,e.isInteger=ia,e.isLength=ra,e.isMap=aa,e.isMatch=ca,e.isMatchWith=la,e.isNaN=ua,e.isNative=ha,e.isNil=da,e.isNull=fa,e.isNumber=pa,e.isObject=oa,e.isObjectLike=sa,e.isPlainObject=ga,e.isRegExp=ma,e.isSafeInteger=va,e.isSet=ya,e.isString=wa,e.isSymbol=ba,e.isTypedArray=xa,e.isUndefined=Aa,e.isWeakMap=Ea,e.isWeakSet=_a,e.join=go,e.kebabCase=ph,e.last=mo,e.lastIndexOf=vo,e.lowerCase=gh,e.lowerFirst=mh,e.lt=Sa,e.lte=Ca,e.max=Kc,e.maxBy=Zc,e.mean=Qc,e.meanBy=Jc,e.min=tl,e.minBy=el,e.multiply=Ph,e.nth=yo,e.noConflict=zc,e.noop=Hc,e.now=zu,e.pad=vc,e.padEnd=yc,e.padStart=wc,e.parseInt=bc,e.random=hc,e.reduce=ds,e.reduceRight=ps,e.repeat=xc,e.replace=Ac,e.result=Qa,e.round=Oh,e.runInContext=tt,e.sample=ms,e.size=ws,e.snakeCase=vh,e.some=bs,e.sortedIndex=So,e.sortedIndexBy=Co,e.sortedIndexOf=Mo,e.sortedLastIndex=$o,e.sortedLastIndexBy=Fo,e.sortedLastIndexOf=To,e.startCase=yh,e.startsWith=_c,e.subtract=Ih,e.sum=nl,e.sumBy=il,e.template=Sc,e.times=qc,e.toInteger=$a,e.toLength=Fa,e.toLower=Cc,e.toNumber=Ta,e.toSafeInteger=ka,e.toString=Ra,e.toUpper=Mc,e.trim=$c,e.trimEnd=Fc,e.trimStart=Tc,e.truncate=Lc,e.unescape=kc,e.uniqueId=Yc,e.upperCase=wh,e.upperFirst=bh,e.each=cs,e.eachRight=ls,e.first=ho,jc(e,function(){var t={};return Pn(e,function(n,i){dl.call(e.prototype,i)||(t[i]=n)}),t}(),{chain:!1}),e.VERSION=nt,u(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),u(["drop","take"],function(t,e){r.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new r(this);n=n===et?1:Ol($a(n),0);var o=this.clone();return i?o.__takeCount__=Il(n,o.__takeCount__):o.__views__.push({size:Il(n,Tt),type:t+(o.__dir__<0?"Right":"")}),o},r.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),u(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==Et||n==St;r.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ar(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),u(["head","last"],function(t,e){var n="take"+(e?"Right":"");r.prototype[t]=function(){return this[n](1).value()[0]}}),u(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");r.prototype[t]=function(){return this.__filtered__?new r(this):this[n](1)}}),r.prototype.compact=function(){return this.filter(Oc)},r.prototype.find=function(t){return this.filter(t).head()},r.prototype.findLast=function(t){return this.reverse().find(t)},r.prototype.invokeMap=Ls(function(t,e){return"function"==typeof t?new r(this):this.map(function(n){return Zn(n,t,e)})}),r.prototype.reject=function(t){return t=Ar(t,3),this.filter(function(e){return!t(e)})},r.prototype.slice=function(t,e){t=$a(t);var n=this;return n.__filtered__&&(t>0||e<0)?new r(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==et&&(e=$a(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},r.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},r.prototype.toArray=function(){return this.take(Tt)},Pn(r.prototype,function(t,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),s=/^(?:head|last)$/.test(n),a=e[s?"take"+("last"==n?"Right":""):n],c=s||/^find/.test(n);a&&(e.prototype[n]=function(){var n=this.__wrapped__,l=s?[1]:arguments,u=n instanceof r,h=l[0],f=u||Zu(n),d=function(t){var n=a.apply(e,v([t],l));return s&&p?n[0]:n};f&&o&&"function"==typeof h&&1!=h.length&&(u=f=!1);var p=this.__chain__,g=!!this.__actions__.length,m=c&&!p,y=u&&!g;if(!c&&f){n=y?n:new r(this);var w=t.apply(n,l);return w.__actions__.push({func:qo,args:[d],thisArg:et}),new i(w,p)}return m&&y?t.apply(this,l):(w=this.thru(d),m?s?w.value()[0]:w.value():w)})}),u(["pop","push","shift","sort","splice","unshift"],function(t){var n=ll[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var e=this.value();return n.apply(Zu(e)?e:[],t)}return this[i](function(e){return n.apply(Zu(e)?e:[],t)})}}),Pn(r.prototype,function(t,n){var i=e[n];if(i){var r=i.name+"",o=Ql[r]||(Ql[r]=[]);o.push({name:n,func:i})}}),Ql[ar(et,ct).name]=[{name:"wrapper",func:et}],r.prototype.clone=P,r.prototype.reverse=De,r.prototype.value=Ie,e.prototype.at=Bu,e.prototype.chain=Xo,e.prototype.commit=Yo,e.prototype.next=Ko,e.prototype.plant=Qo,e.prototype.reverse=Jo,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=ts,Cl&&(e.prototype[Cl]=Zo),e}var et,nt="4.11.1",it=200,rt="Expected a function",ot="__lodash_hash_undefined__",st="__lodash_placeholder__",at=1,ct=2,lt=4,ut=8,ht=16,ft=32,dt=64,pt=128,gt=256,mt=512,vt=1,yt=2,wt=30,bt="...",xt=150,At=16,Et=1,_t=2,St=3,Ct=1/0,Mt=9007199254740991,$t=1.7976931348623157e308,Ft=NaN,Tt=4294967295,Lt=Tt-1,kt=Tt>>>1,Rt="[object Arguments]",Dt="[object Array]",Bt="[object Boolean]",Pt="[object Date]",Ot="[object Error]",It="[object Function]",Nt="[object GeneratorFunction]",Ut="[object Map]",jt="[object Number]",zt="[object Object]",Ht="[object Promise]",Wt="[object RegExp]",Vt="[object Set]",Gt="[object String]",qt="[object Symbol]",Xt="[object WeakMap]",Yt="[object WeakSet]",Kt="[object ArrayBuffer]",Zt="[object DataView]",Qt="[object Float32Array]",Jt="[object Float64Array]",te="[object Int8Array]",ee="[object Int16Array]",ne="[object Int32Array]",ie="[object Uint8Array]",re="[object Uint8ClampedArray]",oe="[object Uint16Array]",se="[object Uint32Array]",ae=/\b__p \+= '';/g,ce=/\b(__p \+=) '' \+/g,le=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ue=/&(?:amp|lt|gt|quot|#39|#96);/g,he=/[&<>"'`]/g,fe=RegExp(ue.source),de=RegExp(he.source),pe=/<%-([\s\S]+?)%>/g,ge=/<%([\s\S]+?)%>/g,me=/<%=([\s\S]+?)%>/g,ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ye=/^\w*$/,we=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,be=/[\\^$.*+?()[\]{}|]/g,xe=RegExp(be.source),Ae=/^\s+|\s+$/g,Ee=/^\s+/,_e=/\s+$/,Se=/[a-zA-Z0-9]+/g,Ce=/\\(\\)?/g,Me=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$e=/\w*$/,Fe=/^0x/i,Te=/^[-+]0x[0-9a-f]+$/i,Le=/^0b[01]+$/i,ke=/^\[object .+?Constructor\]$/,Re=/^0o[0-7]+$/i,De=/^(?:0|[1-9]\d*)$/,Be=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Pe=/($^)/,Oe=/['\n\r\u2028\u2029\\]/g,Ie="\\ud800-\\udfff",Ne="\\u0300-\\u036f\\ufe20-\\ufe23",Ue="\\u20d0-\\u20f0",je="\\u2700-\\u27bf",ze="a-z\\xdf-\\xf6\\xf8-\\xff",He="\\xac\\xb1\\xd7\\xf7",We="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ve="\\u2018\\u2019\\u201c\\u201d",Ge=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qe="A-Z\\xc0-\\xd6\\xd8-\\xde",Xe="\\ufe0e\\ufe0f",Ye=He+We+Ve+Ge,Ke="['’]",Ze="["+Ie+"]",Qe="["+Ye+"]",Je="["+Ne+Ue+"]",tn="\\d+",en="["+je+"]",nn="["+ze+"]",rn="[^"+Ie+Ye+tn+je+ze+qe+"]",on="\\ud83c[\\udffb-\\udfff]",sn="(?:"+Je+"|"+on+")",an="[^"+Ie+"]",cn="(?:\\ud83c[\\udde6-\\uddff]){2}",ln="[\\ud800-\\udbff][\\udc00-\\udfff]",un="["+qe+"]",hn="\\u200d",fn="(?:"+nn+"|"+rn+")",dn="(?:"+un+"|"+rn+")",pn="(?:"+Ke+"(?:d|ll|m|re|s|t|ve))?",gn="(?:"+Ke+"(?:D|LL|M|RE|S|T|VE))?",mn=sn+"?",vn="["+Xe+"]?",yn="(?:"+hn+"(?:"+[an,cn,ln].join("|")+")"+vn+mn+")*",wn=vn+mn+yn,bn="(?:"+[en,cn,ln].join("|")+")"+wn,xn="(?:"+[an+Je+"?",Je,cn,ln,Ze].join("|")+")",An=RegExp(Ke,"g"),En=RegExp(Je,"g"),_n=RegExp(on+"(?="+on+")|"+xn+wn,"g"),Sn=RegExp([un+"?"+nn+"+"+pn+"(?="+[Qe,un,"$"].join("|")+")",dn+"+"+gn+"(?="+[Qe,un+fn,"$"].join("|")+")",un+"?"+fn+"+"+pn,un+"+"+gn,tn,bn].join("|"),"g"),Cn=RegExp("["+hn+Ie+Ne+Ue+Xe+"]"),Mn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fn=-1,Tn={};Tn[Qt]=Tn[Jt]=Tn[te]=Tn[ee]=Tn[ne]=Tn[ie]=Tn[re]=Tn[oe]=Tn[se]=!0,Tn[Rt]=Tn[Dt]=Tn[Kt]=Tn[Bt]=Tn[Zt]=Tn[Pt]=Tn[Ot]=Tn[It]=Tn[Ut]=Tn[jt]=Tn[zt]=Tn[Wt]=Tn[Vt]=Tn[Gt]=Tn[Xt]=!1;var Ln={};Ln[Rt]=Ln[Dt]=Ln[Kt]=Ln[Zt]=Ln[Bt]=Ln[Pt]=Ln[Qt]=Ln[Jt]=Ln[te]=Ln[ee]=Ln[ne]=Ln[Ut]=Ln[jt]=Ln[zt]=Ln[Wt]=Ln[Vt]=Ln[Gt]=Ln[qt]=Ln[ie]=Ln[re]=Ln[oe]=Ln[se]=!0,Ln[Ot]=Ln[It]=Ln[Xt]=!1;var kn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Rn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Dn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Bn={"function":!0,object:!0},Pn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},On=parseFloat,In=parseInt,Nn=Bn[typeof e]&&e&&!e.nodeType?e:et,Un=Bn[typeof t]&&t&&!t.nodeType?t:et,jn=Un&&Un.exports===Nn?Nn:et,zn=P(Nn&&Un&&"object"==typeof r&&r),Hn=P(Bn[typeof self]&&self),Wn=P(Bn[typeof window]&&window),Vn=P(Bn[typeof this]&&this),Gn=zn||Wn!==(Vn&&Vn.window)&&Wn||Hn||Vn||Function("return this")(),qn=tt();(Wn||Hn||{})._=qn,i=function(){return qn}.call(e,n,e,t),!(i!==et&&(t.exports=i))}).call(this)}).call(e,n(349)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n(351);var i={template:'\n    <div class="modal" ng-click="modal.close()" ng-show="modal.opened">\n      <div class="scale">\n        <div class="content modal-body" ng-click="modal.block($event)" ng-style="{\'width\': modal.width, \'height\': modal.height}">\n          <div class="modal-header">\n            <div class="close" ng-click="modal.close()">✕</div>\n          </div>\n          <div class="modal-content" ng-transclude>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  ',transclude:!0,controllerAs:"modal",bindings:{name:"@",width:"@",height:"@"},controller:["modalService","$element",function(t,e){this.element=e,t.register(this),this.block=function(t){t.stopPropagation()}}]};t.exports=i},function(t,e){},,function(t,e,n){"use strict";var i=n(354);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(355),o=i.module("simulator.common.components.notification",[]).component("notification",r);t.exports=o},function(t,e,n){"use strict";var i=n(348);n(356);var r={template:'\n    <div class="notification-item" ng-repeat="item in notification.items" ng-class="item.type">\n      <p>{{ item.text }}</p>\n      <div class="close" ng-click="item.remove()">&#x2715;</div>\n    </div>\n  ',controllerAs:"notification",controller:["$log","$scope","$timeout","EVENTS",function(t,e,n,r){var o=this;this.items=[],e.$on(r.NOTIFICATION,function(t,e){e&&("success"===e.type&&i.remove(o.items,{type:"error"}),o.items.push(e),e.remove=function(){return i.remove(o.items,e)},e.sticky||n(e.remove,e.timeout||2e4))})}]};t.exports=r},function(t,e){},,function(t,e,n){"use strict";var i=n(359);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(360),o=i.module("simulator.common.components.qrcode",[]).component("qrcode",r);t.exports=o},function(t,e,n){"use strict";var i=n(361);n(362);var r={bindings:{href:"<"},controller:["$scope","$element",function(t,e){var n=this,r=new i(e[0],this.href);t.$watch(function(){return n.href},function(t){r.clear(),r.makeCode(t)})}]};t.exports=r},function(t,e,n){var i;!function(e,n){t.exports=n()}(this,function(){function t(t){this.mode=u.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,n=this.data.length;e<n;e++){var i=[],r=this.data.charCodeAt(e);r>65536?(i[0]=240|(1835008&r)>>>18,i[1]=128|(258048&r)>>>12,i[2]=128|(4032&r)>>>6,i[3]=128|63&r):r>2048?(i[0]=224|(61440&r)>>>12,i[1]=128|(4032&r)>>>6,i[2]=128|63&r):r>128?(i[0]=192|(1984&r)>>>6,i[1]=128|63&r):i[0]=r,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function r(t,e){this.totalCount=t,this.dataCount=e}function o(){this.buffer=[],this.length=0}function s(){return"undefined"!=typeof CanvasRenderingContext2D}function a(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}function c(t,e){for(var n=1,i=l(t),r=0,o=m.length;r<=o;r++){var s=0;switch(e){case h.L:s=m[r][0];break;case h.M:s=m[r][1];break;case h.Q:s=m[r][2];break;case h.H:s=m[r][3]}if(i<=s)break;n++}if(n>m.length)throw new Error("Too long data");return n}function l(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[i][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4?this.modules[t+n][e+i]=!0:this.modules[t+n][e+i]=!1)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=d.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},createMovieClip:function(t,e,n){var i=t.createEmptyMovieClip(e,n),r=1;this.make();for(var o=0;o<this.modules.length;o++)for(var s=o*r,a=0;a<this.modules[o].length;a++){var c=a*r,l=this.modules[o][a];l&&(i.beginFill(0,100),i.moveTo(c,s),i.lineTo(c+r,s),i.lineTo(c+r,s+r),i.lineTo(c,s+r),i.endFill())}return i},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=d.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(null==this.modules[i][r])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)o==-2||2==o||s==-2||2==s||0==o&&0==s?this.modules[i+o][r+s]=!0:this.modules[i+o][r+s]=!1}},setupTypeNumber:function(t){for(var e=d.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var n=0;n<18;n++){var i=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=d.getBCHTypeInfo(n),r=0;r<15;r++){var o=!t&&1==(i>>r&1);r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(var r=0;r<15;r++){var o=!t&&1==(i>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[i][s-a]){var c=!1;o<t.length&&(c=1==(t[o]>>>r&1));var l=d.getMask(e,i,s-a);l&&(c=!c),this.modules[i][s-a]=c,r--,r==-1&&(o++,r=7)}if(i+=n,i<0||this.moduleCount<=i){i-=n,n=-n;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,i){for(var s=r.getRSBlocks(t,n),a=new o,c=0;c<i.length;c++){var l=i[c];a.put(l.mode,4),a.put(l.getLength(),d.getLengthInBits(l.mode,t)),l.write(a)}for(var u=0,c=0;c<s.length;c++)u+=s[c].dataCount;if(a.getLengthInBits()>8*u)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*u+")");for(a.getLengthInBits()+4<=8*u&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;;){if(a.getLengthInBits()>=8*u)break;if(a.put(e.PAD0,8),a.getLengthInBits()>=8*u)break;
a.put(e.PAD1,8)}return e.createBytes(a,s)},e.createBytes=function(t,e){for(var i=0,r=0,o=0,s=new Array(e.length),a=new Array(e.length),c=0;c<e.length;c++){var l=e[c].dataCount,u=e[c].totalCount-l;r=Math.max(r,l),o=Math.max(o,u),s[c]=new Array(l);for(var h=0;h<s[c].length;h++)s[c][h]=255&t.buffer[h+i];i+=l;var f=d.getErrorCorrectPolynomial(u),p=new n(s[c],f.getLength()-1),g=p.mod(f);a[c]=new Array(f.getLength()-1);for(var h=0;h<a[c].length;h++){var m=h+g.getLength()-a[c].length;a[c][h]=m>=0?g.get(m):0}}for(var v=0,h=0;h<e.length;h++)v+=e[h].totalCount;for(var y=new Array(v),w=0,h=0;h<r;h++)for(var c=0;c<e.length;c++)h<s[c].length&&(y[w++]=s[c][h]);for(var h=0;h<o;h++)for(var c=0;c<e.length;c++)h<a[c].length&&(y[w++]=a[c][h]);return y};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h={L:1,M:0,Q:3,H:2},f={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;d.getBCHDigit(e)-d.getBCHDigit(d.G15)>=0;)e^=d.G15<<d.getBCHDigit(e)-d.getBCHDigit(d.G15);return(t<<10|e)^d.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;d.getBCHDigit(e)-d.getBCHDigit(d.G18)>=0;)e^=d.G18<<d.getBCHDigit(e)-d.getBCHDigit(d.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return d.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case f.PATTERN000:return(e+n)%2==0;case f.PATTERN001:return e%2==0;case f.PATTERN010:return n%3==0;case f.PATTERN011:return(e+n)%3==0;case f.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case f.PATTERN101:return e*n%2+e*n%3==0;case f.PATTERN110:return(e*n%2+e*n%3)%2==0;case f.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new n([1],0),i=0;i<t;i++)e=e.multiply(new n([1,p.gexp(i)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var r=0;r<e;r++){for(var o=0,s=t.isDark(i,r),a=-1;a<=1;a++)if(!(i+a<0||e<=i+a))for(var c=-1;c<=1;c++)r+c<0||e<=r+c||0==a&&0==c||s==t.isDark(i+a,r+c)&&o++;o>5&&(n+=3+o-5)}for(var i=0;i<e-1;i++)for(var r=0;r<e-1;r++){var l=0;t.isDark(i,r)&&l++,t.isDark(i+1,r)&&l++,t.isDark(i,r+1)&&l++,t.isDark(i+1,r+1)&&l++,0!=l&&4!=l||(n+=3)}for(var i=0;i<e;i++)for(var r=0;r<e-6;r++)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(var r=0;r<e;r++)for(var i=0;i<e-6;i++)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);for(var u=0,r=0;r<e;r++)for(var i=0;i<e;i++)t.isDark(i,r)&&u++;var h=Math.abs(100*u/e/e-50)/5;return n+=10*h}},p={glog:function(t){if(t<1)throw new Error("glog("+t+")");return p.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return p.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},g=0;g<8;g++)p.EXP_TABLE[g]=1<<g;for(var g=8;g<256;g++)p.EXP_TABLE[g]=p.EXP_TABLE[g-4]^p.EXP_TABLE[g-5]^p.EXP_TABLE[g-6]^p.EXP_TABLE[g-8];for(var g=0;g<255;g++)p.LOG_TABLE[p.EXP_TABLE[g]]=g;n.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var r=0;r<t.getLength();r++)e[i+r]^=p.gexp(p.glog(this.get(i))+p.glog(t.get(r)));return new n(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=p.glog(this.get(0))-p.glog(t.get(0)),i=new Array(this.getLength()),r=0;r<this.getLength();r++)i[r]=this.get(r);for(var r=0;r<t.getLength();r++)i[r]^=p.gexp(p.glog(t.get(r))+e);return new n(i,0).mod(t)}},r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(t,e){var n=r.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,o=[],s=0;s<i;s++)for(var a=n[3*s+0],c=n[3*s+1],l=n[3*s+2],u=0;u<a;u++)o.push(new r(c,l));return o},r.getRsBlockTable=function(t,e){switch(e){case h.L:return r.RS_BLOCK_TABLE[4*(t-1)+0];case h.M:return r.RS_BLOCK_TABLE[4*(t-1)+1];case h.Q:return r.RS_BLOCK_TABLE[4*(t-1)+2];case h.H:return r.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},o.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var i in e)e.hasOwnProperty(i)&&n.setAttribute(i,e[i]);return n}var n=this._htOption,i=this._el,r=t.getModuleCount();Math.floor(n.width/r),Math.floor(n.height/r);this.clear();var o=e("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:n.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),i.appendChild(o),o.appendChild(e("rect",{fill:n.colorLight,width:"100%",height:"100%"})),o.appendChild(e("rect",{fill:n.colorDark,width:"1",height:"1",id:"template"}));for(var s=0;s<r;s++)for(var a=0;a<r;a++)if(t.isDark(s,a)){var c=e("use",{x:String(a),y:String(s)});c.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(c)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),y="svg"===document.documentElement.tagName.toLowerCase(),w=y?v:s()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var n=this;if(n._fFail=e,n._fSuccess=t,null===n._bSupportDataURI){var i=document.createElement("img"),r=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},o=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return i.onabort=r,i.onerror=r,i.onload=o,void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}n._bSupportDataURI===!0&&n._fSuccess?n._fSuccess.call(n):n._bSupportDataURI===!1&&n._fFail&&n._fFail.call(n)}if(this._android&&this._android<=2.1){var n=1/window.devicePixelRatio,i=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,r,o,s,a,c,l,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var h=arguments.length-1;h>=1;h--)arguments[h]=arguments[h]*n;else"undefined"==typeof l&&(arguments[1]*=n,arguments[2]*=n,arguments[3]*=n,arguments[4]*=n);i.apply(this,arguments)}}var r=function(t,e){this._bIsPainted=!1,this._android=a(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return r.prototype.draw=function(t){var e=this._elImage,n=this._oContext,i=this._htOption,r=t.getModuleCount(),o=i.width/r,s=i.height/r,a=Math.round(o),c=Math.round(s);e.style.display="none",this.clear();for(var l=0;l<r;l++)for(var u=0;u<r;u++){var h=t.isDark(l,u),f=u*o,d=l*s;n.strokeStyle=h?i.colorDark:i.colorLight,n.lineWidth=1,n.fillStyle=h?i.colorDark:i.colorLight,n.fillRect(f,d,o,s),n.strokeRect(Math.floor(f)+.5,Math.floor(d)+.5,a,c),n.strokeRect(Math.ceil(f)-.5,Math.ceil(d)-.5,a,c)}this._bIsPainted=!0},r.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},r}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,n=this._el,i=t.getModuleCount(),r=Math.floor(e.width/i),o=Math.floor(e.height/i),s=['<table style="border:0;border-collapse:collapse;">'],a=0;a<i;a++){s.push("<tr>");for(var c=0;c<i;c++)s.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+r+"px;height:"+o+"px;background-color:"+(t.isDark(a,c)?e.colorDark:e.colorLight)+';"></td>');s.push("</tr>")}s.push("</table>"),n.innerHTML=s.join("");var l=n.childNodes[0],u=(e.width-l.offsetWidth)/2,h=(e.height-l.offsetHeight)/2;u>0&&h>0&&(l.style.margin=h+"px "+u+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();return i=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:h.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(w=v),this._android=a(),this._el=t,this._oQRCode=null,this._oDrawing=new w(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},i.prototype.makeCode=function(t){this._oQRCode=new e(c(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},i.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},i.prototype.clear=function(){this._oDrawing.clear()},i.CorrectLevel=h,i})},function(t,e){},,function(t,e,n){"use strict";var i=n(365);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(366),o=n(369),s=i.module("simulator.common.components.tabs",[]).component("tabs",r).component("tab",o);t.exports=s},function(t,e,n){"use strict";n(367);var i={template:'\n    <div class="tabs-pagination">\n      <div class="tabs-pagination-items">\n        <div class="tabs-pagination-item"\n             ng-repeat="tab in tabs.tabs"\n             ng-click="tabs.selectTab(tab)"\n             ng-class="{active: tab === tabs.selected}">\n             {{ tab }}\n        </div>\n      </div>\n    </div>\n    <div class="tabs-content" ng-transclude>\n    </div>\n  ',transclude:!0,controllerAs:"tabs",controller:["$log",function(t){var e=this;this.tabs=[],this.addTab=function(t){e.tabs.push(t),e.selected=e.tabs[0]},this.selectTab=function(t){e.selected=t}}]};t.exports=i},function(t,e){},,function(t,e,n){"use strict";n(370);var i={template:'\n    <div class="content"\n         ng-show="tab.tabs.selected === tab.name"\n         ng-transclude>\n    </div>\n  ',require:{tabs:"^tabs"},transclude:!0,controllerAs:"tab",bindings:{name:"@"},controller:["$log",function(t){var e=this;this.$onInit=function(){e.tabs.addTab(e.name)}}]};t.exports=i},function(t,e){},,function(t,e){"use strict";function n(t){return{restrict:"A",link:function(e,n,i){e.$watch(function(){return e.$eval(i.bindHtmlCompile)},function(i){n.html(i),t(n.contents())(e)})}}}n.$inject=["$compile"],t.exports=n},function(t,e){"use strict";function n(t){return{restrict:"A",scope:{isOpen:"<"},link:function(e,n,i){var r=n[0];e.$watch("isOpen",function(e){e?!function(){r.style.height="auto";var e=r.offsetHeight;r.style.height=0,t(function(){r.style.height=e+"px",r.style["margin-top"]="20px"},100)}():(r.style.height=0,r.style["margin-top"]=0)})}}}n.$inject=["$timeout"],t.exports=n},function(t,e,n){"use strict";var i=n(375);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(376),o=n(379),s=n(383),a=n(399),c=n(385),l=n(401),u=n(557),h=n(501),f=n(553),d=n(403),p=i.module("simulator.common.services",[r,o,s,a,c,l,u,h,f,d]);t.exports=p},function(t,e,n){"use strict";var i=n(377);t.exports=i.name},function(t,e,n){"use strict";var i=n(378),r=angular.module("simulator.common.services.application-config",[]).factory("applicationConfigService",i);t.exports=r},function(t,e){"use strict";function n(t,e){return{get:function(){return e({method:"GET",url:"/api/application-config"}).then(function(t){return t.data||{}})["catch"](function(e){throw t.error("applicationConfigService#get error:",e),e})},update:function(n){return e({method:"PUT",url:"/api/application-config",data:n}).then(function(t){return t.data||{}})["catch"](function(e){throw t.error("applicationConfigService#update error:",e),e})}}}n.$inject=["$log","$http"],t.exports=n},function(t,e,n){"use strict";var i=n(380);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(381),o=n(382),s=i.module("simulator.common.services.authorization",[]).factory("authorizationService",o).factory("authorizationInterceptor",r).config(["$httpProvider",function(t){t.interceptors.push("authorizationInterceptor")}]);t.exports=s},function(t,e){"use strict";function n(t,e,n,i,r){return{request:function(n){if(t.debug("HTTP request:",n),n.url.includes(r.account.blueprintHost)||n.url.includes(r.account.timeSeriesHost)){var i=e.get("authorizationService");return i.getToken().then(function(t){return n.headers.Authorization="Bearer "+t,n})}return n},responseError:function(r){var o=e.get("authorizationService"),s=e.get("$http");return 401===r.status?(t.error("401 interceptor #responseError:",r),o.deleteToken(),i(function(){return s(r.config)},2e3)):n.reject(r)}}}n.$inject=["$log","$injector","$q","$timeout","CONFIG"],t.exports=n},function(t,e){"use strict";function n(t,e,n,i,r){var o="simulator.token",s="simulator.account_id";return{setToken:function(t){try{localStorage.setItem(o,t),localStorage.setItem(s,r.account.accountId)}catch(e){}},getToken:function(){var t=this,e=localStorage.getItem(o),n=localStorage.getItem(s);return e&&n===r.account.accountId?i.resolve(e):this.newToken().then(function(e){return t.setToken(e),e})},newToken:function(){return e({method:"POST",url:"https://"+r.account.idmHost+"/api/v1/auth/login-user",data:{emailAddress:r.account.emailAddress,password:r.account.password,accountId:r.account.accountId}}).then(function(e){if(t.debug("authorizationService#newToken response:",e),200===e.status)return e.data.jwt;throw new Error(e.message)})["catch"](function(e){throw t.error("authorizationService#newToken error:",e),e})},deleteToken:function(){localStorage.removeItem(o),localStorage.removeItem(s)}}}n.$inject=["$log","$http","$timeout","$q","CONFIG"],t.exports=n},function(t,e,n){"use strict";var i=n(384);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(379),o=n(385),s=n(398),a=i.module("simulator.common.services.blueprint",[r,o]).factory("blueprintService",s);t.exports=a},function(t,e,n){"use strict";var i=n(386);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(387),o=i.module("simulator.common.services.location",[]).factory("locationService",r);t.exports=o},function(t,e,n){"use strict";function i(){return{generateLocation:function(){var t=r.sample(c.features),e=s(t),n=a.position(e);return o.pointInMultiPolygon({coordinates:n},t.geometry)?n:this.generateLocation()}}}var r=n(348),o=n(388),s=n(389),a=n(396),c=n(397);t.exports=i},function(t,e){!function(){function e(t){for(var e=[],n=[],i=0;i<t[0].length;i++)e.push(t[0][i][1]),n.push(t[0][i][0]);return e=e.sort(function(t,e){return t-e}),n=n.sort(function(t,e){return t-e}),[[e[0],n[0]],[e[e.length-1],n[n.length-1]]]}function n(t,e,n){for(var i=[[0,0]],r=0;r<n.length;r++){for(var o=0;o<n[r].length;o++)i.push(n[r][o]);i.push(n[r][0]),i.push([0,0])}for(var s=!1,r=0,o=i.length-1;r<i.length;o=r++)i[r][0]>e!=i[o][0]>e&&t<(i[o][1]-i[r][1])*(e-i[r][0])/(i[o][0]-i[r][0])+i[r][1]&&(s=!s);return s}var i=this.gju={};"undefined"!=typeof t&&t.exports&&(t.exports=i),i.lineStringsIntersect=function(t,e){for(var n=[],i=0;i<=t.coordinates.length-2;++i)for(var r=0;r<=e.coordinates.length-2;++r){var o={x:t.coordinates[i][1],y:t.coordinates[i][0]},s={x:t.coordinates[i+1][1],y:t.coordinates[i+1][0]},a={x:e.coordinates[r][1],y:e.coordinates[r][0]},c={x:e.coordinates[r+1][1],y:e.coordinates[r+1][0]},l=(c.x-a.x)*(o.y-a.y)-(c.y-a.y)*(o.x-a.x),u=(s.x-o.x)*(o.y-a.y)-(s.y-o.y)*(o.x-a.x),h=(c.y-a.y)*(s.x-o.x)-(c.x-a.x)*(s.y-o.y);if(0!=h){var f=l/h,d=u/h;0<=f&&f<=1&&0<=d&&d<=1&&n.push({type:"Point",coordinates:[o.x+f*(s.x-o.x),o.y+f*(s.y-o.y)]})}}return 0==n.length&&(n=!1),n},i.pointInBoundingBox=function(t,e){return!(t.coordinates[1]<e[0][0]||t.coordinates[1]>e[1][0]||t.coordinates[0]<e[0][1]||t.coordinates[0]>e[1][1])},i.pointInPolygon=function(t,r){for(var o="Polygon"==r.type?[r.coordinates]:r.coordinates,s=!1,a=0;a<o.length;a++)i.pointInBoundingBox(t,e(o[a]))&&(s=!0);if(!s)return!1;for(var c=!1,a=0;a<o.length;a++)n(t.coordinates[1],t.coordinates[0],o[a])&&(c=!0);return c},i.pointInMultiPolygon=function(t,r){for(var o="MultiPolygon"==r.type?[r.coordinates]:r.coordinates,s=!1,a=!1,c=0;c<o.length;c++){for(var l=o[c],u=0;u<l.length;u++)s||i.pointInBoundingBox(t,e(l[u]))&&(s=!0);if(!s)return!1;for(var u=0;u<l.length;u++)a||n(t.coordinates[1],t.coordinates[0],l[u])&&(a=!0)}return a},i.numberToRadius=function(t){return t*Math.PI/180},i.numberToDegree=function(t){return 180*t/Math.PI},i.drawCircle=function(t,e,n){for(var r=[e.coordinates[1],e.coordinates[0]],o=t/1e3/6371,s=[i.numberToRadius(r[0]),i.numberToRadius(r[1])],n=n||15,a=[[r[0],r[1]]],c=0;c<n;c++){var l=2*Math.PI*c/n,u=Math.asin(Math.sin(s[0])*Math.cos(o)+Math.cos(s[0])*Math.sin(o)*Math.cos(l)),h=s[1]+Math.atan2(Math.sin(l)*Math.sin(o)*Math.cos(s[0]),Math.cos(o)-Math.sin(s[0])*Math.sin(u));a[c]=[],a[c][1]=i.numberToDegree(u),a[c][0]=i.numberToDegree(h)}return{type:"Polygon",coordinates:[a]}},i.rectangleCentroid=function(t){var e=t.coordinates[0],n=e[0][0],i=e[0][1],r=e[2][0],o=e[2][1],s=r-n,a=o-i;return{type:"Point",coordinates:[n+s/2,i+a/2]}},i.pointDistance=function(t,e){var n=t.coordinates[0],r=t.coordinates[1],o=e.coordinates[0],s=e.coordinates[1],a=i.numberToRadius(s-r),c=i.numberToRadius(o-n),l=Math.pow(Math.sin(a/2),2)+Math.cos(i.numberToRadius(r))*Math.cos(i.numberToRadius(s))*Math.pow(Math.sin(c/2),2),u=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return 6371*u*1e3},i.geometryWithinRadius=function(t,e,n){if("Point"==t.type)return i.pointDistance(t,e)<=n;if("LineString"==t.type||"Polygon"==t.type){var r,o={};r="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var s in r)if(o.coordinates=r[s],i.pointDistance(o,e)>n)return!1}return!0},i.area=function(t){for(var e,n,i=0,r=t.coordinates[0],o=r.length-1,s=0;s<r.length;o=s++){var e={x:r[s][1],y:r[s][0]},n={x:r[o][1],y:r[o][0]};i+=e.x*n.y,i-=e.y*n.x}return i/=2},i.centroid=function(t){for(var e,n,r,o=0,s=0,a=t.coordinates[0],c=a.length-1,l=0;l<a.length;c=l++){var n={x:a[l][1],y:a[l][0]},r={x:a[c][1],y:a[c][0]};e=n.x*r.y-r.x*n.y,o+=(n.x+r.x)*e,s+=(n.y+r.y)*e}return e=6*i.area(t),{type:"Point",coordinates:[s/e,o/e]}},i.simplify=function(t,e){e=e||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var n,i,r,o,s,a,c,l,u,h,f,d,p,g,m,v,y,w,b,x=Math.PI/180*.5,A=new Array,E=new Array,_=new Array;if(t.length<3)return t;for(n=t.length,h=360*e/(2*Math.PI*6378137),h*=h,r=0,E[0]=0,_[0]=n-1,i=1;i>0;)if(o=E[i-1],s=_[i-1],i--,s-o>1){for(f=t[s].lng()-t[o].lng(),d=t[s].lat()-t[o].lat(),Math.abs(f)>180&&(f=360-Math.abs(f)),f*=Math.cos(x*(t[s].lat()+t[o].lat())),p=f*f+d*d,a=o+1,c=o,u=-1;a<s;a++)g=t[a].lng()-t[o].lng(),m=t[a].lat()-t[o].lat(),Math.abs(g)>180&&(g=360-Math.abs(g)),g*=Math.cos(x*(t[a].lat()+t[o].lat())),v=g*g+m*m,y=t[a].lng()-t[s].lng(),w=t[a].lat()-t[s].lat(),Math.abs(y)>180&&(y=360-Math.abs(y)),y*=Math.cos(x*(t[a].lat()+t[s].lat())),b=y*y+w*w,l=v>=p+b?b:b>=p+v?v:(g*d-m*f)*(g*d-m*f)/p,l>u&&(c=a,u=l);u<h?(A[r]=o,r++):(i++,E[i-1]=c,_[i-1]=s,i++,E[i-1]=o,_[i-1]=c)}else A[r]=o,r++;A[r]=n-1,r++;for(var S=new Array,a=0;a<r;a++)S.push(t[A[a]]);return S.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},i.destinationPoint=function(t,e,n){n/=6371,e=i.numberToRadius(e);var r=i.numberToRadius(t.coordinates[0]),o=i.numberToRadius(t.coordinates[1]),s=Math.asin(Math.sin(o)*Math.cos(n)+Math.cos(o)*Math.sin(n)*Math.cos(e)),a=r+Math.atan2(Math.sin(e)*Math.sin(n)*Math.cos(o),Math.cos(n)-Math.sin(o)*Math.sin(s));return a=(a+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[i.numberToDegree(a),i.numberToDegree(s)]}}}()},function(t,e,n){function i(t){for(var e=s(),n=r(t),i=0;i<n.length;i++)e.include(n[i]);return e}var r=n(390),o=n(394),s=n(395);t.exports=function(t){return i(t).bbox()},t.exports.polygon=function(t){return i(t).polygon()},t.exports.bboxify=function(t){return o(t).map(function(t){t&&"string"==typeof t.type&&(t.bbox=i(t).bbox(),this.update(t))})}},function(t,e,n){var i=n(391),r=n(392),o=n(393);t.exports=function(t){if(!t)return[];var e=r(i(t)),n=[];return e.features.forEach(function(t){t.geometry&&(n=n.concat(o(t.geometry.coordinates)))}),n}},function(t,e){function n(t){if(!t||!t.type)return null;var e=i[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null}t.exports=n;var i={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},function(t,e){function n(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce(function(t,e){return t.concat(n(e))},[]),t;case"Feature":return n(t.geometry).map(function(e){return{type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e}});case"MultiPoint":return t.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return t.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return t.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return t.geometries;case"Point":case"Polygon":case"LineString":return[t];default:return t}}t.exports=n},function(t,e){t.exports=function(t,e){function n(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce(function(t,e){return Array.isArray(e)&&Array.isArray(e[0])?t.concat(n(e)):(t.push(e),t)},[])}return n(t)}},function(t,e){function n(t){this.value=t}function i(t,e,n){var i=[],o=[],s=!0;return function a(t){function c(){if("object"==typeof f.node&&null!==f.node){f.keys&&f.node_===f.node||(f.keys=d(f.node)),f.isLeaf=0==f.keys.length;for(var e=0;e<o.length;e++)if(o[e].node_===t){f.circular=o[e];break}}else f.isLeaf=!0,f.keys=null;f.notLeaf=!f.isLeaf,f.notRoot=!f.isRoot}var l=n?r(t):t,u={},h=!0,f={node:l,node_:t,path:[].concat(i),parent:o[o.length-1],parents:o,key:i.slice(-1)[0],isRoot:0===i.length,level:i.length,circular:null,update:function(t,e){f.isRoot||(f.parent.node[f.key]=t),f.node=t,e&&(h=!1)},"delete":function(t){delete f.parent.node[f.key],t&&(h=!1)},remove:function(t){p(f.parent.node)?f.parent.node.splice(f.key,1):delete f.parent.node[f.key],t&&(h=!1)},keys:null,before:function(t){u.before=t},after:function(t){u.after=t},pre:function(t){u.pre=t},post:function(t){u.post=t},stop:function(){s=!1},block:function(){h=!1}};if(!s)return f;c();var v=e.call(f,f.node);return void 0!==v&&f.update&&f.update(v),u.before&&u.before.call(f,f.node),h?("object"!=typeof f.node||null===f.node||f.circular||(o.push(f),c(),g(f.keys,function(t,e){i.push(t),u.pre&&u.pre.call(f,f.node[t],t);var r=a(f.node[t]);n&&m.call(f.node,t)&&(f.node[t]=r.node),r.isLast=e==f.keys.length-1,r.isFirst=0==e,u.post&&u.post.call(f,r),i.pop()}),o.pop()),u.after&&u.after.call(f,f.node),f):f}(t).node}function r(t){if("object"==typeof t&&null!==t){var e;if(p(t))e=[];else if(s(t))e=new Date(t.getTime?t.getTime():t);else if(a(t))e=new RegExp(t);else if(c(t))e={message:t.message};else if(l(t))e=new Boolean(t);else if(u(t))e=new Number(t);else if(h(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},i=function(){};i.prototype=n,e=new i}return g(d(t),function(n){e[n]=t[n]}),e}return t}function o(t){return Object.prototype.toString.call(t)}function s(t){return"[object Date]"===o(t)}function a(t){return"[object RegExp]"===o(t)}function c(t){return"[object Error]"===o(t)}function l(t){return"[object Boolean]"===o(t)}function u(t){return"[object Number]"===o(t)}function h(t){return"[object String]"===o(t)}var f=t.exports=function(t){return new n(t)};n.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!m.call(e,i)){e=void 0;break}e=e[i]}return e},n.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!m.call(e,i))return!1;e=e[i]}return!0},n.prototype.set=function(t,e){for(var n=this.value,i=0;i<t.length-1;i++){var r=t[i];m.call(n,r)||(n[r]={}),n=n[r]}return n[t[i]]=e,e},n.prototype.map=function(t){return i(this.value,t,!0)},n.prototype.forEach=function(t){return this.value=i(this.value,t,!1),this.value},n.prototype.reduce=function(t,e){var n=1===arguments.length,i=n?this.value:e;return this.forEach(function(e){this.isRoot&&n||(i=t.call(this,i,e))}),i},n.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},n.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},n.prototype.clone=function(){var t=[],e=[];return function n(i){for(var o=0;o<t.length;o++)if(t[o]===i)return e[o];if("object"==typeof i&&null!==i){var s=r(i);return t.push(i),e.push(s),g(d(i),function(t){s[t]=n(i[t])}),t.pop(),e.pop(),s}return i}(this.value)};var d=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},p=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},g=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};g(d(n.prototype),function(t){f[t]=function(e){var i=[].slice.call(arguments,1),r=new n(e);return r[t].apply(r,i)}});var m=Object.hasOwnProperty||function(t,e){return e in t}},function(t,e){function n(){return this instanceof n?(this._bbox=[1/0,1/0,-(1/0),-(1/0)],void(this._valid=!1)):new n}t.exports=n,n.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},n.prototype.union=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},n.prototype.bbox=function(){return this._valid?this._bbox:null},n.prototype.contains=function(t){return this._valid?this._bbox[0]<=t[0]&&this._bbox[1]<=t[1]&&this._bbox[2]>=t[0]&&this._bbox[3]>=t[1]:null},n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]
}:null}},function(t,e){function n(t){return t?l(t):[s(),a()]}function r(t){return function(e,n){return[e[0]+t[0],e[1]+t[1]]}}function o(){return Math.random()-.5}function s(){return 360*o()}function a(){return 180*o()}function c(t){return{type:"Point",coordinates:t||[s(),a()]}}function l(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}function u(t){return{type:"Polygon",coordinates:t}}function h(t){return{type:"Feature",geometry:t,properties:{}}}function f(t){return{type:"FeatureCollection",features:t}}t.exports=function(){throw new Error("call .point() or .polygon() instead")},t.exports.position=n,t.exports.point=function(t,e){var r=[];for(i=0;i<t;i++)r.push(h(e?c(n(e)):c()));return f(r)},t.exports.polygon=function(t,e,o,s){function a(t,e,n){n[e]=e>0?t+n[e-1]:t}function c(t,e){t=2*t*Math.PI/p[p.length-1];var n=Math.random();d.push([n*o*Math.sin(t),n*o*Math.cos(t)])}"number"!=typeof e&&(e=10),"number"!=typeof o&&(o=10);var l=[];for(i=0;i<t;i++){var d=[],p=Array.apply(null,new Array(e+1)).map(Math.random);p.forEach(a),p.forEach(c),d[d.length-1]=d[0],d=d.map(r(n(s))),l.push(h(u([d])))}return f(l)}},function(t,e){t.exports={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"MultiPolygon",coordinates:[[[[19.999909785591484,39.69349825129129],[19.85523522200012,40.04987213700008],[19.47624759200005,40.21369049700007],[19.309825066000144,40.64435455900011],[19.51661217500009,41.25641510600008],[19.36512209956595,41.85237191031314],[18.21753991000014,42.62010325700014],[17.653349062064137,42.89092833614079],[16.88062584700012,43.40595123900006],[16.098480665000125,43.48004791900003],[15.144541863000114,44.19546133000016],[15.307953321000099,44.35439687700007],[14.901377800000091,44.69017161699999],[14.827403191000087,45.113959052],[14.329763217000078,45.35398997600005],[13.972666863000114,44.826646226],[13.643809441000116,45.07050202000006],[13.513356967000107,45.43622467700011],[13.131358269000117,45.76886627800003],[12.48780358200014,45.45673248900006],[12.25359134200005,44.75128815300003],[12.368825717000078,44.250677802],[12.710297071000042,43.98289622600005],[13.616953972000118,43.531317450000145],[14.075368686000047,42.59882233300006],[14.740733269000145,42.08462148600016],[15.123383009000094,41.934271552000055],[16.027110222000147,41.94407786699999],[16.02165774800011,41.427801825000145],[17.05713951900009,41.08185455900012],[18.007009311000076,40.65070221600011],[18.51742597700013,40.11416250200007],[18.007334832000083,39.98607005400011],[17.847666863000143,40.29002513200008],[17.04957116000014,40.51911041900014],[16.604746941000087,40.08445872600005],[16.515635613000114,39.68960195500004],[17.15870201900009,39.40619538000011],[17.12769616000014,38.928778387000094],[16.53882897200012,38.72333405200014],[16.569590691000116,38.429510809000035],[16.09001712300011,37.94920482],[15.66578209700009,37.96686432500012],[15.65056399800011,38.241034247000144],[16.2200626960001,38.899074611000074],[15.610199415000125,40.07318756700015],[14.91114342500012,40.241644598000065],[14.75220787900011,40.67670319200009],[14.052256707000083,40.837591864000146],[13.721853061000047,41.25238678600006],[13.044606967000078,41.22752513200011],[11.82748457100007,42.03416575700014],[11.658213738000114,42.27936432500009],[10.499522332000083,42.940497137000094],[10.546560092000078,43.147121486000074],[10.105804884000094,44.01675039300004],[9.23064212300011,44.35370514500012],[8.762380405000101,44.432114976],[7.959727410000141,43.85285065300015],[7.502289259000094,43.792222398],[6.731146285000136,43.407846721000155],[6.679800772000135,43.20155281400007],[6.027008490000128,43.078195102000066],[5.338882958000056,43.334288836],[4.56628876500011,43.37109356600003],[3.939300977000073,43.532538153000175],[3.385427280000044,43.283921617000104],[3.038991733000017,42.94277578300016],[3.180969656711085,42.43148414768645],[3.150165377000064,41.84535097000004],[2.060313347000118,41.274603583000115],[.990407748000109,41.039699611000074],[-.323353644999941,39.51622142100014],[-.210026595999892,39.07869019400009],[.23406009200005,38.757879950000145],[-.329416469999956,38.47003815300015],[-.609486456999946,38.17804596600003],[-.92516028599988,37.555894273000106],[-1.323735140999872,37.56199082100015],[-1.670887824999909,37.36330801000018],[-2.071156378999888,36.77533600500006],[-2.576893683999941,36.81130605700004],[-3.415154668999918,36.695516287000075],[-4.433257615999935,36.71067942900011],[-4.722767706999917,36.49298737200009],[-5.1865535149999,36.41120026200012],[-5.611765102999897,36.00645579600008],[-6.036773240999935,36.18952057500003],[-6.499582485999923,36.959662177],[-7.029367641999926,37.205511786],[-7.786610480999883,37.022691148000106],[-8.626779751999948,37.12116120000003],[-8.797861434999959,37.48960005900004],[-8.774395582999944,38.18694927000014],[-8.905832485999952,38.512396552000055],[-9.491688605999883,38.707586981000176],[-9.352921539999898,39.367934014000085],[-9.090434486999897,39.57927490600004],[-8.86815344999988,40.12482330900009],[-8.655100063999896,40.99380117400001],[-8.880306243999911,41.73686160300015],[-8.750803188999924,41.96898021000011],[-8.822987433999856,42.56952545800014],[-9.070871548999975,42.59613678600009],[-9.217600063999924,43.15534088700015],[-8.505970831999889,43.33152903900019],[-8.059315558999884,43.709418036000145],[-7.230091925999886,43.568630276000036],[-5.424224412999905,43.56114329600014],[-4.734934048999918,43.4171003280001],[-3.554351365999935,43.51691315300009],[-3.112375454999921,43.354071356000176],[-2.36742102799991,43.315700588000155],[-1.661000128999888,43.39968496300013],[-1.476877407999893,43.580064195],[-1.247303839999915,44.50454336100013],[-1.048695441999882,46.03880442900008],[-1.804798956999917,46.503607489],[-2.118763800999943,46.8199730490001],[-1.992583787999962,47.05231354400003],[-2.501698370999918,47.52667877800003],[-4.434641079999892,47.97565338700004],[-4.563628709999961,48.62962474199999],[-3.515288865999878,48.84194570500016],[-3.077056443999879,48.828273830000015],[-2.636341925999886,48.53880442900011],[-2.312489386999914,48.68695709800012],[-1.579701300999915,48.64325592700014],[-1.610422329999892,49.21588776200012],[-1.884673631999931,49.53091054900001],[-1.391265428999901,49.712713934000035],[-1.072255011999857,49.39679596600014],[-.219471808999884,49.280096747000144],[.256846550000063,49.464056708000086],[.23585045700014,49.72931549700009],[1.172618035000141,49.961004950000174],[1.521006707000112,50.21466705900015],[1.580577019000117,50.8688011740001],[2.521799927690466,51.08754088348043],[4.118011915000096,51.63068268400018],[4.141856316000087,52.00560130400011],[4.508148634000122,52.33637116100006],[4.745453321000099,52.96759674700017],[5.379242384000122,53.097357489000146],[5.980804884000122,53.40607330900009],[7.023285352000073,53.45050690300003],[7.226084832000112,53.666489976000136],[7.951426629000082,53.721909898000106],[8.167979363000143,53.55320872600005],[8.860687696000127,53.83100006700006],[9.018321160000141,54.097886460000026],[8.62916100400011,54.38768138200014],[8.617686394000089,55.43793366100009],[8.290212436000076,55.583807684000035],[8.122406446000099,56.55166250200013],[8.601084832000112,56.50112539300012],[9.112803582000083,57.03864166900014],[9.96697024800011,57.59137604400003],[10.539073113000114,57.23672109600001],[10.265879754000139,56.907700914000046],[10.376963738000143,56.20331452000006],[10.245371941000087,55.91461823100015],[9.586761915000096,55.42743561400012],[9.494395379000082,55.16054922100007],[10.020030144000145,54.54584381700012],[10.777110222000118,54.31513092700011],[11.175059441000144,54.018011786],[12.108897332000112,54.183010158000016],[12.501963738000143,54.47357819200006],[13.479258660000085,54.12518952000009],[13.98422285200013,53.77399323100015],[14.544932488000057,53.704046942000105],[14.781911655000044,54.03461334800008],[16.2200626960001,54.27659739800009],[16.569590691000116,54.55719635600005],[17.8854272800001,54.82412344000008],[18.42920983200014,54.7816836610001],[18.58806399800008,54.433661200000046],[22.698386678000077,54.342937318000054],[22.808870891000083,54.89375640900006],[21.28923587300008,55.30524323100009],[20.969086134000065,56.2534854190001],[21.065196160000113,56.84634023600009],[21.40162194100006,57.03750234600005],[21.699229363000086,57.55532461100012],[22.483734571000127,57.7424990910001],[23.695160352000073,56.967271226],[24.379161004000082,57.230210679000066],[24.111664259000094,58.24103424700017],[23.49317467500012,58.67340729400003],[23.47087649800008,59.21214427300005],[24.399668816000144,59.47882721600003],[25.684825066000116,59.62864817900005],[27.873301629000082,59.407619533000016],[27.410605509000106,58.754864400000045],[27.673121785000035,57.91282277400016],[27.352934611000137,57.52760081000014],[27.840295044000072,57.29063852900006],[27.648730510000092,56.87926829100007],[28.126117391000037,56.5477639770001],[28.289828329000102,56.04660593700004],[29.377410523000094,55.954027608000075],[29.461022990000117,55.68729970300012],[30.21777266400005,55.85514475500011],[30.912820679000106,55.571596172000085],[31.32468184400011,54.229249166000045],[31.753802938000092,53.81961008700006],[32.48058028200006,53.66241038100014],[32.71953210400011,53.43947825200007],[32.20592004400004,53.10035166500012],[31.37852868600004,53.18202626500002],[31.76434493000005,52.10056772900009],[32.52843265800007,52.31621348100013],[33.80406538900016,52.35460907000005],[34.385735310000115,51.81766510100006],[34.28031538900004,51.36125885000014],[34.961824178000114,51.215324605000106],[35.34174930800023,50.91585968000014],[35.42525842300003,50.50048451800008],[36.68264937300009,50.26065419600012],[37.43526493300007,50.42493357300005],[37.99533410600023,49.92134674100011],[38.34415002400013,49.99209177700014],[39.57043176300013,49.71329742500008],[40.14166304500023,49.245780741000075],[39.758740682000195,48.895414531000156],[39.993248332000206,48.273230286000015],[39.75905074100015,47.83294708300009],[38.87724410000018,47.86123993000008],[38.35293501800001,47.607095236000035],[38.21665863816153,47.103267004541905],[37.580739780000016,47.09039948100009],[36.88624108200017,46.804022528000175],[35.901621941000116,46.652736721000096],[35.29135175900015,46.29336172100015],[34.81128991000017,46.16624583500008],[35.04444420700011,45.670070705000015],[35.48072350400011,45.29779694200006],[36.29997806100002,45.47333405200011],[36.44011478000019,45.06745026200015],[35.84799238400015,44.99241771000011],[35.54737389400012,45.11969635600015],[35.00570722700016,44.835191148000106],[34.46900475400017,44.72980377800009],[33.95785566500015,44.38300202000006],[33.47738691500015,44.606634833],[33.61963951900023,44.931463934000035],[32.52515709700012,45.45815664300012],[33.70866946700002,45.90973541900003],[33.61345462300008,46.14520905200014],[32.26246178500011,46.12824127800015],[31.85840905000012,46.629136460000055],[30.991384311000076,46.601263739],[30.494151238000228,46.080471096000124],[29.968516472000175,45.83893463700012],[29.747406446000156,45.46344635600012],[29.611175977000073,44.849310614000075],[28.78882897200009,44.7062442080001],[28.64087975400011,44.32855866100002],[28.603526238000086,43.53815338700011],[28.091563347000147,43.36395905200004],[27.892263217000078,42.71051666900007],[27.51148522200009,42.5530459660001],[27.98658287900014,42.07208893400011],[27.533182007000107,41.90806325300011],[27.2733529060001,42.09174713200011],[26.62357344600008,41.969041444000084],[26.333358602000118,41.71303639700007],[26.6365959070001,41.37845733700006],[26.331704956000067,41.25412384100018],[26.134507690000078,40.76712514300006],[25.299652540000068,40.95184967700011],[24.802012566000144,40.853461005000085],[24.415537957000083,40.94554271000008],[23.868174675000148,40.41351959800009],[23.29908287900014,40.235419012000094],[22.710948113000143,40.51162344000009],[22.57129967500009,40.05426666900003],[23.10181725400011,39.49738190300012],[22.826182488000086,39.22125885600012],[23.20492597700013,38.682684637000065],[23.951019727000073,38.290920315],[24.072113477000045,37.68952057500009],[23.44996178500014,38.021429755000085],[23.094086134000094,37.91103750200013],[23.168630405000044,37.61416250200013],[22.723155144000117,37.54165273600002],[23.095550977000045,36.80703359600004],[22.37061608200011,36.67357005400011],[22.153168165000125,37.02118561400006],[21.707367384000122,36.81801992400007],[21.549978061000047,37.56146881700012],[21.122080925000148,37.83738841400016],[21.955902540000096,38.336737372000115],[22.867198113000086,37.93952057500003],[23.109629754000082,38.210109768],[21.987640821000042,38.410589911000116],[21.1556095710001,38.30390045800003],[20.686534050000148,39.07245514500015],[19.999909785591484,39.69349825129129]]],[[[10.338389519000145,55.61009349200005],[10.828379754000082,55.306586005000085],[10.31275475400011,55.063666083],[9.883962436000047,55.25348541900017],[10.338389519000145,55.61009349200005]]],[[[12.328461134000122,56.12689850500014],[12.602224155000073,55.70856354400014],[12.24822024800008,55.54612864800005],[12.046641472000118,55.140082098000036],[11.245371941000059,55.21478913000011],[11.071055535000113,55.676947333000086],[12.328461134000122,56.12689850500014]]],[[[-16.117746548999946,28.572088934000178],[-16.676339731999917,27.997096487000093],[-16.916058089999865,28.354969806000142],[-16.117746548999946,28.572088934000178]]],[[[3.179453972000118,39.968776760000125],[3.468516472000118,39.73932526200012],[3.060801629000082,39.26906972900004],[2.357676629000082,39.61188385600012],[3.179453972000118,39.968776760000125]]],[[[55.5013126960001,-20.873223566],[55.85450280000006,-21.156996351999837],[55.35450280000006,-21.274590752999913],[55.5013126960001,-20.873223566]]],[[[-53.81565116999994,5.715919366000094],[-52.99458056699987,5.457623554000136],[-51.93126380099994,4.590399481000119],[-51.65070553299998,4.190008856000162],[-51.988424031999955,3.704555359000096],[-52.70770829299997,2.358926901000089],[-52.95968257699994,2.175217184000076],[-53.3441035569999,2.349625143000154],[-53.86681066899993,2.304925028000113],[-54.13491,2.110673320000132],[-54.47664424699991,2.214129538000051],[-54.21252600199995,2.776420797000114],[-54.19046016499996,3.178101705000145],[-53.98881872599986,3.610995178000167],[-54.35515295399992,4.066522929000143],[-54.48212194899992,4.912802022000093],[-53.81565116999994,5.715919366000094]]],[[[9.44939212300011,42.68260325700008],[9.552744988000086,42.113023179],[9.210703972000147,41.44086334800012],[8.695567254000139,41.72943756700006],[8.565765821000099,42.174505927000055],[8.66749108200014,42.509711005],[9.107106967000107,42.72589752800015],[9.44939212300011,42.68260325700008]]],[[[-7.247097142933143,55.0693283139659],[-6.475941535999908,55.248683986000074],[-5.536610480999883,54.657456773000106],[-5.612619594999899,54.25556061400012],[-6.269886847999885,54.09792715100009],[-5.996571417999945,52.96491120000009],[-6.369862433999856,52.17999909100014],[-7.435454881999931,52.12567780200011],[-8.539173956999917,51.648382880000085],[-9.770334438999896,51.59223053600009],[-10.234608527999853,51.85101959800009],[-10.275786912999934,52.26813385600015],[-9.837228969999927,52.25429922100015],[-9.272206183999884,53.14667389500012],[-10.025746222999885,53.3854027360001],[-9.785511847999885,54.33808014500012],[-8.485951300999943,54.28864166900014],[-8.596913214999859,54.61928945500013],[-8.263010219999927,55.16107819200006],[-7.33250891799986,55.37278880400005],[-7.247097142933143,55.0693283139659]]],[[[-6.195546027999882,58.356268622000115],[-6.352447068999879,58.03864166900003],[-6.98078365799995,57.735052802000084],[-7.126454230999855,58.12396881700006],[-6.195546027999882,58.356268622000115]]],[[[-3.34788977799991,58.65204498900006],[-3.220529751999891,58.30556875200013],[-4.030140753999916,57.95319245000009],[-3.491851365999878,57.713120835000055],[-2.108143683999913,57.70498281500012],[-1.759348110999923,57.47357819200009],[-2.219878709999961,56.87262604400014],[-2.964344855999883,56.20563385600012],[-2.146839972999942,55.91730377800015],[-1.630848761999886,55.58510976800012],[-1.275461391999926,54.74843984600015],[-.562977667999888,54.47736237200009],[.133474155000044,53.642645575000145],[.32984459700009,53.08649323100015],[1.274668816000116,52.929185289000074],[1.771169467000021,52.48590729400014],[1.582286004000139,52.08148834800015],[.924489780000073,51.58832428600009],[1.357188347000118,51.131008205000015],[.271006707000083,50.74738190300009],[-.173166469999899,50.82900625200001],[-1.317290818999936,50.800238348000065],[-1.983713344999899,50.59662506700009],[-2.864816860999895,50.73379140800013],[-3.467274542999888,50.585598049000126],[-3.645619269999912,50.22601959800015],[-4.792469855999883,50.5952009140001],[-4.152333136999857,51.211615302000055],[-3.057525193999908,51.20815664300015],[-5.288929816999911,51.91693756700012],[-4.197132941999882,52.27928294500008],[-4.053130662999905,52.542425848000065],[-4.151519334999932,53.228094794000086],[-3.058257615999935,53.43475983300006],[-3.017567511999857,53.93195221600011],[-3.964182094999984,54.771918036000116],[-5.170806443999936,55.00869375200004],[-4.61778723899991,55.495591539000046],[-4.983143683999884,55.87103913000006],[-5.581206834999875,55.75763580900009],[-5.667388475999928,56.498480536000145],[-6.003407355999855,56.61871979400003],[-5.599436001999948,57.27924225500006],[-5.807362433999913,57.84393952000009],[-5.292632615999935,57.98061758000013],[-4.988189256999902,58.62832265800016],[-4.382394985999895,58.52464427300005],[-3.34788977799991,58.65204498900006]]],[[[23.901377800000148,35.52716705900012],[24.34009850400014,35.348334052],[24.720957879000082,35.427232164000046],[26.06739342500009,35.23330312700001],[26.240977410000113,35.03904857000008],[24.73853600400011,34.93162669500013],[24.40211022200009,35.19110748900009],[23.587168816000087,35.239488023],[23.901377800000148,35.52716705900012]]],[[[15.642425977000073,38.262274481000034],[15.20655358200014,37.74774811400012],[15.110687696000127,37.32184479400017],[15.329437696000127,37.027736721000124],[15.073578321000127,36.65912506700015],[14.487315300000091,36.793361721000096],[14.27881920700014,37.04401276200018],[13.89437910200013,37.100816148000135],[12.427012566000116,37.797023830000015],[13.310231967000107,38.21954987200003],[13.79078209700009,37.97361888200014],[15.642425977000073,38.262274481000034]]],[[[9.238291863000143,41.24884674700017],[9.546153191000116,41.12091705900018],[9.826670769000089,40.51959870000006],[9.557790561000104,39.13971588700018],[9.078949415000125,39.212347723000065],[8.642832879000139,38.889960028000175],[8.371755405000101,39.23061758000013],[8.555186394000145,39.852687893000095],[8.462901238000086,40.31452057500009],[8.133799675000148,40.72890859600001],[8.764414910000113,40.91380442900011],[9.238291863000143,41.24884674700017]]]]},properties:{CONTINENT:"Europe"}},{type:"Feature",geometry:{type:"MultiPolygon",coordinates:[[[[-155.6065189699999,20.137955566000144],[-155.3323127789999,20.046721443000123],[-154.8172094389999,19.479722398000078],[-154.98230051299993,19.339243956000146],[-155.87812988099995,19.029072187000068],[-156.0601639279999,19.731220553000085],[-155.6065189699999,20.137955566000144]]],[[[-156.5895997049999,21.027738813000113],[-156.00169837099986,20.800441799000126],[-156.40765319499985,20.587206654000013],[-156.5895997049999,21.027738813000113]]],[[[-72.24689693899992,41.13544342700011],[-72.40665794899985,40.86207213500016],[-73.70734323899987,40.58279433900016],[-73.48568717099988,40.94562569600002],[-72.6061091789999,40.989935614],[-72.24689693899992,41.13544342700011]]],[[[-95.1605692139999,49.36949412100007],[-94.82725622599995,49.29285797200005],[-94.59285192899995,48.726432597000056],[-92.6486036789999,48.536263326],[-91.42792883399994,48.03644887400016],[-90.17862524499989,48.116443990000036],[-89.34038183599992,47.98415232400008],[-88.3472641599999,48.29865509100004],[-84.87869034799988,46.89791371700012],[-84.58940567999994,46.47512298600007],[-84.15881180899996,46.43334259100003],[-83.59525447599995,45.81642934200009],[-82.532141073,45.29351552300001],[-82.15361120599994,43.54959096300017],[-82.51126379399992,42.64667450000006],[-83.12851293999992,42.239955140000134],[-83.0684132499999,41.84773101900008],[-82.42486079999995,41.676811219000044],[-81.27666215099995,42.208665060000115],[-80.24659582599989,42.36547719400012],[-79.01938391099995,42.802685649000026],[-79.17430985599995,43.464531555000164],[-78.68808630399994,43.6318081670001],[-76.84153234899992,43.62550364200008],[-76.45463090099989,44.08423533200012],[-75.27023290999998,44.863774313000036],[-74.86847448699993,45.01012196900011],[-71.50408036399998,45.013739319000095],[-71.39488806199992,45.24152903300008],[-70.83383703699988,45.39309600800006],[-70.407351441,45.73152496400003],[-70.00776342799992,46.70407541900006],[-69.26762772699993,47.43984446200007],[-68.90622859699994,47.190221457000135],[-68.19704707899993,47.34140085900013],[-67.80518469299997,47.035631409000146],[-67.77283524599997,45.82805654000005],[-67.44996089699995,45.61080881700012],[-66.97732499899993,44.81553782800016],[-67.8996068999999,44.42210521000011],[-68.98660234299984,44.42116933800013],[-69.26341712099989,43.92991771000011],[-69.98582923099991,43.862779039000046],[-70.23912512899997,43.70005931200002],[-70.81533769399994,42.87026601800012],[-70.78380286399994,42.25967031500015],[-70.53311113199993,41.81622955900015],[-71.4977107409999,41.366278387000094],[-72.7794490229999,41.27016836100013],[-73.63458196399992,41.0070550730001],[-74.28268744599984,40.497318766000106],[-73.9723937439999,40.32765030000003],[-74.16755123599995,39.69936758000016],[-74.74571692599994,39.05451080900009],[-75.35936438699994,39.337876695000105],[-75.39378989099993,39.055551025000014],[-75.05772864499994,38.55272044500013],[-75.15428626199989,38.240912177],[-75.70811926999991,37.83315664300015],[-75.81444251199991,38.135199286000145],[-76.2210994129999,38.34389883000016],[-76.17495683499988,39.316229559000035],[-76.55166581899991,38.77558014500015],[-76.2479088989999,37.90347101300016],[-76.37850494799989,37.27233238800012],[-75.98893008999991,36.91195854200005],[-75.72183183499993,35.82916901200012],[-76.15038001199989,35.34715403900016],[-76.44249426999997,35.40399811400012],[-76.65819251199986,34.721869208000086],[-77.20152747299991,34.65070221600014],[-77.83267167899996,34.20701732000013],[-77.91112219999991,33.95815664300004],[-78.55899003799996,33.86904531500012],[-78.93797766799986,33.64207591400016],[-79.20295162699992,33.192938544000114],[-80.00511633999989,32.611558335000055],[-80.88756262899997,32.06940338700012],[-81.36389932399996,31.415830010000136],[-81.49925696499992,30.704331773000135],[-81.25584876199994,29.789455471000153],[-80.92210852799988,29.068304755000142],[-80.60944576699984,28.610174872000172],[-80.73827063699991,28.373480536000145],[-80.03823808499993,26.811183986000103],[-80.12926184799997,25.887884833000058],[-80.42690995999988,25.221747137000037],[-81.08653723899994,25.12140534100014],[-81.3216853509999,25.782700914000102],[-81.80089270699992,26.098618882],[-81.85594641799986,26.448879299000126],[-82.31383216099991,26.849351304000052],[-82.84239661399988,27.828517971000068],[-82.66421464799993,28.447943427000112],[-82.64439856699991,28.900376695000105],[-83.40477454299992,29.53168366100003],[-83.68057206899991,29.92129140800013],[-84.26964270699997,30.09267812700007],[-84.8866267569999,29.730047919000114],[-85.30785071499992,29.693426825000174],[-85.67088782499991,30.122951565000065],[-86.3648168609999,30.380764065],[-87.15680904899992,30.474514065000037],[-87.78648841099991,30.236761786000145],[-88.9276423819999,30.442206122000087],[-89.70840410099993,30.17527903900016],[-90.22240149599989,30.387600002000127],[-90.33910071499986,30.066066799000126],[-89.45677649599986,29.82925039300015],[-90.08023027299987,29.174709377000042],[-90.56200110599988,29.300726630000057],[-90.70592200399997,29.119533596000096],[-91.22858639199993,29.238592841000056],[-91.68468176999997,29.753119208000058],[-91.9844457669999,29.831976630000113],[-92.27649313299986,29.533836437000062],[-93.19959294999992,29.77281118800012],[-94.06012936099984,29.681830145000063],[-94.88882402299996,29.375962632000054],[-95.15892493399994,29.045721747000172],[-95.60191809799991,28.763861395],[-96.20490475199998,28.586655992000104],[-97.0249731109999,28.041449286000088],[-97.55020097599993,27.009182033000073],[-97.25305130999996,25.963480937],[-98.22265620999991,26.07541208900001],[-99.0854976,26.407639872000075],[-99.46172786499997,27.05695424400001],[-99.50720312499993,27.57377024400013],[-99.70036962999991,27.659191386000046],[-100.28433915299989,28.296516825000097],[-100.66896683799989,29.116208394000026],[-101.40930924499995,29.76578114900012],[-102.30217464199994,29.889391174000096],[-102.68346919799994,29.74371531200002],[-103.14798864799995,28.985105286000092],[-104.05731298899993,29.339037171000157],[-104.53082413799989,29.66790598600012],[-104.68156429099993,30.192938538000178],[-105.00849523999996,30.676991679000096],[-105.3637707119999,30.850366109],[-106.51718867999998,31.77382395400012],[-108.21512121699993,31.777751364],[-108.21481115799995,31.327442932000125],[-111.06711767599994,31.3336441040001],[-112.32471533199994,31.727986959000148],[-114.822108115,32.500239563],[-114.72428462799992,32.71283640500015],[-117.12512148897225,32.531669490003665],[-117.50884421199989,33.335205337],[-118.54405676999995,34.038885809000035],[-118.9368074899999,34.043200309000056],[-119.61715964399991,34.42052717200015],[-120.47268143299988,34.45027297200009],[-120.64783419299995,34.58567558900013],[-120.64488684799989,35.13939036700005],[-121.26914589699992,35.66421059100013],[-121.89562881899992,36.31392872900007],[-121.78981175499989,36.80619896700007],[-122.40445697799991,37.194525975],[-122.97453518599991,38.266194223000085],[-123.64830661699989,38.84953497100018],[-123.85401880399989,39.833514269000105],[-124.36350979499994,40.26148093700006],[-124.06215535799994,41.43587598600011],[-124.4328135869999,42.32931074000008],[-124.54771887899997,42.845445054],[-124.15103105399989,43.88174062700007],[-123.92073228599995,45.66266321900004],[-123.89806067599991,46.44163646000014],[-124.4227595689999,47.74188873900012],[-124.73460723799991,48.17040360400016],[-122.7919815749999,48.08291250200001],[-122.32042395699992,47.942084052],[-122.44029700399989,48.58071523600002],[-122.75301232501458,48.992514892989064],[-119.3560432539999,48.992514547000056],[-116.27876338799989,48.992514547000056],[-113.64104325499999,48.992514547000056],[-110.56371171199996,48.992617900000155],[-108.36562882499992,48.992617900000155],[-106.60718318699993,48.992617900000155],[-102.87038285399993,48.992617900000155],[-100.67227412999998,48.992669577000086],[-98.03460567199983,48.992669577000086],[-95.17710567299991,48.992669577000086],[-95.1605692139999,49.36949412100007]]]]},properties:{CONTINENT:"North America"}},{type:"Feature",geometry:{type:"MultiPolygon",coordinates:[[[[130.99292883500007,33.89766466700014],[131.08130944100017,33.634955145000035],[131.72953798100005,33.58023616300012],[131.92920983200023,32.77826569200006],[131.68213951900023,32.53506094000015],[131.34546959700006,31.394964911],[130.92400149800008,31.11298248900006],[130.22220471400013,31.246299862000157],[130.17143062700003,31.79013665700016],[130.6412866550002,32.60748932500009],[130.42221113400004,33.08258698100006],[130.13194608500007,33.101971727],[129.89492938400022,32.662689399],[129.63240266500023,32.979106667000096],[129.85457924400012,33.53285385400012],[130.39086562400016,33.60487402200012],[130.68441816500004,33.93423086100016],[130.99292883500007,33.89766466700014]]],[[[134.1616317070001,34.36249420800014],[134.73230385400015,33.825951916000164],[134.27320508500011,33.50800352400013],[133.73939679000003,33.537506879],[133.269379102,33.346869208000086],[132.91504967500012,32.77798086100013],[132.47227232600002,32.93367231200013],[132.38111412900017,33.466050523000106],[132.76986156700016,33.996270044000156],[133.51099694100017,33.96523672100007],[133.67261803500017,34.223130601],[134.1616317070001,34.36249420800014]]],[[[141.27609568200003,41.35319552800003],[141.43738666000016,40.67014093100006],[141.74377693500017,40.38392223200016],[142.06934655000006,39.54047272300012],[141.90886478000002,39.10976797100001],[141.63835696700002,38.98541901200018],[141.47144616000006,38.435736395],[141.0978296230002,38.37152741100006],[140.93336022200018,37.889227606000176],[141.0418400400001,37.37714264500009],[140.56410737100023,36.28309580200015],[140.841644727,35.74241771],[140.48346749700025,35.565991055000055],[140.394195275,35.196591662000074],[139.86768639400012,35.013332424000126],[139.5266033730002,35.302037009000074],[139.14595743700013,35.235226985000125],[139.140879754,34.870550848000065],[138.74400124200022,34.7288918950001],[138.5540821750001,35.096069379000184],[138.2159891910002,34.71228266100012],[137.79216556100002,34.63939036700016],[137.29792810200016,34.797191095000144],[136.51954186300023,34.68085358300006],[136.84644616000017,34.30756256700006],[136.29900149800008,34.15428294500013],[135.76557060700023,33.481545488000066],[135.0654538490002,33.885571819000106],[135.10503071500003,34.31811688100008],[135.4143791510002,34.55812547000012],[134.74439537900005,34.76654694200012],[133.69996178500017,34.52594635600012],[133.16578209700018,34.29230377800009],[132.49683678500017,34.36249420800014],[132.0577905610002,33.89524974200016],[131.74146569100012,34.05621979400003],[131.2722274100001,33.92682526200015],[130.86158287900005,34.11273834800015],[131.07471764400012,34.42475006700012],[131.414317254,34.423976955000015],[131.85840905000023,34.71450429900007],[132.63535916900017,35.44095469500009],[133.10535285100016,35.59751658900008],[133.41741190900004,35.456542965000054],[134.92701256600017,35.641180731000034],[135.45238978900014,35.571781119000136],[135.9816676190001,35.64363788800013],[135.95728600400017,35.97313060100011],[136.76055452600022,36.87059936100003],[136.74909419400004,37.35791740000012],[137.10872138900007,37.28344965100008],[137.00554446700008,36.83592357000013],[138.24489497900012,37.183789445000016],[138.550629102,37.377915757000025],[138.85767662900005,37.82782623900009],[139.43238366000006,38.169134833],[140.04857715,39.504669646000124],[139.82211347700016,39.9610863300001],[140.02426296100018,40.355016067000136],[139.86036217500012,40.6087914080001],[140.270762566,40.81240469000009],[140.33277902700004,41.23715340900007],[140.79815518300015,41.12857790100004],[141.27609568200003,41.35319552800003]]],[[[142.01775149800014,45.45571523600002],[142.98145592500012,44.58649323100015],[143.78321373800023,44.100653387000094],[144.215098504,44.1114769550001],[145.07471764400006,43.75372955900009],[145.30250084700006,43.17348867400007],[144.74195397200018,42.92422109600015],[144.32300866000006,43.00263092700011],[143.63884524800008,42.66107819200006],[143.25294030000006,41.941880601],[141.72608483200023,42.617173570000105],[141.01677493600008,42.316107489],[140.20899498800011,41.40110911700005],[139.98365319100017,41.56049225500006],[140.14503014400012,41.982652085000055],[139.7874455090001,42.24677155200014],[139.87696373800023,42.66339752800012],[140.26075280000023,42.760972398000135],[140.80990644600016,43.19245026200018],[141.4401147800002,43.36172109600001],[141.33741295700005,43.71283600500006],[141.64063561300011,43.93793366100006],[141.79175866000006,44.59699127800003],[141.58643639400023,45.16437409100003],[142.01775149800014,45.45571523600002]]]]},properties:{CONTINENT:"Asia"}}]}},function(t,e,n){"use strict";function i(t,e,n,i){return{getV1:function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.assign(n,{accountId:i.account.accountId}),e({method:"GET",url:"https://"+i.account.blueprintHost+"/api/v1/"+t,params:n,headers:{Accept:"application/json"
}})},getDeviceTemplates:function(){return this.getV1("devices/templates",{pageSize:100}).then(function(t){return t.data.deviceTemplates.results.reduce(function(t,e){return t[e.id]=e,t},{})})},getOrganizations:function(){return this.getV1("organizations").then(function(t){return t.data.organizations.results})},createDeviceTemplate:function(t){return e({method:"POST",url:"https://"+i.account.blueprintHost+"/api/v1/devices/templates",data:{accountId:i.account.accountId,name:t.templateName}}).then(function(t){return t.data.deviceTemplate})},createChannelTemplates:function(t){var n=t.channelNames.map(function(n){return e({method:"POST",url:"https://"+i.account.blueprintHost+"/api/v1/channels/templates",data:{accountId:i.account.accountId,name:n,persistenceType:"timeSeries",entityType:"deviceTemplate",deviceTemplate:t.deviceTemplateName,entityId:t.deviceTemplateId}})});return Promise.all(n)},createDevice:function(t){var r=n.generateLocation();return e({method:"POST",url:"https://"+i.account.blueprintHost+"/api/v1/devices",data:{accountId:i.account.accountId,deviceTemplateId:t.deviceTemplateId,organizationId:t.organizationId,serialNumber:t.deviceTemplateName+"-000001",longitude:r[0],latitude:r[1]}})},updateDevice:function(t,n){return this.getV1("devices/"+t).then(function(o){var s=r.reduce(o.data.device,function(t,e,i){return r.isEqual(e,n[i])||"version"===i||r.isArray(e)||r.isObject(e)||(t[i]=n[i]),t},{});return e({method:"PUT",url:"https://"+i.account.blueprintHost+"/api/v1/devices/"+t,data:s,headers:{Etag:o.data.device.version,Accept:"application/json"}})})}}}i.$inject=["$log","$http","locationService","CONFIG"];var r=n(348);t.exports=i},function(t,e,n){"use strict";var i=n(400);t.exports=i.name},function(t,e,n){"use strict";var i=n(383),r=n(401),o=n(501),s=n(553),a=n(556),c=angular.module("simulator.common.services.devices",[i,r,o,s]).factory("devicesService",a);t.exports=c},function(t,e,n){"use strict";var i=n(402);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(403),o=n(406),s=i.module("simulator.common.services.mqtt",[r]).factory("mqttService",o);t.exports=s},function(t,e,n){"use strict";var i=n(404);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(405),o=i.module("simulator.common.services.utils",[]).factory("utils",r);t.exports=o},function(t,e,n){"use strict";function i(t,e){return{numberOrString:function(t){var e=r.toNumber(t);return r.isNaN(e)?t:e},debounce:function(n,i,r){var o=void 0;return function(){var s=this,a=arguments;return new e(function(e,c){var l=function(){o=null,r||e(n.apply(s,a))},u=r&&!o;t.cancel(o),o=t(l,i),u&&e(n.apply(s,a))})}}}}i.$inject=["$timeout","$q"];var r=n(348);t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n,r,c){return new(function(){function l(){var n=this;i(this,l),this.channels=new Map;try{var o="wss://"+r.account.brokerHost+":"+r.account.brokerPort+"/mqtt",s={username:r.account.brokerUser,password:r.account.brokerPassword};t.debug("MQTT#constructor open Xively client with options:",o,s),this.client=a.connect(o,s),this.client.on("open",function(){t.debug("MQTT#connection open")}),this.client.on("message",function(t,e){n.handleMessage(t,e.toString())}),this.client.on("error",function(e){t.error("MQTT#connection error:",e)})}catch(c){t.error("MQTT#constructor error:",c),this.connected=e.reject(c)}}return o(l,[{key:"parseMessage",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=arguments[1];s.isObject(t)&&(t=t.toString());var n=e?e.split("/").pop():null;if(t.startsWith("{")||t.startsWith("["))try{return JSON.parse(t)}catch(i){}var r=t.split("/n");return s.fromPairs(r.map(function(t){var e=t.split(",").map(function(t){return s.trim(t,'"').trim()}),i=c.numberOrString(e[0])||Date.now(),r=e[1],o=c.numberOrString(e[2]),a=e[3];return[n||r,s.omitBy({timestamp:i,name:r,numericValue:o,stringValue:a},s.isUndefined)]}))}},{key:"handleMessage",value:function(e,i){var r=this,o=this.parseMessage(i,e);t.debug("MQTT#handleMessage:",e,o),n.$applyAsync(function(){r.channels[e].forEach(function(t){return t(o)})})}},{key:"subscribe",value:function(e,n){if(!e||!n)throw new TypeError("MQTT#subscribe: missing arguments");return this.channels[e]||(this.channels[e]=new Set,t.debug("MQTT#subscribe:",e),this.client.subscribe(e)),this.channels[e].add(n),this.unsubscribe.bind(this,e,n)}},{key:"unsubscribe",value:function(t,e){this.channels[t]&&(this.channels[t]["delete"](e),this.channels[t].size||(this.client.unsubscribe(t),delete this.channels[t]))}},{key:"sendMessage",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n;if(s.isObject(n)){var r=n.timestamp,o=void 0===r?Date.now():r,a=n.name,c=void 0===a?e.split("/").pop():a,l=n.numericValue,u=void 0===l?0:l,h=n.stringValue,f=void 0===h?"":h;i=[o,c,u,f].join(",")}t.debug("MQTT#sendMessage:",e,i),this.client.publish(e,i)}}]),l}())}r.$inject=["$log","$q","$rootScope","CONFIG","utils"];var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(348),a=n(407);t.exports=r},function(t,e,n){(function(e){"use strict";function i(t){var e;t.auth&&(e=t.auth.match(/^(.+):(.+)$/),e?(t.username=e[1],t.password=e[2]):t.username=t.auth)}function r(t,e){function n(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.hostname=e.host,t._reconnectCount++),c[e.protocol](t,e)}if("object"!=typeof t||e||(e=t,t=null),e=e||{},t&&(e=a(s.parse(t,!0),e),e.protocol=e.protocol.replace(/\:$/,"")),i(e),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;default:throw new Error('Unknown protocol for secure conenction: "'+e.protocol+'"!')}}if(c[e.protocol]||(e.protocol=l.filter(function(t){return"function"==typeof c[t]})[0]),!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");return new o(n,e)}var o=n(408),s=n(456),a=n(461),c={},l=[];"browser"!==e.title&&(c.mqtt=n(462),c.tcp=n(462),c.ssl=n(464),c.tls=n(464),c.mqtts=n(464)),c.ws=n(466),c.wss=n(466),l=["mqtt","mqtts","ws","wss"],t.exports=r,t.exports.connect=r}).call(e,n(297))},function(t,e,n){(function(e,i){"use strict";function r(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function o(t,e,n){try{var i=f.generate(e);!t.stream.write(i)&&n?t.stream.once("drain",n):n&&n()}catch(r){n?n(r):t.emit("error",r)}}function s(t,e,n){t.outgoingStore.put(e,function(i){return i?n&&n(i):void o(t,e,n)})}function a(){}function c(t,e){var n,i=this;if(!(this instanceof c))return new c(t,e);this.options=e||{};for(n in v)"undefined"==typeof this.options[n]?this.options[n]=v[n]:this.options[n]=e[n];this.options.clientId=this.options.clientId||r(),this.streamBuilder=t,this.outgoingStore=this.options.outgoingStore||new u,this.incomingStore=this.options.incomingStore||new u,this.queueQoSZero=null==this.options.queueQoSZero||this.options.queueQoSZero,this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.floor(65535*Math.random()),this.outgoing={},this.on("connect",function(){this.connected=!0;var t=null;t=this.outgoingStore.createStream(),t.once("readable",function(){function e(){var n,r=t.read(1);r&&(!i.disconnecting&&!i.reconnectTimer&&0<i.options.reconnectPeriod?(t.read(0),n=i.outgoing[r.messageId],i.outgoing[r.messageId]=function(){n&&n(),e()},i._sendPacket(r)):t.destroy&&t.destroy())}e()}).on("error",this.emit.bind(this,"error"))}),this.on("close",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on("connect",this._setupPingTimer),this.on("connect",function(){function t(){var n=e.shift(),r=null;n&&(r=n.packet,i._sendPacket(r,function(e){n.cb&&n.cb(e),t()}))}var e=this.queue;t()}),this.on("close",function(){null!==i.pingTimer&&(i.pingTimer.clear(),i.pingTimer=null)}),this.on("close",this._setupReconnect),l.EventEmitter.call(this),this._setupStream()}var l=n(409),u=n(410),h=n(442),f=n(445),d=n(411).Writable,p=n(436),g=n(455),m=e.setImmediate||function(t){i.nextTick(t)},v={keepalive:10,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0};p(c,l.EventEmitter),c.prototype._setupStream=function(){function t(){var e=c.shift(),i=s;e?n._handlePacket(e,t):(s=null,i())}var e,n=this,i=new d,r=f.parser(this.options),s=null,c=[];this._clearReconnect(),this.stream=this.streamBuilder(this),r.on("packet",function(t){c.push(t)}),i._write=function(e,n,i){s=i,r.parse(e),t()},this.stream.pipe(i),this.stream.on("error",a),h(this.stream,this.emit.bind(this,"close")),e=Object.create(this.options),e.cmd="connect",o(this,e),r.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){n._cleanUp(!0)},this.options.connectTimeout)},c.prototype._handlePacket=function(t,e){switch(t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"pingresp":this._handlePingresp(t),e()}},c.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},c.prototype.publish=function(t,e,n,i){var r;if("function"==typeof n&&(i=n,n=null),n||(n={qos:0,retain:!1}),this._checkDisconnecting(i))return this;switch(r={cmd:"publish",topic:t,payload:e,qos:n.qos,retain:n.retain,messageId:this._nextId()},n.qos){case 1:case 2:this.outgoing[r.messageId]=i||a,this._sendPacket(r);break;default:this._sendPacket(r,i)}return this},c.prototype.subscribe=function(){var t,e=Array.prototype.slice.call(arguments),n=[],i=e.shift(),r=e.pop()||a,o=e.pop();return"string"==typeof i&&(i=[i]),"function"!=typeof r&&(o=r,r=a),this._checkDisconnecting(r)?this:(o||(o={qos:0}),Array.isArray(i)?i.forEach(function(t){n.push({topic:t,qos:o.qos})}):Object.keys(i).forEach(function(t){n.push({topic:t,qos:i[t]})}),t={cmd:"subscribe",subscriptions:n,qos:1,retain:!1,dup:!1,messageId:this._nextId()},this.outgoing[t.messageId]=r,this._sendPacket(t),this)},c.prototype.unsubscribe=function(t,e){var n={cmd:"unsubscribe",qos:1,messageId:this._nextId()};return e=e||a,this._checkDisconnecting(e)?this:("string"==typeof t?n.unsubscriptions=[t]:"object"==typeof t&&t.length&&(n.unsubscriptions=t),this.outgoing[n.messageId]=e,this._sendPacket(n),this)},c.prototype.end=function(t,e){function n(){r.incomingStore.close(function(){r.outgoingStore.close(e)})}function i(){r._cleanUp(t,n)}var r=this;return"function"==typeof t&&(e=t,t=!1),!!this.disconnecting||(this.disconnecting=!0,!t&&0<Object.keys(this.outgoing).length?this.once("outgoingEmpty",setTimeout.bind(null,i,10)):i(),this)},c.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},c.prototype._setupReconnect=function(){var t=this;!t.disconnecting&&!t.reconnectTimer&&0<t.options.reconnectPeriod&&(this.emit("offline"),t.reconnectTimer=setInterval(function(){t._reconnect()},t.options.reconnectPeriod))},c.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=!1)},c.prototype._cleanUp=function(t,e){e&&this.stream.on("close",e),t?this.stream.destroy():this._sendPacket({cmd:"disconnect"},m.bind(null,this.stream.end.bind(this.stream))),this.reconnectTimer&&(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null)},c.prototype._sendPacket=function(t,e){if(!this.connected)return void(0<t.qos||"publish"!==t.cmd||this.queueQoSZero?this.queue.push({packet:t,cb:e}):e&&e(new Error("No connection to broker")));switch(this._shiftPingInterval(),t.qos){case 2:case 1:s(this,t,e);break;case 0:default:o(this,t,e)}},c.prototype._setupPingTimer=function(){var t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=g(function(){t._checkPing()},1e3*this.options.keepalive))},c.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},c.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},c.prototype._handlePingresp=function(){this.pingResp=!0},c.prototype._handleConnack=function(t){var e=t.returnCode,n=["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"];clearTimeout(this.connackTimer),0===e?this.emit("connect",t):0<e&&this.emit("error",new Error("Connection refused: "+n[e]))},c.prototype._handlePublish=function(t,e){var n=t.topic.toString(),i=t.payload,r=t.qos,o=t.messageId,s=this;switch(r){case 2:this.incomingStore.put(t,function(){s._sendPacket({cmd:"pubrec",messageId:o},e)});break;case 1:this._sendPacket({cmd:"puback",messageId:o});case 0:this.emit("message",n,i,t),this.handleMessage(t,e)}},c.prototype.handleMessage=function(t,e){e()},c.prototype._handleAck=function(t){var e=t.messageId,n=t.cmd,i=null,r=this.outgoing[e],o=this;if(r){switch(n){case"pubcomp":case"puback":delete this.outgoing[e],this.outgoingStore.del(t,r);break;case"pubrec":i={cmd:"pubrel",qos:2,messageId:e},this._sendPacket(i);break;case"suback":delete this.outgoing[e],this.outgoingStore.del(t,function(e,n){var i,s=n.subscriptions,a=t.granted;if(e)return o.emit("error",e);for(i=0;i<a.length;i+=1)s[i].qos=a[i];r(null,s)});break;case"unsuback":delete this.outgoing[e],this.outgoingStore.del(t,r);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},c.prototype._handlePubrel=function(t,e){var n=t.messageId,i=this;i.incomingStore.get(t,function(r,o){return r?i.emit("error",r):("pubrel"!==o.cmd&&(i.emit("message",o.topic,o.payload,o),i.incomingStore.put(t)),void i._sendPacket({cmd:"pubcomp",messageId:n},e))})},c.prototype._nextId=function(){var t=this.nextId++;return 65535===t&&(this.nextId=1),t},t.exports=c}).call(e,function(){return this}(),n(297))},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,c=0;c<r;c++)l[c].apply(this,a);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(function(e){"use strict";function i(){return this instanceof i?void(this._inflights={}):new i}var r=n(411).Readable,o={objectMode:!0};i.prototype.put=function(t,e){return this._inflights[t.messageId]=t,e&&e(),this},i.prototype.createStream=function(){var t=new r(o),n=this._inflights,i=Object.keys(this._inflights),s=!1,a=0;return t._read=function(){!s&&a<i.length?this.push(n[i[a++]]):this.push(null)},t.destroy=function(){if(!s){var t=this;s=!0,e.nextTick(function(){t.emit("close")})}},t},i.prototype.del=function(t,e){return t=this._inflights[t.messageId],t?(delete this._inflights[t.messageId],e(null,t)):e&&e(new Error("missing packet")),this},i.prototype.get=function(t,e){return t=this._inflights[t.messageId],t?e(null,t):e&&e(new Error("missing packet")),this},i.prototype.close=function(t){this._inflights=null,t&&t()},t.exports=i}).call(e,n(297))},function(t,e,n){(function(i){var r=n(412);e=t.exports=n(433),e.Stream=r,e.Readable=e,e.Writable=n(438),e.Duplex=n(439),e.Transform=n(440),e.PassThrough=n(441),i.browser||"disable"!==i.env.READABLE_STREAM||(t.exports=n(412))}).call(e,n(297))},function(t,e,n){function i(){r.call(this)}t.exports=i;var r=n(409).EventEmitter,o=n(413);o(i,r),i.Readable=n(414),i.Writable=n(429),i.Duplex=n(430),i.Transform=n(431),i.PassThrough=n(432),i.Stream=i,i.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function i(){l.readable&&l.resume&&l.resume()}function o(){u||(u=!0,t.end())}function s(){u||(u=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){l.removeListener("data",n),t.removeListener("drain",i),l.removeListener("end",o),l.removeListener("close",s),l.removeListener("error",a),t.removeListener("error",a),l.removeListener("end",c),l.removeListener("close",c),t.removeListener("close",c)}var l=this;l.on("data",n),t.on("drain",i),t._isStdio||e&&e.end===!1||(l.on("end",o),l.on("close",s));var u=!1;return l.on("error",a),t.on("error",a),l.on("end",c),l.on("close",c),t.on("close",c),t.emit("pipe",l),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(i){e=t.exports=n(415),e.Stream=n(412),e.Readable=e,e.Writable=n(425),e.Duplex=n(424),e.Transform=n(427),e.PassThrough=n(428),i.browser||"disable"!==i.env.READABLE_STREAM||(t.exports=n(412))}).call(e,n(297))},function(t,e,n){(function(e){function i(t,e){var i=n(424);t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&($||($=n(426).StringDecoder),this.decoder=new $(t.encoding),this.encoding=t.encoding)}function r(t){n(424);return this instanceof r?(this._readableState=new i(t,this),this.readable=!0,void C.call(this)):new r(t)}function o(t,e,n,i,r){var o=l(e,n);if(o)t.emit("error",o);else if(M.isNullOrUndefined(n))e.reading=!1,e.ended||u(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||r||i||(n=e.decoder.write(n)),r||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&h(t)),d(t,e);else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=T)t=T;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||M.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var n=null;return M.isBuffer(e)||M.isString(e)||M.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function u(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,h(t)}function h(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(F("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?e.nextTick(function(){f(t)}):f(t))}function f(t){F("emit readable"),t.emit("readable"),y(t)}function d(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){p(t,n)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(F("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;F("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&S.listenerCount(t,"data")&&(e.flowing=!0,y(t))}}function m(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(function(){v(t,n)}))}function v(t,e){e.resumeScheduled=!1,t.emit("resume"),y(t),e.flowing&&!e.reading&&t.read(0)}function y(t){var e=t._readableState;if(F("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function w(t,e){var n,i=e.buffer,r=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!t||t>=r)n=o?i.join(""):_.concat(i,r),i.length=0;else if(t<i[0].length){var a=i[0];n=a.slice(0,t),i[0]=a.slice(t)}else if(t===i[0].length)n=i.shift();else{n=o?"":new _(t);for(var c=0,l=0,u=i.length;l<u&&c<t;l++){var a=i[0],h=Math.min(t-c,a.length);o?n+=a.slice(0,h):a.copy(n,c,0,h),h<a.length?i[0]=a.slice(h):i.shift(),c+=h}}return n}function b(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function x(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}function A(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}t.exports=r;var E=n(416),_=n(417).Buffer;r.ReadableState=i;var S=n(409).EventEmitter;S.listenerCount||(S.listenerCount=function(t,e){return t.listeners(e).length});var C=n(412),M=n(421);M.inherits=n(422);var $,F=n(423);F=F&&F.debuglog?F.debuglog("stream"):function(){},M.inherits(r,C),r.prototype.push=function(t,e){var n=this._readableState;return M.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new _(t,e),e="")),o(this,n,t,e,!1)},r.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},r.prototype.setEncoding=function(t){return $||($=n(426).StringDecoder),this._readableState.decoder=new $(t),this._readableState.encoding=t,this};var T=8388608;r.prototype.read=function(t){F("read",t);var e=this._readableState,n=t;if((!M.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return F("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?b(this):h(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&b(this),null;var i=e.needReadable;F("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,F("length less than watermark",i)),(e.ended||e.reading)&&(i=!1,F("reading or ended",i)),i&&(F("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=c(n,e));var r;return r=t>0?w(t,e):null,M.isNull(r)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&b(this),M.isNull(r)||this.emit("data",r),r},r.prototype._read=function(t){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,n){function i(t){F("onunpipe"),t===h&&o()}function r(){F("onend"),t.end()}function o(){F("cleanup"),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("drain",m),t.removeListener("error",a),t.removeListener("unpipe",i),h.removeListener("end",r),h.removeListener("end",o),h.removeListener("data",s),!f.awaitDrain||t._writableState&&!t._writableState.needDrain||m()}function s(e){F("ondata");var n=t.write(e);!1===n&&(F("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,h.pause())}function a(e){F("onerror",e),u(),t.removeListener("error",a),0===S.listenerCount(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",l),u()}function l(){F("onfinish"),t.removeListener("close",c),u()}function u(){F("unpipe"),h.unpipe(t)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,F("pipe count=%d opts=%j",f.pipesCount,n);var d=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,p=d?r:o;f.endEmitted?e.nextTick(p):h.once("end",p),t.on("unpipe",i);var m=g(h);return t.on("drain",m),h.on("data",s),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",c),t.once("finish",l),t.emit("pipe",h),f.flowing||(F("pipe resume"),h.resume()),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var r=A(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,n){var i=C.prototype.on.call(this,t,n);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&h(this,r);else{var o=this;e.nextTick(function(){F("readable nexttick read 0"),o.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var t=this._readableState;return t.flowing||(F("resume"),t.flowing=!0,t.reading||(F("resume read 0"),this.read(0)),m(this,t)),this},r.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(F("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(F("wrapped data"),e.decoder&&(r=e.decoder.write(r)),r&&(e.objectMode||r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)M.isFunction(t[r])&&M.isUndefined(this[r])&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return x(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){F("wrapped _read",e),n&&(n=!1,t.resume())},i},r._fromList=w}).call(e,n(297))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t,i){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,n){if(o()<n)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n),e.__proto__=t.prototype):(null===e&&(e=new t(n)),e.length=n),e}function t(e,n,i){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,n,i);if("number"==typeof e){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,n,i)}function a(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,n,i):"string"==typeof e?h(t,e,n):p(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,n,i){return c(e),e<=0?s(t,e):void 0!==n?"string"==typeof i?s(t,e).fill(n,i):s(t,e).fill(n):s(t,e)}function u(e,n){if(c(n),e=s(e,n<0?0:0|g(n)),!t.TYPED_ARRAY_SUPPORT)for(var i=0;i<n;++i)e[i]=0;return e}function h(e,n,i){if("string"==typeof i&&""!==i||(i="utf8"),!t.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(n,i);e=s(e,r);var o=e.write(n,i);return o!==r&&(e=e.slice(0,o)),e}function f(t,e){var n=e.length<0?0:0|g(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(e,n,i,r){if(n.byteLength,i<0||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r),t.TYPED_ARRAY_SUPPORT?(e=n,e.__proto__=t.prototype):e=f(e,n),e}function p(e,n){if(t.isBuffer(n)){var i=0|g(n.length);return e=s(e,i),0===e.length?e:(n.copy(e,0,0,i),e)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||K(n.length)?s(e,0):f(e,n);if("Buffer"===n.type&&J(n.data))return f(e,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function m(e){return+e!=e&&(e=0),t.alloc(+e)}function v(e,n){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return X(e).length;default:if(r)return V(e).length;n=(""+n).toLowerCase(),r=!0}}function y(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return F(this,e,n);case"ascii":return L(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return $(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function w(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function b(e,n,i,r,o){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(i<0){if(!o)return-1;i=0}if("string"==typeof n&&(n=t.from(n,r)),t.isBuffer(n))return 0===n.length?-1:x(e,n,i,r,o);if("number"==typeof n)return n=255&n,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,n,i):Uint8Array.prototype.lastIndexOf.call(e,n,i):x(e,[n],i,r,o);throw new TypeError("val must be string, number or Buffer")}function x(t,e,n,i,r){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,c=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}var l;if(r){var u=-1;for(l=n;l<a;l++)if(o(t,l)===o(e,u===-1?0:l-u)){if(u===-1&&(u=l),l-u+1===c)return u*s}else u!==-1&&(l-=l-u),u=-1}else for(n+c>a&&(n=a-c),l=n;l>=0;l--){for(var h=!0,f=0;f<c;f++)if(o(t,l+f)!==o(e,f)){h=!1;break}if(h)return l}return-1}function A(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function E(t,e,n,i){return Y(V(e,t.length-n),t,n,i)}function _(t,e,n,i){return Y(G(e),t,n,i)}function S(t,e,n,i){return _(t,e,n,i)}function C(t,e,n,i){return Y(X(e),t,n,i)}function M(t,e,n,i){return Y(q(e,t.length-n),t,n,i)}function $(t,e,n){return 0===e&&n===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,n))}function F(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=n){var c,l,u,h;switch(a){case 1:o<128&&(s=o);break;case 2:c=t[r+1],128===(192&c)&&(h=(31&o)<<6|63&c,h>127&&(s=h));break;case 3:c=t[r+1],l=t[r+2],128===(192&c)&&128===(192&l)&&(h=(15&o)<<12|(63&c)<<6|63&l,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:c=t[r+1],l=t[r+2],u=t[r+3],128===(192&c)&&128===(192&l)&&128===(192&u)&&(h=(15&o)<<18|(63&c)<<12|(63&l)<<6|63&u,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return T(i)}function T(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return n}function L(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function k(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function R(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=W(t[o]);return r}function D(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function B(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,n,i,r,o,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function O(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function I(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function N(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,i,r){return r||N(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,n,i,23,4),n+4}function j(t,e,n,i,r){return r||N(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,n,i,52,8),n+8}function z(t){if(t=H(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],s=0;s<i;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function q(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function X(t){return Z.toByteArray(z(t))}function Y(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function K(t){return t!==t}var Z=n(418),Q=n(419),J=n(420);e.Buffer=t,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=o(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,n){return a(null,t,e,n)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,n){return l(null,t,e,n)},t.allocUnsafe=function(t){return u(null,t)},t.allocUnsafeSlow=function(t){return u(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var i=e.length,r=n.length,o=0,s=Math.min(i,r);o<s;++o)if(e[o]!==n[o]){i=e[o],r=n[o];break}return i<r?-1:r<i?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<e.length;++i)n+=e[i].length;var r=t.allocUnsafe(n),o=0;for(i=0;i<e.length;++i){var s=e[i];if(!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},t.byteLength=v,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?F(this,0,t):y.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,n,i,r,o){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),n<0||i>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&n>=i)return 0;if(r>=o)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var s=o-r,a=i-n,c=Math.min(s,a),l=this.slice(r,o),u=e.slice(n,i),h=0;h<c;++h)if(l[h]!==u[h]){s=l[h],a=u[h];break}return s<a?-1:a<s?1:0},t.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},t.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},t.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},t.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return A(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,n){var i=this.length;e=~~e,n=void 0===n?i:~~n,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<e&&(n=e);var r;if(t.TYPED_ARRAY_SUPPORT)r=this.subarray(e,n),r.__proto__=t.prototype;else{var o=n-e;r=new t(o,(void 0));for(var s=0;s<o;++s)r[s]=this[s+e]}return r},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||B(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||B(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},t.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||B(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||B(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),Q.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),Q.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),Q.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),Q.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;P(this,t,e,n,r,0)}var o=1,s=0;for(this[e]=255&t;++s<n&&(o*=256);)this[e+s]=t/o&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;P(this,t,e,n,r,0)}var o=n-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+n},t.prototype.writeUInt8=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):O(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):O(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):I(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):I(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);P(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},t.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);P(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},t.prototype.writeInt8=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):O(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):O(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):I(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,i){return e=+e,n=0|n,i||P(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):I(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},t.prototype.copy=function(e,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-i&&(r=e.length-n+i);var o,s=r-i;if(this===e&&i<n&&n<r)for(o=s-1;o>=0;--o)e[o+n]=this[o+i];else if(s<1e3||!t.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+n]=this[o+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+s),n);return s},t.prototype.fill=function(e,n,i,r){if("string"==typeof e){if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e=255&e);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0);var s;if("number"==typeof e)for(s=n;s<i;++s)this[s]=e;else{var a=t.isBuffer(e)?e:V(new t(e,r).toString()),c=a.length;for(s=0;s<i-n;++s)this[s+n]=a[s%c]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,n(417).Buffer,function(){return this}())},function(t,e){"use strict";function n(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)a[e]=t[e],c[t.charCodeAt(e)]=e;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63}function i(t){var e,n,i,r,o,s,a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[a-2]?2:"="===t[a-1]?1:0,s=new l(3*a/4-o),i=o>0?a-4:a;var u=0;for(e=0,n=0;e<i;e+=4,n+=3)r=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[u++]=r>>16&255,s[u++]=r>>8&255,s[u++]=255&r;return 2===o?(r=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[u++]=255&r):1===o&&(r=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[u++]=r>>8&255,s[u++]=255&r),s}function r(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function o(t,e,n){for(var i,o=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(r(i));return o.join("")}function s(t){for(var e,n=t.length,i=n%3,r="",s=[],c=16383,l=0,u=n-i;l<u;l+=c)s.push(o(t,l,l+c>u?u:l+c));return 1===i?(e=t[n-1],r+=a[e>>2],r+=a[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=a[e>>10],r+=a[e>>4&63],r+=a[e<<2&63],r+="="),s.push(r),s.join("")}e.toByteArray=i,e.fromByteArray=s;var a=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array;n()},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+t[e+h],h+=f,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,i),o-=l}return(d?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,c,l=8*o-r-1,u=(1<<l)-1,h=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+h>=1?f/c:f*Math.pow(2,1-h),e*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function l(t){return void 0===t}function u(t){return"[object RegExp]"===m(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===m(t)}function d(t){return"[object Error]"===m(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function m(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=i,e.isNull=r,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=c,e.isUndefined=l,e.isRegExp=u,e.isObject=h,e.isDate=f,e.isError=d,e.isFunction=p,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(417).Buffer)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){},function(t,e,n){(function(e){function i(t){return this instanceof i?(c.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}t.exports=i;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=n(421);a.inherits=n(422);var c=n(415),l=n(425);a.inherits(i,c),o(s(l.prototype),function(t){i.prototype[t]||(i.prototype[t]=l.prototype[t])})}).call(e,n(297))},function(t,e,n){(function(e){function i(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function r(t,e){var i=n(424);t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!t.objectMode,e instanceof i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var e=n(424);return this instanceof o||this instanceof e?(this._writableState=new r(t,this),this.writable=!0,void E.call(this)):new o(t)}function s(t,n,i){var r=new Error("write after end");t.emit("error",r),e.nextTick(function(){i(r)})}function a(t,n,i,r){var o=!0;if(!(A.isBuffer(i)||A.isString(i)||A.isNullOrUndefined(i)||n.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),e.nextTick(function(){r(s)}),o=!1}return o}function c(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&A.isString(e)&&(e=new x(e,n)),e}function l(t,e,n,r,o){n=c(e,n,r),A.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new i(n,r,o)):u(t,e,!1,s,n,r,o),a}function u(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function h(t,n,i,r,o){i?e.nextTick(function(){n.pendingcb--,o(r)}):(n.pendingcb--,o(r)),t._writableState.errorEmitted=!0,t.emit("error",r)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,n){var i=t._writableState,r=i.sync,o=i.writecb;if(f(i),n)h(t,i,r,n,o);else{var s=v(t,i);s||i.corked||i.bufferProcessing||!i.buffer.length||m(t,i),r?e.nextTick(function(){p(t,i,s,o)}):p(t,i,s,o)}}function p(t,e,n,i){n||g(t,e),e.pendingcb--,i(),w(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],i=0;i<e.buffer.length;i++)n.push(e.buffer[i].callback);e.pendingcb++,u(t,e,!0,e.length,e.buffer,"",function(t){for(var i=0;i<n.length;i++)e.pendingcb--,n[i](t)}),e.buffer=[]}else{for(var i=0;i<e.buffer.length;i++){var r=e.buffer[i],o=r.chunk,s=r.encoding,a=r.callback,c=e.objectMode?1:o.length;if(u(t,e,!1,c,o,s,a),e.writing){i++;break}}i<e.buffer.length?e.buffer=e.buffer.slice(i):e.buffer.length=0}e.bufferProcessing=!1}function v(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function w(t,e){var n=v(t,e);return n&&(0===e.pendingcb?(y(t,e),e.finished=!0,t.emit("finish")):y(t,e)),n}function b(t,n,i){n.ending=!0,w(t,n),i&&(n.finished?e.nextTick(i):t.once("finish",i)),n.ended=!0}t.exports=o;var x=n(417).Buffer;o.WritableState=r;var A=n(421);A.inherits=n(422);var E=n(412);A.inherits(o,E),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var i=this._writableState,r=!1;return A.isFunction(e)&&(n=e,e=null),A.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),A.isFunction(n)||(n=function(){}),i.ended?s(this,i,n):a(this,i,t,n)&&(i.pendingcb++,r=l(this,i,t,e,n)),r},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||m(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var i=this._writableState;A.isFunction(t)?(n=t,t=null,e=null):A.isFunction(e)&&(n=e,e=null),A.isNullOrUndefined(t)||this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||b(this,i,n)}}).call(e,n(297))},function(t,e,n){function i(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(417).Buffer,c=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){function i(t,e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,c.isNullOrUndefined(n)||t.push(n),r&&r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new i(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){c.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=n(424),c=n(421);c.inherits=n(422),c.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;
if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;c.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,n){function i(t){return this instanceof i?void r.call(this,t):new i(t)}t.exports=i;var r=n(427),o=n(421);o.inherits=n(422),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(425)},function(t,e,n){t.exports=n(424)},function(t,e,n){t.exports=n(427)},function(t,e,n){t.exports=n(428)},function(t,e,n){(function(e){function i(t,e){t=t||{};var i=t.highWaterMark;this.highWaterMark=i||0===i?i:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&($||($=n(437).StringDecoder),this.decoder=new $(t.encoding),this.encoding=t.encoding)}function r(t){return this instanceof r?(this._readableState=new i(t,this),this.readable=!0,void C.call(this)):new r(t)}function o(t,e,n,i,r){var o=l(e,n);if(o)t.emit("error",o);else if(null===n||void 0===n)e.reading=!1,e.ended||u(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||r||i||(n=e.decoder.write(n)),e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):(e.reading=!1,e.buffer.push(n)),e.needReadable&&h(t),d(t,e);else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=F)t=F;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var n=null;return _.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function u(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?h(t):b(t)}function h(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,n.sync?e.nextTick(function(){f(t)}):f(t))}function f(t){t.emit("readable")}function d(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){p(t,n)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&m(t)}}function m(t){function e(t,e,r){var o=t.write(n);!1===o&&i.awaitDrain++}var n,i=t._readableState;for(i.awaitDrain=0;i.pipesCount&&null!==(n=t.read());)if(1===i.pipesCount?e(i.pipes,0,null):x(i.pipes,e),t.emit("data",n),i.awaitDrain>0)return;return 0===i.pipesCount?(i.flowing=!1,void(S.listenerCount(t,"data")>0&&y(t))):void(i.ranOut=!0)}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,m(this))}function y(t,n){var i=t._readableState;if(i.flowing)throw new Error("Cannot switch to old mode now.");var r=n||!1,o=!1;t.readable=!0,t.pipe=C.prototype.pipe,t.on=t.addListener=C.prototype.on,t.on("readable",function(){o=!0;for(var e;!r&&null!==(e=t.read());)t.emit("data",e);null===e&&(o=!1,t._readableState.needReadable=!0)}),t.pause=function(){r=!0,this.emit("pause")},t.resume=function(){r=!1,o?e.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function w(t,e){var n,i=e.buffer,r=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!t||t>=r)n=o?i.join(""):_.concat(i,r),i.length=0;else if(t<i[0].length){var a=i[0];n=a.slice(0,t),i[0]=a.slice(t)}else if(t===i[0].length)n=i.shift();else{n=o?"":new _(t);for(var c=0,l=0,u=i.length;l<u&&c<t;l++){var a=i[0],h=Math.min(t-c,a.length);o?n+=a.slice(0,h):a.copy(n,c,0,h),h<a.length?i[0]=a.slice(h):i.shift(),c+=h}}return n}function b(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");!n.endEmitted&&n.calledRead&&(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function x(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}function A(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}t.exports=r;var E=n(434),_=n(417).Buffer;r.ReadableState=i;var S=n(409).EventEmitter;S.listenerCount||(S.listenerCount=function(t,e){return t.listeners(e).length});var C=n(412),M=n(435);M.inherits=n(436);var $;M.inherits(r,C),r.prototype.push=function(t,e){var n=this._readableState;return"string"!=typeof t||n.objectMode||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new _(t,e),e="")),o(this,n,t,e,!1)},r.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},r.prototype.setEncoding=function(t){$||($=n(437).StringDecoder),this._readableState.decoder=new $(t),this._readableState.encoding=t};var F=8388608;r.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n,i=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h(this),null;if(t=c(t,e),0===t&&e.ended)return n=null,e.length>0&&e.decoder&&(n=w(t,e),e.length-=n.length),0===e.length&&b(this),n;var r=e.needReadable;return e.length-t<=e.highWaterMark&&(r=!0),(e.ended||e.reading)&&(r=!1),r&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=c(i,e)),n=t>0?w(t,e):null,null===n&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&b(this),n},r.prototype._read=function(t){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,n){function i(t){t===u&&o()}function r(){t.end()}function o(){t.removeListener("close",a),t.removeListener("finish",c),t.removeListener("drain",p),t.removeListener("error",s),t.removeListener("unpipe",i),u.removeListener("end",r),u.removeListener("end",o),t._writableState&&!t._writableState.needDrain||p()}function s(e){l(),t.removeListener("error",s),0===S.listenerCount(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",c),l()}function c(){t.removeListener("close",a),l()}function l(){u.unpipe(t)}var u=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1;var f=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,d=f?r:o;h.endEmitted?e.nextTick(d):u.once("end",d),t.on("unpipe",i);var p=g(u);return t.on("drain",p),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(s):t._events.error=[s,t._events.error]:t.on("error",s),t.once("close",a),t.once("finish",c),t.emit("pipe",u),h.flowing||(this.on("readable",v),h.flowing=!0,e.nextTick(function(){m(u)})),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",v),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",v),e.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var r=A(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,e){var n=C.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||y(this),"readable"===t&&this.readable){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&h(this,i):this.read(0))}return n},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},r.prototype.pause=function(){y(this,!0),this.emit("pause")},r.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(e.decoder&&(r=e.decoder.write(r)),(!e.objectMode||null!==r&&void 0!==r)&&(e.objectMode||r&&r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)"function"==typeof t[r]&&"undefined"==typeof this[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return x(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){n&&(n=!1,t.resume())},i},r._fromList=w}).call(e,n(297))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function l(t){return void 0===t}function u(t){return"[object RegExp]"===m(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===m(t)}function d(t){return"[object Error]"===m(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function m(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=i,e.isNull=r,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=c,e.isUndefined=l,e.isRegExp=u,e.isObject=h,e.isDate=f,e.isError=d,e.isFunction=p,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(417).Buffer)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function i(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(417).Buffer,c=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){(function(e){function i(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function r(t,e){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var e=n(439);return this instanceof o||this instanceof e?(this._writableState=new r(t,this),this.writable=!0,void A.call(this)):new o(t)}function s(t,n,i){var r=new Error("write after end");t.emit("error",r),e.nextTick(function(){i(r)})}function a(t,n,i,r){var o=!0;if(!b.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!n.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),e.nextTick(function(){r(s)}),o=!1}return o}function c(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new b(e,n)),e}function l(t,e,n,r,o){n=c(e,n,r),b.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing?e.buffer.push(new i(n,r,o)):u(t,e,s,n,r,o),a}function u(t,e,n,i,r,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,t._write(i,r,e.onwrite),e.sync=!1}function h(t,n,i,r,o){i?e.nextTick(function(){o(r)}):o(r),t._writableState.errorEmitted=!0,t.emit("error",r)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,n){var i=t._writableState,r=i.sync,o=i.writecb;if(f(i),n)h(t,i,r,n,o);else{var s=v(t,i);s||i.bufferProcessing||!i.buffer.length||m(t,i),r?e.nextTick(function(){p(t,i,s,o)}):p(t,i,s,o)}}function p(t,e,n,i){n||g(t,e),i(),n&&y(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var i=e.buffer[n],r=i.chunk,o=i.encoding,s=i.callback,a=e.objectMode?1:r.length;if(u(t,e,a,r,o,s),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}function v(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){var n=v(t,e);return n&&(e.finished=!0,t.emit("finish")),n}function w(t,n,i){n.ending=!0,y(t,n),i&&(n.finished?e.nextTick(i):t.once("finish",i)),n.ended=!0}t.exports=o;var b=n(417).Buffer;o.WritableState=r;var x=n(435);x.inherits=n(436);var A=n(412);x.inherits(o,A),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var i=this._writableState,r=!1;return"function"==typeof e&&(n=e,e=null),b.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=function(){}),i.ended?s(this,i,n):a(this,i,t,n)&&(r=l(this,i,t,e,n)),r},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),i.ending||i.finished||w(this,i,n)}}).call(e,n(297))},function(t,e,n){(function(e){function i(t){return this instanceof i?(c.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}t.exports=i;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=n(435);a.inherits=n(436);var c=n(433),l=n(438);a.inherits(i,c),o(s(l.prototype),function(t){i.prototype[t]||(i.prototype[t]=l.prototype[t])})}).call(e,n(297))},function(t,e,n){function i(t,e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&t.push(n),r&&r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t);var e=(this._transformState=new i(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=n(439),c=n(435);c.inherits=n(436),c.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){function i(t){return this instanceof i?void r.call(this,t):new i(t)}t.exports=i;var r=n(440),o=n(435);o.inherits=n(436),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var i=n(443),r=function(){},o=function(t){return t.setHeader&&"function"==typeof t.abort},s=function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length},a=function(t,e,n){if("function"==typeof e)return a(t,null,e);e||(e={}),n=i(n||r);var c=t._writableState,l=t._readableState,u=e.readable||e.readable!==!1&&t.readable,h=e.writable||e.writable!==!1&&t.writable,f=function(){t.writable||d()},d=function(){h=!1,u||n()},p=function(){u=!1,h||n()},g=function(t){n(t?new Error("exited with error code: "+t):null)},m=function(){return(!u||l&&l.ended)&&(!h||c&&c.ended)?void 0:n(new Error("premature close"))},v=function(){t.req.on("finish",d)};return o(t)?(t.on("complete",d),t.on("abort",m),t.req?v():t.on("request",v)):h&&!c&&(t.on("end",f),t.on("close",f)),s(t)&&t.on("exit",g),t.on("end",p),t.on("finish",d),e.error!==!1&&t.on("error",n),t.on("close",m),function(){t.removeListener("complete",d),t.removeListener("abort",m),t.removeListener("request",v),t.req&&t.req.removeListener("finish",d),t.removeListener("end",f),t.removeListener("close",f),t.removeListener("finish",d),t.removeListener("exit",g),t.removeListener("end",p),t.removeListener("error",n),t.removeListener("close",m)}};t.exports=a},function(t,e,n){function i(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}var r=n(444);t.exports=r(i),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0})})},function(t,e){function n(t,e){function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),r=e[e.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach(function(t){i[t]=r[t]}),i}if(t&&e)return n(t)(e);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(e){i[e]=t[e]}),i}t.exports=n},function(t,e,n){"use strict";e.parser=n(446),e.generate=n(454)},function(t,e,n){function i(){return this instanceof i?(this._list=r(),this._newPacket(),this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],void(this._stateCounter=0)):new i}var r=n(447),o=n(436),s=n(409).EventEmitter,a=n(452),c=n(453);o(i,s),i.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new a,!0},i.prototype.parse=function(t){for(this._list.append(t);(this.packet.length!=-1||this._list.length>0)&&this[this._states[this._stateCounter]]();)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},i.prototype._parseHeader=function(){var t=this._list.readUInt8(0);return this.packet.cmd=c.types[t>>c.CMD_SHIFT],this.packet.retain=0!==(t&c.RETAIN_MASK),this.packet.qos=t>>c.QOS_SHIFT&c.QOS_MASK,this.packet.dup=0!==(t&c.DUP_MASK),this._list.consume(1),!0},i.prototype._parseLength=function(){for(var t,e=0,n=1,i=0,r=!0;e<5&&(t=this._list.readUInt8(e++),i+=n*(t&c.LENGTH_MASK),n*=128,0!==(t&c.LENGTH_FIN_MASK));)if(this._list.length<=e){r=!1;break}return r&&(this.packet.length=i,this._list.consume(e)),r},i.prototype._parsePayload=function(){var t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this.emit("error",new Error("not supported"))}t=!0}return t},i.prototype._parseConnect=function(){var t,e,n,i,r,o,s={},a=this.packet;if(t=this._parseString(),null===t)return this.emit("error",new Error("cannot parse protocol id"));if("MQTT"!=t&&"MQIsdp"!=t)return this.emit("error",new Error("invalid protocol id"));if(a.protocolId=t,this._pos>=this._list.length)return this.emit("error",new Error("packet too short"));if(a.protocolVersion=this._list.readUInt8(this._pos),3!=a.protocolVersion&&4!=a.protocolVersion)return this.emit("error",new Error("invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this.emit("error",new Error("packet too short"));if(s.username=this._list.readUInt8(this._pos)&c.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&c.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&c.WILL_FLAG_MASK,s.will&&(a.will={},a.will.retain=0!==(this._list.readUInt8(this._pos)&c.WILL_RETAIN_MASK),a.will.qos=(this._list.readUInt8(this._pos)&c.WILL_QOS_MASK)>>c.WILL_QOS_SHIFT),a.clean=0!==(this._list.readUInt8(this._pos)&c.CLEAN_SESSION_MASK),this._pos++,a.keepalive=this._parseNum(),a.keepalive===-1)return this.emit("error",new Error("packet too short"));if(e=this._parseString(),null===e)return this.emit("error",new Error("packet too short"));if(a.clientId=e,s.will){if(n=this._parseString(),null===n)return this.emit("error",new Error("cannot parse will topic"));if(a.will.topic=n,i=this._parseBuffer(),null===i)return this.emit("error",new Error("cannot parse will payload"));a.will.payload=i}if(s.username){if(o=this._parseString(),null===o)return this.emit("error",new Error("cannot parse username"));a.username=o}if(s.password){if(r=this._parseBuffer(),null===r)return this.emit("error",new Error("cannot parse username"));a.password=r}return a},i.prototype._parseConnack=function(){var t=this.packet;return this._list.length<2?null:(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&c.SESSIONPRESENT_MASK),t.returnCode=this._list.readUInt8(this._pos),t.returnCode===-1?this.emit("error",new Error("cannot parse return code")):void 0)},i.prototype._parsePublish=function(){var t=this.packet;return t.topic=this._parseString(),null===t.topic?this.emit("error",new Error("cannot parse topic")):void(t.qos>0&&!this._parseMessageId()||(t.payload=this._list.slice(this._pos,t.length)))},i.prototype._parseSubscribe=function(){var t,e,n=this.packet;if(1!=n.qos)return this.emit("error",new Error("wrong subscribe header"));if(n.subscriptions=[],this._parseMessageId())for(;this._pos<n.length;){if(t=this._parseString(),null===t)return this.emit("error",new Error("Parse error - cannot parse topic"));e=this._list.readUInt8(this._pos++),n.subscriptions.push({topic:t,qos:e})}},i.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},i.prototype._parseUnsubscribe=function(){var t=this.packet;if(t.unsubscriptions=[],this._parseMessageId())for(;this._pos<t.length;){var e;if(e=this._parseString(),null===e)return this.emit("error",new Error("cannot parse topic"));t.unsubscriptions.push(e)}},i.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this.emit("error",new Error("cannot parse message id"))},i.prototype._parseMessageId=function(){var t=this.packet;return t.messageId=this._parseNum(),null!==t.messageId||(this.emit("error",new Error("cannot parse message id")),!1)},i.prototype._parseString=function(t){var e,n=this._parseNum(),i=n+this._pos;return n===-1||i>this._list.length||i>this.packet.length?null:(e=this._list.toString("utf8",this._pos,i),this._pos+=n,e)},i.prototype._parseBuffer=function(){var t,e=this._parseNum(),n=e+this._pos;return e===-1||n>this._list.length||n>this.packet.length?null:(t=this._list.slice(this._pos,n),this._pos+=e,t)},i.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var t=this._list.readUInt16BE(this._pos);return this._pos+=2,t},t.exports=i},function(t,e,n){(function(e){function i(t){if(!(this instanceof i))return new i(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var n=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",n)}),this.on("unpipe",function(t){t.removeListener("error",n)})}else e.isBuffer(t)?this.append(t):Array.isArray(t)&&t.forEach(function(t){e.isBuffer(t)&&this.append(t)}.bind(this));r.call(this)}var r=n(448),o=n(449);o.inherits(i,r),i.prototype._offset=function(t){for(var e,n=0,i=0;i<this._bufs.length;i++){if(e=n+this._bufs[i].length,t<e)return[i,t-n];n=e}},i.prototype.append=function(t){var n=e.isBuffer(t)||t instanceof i;return"number"==typeof t&&(t=t.toString()),this._bufs.push(n?t:new e(t)),this.length+=t.length,this},i.prototype._write=function(t,e,n){this.append(t),n&&n()},i.prototype._read=function(t){return this.length?(t=Math.min(t,this.length),this.push(this.slice(0,t)),void this.consume(t)):this.push(null)},i.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype.get=function(t){return this.slice(t,t+1)[0]},i.prototype.slice=function(t,e){return this.copy(null,0,t,e)},i.prototype.copy=function(t,n,i,r){if(("number"!=typeof i||i<0)&&(i=0),("number"!=typeof r||r>this.length)&&(r=this.length),i>=this.length)return t||new e(0);if(r<=0)return t||new e(0);var o,s,a=!!t,c=this._offset(i),l=r-i,u=l,h=a&&n||0,f=c[1];if(0===i&&r==this.length){if(!a)return e.concat(this._bufs);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(t,h),h+=this._bufs[s].length;return t}if(u<=this._bufs[c[0]].length-f)return a?this._bufs[c[0]].copy(t,n,f,f+u):this._bufs[c[0]].slice(f,f+u);for(a||(t=new e(l)),s=c[0];s<this._bufs.length;s++){if(o=this._bufs[s].length-f,!(u>o)){this._bufs[s].copy(t,h,f,f+u);break}this._bufs[s].copy(t,h,f),h+=o,u-=o,f&&(f=0)}return t},i.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},i.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){for(var t=0,e=new i;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},i.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){i.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),t.exports=i}).call(e,n(417).Buffer)},function(t,e,n){t.exports=n(439)},function(t,e,n){(function(t,i){function r(t,n){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(n)?i.showHidden=n:n&&e._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),c(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function c(t,n,i){if(t.customInspect&&n&&C(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return w(r)||(r=c(t,r,i)),r}var o=l(t,n);if(o)return o;var s=Object.keys(n),g=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),S(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(n);if(0===s.length){if(C(n)){var m=n.name?": "+n.name:"";return t.stylize("[Function"+m+"]","special")}if(A(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return u(n)}var v="",y=!1,b=["{","}"];if(p(n)&&(y=!0,b=["[","]"]),C(n)){var x=n.name?": "+n.name:"";v=" [Function"+x+"]"}if(A(n)&&(v=" "+RegExp.prototype.toString.call(n)),_(n)&&(v=" "+Date.prototype.toUTCString.call(n)),S(n)&&(v=" "+u(n)),0===s.length&&(!y||0==n.length))return b[0]+v+b[1];if(i<0)return A(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var E;return E=y?h(t,n,i,g,s):s.map(function(e){return f(t,n,i,g,e,y)}),t.seen.pop(),d(E,v,b)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(w(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)L(e,String(s))?o.push(f(t,e,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}function f(t,e,n,i,r,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),L(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(l.value)<0?(a=m(n)?c(t,l.value,null):c(t,l.value,n-1),
a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t,e,n){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function m(t){return null===t}function v(t){return null==t}function y(t){return"number"==typeof t}function w(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function x(t){return void 0===t}function A(t){return E(t)&&"[object RegExp]"===$(t)}function E(t){return"object"==typeof t&&null!==t}function _(t){return E(t)&&"[object Date]"===$(t)}function S(t){return E(t)&&("[object Error]"===$(t)||t instanceof Error)}function C(t){return"function"==typeof t}function M(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function $(t){return Object.prototype.toString.call(t)}function F(t){return t<10?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[F(t.getHours()),F(t.getMinutes()),F(t.getSeconds())].join(":");return[t.getDate(),B[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var k=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(t).replace(k,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return t}}),a=i[n];n<o;a=i[++n])s+=m(a)||!E(a)?" "+a:" "+r(a);return s},e.deprecate=function(n,r){function o(){if(!s){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),s=!0}return n.apply(this,arguments)}if(x(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var s=!1;return o};var R,D={};e.debuglog=function(t){if(x(R)&&(R=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var n=i.pid;D[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else D[t]=function(){};return D[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=g,e.isNull=m,e.isNullOrUndefined=v,e.isNumber=y,e.isString=w,e.isSymbol=b,e.isUndefined=x,e.isRegExp=A,e.isObject=E,e.isDate=_,e.isError=S,e.isFunction=C,e.isPrimitive=M,e.isBuffer=n(450);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",T(),e.format.apply(e,arguments))},e.inherits=n(451),e._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(e,function(){return this}(),n(297))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){function n(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}t.exports=n},function(t,e){t.exports.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},t.exports.codes={};for(var n in t.exports.types){var i=t.exports.types[n];t.exports.codes[i]=n}t.exports.CMD_SHIFT=4,t.exports.CMD_MASK=240,t.exports.DUP_MASK=8,t.exports.QOS_MASK=3,t.exports.QOS_SHIFT=1,t.exports.RETAIN_MASK=1,t.exports.LENGTH_MASK=127,t.exports.LENGTH_FIN_MASK=128,t.exports.SESSIONPRESENT_MASK=1,t.exports.USERNAME_MASK=128,t.exports.PASSWORD_MASK=64,t.exports.WILL_RETAIN_MASK=32,t.exports.WILL_QOS_MASK=24,t.exports.WILL_QOS_SHIFT=3,t.exports.WILL_FLAG_MASK=4,t.exports.CLEAN_SESSION_MASK=2},function(t,e,n){(function(e){"use strict";function i(t){switch(t.cmd){case"connect":return r(t);case"connack":return o(t);case"publish":return s(t);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return a(t);case"subscribe":return c(t);case"suback":return l(t);case"unsubscribe":return u(t);case"pingreq":case"pingresp":case"disconnect":return h(t);default:throw new Error("unknown command")}}function r(t){var t=t||{},n=t.protocolId||"MQTT",i=t.protocolVersion||4,r=t.will,o=t.clean,s=t.keepalive||0,a=t.clientId||"",c=t.username,l=t.password;void 0===o&&(o=!0);var u=0;if(!n||"string"!=typeof n&&!e.isBuffer(n))throw new Error("Invalid protocol id");if(u+=n.length+2,!i||"number"!=typeof i||i>255||i<0)throw new Error("Invalid protocol version");if(u+=1,"string"!=typeof a&&!e.isBuffer(a)||!a&&4!=i||!a&&!o){if(i<4)throw new Error("clientId must be supplied before 3.1.1");if(0==o)throw new Error("clientId must be given if cleanSession set to 0")}else u+=a.length+2;if("number"!=typeof s||s<0||s>65535)throw new Error("Invalid keepalive");if(u+=2,u+=1,r){if("object"!=typeof r)throw new Error("Invalid will");if(!r.topic||"string"!=typeof r.topic)throw new Error("Invalid will topic");if(u+=e.byteLength(r.topic)+2,r.payload&&r.payload){if(!(r.payload.length>=0))throw new Error("Invalid will payload");u+="string"==typeof r.payload?e.byteLength(r.payload)+2:r.payload.length+2}else u+=2}if(c){if(!c.length)throw new Error("Invalid username");u+=e.byteLength(c)+2}if(l){if(!l.length)throw new Error("Invalid password");u+=w(l)+2}var h=new e(1+f(u)+u),g=0;h.writeUInt8(b.codes.connect<<b.CMD_SHIFT,g++,!0),g+=d(h,g,u),g+=y(h,g,n),h.writeUInt8(i,g++,!0);var m=0;return m|=c?b.USERNAME_MASK:0,m|=l?b.PASSWORD_MASK:0,m|=r&&r.retain?b.WILL_RETAIN_MASK:0,m|=r&&r.qos?r.qos<<b.WILL_QOS_SHIFT:0,m|=r?b.WILL_FLAG_MASK:0,m|=o?b.CLEAN_SESSION_MASK:0,h.writeUInt8(m,g++,!0),g+=v(h,g,s),g+=y(h,g,a),r&&(g+=p(h,g,r.topic),g+=y(h,g,r.payload)),c&&(g+=y(h,g,c)),l&&(g+=y(h,g,l)),h}function o(t){var t=t||{},n=t.returnCode;if("number"!=typeof n)throw new Error("Invalid return code");var i=new e(4),r=0;return i.writeUInt8(b.codes.connack<<b.CMD_SHIFT,r++,!0),r+=d(i,r,2),i.writeUInt8(t.sessionPresent&&b.SESSIONPRESENT_MASK||0,r++,!0),i.writeUInt8(n,r++,!0),i}function s(t){var t=t||{},n=t.dup?b.DUP_MASK:0,i=t.qos,r=t.retain?b.RETAIN_MASK:0,o=t.topic,s=t.payload||x,a=t.messageId,c=0;if("string"==typeof o)c+=e.byteLength(o)+2;else{if(!e.isBuffer(o))throw new Error("Invalid topic");c+=o.length+2}if(c+=e.isBuffer(s)?s.length:e.byteLength(s),i&&"number"!=typeof a)throw new Error("Invalid message id");i&&(c+=2);var l=new e(1+f(c)+c),u=0;return l.writeUInt8(b.codes.publish<<b.CMD_SHIFT|n|i<<b.QOS_SHIFT|r,u++,!0),u+=d(l,u,c),u+=y(l,u,o),i>0&&(u+=v(l,u,a)),e.isBuffer(s)?m(l,u,s):g(l,u,s),l}function a(t){var t=t||{},n=t.cmd||"puback",i=t.messageId,r=t.dup&&"pubrel"===n?b.DUP_MASK:0,o=0;if("pubrel"===n&&(o=1),"number"!=typeof i)throw new Error("Invalid message id");var s=new e(4),a=0;return s[a++]=b.codes[n]<<b.CMD_SHIFT|r|o<<b.QOS_SHIFT,a+=d(s,a,2),a+=v(s,a,i),s}function c(t){var t=t||{},n=t.dup?b.DUP_MASK:0,i=t.qos||0,r=t.messageId,o=t.subscriptions,s=0;if("number"!=typeof r)throw new Error("Invalid message id");if(s+=2,"object"!=typeof o||!o.length)throw new Error("Invalid subscriptions");for(var a=0;a<o.length;a+=1){var c=o[a].topic,i=o[a].qos;if("string"!=typeof c)throw new Error("Invalid subscriptions - invalid topic");if("number"!=typeof i)throw new Error("Invalid subscriptions - invalid qos");s+=e.byteLength(c)+2+1}var l=new e(1+f(s)+s),u=0;l.writeUInt8(b.codes.subscribe<<b.CMD_SHIFT|n|1<<b.QOS_SHIFT,u++,!0),u+=d(l,u,s),u+=v(l,u,r);for(var a=0;a<o.length;a++){var h=o[a],c=h.topic,i=h.qos;u+=p(l,u,c),l.writeUInt8(i,u++,!0)}return l}function l(t){var t=t||{},n=t.messageId,i=t.granted,r=0;if("number"!=typeof n)throw new Error("Invalid message id");if(r+=2,"object"!=typeof i||!i.length)throw new Error("Invalid qos vector");for(var o=0;o<i.length;o+=1){if("number"!=typeof i[o])throw new Error("Invalid qos vector");r+=1}var s=new e(1+f(r)+r),a=0;s.writeUInt8(b.codes.suback<<b.CMD_SHIFT,a++,!0),a+=d(s,a,r),a+=v(s,a,n);for(var o=0;o<i.length;o++)s.writeUInt8(i[o],a++,!0);return s}function u(t){var t=t||{},n=t.messageId,i=t.dup?b.DUP_MASK:0,r=t.unsubscriptions,o=0;if("number"!=typeof n)throw new Error("Invalid message id");if(o+=2,"object"!=typeof r||!r.length)throw new Error("Invalid unsubscriptions");for(var s=0;s<r.length;s+=1){if("string"!=typeof r[s])throw new Error("Invalid unsubscriptions");o+=e.byteLength(r[s])+2}var a=new e(1+f(o)+o),c=0;a[c++]=b.codes.unsubscribe<<b.CMD_SHIFT|i|1<<b.QOS_SHIFT,c+=d(a,c,o),c+=v(a,c,n);for(var s=0;s<r.length;s++)c+=p(a,c,r[s]);return a}function h(t){var n=new e(2);return n[0]=b.codes[t.cmd]<<4,n[1]=0,n}function f(t){return t>=0&&t<128?1:t>=128&&t<16384?2:t>=16384&&t<2097152?3:t>=2097152&&t<268435456?4:0}function d(t,e,n){var i=0,r=e;do i=n%128|0,n=n/128|0,n>0&&(i=128|i),t.writeUInt8(i,e++,!0);while(n>0);return e-r}function p(t,n,i){var r=e.byteLength(i);return v(t,n,r),g(t,n+2,i),r+2}function g(t,e,n){t.write(n,e)}function m(t,e,n){return n.copy(t,e),n.length}function v(t,e,n){return t.writeUInt8(n>>8,e,!0),t.writeUInt8(255&n,e+1,!0),2}function y(t,e,n){var i=0;return n&&"string"==typeof n?i+=p(t,e+i,n):n?(i+=v(t,e+i,n.length),i+=m(t,e+i,n)):i+=v(t,e+i,0),i}function w(t){return e.isBuffer(t)?t.length:e.byteLength(t)}var b=n(453),x=new e(0);t.exports=i}).call(e,n(417).Buffer)},function(t,e){"use strict";function n(t,e,n){var i=this;this._callback=t,this._args=n,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t||(t=i._interval),i._interval&&clearInterval(i._interval),i._interval=setInterval(i._callback,t,i._args)},this.clear=function(){i._interval&&(clearInterval(i._interval),i._interval=void 0)},this.destroy=function(){i._interval&&clearInterval(i._interval),i._callback=void 0,i._interval=void 0,i._args=void 0}}function i(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new n(arguments[0],arguments[1],t)}t.exports=i},function(t,e,n){function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,n){if(t&&l(t)&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}function o(t){return c(t)&&(t=r(t)),t instanceof i?t.format():i.prototype.format.call(t)}function s(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}function c(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function u(t){return null===t}function h(t){return null==t}var f=n(457);e.parse=r,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=i;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(g),v=["'"].concat(m),y=["%","/","?",";","#"].concat(v),w=["/","?","#"],b=255,x=/^[a-z0-9A-Z_-]{0,63}$/,A=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=n(458);i.prototype.parse=function(t,e,n){if(!c(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t;i=i.trim();var r=d.exec(i);if(r){r=r[0];var o=r.toLowerCase();this.protocol=o,i=i.substr(r.length)}if(n||r||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===i.substr(0,2);!s||r&&_[r]||(i=i.substr(2),this.slashes=!0)}if(!_[r]&&(s||r&&!S[r])){for(var a=-1,l=0;l<w.length;l++){var u=i.indexOf(w[l]);u!==-1&&(a===-1||u<a)&&(a=u)}var h,p;p=a===-1?i.lastIndexOf("@"):i.lastIndexOf("@",a),p!==-1&&(h=i.slice(0,p),i=i.slice(p+1),this.auth=decodeURIComponent(h)),a=-1;for(var l=0;l<y.length;l++){var u=i.indexOf(y[l]);u!==-1&&(a===-1||u<a)&&(a=u)}a===-1&&(a=i.length),this.host=i.slice(0,a),i=i.slice(a),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),l=0,M=m.length;l<M;l++){var $=m[l];if($&&!$.match(x)){for(var F="",T=0,L=$.length;T<L;T++)F+=$.charCodeAt(T)>127?"x":$[T];if(!F.match(x)){var k=m.slice(0,l),R=m.slice(l+1),D=$.match(A);D&&(k.push(D[1]),R.unshift(D[2])),R.length&&(i="/"+R.join(".")+i),this.hostname=k.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var B=this.hostname.split("."),P=[],l=0;l<B.length;++l){var O=B[l];P.push(O.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(O):O)}this.hostname=P.join(".")}var I=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+I,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!E[o])for(var l=0,M=v.length;l<M;l++){var U=v[l],j=encodeURIComponent(U);j===U&&(j=escape(U)),i=i.split(U).join(j)}var z=i.indexOf("#");z!==-1&&(this.hash=i.substr(z),i=i.slice(0,z));var H=i.indexOf("?");if(H!==-1?(this.search=i.substr(H),this.query=i.substr(H+1),e&&(this.query=C.parse(this.query)),i=i.slice(0,H)):e&&(this.search="",this.query={}),i&&(this.pathname=i),S[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",O=this.search||"";this.path=I+O}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=C.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&r!==!1?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+n+s+i},i.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(c(t)){var e=new i;e.parse(t,!1,!0),t=e}var n=new i;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||_[t.protocol])n.pathname=t.pathname;else{for(var r=(t.pathname||"").split("/");r.length&&!(t.host=r.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",s=n.search||"";n.path=o+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=l||a||n.host&&t.pathname,d=f,p=n.pathname&&n.pathname.split("/")||[],r=t.pathname&&t.pathname.split("/")||[],g=n.protocol&&!S[n.protocol];if(g&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===r[0]?r[0]=t.host:r.unshift(t.host)),t.host=null),f=f&&(""===r[0]||""===p[0])),l)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,p=r;else if(r.length)p||(p=[]),p.pop(),p=p.concat(r),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(g){n.hostname=n.host=p.shift();var m=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return n.search=t.search,n.query=t.query,u(n.pathname)&&u(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=p.slice(-1)[0],y=(n.host||t.host)&&("."===v||".."===v)||""===v,w=0,b=p.length;b>=0;b--)v=p[b],"."==v?p.splice(b,1):".."===v?(p.splice(b,1),w++):w&&(p.splice(b,1),w--);if(!f&&!d)for(;w--;w)p.unshift("..");!f||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),y&&"/"!==p.join("/").substr(-1)&&p.push("");var x=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(g){n.hostname=n.host=x?"":p.length?p.shift():"";var m=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return f=f||n.host&&p.length,f&&!x&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),u(n.pathname)&&u(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var i;(function(t,r){!function(o){function s(t){throw RangeError(k[t])}function a(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function c(t,e){var n=t.split("@"),i="";n.length>1&&(i=n[0]+"@",t=n[1]),t=t.replace(L,".");var r=t.split("."),o=a(r,e).join(".");return i+o}function l(t){for(var e,n,i=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(n=t.charCodeAt(r++),56320==(64512&n)?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--)):i.push(e);return i}function u(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=B(t>>>10&1023|55296),t=56320|1023&t),e+=B(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,n){var i=0;for(t=n?D(t/S):t>>1,t+=D(t/e);t>R*E>>1;i+=x)t=D(t/R);return D(i+(R+1)*t/(t+_))}function p(t){var e,n,i,r,o,a,c,l,f,p,g=[],m=t.length,v=0,y=M,w=C;for(n=t.lastIndexOf($),n<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&s("not-basic"),g.push(t.charCodeAt(i));for(r=n>0?n+1:0;r<m;){for(o=v,a=1,c=x;r>=m&&s("invalid-input"),l=h(t.charCodeAt(r++)),(l>=x||l>D((b-v)/a))&&s("overflow"),v+=l*a,f=c<=w?A:c>=w+E?E:c-w,!(l<f);c+=x)p=x-f,a>D(b/p)&&s("overflow"),a*=p;e=g.length+1,w=d(v-o,e,0==o),D(v/e)>b-y&&s("overflow"),y+=D(v/e),v%=e,g.splice(v++,0,y)}return u(g)}function g(t){var e,n,i,r,o,a,c,u,h,p,g,m,v,y,w,_=[];for(t=l(t),m=t.length,e=M,n=0,o=C,a=0;a<m;++a)g=t[a],g<128&&_.push(B(g));for(i=r=_.length,r&&_.push($);i<m;){for(c=b,a=0;a<m;++a)g=t[a],g>=e&&g<c&&(c=g);for(v=i+1,c-e>D((b-n)/v)&&s("overflow"),n+=(c-e)*v,e=c,a=0;a<m;++a)if(g=t[a],g<e&&++n>b&&s("overflow"),g==e){for(u=n,h=x;p=h<=o?A:h>=o+E?E:h-o,!(u<p);h+=x)w=u-p,y=x-p,_.push(B(f(p+w%y,0))),u=D(w/y);_.push(B(f(u,0))),o=d(n,v,i==r),n=0,++i}++n,++e}return _.join("")}function m(t){return c(t,function(t){return F.test(t)?p(t.slice(4).toLowerCase()):t})}function v(t){return c(t,function(t){return T.test(t)?"xn--"+g(t):t})}var y=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof r&&r);y.global!==y&&y.window!==y&&y.self!==y||(o=y);var w,b=2147483647,x=36,A=1,E=26,_=38,S=700,C=72,M=128,$="-",F=/^xn--/,T=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=x-A,D=Math.floor,B=String.fromCharCode;w={version:"1.3.2",ucs2:{decode:l,encode:u},decode:p,encode:g,toASCII:v,toUnicode:m},i=function(){return w}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this)}).call(e,n(349)(t),function(){return this}())},function(t,e,n){"use strict";e.decode=e.parse=n(459),e.encode=e.stringify=n(460)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,r){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var c=t.length;a>0&&c>a&&(c=a);for(var l=0;l<c;++l){var u,h,f,d,p=t[l].replace(s,"%20"),g=p.indexOf(i);g>=0?(u=p.substr(0,g),h=p.substr(g+1)):(u=p,h=""),f=decodeURIComponent(u),d=decodeURIComponent(h),n(o,f)?Array.isArray(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,r){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(r){var o=encodeURIComponent(n(r))+i;return Array.isArray(t[r])?t[r].map(function(t){return o+encodeURIComponent(n(t))}).join(e):o+encodeURIComponent(n(t[r]))}).join(e):r?encodeURIComponent(n(r))+i+encodeURIComponent(n(t)):""}},function(t,e){function n(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t}t.exports=n;var i=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";function i(t,e){var n,i;return e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",n=e.port,i=e.hostname,r.createConnection(n,i)}var r=n(463);t.exports=i},function(t,e){},function(t,e,n){"use strict";function i(t,e){function n(n){e.rejectUnauthorized&&t.emit("error",n),i.end()}var i;return e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",e.rejectUnauthorized=!1!==e.rejectUnauthorized,i=r.connect(e),i.on("secureConnect",function(){e.rejectUnauthorized&&!i.authorized?i.emit("error",new Error("TLS not authorized")):i.removeListener("error",n)}),i.on("error",n),i}var r=n(465);t.exports=i},function(t,e){},function(t,e,n){(function(e){"use strict";function i(t,e){var n={protocol:"mqttv3.1"},i=e.hostname||"localhost",r=String(e.port||80),s=e.path||"/",c=e.protocol+"://"+i+":"+r+s;return"wss"===e.protocol&&a.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),o(c,n)}function r(t,e){var n,i;if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");return i=s.parse(document.URL),e.protocol||("https:"===i.protocol?e.protocol="wss":e.protocol="ws"),e.hostname||(e.hostname=e.host),e.hostname||(e.hostname=i.hostname,e.port||(e.port=i.port)),e.port||("wss"===e.protocol?e.port=443:e.port=80),e.path||(e.path="/"),n=e.protocol+"://"+e.hostname+":"+e.port+e.path,o(n,"mqttv3.1")}var o=n(467),s=n(456),a=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];"browser"!==e.title?t.exports=i:t.exports=r}).call(e,n(297))},function(t,e,n){(function(e,i,r){function o(t,n,o){function l(t,e,n){!S||t instanceof r||(t=new r(t,"utf8")),y.send(t,n)}function u(t,e,n){if(y.bufferedAmount>E)return void setTimeout(u,_,t,e,n);try{y.send(t)}catch(i){return n(i)}n()}function h(t){y.close(),t()}function f(){v.setReadable(A),v.setWritable(A),v.emit("connect")}function d(){v.end(),v.destroy()}function p(t){v.destroy(t)}function g(t){var e=t.data;e=new r(e instanceof ArrayBuffer?new Uint8Array(e):e),A.push(e)}function m(){y.close()}var v,y,w="browser"===e.title,b=!!i.WebSocket,x=w?u:l,A=s.obj(x,h);n&&!Array.isArray(n)&&"object"==typeof n&&(o=n,n=null),o||(o={});var E=o.browserBufferSize||524288,_=o.browserBufferTimeout||1e3;"object"==typeof t?y=t:(y=b&&w?new c(t,n):new c(t,n,o),y.binaryType="arraybuffer"),y.readyState===c.OPEN?v=A:(v=a.obj(),y.onopen=f),v.socket=y,y.onclose=d,y.onerror=p,y.onmessage=g,A.on("close",m);var S=o.binary||void 0===o.binary;return v}var s=n(468),a=n(481),c=n(500);t.exports=o}).call(e,n(297),function(){return this}(),n(417).Buffer)},function(t,e,n){(function(e){function i(t){s.call(this,t),this._destroyed=!1}function r(t,e,n){n(null,t)}function o(t){return function(e,n,i){return"function"==typeof e&&(i=n,n=e,e={}),"function"!=typeof n&&(n=r),"function"!=typeof i&&(i=null),t(e,n,i)}}var s=n(469),a=n(449).inherits,c=n(461);a(i,s),i.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var n=this;e.nextTick(function(){t&&n.emit("error",t),n.emit("close")})}},t.exports=o(function(t,e,n){var r=new i(t);return r._transform=e,n&&(r._flush=n),r}),t.exports.ctor=o(function(t,e,n){function r(e){return this instanceof r?(this.options=c(t,e),void i.call(this,this.options)):new r(e)}return a(r,i),r.prototype._transform=e,n&&(r.prototype._flush=n),r}),t.exports.obj=o(function(t,e,n){var r=new i(c({objectMode:!0,highWaterMark:16},t));return r._transform=e,n&&(r._flush=n),r})}).call(e,n(297))},function(t,e,n){t.exports=n(470)},function(t,e,n){"use strict";function i(t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&t.push(n),r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new i(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=n(471),c=n(473);c.inherits=n(436),c.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){"use strict";function i(t){return this instanceof i?(l.call(this,t),u.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=i;var a=n(472),c=n(473);c.inherits=n(436);var l=n(474),u=n(478);c.inherits(i,l);for(var h=s(u.prototype),f=0;f<h.length;f++){var d=h[f];i.prototype[d]||(i.prototype[d]=u.prototype[d])}},function(t,e,n){(function(e){"use strict";function n(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(e,n(297))},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function l(t){return void 0===t}function u(t){return"[object RegExp]"===m(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===m(t)}function d(t){return"[object Error]"===m(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function m(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=i,e.isNull=r,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=c,e.isUndefined=l,e.isRegExp=u,e.isObject=h,e.isDate=f,e.isError=d,e.isFunction=p,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(417).Buffer)},function(t,e,n){(function(e){"use strict";function i(t,e){D=D||n(471),t=t||{},this.objectMode=!!t.objectMode,e instanceof D&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(R||(R=n(477).StringDecoder),this.decoder=new R(t.encoding),this.encoding=t.encoding)}function r(t){return D=D||n(471),this instanceof r?(this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void $.call(this)):new r(t)}function o(t,e,n,i,r){var o=l(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,u(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else{var c;!e.decoder||r||i||(n=e.decoder.write(n),c=!e.objectMode&&0===n.length),r||(e.reading=!1),c||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&h(t))),d(t,e)}else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){return t>=B?t=B:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,
0):t)}function l(t,e){var n=null;return M.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function u(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,h(t)}}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(k("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?S(f,t):f(t))}function f(t){k("emit readable"),t.emit("readable"),w(t)}function d(t,e){e.readingMore||(e.readingMore=!0,S(p,t,e))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(k("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;k("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&F(t,"data")&&(e.flowing=!0,w(t))}}function m(t){k("readable nexttick read 0"),t.read(0)}function v(t,e){e.resumeScheduled||(e.resumeScheduled=!0,S(y,t,e))}function y(t,e){e.reading||(k("resume read 0"),t.read(0)),e.resumeScheduled=!1,t.emit("resume"),w(t),e.flowing&&!e.reading&&t.read(0)}function w(t){var e=t._readableState;if(k("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function b(t,e){var n,i=e.buffer,r=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!t||t>=r)n=o?i.join(""):1===i.length?i[0]:M.concat(i,r),i.length=0;else if(t<i[0].length){var a=i[0];n=a.slice(0,t),i[0]=a.slice(t)}else if(t===i[0].length)n=i.shift();else{n=o?"":new M(t);for(var c=0,l=0,u=i.length;l<u&&c<t;l++){var a=i[0],h=Math.min(t-c,a.length);o?n+=a.slice(0,h):a.copy(n,c,0,h),h<a.length?i[0]=a.slice(h):i.shift(),c+=h}}return n}function x(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,S(A,e,t))}function A(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function E(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}function _(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}t.exports=r;var S=n(472),C=n(475),M=n(417).Buffer;r.ReadableState=i;var $,F=(n(409),function(t,e){return t.listeners(e).length});!function(){try{$=n(412)}catch(t){}finally{$||($=n(409).EventEmitter)}}();var M=n(417).Buffer,T=n(473);T.inherits=n(436);var L=n(476),k=void 0;k=L&&L.debuglog?L.debuglog("stream"):function(){};var R;T.inherits(r,$);var D,D;r.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new M(t,e),e="")),o(this,n,t,e,!1)},r.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},r.prototype.isPaused=function(){return this._readableState.flowing===!1},r.prototype.setEncoding=function(t){return R||(R=n(477).StringDecoder),this._readableState.decoder=new R(t),this._readableState.encoding=t,this};var B=8388608;r.prototype.read=function(t){k("read",t);var e=this._readableState,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return k("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?x(this):h(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&x(this),null;var i=e.needReadable;k("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,k("length less than watermark",i)),(e.ended||e.reading)&&(i=!1,k("reading or ended",i)),i&&(k("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=c(n,e));var r;return r=t>0?b(t,e):null,null===r&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&x(this),null!==r&&this.emit("data",r),r},r.prototype._read=function(t){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,n){function i(t){k("onunpipe"),t===h&&o()}function r(){k("onend"),t.end()}function o(){k("cleanup"),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("drain",m),t.removeListener("error",a),t.removeListener("unpipe",i),h.removeListener("end",r),h.removeListener("end",o),h.removeListener("data",s),v=!0,!f.awaitDrain||t._writableState&&!t._writableState.needDrain||m()}function s(e){k("ondata");var n=t.write(e);!1===n&&(1!==f.pipesCount||f.pipes[0]!==t||1!==h.listenerCount("data")||v||(k("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++),h.pause())}function a(e){k("onerror",e),u(),t.removeListener("error",a),0===F(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",l),u()}function l(){k("onfinish"),t.removeListener("close",c),u()}function u(){k("unpipe"),h.unpipe(t)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,k("pipe count=%d opts=%j",f.pipesCount,n);var d=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,p=d?r:o;f.endEmitted?S(p):h.once("end",p),t.on("unpipe",i);var m=g(h);t.on("drain",m);var v=!1;return h.on("data",s),t._events&&t._events.error?C(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",c),t.once("finish",l),t.emit("pipe",h),f.flowing||(k("pipe resume"),h.resume()),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var o=_(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,e){var n=$.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&!this._readableState.endEmitted){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&h(this,i):S(m,this))}return n},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var t=this._readableState;return t.flowing||(k("resume"),t.flowing=!0,v(this,t)),this},r.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(k("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(k("wrapped data"),e.decoder&&(r=e.decoder.write(r)),(!e.objectMode||null!==r&&void 0!==r)&&(e.objectMode||r&&r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return E(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){k("wrapped _read",e),n&&(n=!1,t.resume())},i},r._fromList=b}).call(e,n(297))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){},function(t,e,n){function i(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(417).Buffer,c=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){(function(e,i){"use strict";function r(){}function o(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function s(t,e){T=T||n(471),t=t||{},this.objectMode=!!t.objectMode,e instanceof T&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){g(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this),this.corkedRequestsFree.next=new E(this)}function a(t){return T=T||n(471),this instanceof a||this instanceof T?(this._writableState=new s(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void $.call(this)):new a(t)}function c(t,e){var n=new Error("write after end");t.emit("error",n),_(e,n)}function l(t,e,n,i){var r=!0;if(!C.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!e.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");t.emit("error",o),_(i,o),r=!1}return r}function u(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new C(e,n)),e}function h(t,e,n,i,r){n=u(e,n,i),C.isBuffer(n)&&(i="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest=new o(n,i,r),c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else f(t,e,!1,s,n,i,r);return a}function f(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function d(t,e,n,i,r){--e.pendingcb,n?_(r,i):r(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function g(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(p(n),e)d(t,n,i,e,r);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(t,n),i?S(m,t,n,o,r):m(t,n,o,r)}}function m(t,e,n,i){n||v(t,e),e.pendingcb--,i(),x(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function y(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var s=0;n;)r[s]=n,n=n.next,s+=1;f(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,e.corkedRequestsFree=o.next,o.next=null}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback,u=e.objectMode?1:a.length;if(f(t,e,!1,u,a,c,l),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function b(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function x(t,e){var n=w(e);return n&&(0===e.pendingcb?(b(t,e),e.finished=!0,t.emit("finish")):b(t,e)),n}function A(t,e,n){e.ending=!0,x(t,e),n&&(e.finished?_(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function E(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}t.exports=a;var _=n(472),S=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:_,C=n(417).Buffer;a.WritableState=s;var M=n(473);M.inherits=n(436);var $,F={deprecate:n(480)};!function(){try{$=n(412)}catch(t){}finally{$||($=n(409).EventEmitter)}}();var C=n(417).Buffer;M.inherits(a,$);var T;s.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(s.prototype,"buffer",{get:F.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var T;a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(t,e,n){var i=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),C.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?c(this,n):l(this,i,t,n)&&(i.pendingcb++,o=h(this,i,t,e,n)),o},a.prototype.cork=function(){var t=this._writableState;t.corked++},a.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||y(this,t))},a.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t},a.prototype._write=function(t,e,n){n(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||A(this,i,n)}}).call(e,n(297),n(479).setImmediate)},function(t,e,n){(function(t,i){function r(t,e){this._id=t,this._clearFn=e}var o=n(297).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,c={},l=0;e.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=l++,i=!(arguments.length<2)&&a.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(i?t.apply(null,i):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof i?i:function(t){delete c[t]}}).call(e,n(479).setImmediate,n(479).clearImmediate)},function(t,e){(function(e){function n(t,e){function n(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}if(i("noDeprecation"))return t;var r=!1;return n}function i(t){try{if(!e.localStorage)return!1}catch(n){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=n}).call(e,function(){return this}())},function(t,e,n){(function(e,i){var r=n(482),o=n(496),s=n(436),a=n(499),c=new e([0]),l=function(t,e){t._corked?t.once("uncork",e):e()},u=function(t,e){return function(n){n?t.destroy("premature close"===n.message?null:n):e&&!t._ended&&t.end()}},h=function(t,e){return t?t._writableState&&t._writableState.finished?e():t._writableState?t.end(e):(t.end(),void e()):e()},f=function(t){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(t)},d=function(t,e,n){return this instanceof d?(r.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._forwardDestroy=!n||n.destroy!==!1,this._forwardEnd=!n||n.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),void(e&&this.setReadable(e))):new d(t,e,n)};s(d,r.Duplex),d.obj=function(t,e,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new d(t,e,n)},d.prototype.cork=function(){1===++this._corked&&this.emit("cork")},d.prototype.uncork=function(){this._corked&&0===--this._corked&&this.emit("uncork")},d.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed)return void(t&&t.destroy&&t.destroy());if(null===t||t===!1)return void this.end();var e=this,n=o(t,{writable:!0,readable:!1},u(this,this._forwardEnd)),r=function(){var t=e._ondrain;e._ondrain=null,t&&t()},s=function(){e._writable.removeListener("drain",r),n()};this._unwrite&&i.nextTick(r),this._writable=t,this._writable.on("drain",r),this._unwrite=s,this.uncork()},d.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)return void(t&&t.destroy&&t.destroy());if(null===t||t===!1)return this.push(null),void this.resume();var e=this,n=o(t,{writable:!1,readable:!0},u(this)),i=function(){e._forward()},r=function(){e.push(null)},s=function(){e._readable2.removeListener("readable",i),e._readable2.removeListener("end",r),n()};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:f(t),this._readable2.on("readable",i),this._readable2.on("end",r),this._unread=s,this._forward()},d.prototype._read=function(){this._drained=!0,this._forward()},d.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var t;null!==(t=a(this._readable2));)this._drained=this.push(t);this._forwarding=!1}},d.prototype.destroy=function(t){if(!this.destroyed){this.destroyed=!0;var e=this;i.nextTick(function(){e._destroy(t)})}},d.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},d.prototype._write=function(t,e,n){return this.destroyed?n():this._corked?l(this,this._write.bind(this,t,e,n)):t===c?this._finish(n):this._writable?void(this._writable.write(t)===!1?this._ondrain=n:n()):n()},d.prototype._finish=function(t){var e=this;this.emit("preend"),l(this,function(){h(e._forwardEnd&&e._writable,function(){e._writableState.prefinished===!1&&(e._writableState.prefinished=!0),e.emit("prefinish"),l(e,t)})})},d.prototype.end=function(t,e,n){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this.write(c),r.Writable.prototype.end.call(this,n))},t.exports=d}).call(e,n(417).Buffer,n(297))},function(t,e,n){(function(i){var r=function(){try{return n(412)}catch(t){}}();e=t.exports=n(483),e.Stream=r||e,e.Readable=e,e.Writable=n(491),e.Duplex=n(490),e.Transform=n(494),e.PassThrough=n(495),!i.browser&&"disable"===i.env.READABLE_STREAM&&r&&(t.exports=r)}).call(e,n(297))},function(t,e,n){(function(e){"use strict";function i(t,e,n){return"function"==typeof t.prependListener?t.prependListener(e,n):void(t._events&&t._events[e]?T(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function r(t,e){U=U||n(490),t=t||{},this.objectMode=!!t.objectMode,e instanceof U&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(I||(I=n(493).StringDecoder),this.decoder=new I(t.encoding),this.encoding=t.encoding)}function o(t){return U=U||n(490),this instanceof o?(this._readableState=new r(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void L.call(this)):new o(t)}function s(t,e,n,i,r){var o=u(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,h(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&r){var c=new Error("stream.unshift() after end event");t.emit("error",c)}else{var l;!e.decoder||r||i||(n=e.decoder.write(n),l=!e.objectMode&&0===n.length),r||(e.reading=!1),l||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&f(t))),p(t,e)}else r||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function c(t){return t>=j?t=j:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function l(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=c(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function u(t,e){var n=null;return R.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,f(t)}}function f(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(O("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?F(d,t):d(t))}function d(t){O("emit readable"),t.emit("readable"),b(t)}function p(t,e){e.readingMore||(e.readingMore=!0,F(g,t,e))}function g(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(O("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function m(t){return function(){var e=t._readableState;O("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&k(t,"data")&&(e.flowing=!0,b(t))}}function v(t){O("readable nexttick read 0"),t.read(0)}function y(t,e){e.resumeScheduled||(e.resumeScheduled=!0,F(w,t,e))}function w(t,e){e.reading||(O("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;for(O("flow",e.flowing);e.flowing&&null!==t.read(););}function x(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=A(t,e.buffer,e.decoder),n}function A(t,e,n){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?E(t,e):_(t,e),i}function E(t,e){var n=e.head,i=1,r=n.data;for(t-=r.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(r+=s===o.length?o:o.slice(0,t),t-=s,0===t){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function _(t,e){var n=D.allocUnsafe(t),i=e.head,r=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),t-=s,0===t){s===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(s));break}++r}return e.length-=r,n}function S(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,F(C,e,t))}function C(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function M(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}function $(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}t.exports=o;var F=n(484),T=n(485);o.ReadableState=r;var L,k=(n(409).EventEmitter,function(t,e){return t.listeners(e).length});!function(){try{L=n(412)}catch(t){}finally{L||(L=n(409).EventEmitter)}}();var R=n(417).Buffer,D=n(486),B=n(487);B.inherits=n(436);var P=n(488),O=void 0;O=P&&P.debuglog?P.debuglog("stream"):function(){};var I,N=n(489);B.inherits(o,L);var U,U;o.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding,e!==n.encoding&&(t=D.from(t,e),e="")),s(this,n,t,e,!1)},o.prototype.unshift=function(t){var e=this._readableState;return s(this,e,t,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return I||(I=n(493).StringDecoder),this._readableState.decoder=new I(t),this._readableState.encoding=t,this};var j=8388608;o.prototype.read=function(t){O("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return O("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?S(this):f(this),null;if(t=l(t,e),0===t&&e.ended)return 0===e.length&&S(this),null;var i=e.needReadable;O("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,O("length less than watermark",i)),e.ended||e.reading?(i=!1,O("reading or ended",i)):i&&(O("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=l(n,e)));var r;return r=t>0?x(t,e):null,null===r?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&S(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(t){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(t,n){function r(t){O("onunpipe"),t===f&&s()}function o(){O("onend"),t.end()}function s(){O("cleanup"),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("drain",v),t.removeListener("error",c),t.removeListener("unpipe",r),f.removeListener("end",o),f.removeListener("end",s),f.removeListener("data",a),y=!0,!d.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function a(e){O("ondata"),w=!1;var n=t.write(e);!1!==n||w||((1===d.pipesCount&&d.pipes===t||d.pipesCount>1&&$(d.pipes,t)!==-1)&&!y&&(O("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,w=!0),f.pause())}function c(e){O("onerror",e),h(),t.removeListener("error",c),0===k(t,"error")&&t.emit("error",e)}function l(){t.removeListener("finish",u),h()}function u(){O("onfinish"),t.removeListener("close",l),h()}function h(){O("unpipe"),f.unpipe(t)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=t;break;case 1:d.pipes=[d.pipes,t];break;default:d.pipes.push(t)}d.pipesCount+=1,O("pipe count=%d opts=%j",d.pipesCount,n);var p=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,g=p?o:s;d.endEmitted?F(g):f.once("end",g),t.on("unpipe",r);var v=m(f);t.on("drain",v);var y=!1,w=!1;return f.on("data",a),i(t,"error",c),t.once("close",l),t.once("finish",u),t.emit("pipe",f),d.flowing||(O("pipe resume"),f.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var o=$(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var n=L.prototype.on.call(this,t,e);if("data"===t)this._readableState.flowing!==!1&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&f(this,i):F(v,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(O("resume"),t.flowing=!0,y(this,t)),this},o.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(O("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(O("wrapped data"),e.decoder&&(r=e.decoder.write(r)),(!e.objectMode||null!==r&&void 0!==r)&&(e.objectMode||r&&r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return M(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){O("wrapped _read",e),n&&(n=!1,t.resume())},i},o._fromList=x}).call(e,n(297))},function(t,e,n){(function(e){"use strict";function n(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(e,n(297))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){"use strict";var i=n(417),r=i.Buffer,o=i.SlowBuffer,s=i.kMaxLength||2147483647;e.alloc=function(t,e,n){if("function"==typeof r.alloc)return r.alloc(t,e,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>s)throw new RangeError("size is too large");var i=n,o=e;void 0===o&&(i=void 0,o=0);var a=new r(t);if("string"==typeof o)for(var c=new r(o,i),l=c.length,u=-1;++u<t;)a[u]=c[u%l];else a.fill(o);return a},e.allocUnsafe=function(t){if("function"==typeof r.allocUnsafe)return r.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>s)throw new RangeError("size is too large");return new r(t)},e.from=function(e,n,i){if("function"==typeof r.from&&(!t.Uint8Array||Uint8Array.from!==r.from))return r.from(e,n,i);
if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new r(e,n);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new r(e);"undefined"==typeof o&&(o=0);var s=i;if("undefined"==typeof s&&(s=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(s>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new r(e.slice(o,o+s))}if(r.isBuffer(e)){var a=new r(e.length);return e.copy(a,0,0,e.length),a}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new r(e);if("Buffer"===e.type&&Array.isArray(e.data))return new r(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function(t){if("function"==typeof r.allocUnsafeSlow)return r.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=s)throw new RangeError("size is too large");return new o(t)}}).call(e,function(){return this}())},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function l(t){return void 0===t}function u(t){return"[object RegExp]"===m(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===m(t)}function d(t){return"[object Error]"===m(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function m(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=i,e.isNull=r,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=c,e.isUndefined=l,e.isRegExp=u,e.isObject=h,e.isDate=f,e.isError=d,e.isFunction=p,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(417).Buffer)},function(t,e){},function(t,e,n){"use strict";function i(){this.head=null,this.tail=null,this.length=0}var r=(n(417).Buffer,n(486));t.exports=i,i.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},i.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e=r.allocUnsafe(t>>>0),n=this.head,i=0;n;)n.data.copy(e,i),i+=n.data.length,n=n.next;return e}},function(t,e,n){"use strict";function i(t){return this instanceof i?(l.call(this,t),u.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=i;var a=n(484),c=n(487);c.inherits=n(436);var l=n(483),u=n(491);c.inherits(i,l);for(var h=s(u.prototype),f=0;f<h.length;f++){var d=h[f];i.prototype[d]||(i.prototype[d]=u.prototype[d])}},function(t,e,n){(function(e,i){"use strict";function r(){}function o(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function s(t,e){L=L||n(490),t=t||{},this.objectMode=!!t.objectMode,e instanceof L&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){g(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function a(t){return L=L||n(490),this instanceof a||this instanceof L?(this._writableState=new s(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void M.call(this)):new a(t)}function c(t,e){var n=new Error("write after end");t.emit("error",n),_(e,n)}function l(t,e,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):F.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),_(i,o),r=!1),r}function u(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=T.from(e,n)),e}function h(t,e,n,i,r){n=u(e,n,i),F.isBuffer(n)&&(i="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest=new o(n,i,r),c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else f(t,e,!1,s,n,i,r);return a}function f(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function d(t,e,n,i,r){--e.pendingcb,n?_(r,i):r(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function g(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(p(n),e)d(t,n,i,e,r);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(t,n),i?S(m,t,n,o,r):m(t,n,o,r)}}function m(t,e,n,i){n||v(t,e),e.pendingcb--,i(),x(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function y(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var s=0;n;)r[s]=n,n=n.next,s+=1;f(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new E(e)}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback,u=e.objectMode?1:a.length;if(f(t,e,!1,u,a,c,l),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function b(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function x(t,e){var n=w(e);return n&&(0===e.pendingcb?(b(t,e),e.finished=!0,t.emit("finish")):b(t,e)),n}function A(t,e,n){e.ending=!0,x(t,e),n&&(e.finished?_(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function E(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}t.exports=a;var _=n(484),S=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:_;a.WritableState=s;var C=n(487);C.inherits=n(436);var M,$={deprecate:n(492)};!function(){try{M=n(412)}catch(t){}finally{M||(M=n(409).EventEmitter)}}();var F=n(417).Buffer,T=n(486);C.inherits(a,M);var L;s.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(s.prototype,"buffer",{get:$.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var L;a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(t,e,n){var i=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),F.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?c(this,n):l(this,i,t,n)&&(i.pendingcb++,o=h(this,i,t,e,n)),o},a.prototype.cork=function(){var t=this._writableState;t.corked++},a.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||y(this,t))},a.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},a.prototype._write=function(t,e,n){n(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||A(this,i,n)}}).call(e,n(297),n(479).setImmediate)},function(t,e){(function(e){function n(t,e){function n(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}if(i("noDeprecation"))return t;var r=!1;return n}function i(t){try{if(!e.localStorage)return!1}catch(n){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=n}).call(e,function(){return this}())},function(t,e,n){function i(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(417).Buffer,c=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){"use strict";function i(t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&t.push(n),r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new i(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=o;var a=n(490),c=n(487);c.inherits=n(436),c.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("Not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){"use strict";function i(t){return this instanceof i?void r.call(this,t):new i(t)}t.exports=i;var r=n(494),o=n(487);o.inherits=n(436),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var i=n(497),r=function(){},o=function(t){return t.setHeader&&"function"==typeof t.abort},s=function(t,e,n){if("function"==typeof e)return s(t,null,e);e||(e={}),n=i(n||r);var a=t._writableState,c=t._readableState,l=e.readable||e.readable!==!1&&t.readable,u=e.writable||e.writable!==!1&&t.writable,h=function(){t.writable||f()},f=function(){u=!1,l||n()},d=function(){l=!1,u||n()},p=function(){return(!l||c&&c.ended)&&(!u||a&&a.ended)?void 0:n(new Error("premature close"))},g=function(){t.req.on("finish",f)};return o(t)?(t.on("complete",f),t.on("abort",p),t.req?g():t.on("request",g)):u&&!a&&(t.on("end",h),t.on("close",h)),t.on("end",d),t.on("finish",f),e.error!==!1&&t.on("error",n),t.on("close",p),function(){t.removeListener("complete",f),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",f),t.removeListener("end",h),t.removeListener("close",h),t.removeListener("finish",f),t.removeListener("end",d),t.removeListener("error",n),t.removeListener("close",p)}};t.exports=s},function(t,e,n){function i(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}var r=n(498);t.exports=r(i),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0})})},function(t,e){function n(t,e){function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),r=e[e.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach(function(t){i[t]=r[t]}),i}if(t&&e)return n(t)(e);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(e){i[e]=t[e]}),i}t.exports=n},function(t,e){function n(t){var e=t._readableState;return e?e.objectMode?t.read():t.read(i(e)):null}function i(t){return t.buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length}t.exports=n},function(t,e){var n=null;n="undefined"!=typeof WebSocket?WebSocket:"undefined"!=typeof MozWebSocket?MozWebSocket:window.WebSocket||window.MozWebSocket,t.exports=n},function(t,e,n){"use strict";var i=n(502);t.exports=i.name},function(t,e,n){"use strict";var i=n(503),r=angular.module("simulator.common.services.socket",[]).factory("socketService",i);t.exports=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return new(function(){function n(){var r=this;i(this,n),this.client=a("/");var o=t.defer();this.connected=o.promise,this.client.on("connect",function(){o.resolve()}),this.deviceIds=new Set,this.client.on("reconnect",function(){r.reconnectDevices()}),this.client.on("stopSimulation",function(){return e.$broadcast("stopSimulation")})}return o(n,[{key:"connect",value:function(t,e){var n=s.isString(t)?t:t.id;this.deviceIds.add(n),this.client.emit("connectDevice",{deviceId:n},e)}},{key:"disconnect",value:function(t){var e=s.isString(t)?t:t.id;this.deviceIds["delete"](e),this.client.emit("disconnectDevice",{deviceId:e})}},{key:"reconnectDevices",value:function(){var t=this;this.deviceIds.forEach(function(e){return t.connect(e)})}},{key:"startSimulation",value:function(t){var e=s.isString(t)?t:t.id;this.client.emit("startSimulation",{deviceId:e})}},{key:"stopSimulation",value:function(t){var e=s.isString(t)?t:t.id;this.client.emit("stopSimulation",{deviceId:e})}},{key:"sendMessage",value:function(t,e,n){var i=s.isString(t)?t:t.id;s.isObject(n)||(n={value:n}),this.client.emit(e,Object.assign({deviceId:i},n))}}]),n}())}r.$inject=["$q","$rootScope"];var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(348),a=n(504);t.exports=r},function(t,e,n){function i(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i=r(t),o=i.source,l=i.id,u=i.path,h=c[l]&&u in c[l].nsps,f=e.forceNew||e["force new connection"]||!1===e.multiplex||h;return f?(a("ignoring socket cache for %s",o),n=s(o,e)):(c[l]||(a("new io instance for %s",o),c[l]=s(o,e)),n=c[l]),n.socket(i.path)}var r=n(505),o=n(510),s=n(517),a=n(507)("socket.io-client");t.exports=e=i;var c=e.managers={};e.protocol=o.protocol,e.connect=i,e.Manager=n(517),e.Socket=n(545)},function(t,e,n){(function(e){function i(t,n){var i=t,n=n||e.location;null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t="undefined"!=typeof n?n.protocol+"//"+t:"https://"+t),o("parse %s",t),i=r(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var s=i.host.indexOf(":")!==-1,a=s?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+a+":"+i.port,i.href=i.protocol+"://"+a+(n&&n.port==i.port?"":":"+i.port),i}var r=n(506),o=n(507)("socket.io-client:url");t.exports=i}).call(e,function(){return this}())},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,r=t.indexOf("["),o=t.indexOf("]");r!=-1&&o!=-1&&(t=t.substring(0,r)+t.substring(r,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return r!=-1&&o!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var i="color: "+this.color;t=[t[0],i,"color: inherit"].concat(Array.prototype.slice.call(t,1));var r=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))}),t.splice(o,0,i),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function a(){var t;try{t=e.storage.debug}catch(n){}return t}function c(){try{return window.localStorage}catch(t){}}e=t.exports=n(508),e.log=o,e.formatArgs=r,e.save=s,e.load=a,e.useColors=i,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,n){function i(){return e.colors[u++%e.colors.length]}function r(t){function n(){}function r(){var t=r,n=+new Date,o=n-(l||n);t.diff=o,t.prev=l,t.curr=n,l=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=i());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;a++;var r=e.formatters[i];if("function"==typeof r){var o=s[a];n=r.call(t,o),s.splice(a,1),a--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var c=r.log||e.log||console.log.bind(console);c.apply(t,s)}n.enabled=!1,r.enabled=!0;var o=e.enabled(t)?r:n;return o.namespace=t,o}function o(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),i=n.length,r=0;r<i;r++)n[r]&&(t=n[r].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=r,e.coerce=c,e.disable=s,e.enable=o,e.enabled=a,e.humanize=n(509),e.names=[],e.skips=[],e.formatters={};var l,u=0},function(t,e){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(t){return t>=l?Math.round(t/l)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function r(t){return o(t,l,"day")||o(t,c,"hour")||o(t,a,"minute")||o(t,s,"second")||t+" ms"}function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,l=24*c,u=365.25*l;t.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?r(t):i(t)}},function(t,e,n){function i(){}function r(t){var n="",i=!1;return n+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(n+=t.attachments,n+="-"),t.nsp&&"/"!=t.nsp&&(i=!0,n+=t.nsp),null!=t.id&&(i&&(n+=",",i=!1),n+=t.id),null!=t.data&&(i&&(n+=","),n+=h.stringify(t.data)),u("encoded %j as %s",t,n),n}function o(t,e){function n(t){var n=d.deconstructPacket(t),i=r(n.packet),o=n.buffers;o.unshift(i),e(o)}d.removeBlobs(t,n)}function s(){this.reconstructor=null}function a(t){var n={},i=0;if(n.type=Number(t.charAt(0)),null==e.types[n.type])return l();if(e.BINARY_EVENT==n.type||e.BINARY_ACK==n.type){for(var r="";"-"!=t.charAt(++i)&&(r+=t.charAt(i),i!=t.length););if(r!=Number(r)||"-"!=t.charAt(i))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"==t.charAt(i+1))for(n.nsp="";++i;){var o=t.charAt(i);if(","==o)break;if(n.nsp+=o,i==t.length)break}else n.nsp="/";var s=t.charAt(i+1);if(""!==s&&Number(s)==s){for(n.id="";++i;){var o=t.charAt(i);if(null==o||Number(o)!=o){--i;break}if(n.id+=t.charAt(i),i==t.length)break}n.id=Number(n.id)}if(t.charAt(++i))try{n.data=h.parse(t.substr(i))}catch(a){return l()}return u("decoded %s as %j",t,n),n}function c(t){this.reconPack=t,this.buffers=[]}function l(t){return{type:e.ERROR,data:"parser error"}}var u=n(507)("socket.io-parser"),h=n(511),f=(n(513),n(514)),d=n(515),p=n(516);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=i,e.Decoder=s,i.prototype.encode=function(t,n){if(u("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)o(t,n);else{var i=r(t);n([i])}},f(s.prototype),s.prototype.add=function(t){var n;if("string"==typeof t)n=a(t),e.BINARY_EVENT==n.type||e.BINARY_ACK==n.type?(this.reconstructor=new c(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!p(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,this.emit("decoded",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){var i;(function(t,r){(function(){function o(t,e){function n(t){if(n[t]!==m)return n[t];var o;if("bug-string-char-index"==t)o="a"!="a"[0];else if("json"==t)o=n("json-stringify")&&n("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var l=e.stringify,u="function"==typeof l&&w;if(u){(s=function(){return 1}).toJSON=s;try{u="0"===l(0)&&"0"===l(new i)&&'""'==l(new r)&&l(y)===m&&l(m)===m&&l()===m&&"1"===l(s)&&"[1]"==l([s])&&"[null]"==l([m])&&"null"==l(null)&&"[null,null,null]"==l([m,y,null])&&l({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===l(null,s)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==l(new c((-1)))}catch(h){u=!1}}o=u}if("json-parse"==t){var f=e.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){s=f(a);var d=5==s.a.length&&1===s.a[0];if(d){try{d=!f('"\t"')}catch(h){}if(d)try{d=1!==f("01")}catch(h){}if(d)try{d=1!==f("1.")}catch(h){}}}}catch(h){d=!1}o=d}}return n[t]=!!o}t||(t=l.Object()),e||(e=l.Object());var i=t.Number||l.Number,r=t.String||l.String,s=t.Object||l.Object,c=t.Date||l.Date,u=t.SyntaxError||l.SyntaxError,h=t.TypeError||l.TypeError,f=t.Math||l.Math,d=t.JSON||l.JSON;"object"==typeof d&&d&&(e.stringify=d.stringify,e.parse=d.parse);var p,g,m,v=s.prototype,y=v.toString,w=new c((-0xc782b5b800cec));try{w=w.getUTCFullYear()==-109252&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()}catch(b){}if(!n("json")){var x="[object Function]",A="[object Date]",E="[object Number]",_="[object String]",S="[object Array]",C="[object Boolean]",M=n("bug-string-char-index");if(!w)var $=f.floor,F=[0,31,59,90,120,151,181,212,243,273,304,334],T=function(t,e){return F[e]+365*(t-1970)+$((t-1969+(e=+(e>1)))/4)-$((t-1901+e)/100)+$((t-1601+e)/400)};if((p=v.hasOwnProperty)||(p=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?p=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,p=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,p.call(this,t)}),g=function(t,e){var n,i,r,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(r in i)p.call(i,r)&&o++;return n=i=null,o?g=2==o?function(t,e){var n,i={},r=y.call(t)==x;for(n in t)r&&"prototype"==n||p.call(i,n)||!(i[n]=1)||!p.call(t,n)||e(n)}:function(t,e){var n,i,r=y.call(t)==x;for(n in t)r&&"prototype"==n||!p.call(t,n)||(i="constructor"===n)||e(n);(i||p.call(t,n="constructor"))&&e(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(t,e){var n,r,o=y.call(t)==x,s=!o&&"function"!=typeof t.constructor&&a[typeof t.hasOwnProperty]&&t.hasOwnProperty||p;for(n in t)o&&"prototype"==n||!s.call(t,n)||e(n);for(r=i.length;n=i[--r];s.call(t,n)&&e(n));}),g(t,e)},!n("json-stringify")){var L={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},k="000000",R=function(t,e){return(k+(e||0)).slice(-t)},D="\\u00",B=function(t){for(var e='"',n=0,i=t.length,r=!M||i>10,o=r&&(M?t.split(""):t);n<i;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=L[s];break;default:if(s<32){e+=D+R(2,s.toString(16));break}e+=r?o[n]:t.charAt(n)}}return e+'"'},P=function(t,e,n,i,r,o,s){var a,c,l,u,f,d,v,w,b,x,M,F,L,k,D,O;try{a=e[t]}catch(I){}if("object"==typeof a&&a)if(c=y.call(a),c!=A||p.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=E&&c!=_&&c!=S||p.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&a<1/0){if(T){for(f=$(a/864e5),l=$(f/365.2425)+1970-1;T(l+1,0)<=f;l++);for(u=$((f-T(l,0))/30.42);T(l,u+1)<=f;u++);f=1+f-T(l,u),d=(a%864e5+864e5)%864e5,v=$(d/36e5)%24,w=$(d/6e4)%60,b=$(d/1e3)%60,x=d%1e3}else l=a.getUTCFullYear(),u=a.getUTCMonth(),f=a.getUTCDate(),v=a.getUTCHours(),w=a.getUTCMinutes(),b=a.getUTCSeconds(),x=a.getUTCMilliseconds();a=(l<=0||l>=1e4?(l<0?"-":"+")+R(6,l<0?-l:l):R(4,l))+"-"+R(2,u+1)+"-"+R(2,f)+"T"+R(2,v)+":"+R(2,w)+":"+R(2,b)+"."+R(3,x)+"Z"}else a=null;if(n&&(a=n.call(e,t,a)),null===a)return"null";if(c=y.call(a),c==C)return""+a;if(c==E)return a>-1/0&&a<1/0?""+a:"null";if(c==_)return B(""+a);if("object"==typeof a){for(k=s.length;k--;)if(s[k]===a)throw h();if(s.push(a),M=[],D=o,o+=r,c==S){for(L=0,k=a.length;L<k;L++)F=P(L,a,n,i,r,o,s),M.push(F===m?"null":F);O=M.length?r?"[\n"+o+M.join(",\n"+o)+"\n"+D+"]":"["+M.join(",")+"]":"[]"}else g(i||a,function(t){var e=P(t,a,n,i,r,o,s);e!==m&&M.push(B(t)+":"+(r?" ":"")+e)}),O=M.length?r?"{\n"+o+M.join(",\n"+o)+"\n"+D+"}":"{"+M.join(",")+"}":"{}";return s.pop(),O}};e.stringify=function(t,e,n){var i,r,o,s;if(a[typeof e]&&e)if((s=y.call(e))==x)r=e;else if(s==S){o={};for(var c,l=0,u=e.length;l<u;c=e[l++],s=y.call(c),(s==_||s==E)&&(o[c]=1));}if(n)if((s=y.call(n))==E){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else s==_&&(i=n.length<=10?n:n.slice(0,10));return P("",(c={},c[""]=t,c),r,o,i,"",[])}}if(!n("json-parse")){var O,I,N=r.fromCharCode,U={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},j=function(){throw O=I=null,u()},z=function(){for(var t,e,n,i,r,o=I,s=o.length;O<s;)switch(r=o.charCodeAt(O)){case 9:case 10:case 13:case 32:O++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=M?o.charAt(O):o[O],O++,t;case 34:for(t="@",O++;O<s;)if(r=o.charCodeAt(O),r<32)j();else if(92==r)switch(r=o.charCodeAt(++O)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=U[r],O++;break;case 117:for(e=++O,n=O+4;O<n;O++)r=o.charCodeAt(O),
r>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||j();t+=N("0x"+o.slice(e,O));break;default:j()}else{if(34==r)break;for(r=o.charCodeAt(O),e=O;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++O);t+=o.slice(e,O)}if(34==o.charCodeAt(O))return O++,t;j();default:if(e=O,45==r&&(i=!0,r=o.charCodeAt(++O)),r>=48&&r<=57){for(48==r&&(r=o.charCodeAt(O+1),r>=48&&r<=57)&&j(),i=!1;O<s&&(r=o.charCodeAt(O),r>=48&&r<=57);O++);if(46==o.charCodeAt(O)){for(n=++O;n<s&&(r=o.charCodeAt(n),r>=48&&r<=57);n++);n==O&&j(),O=n}if(r=o.charCodeAt(O),101==r||69==r){for(r=o.charCodeAt(++O),43!=r&&45!=r||O++,n=O;n<s&&(r=o.charCodeAt(n),r>=48&&r<=57);n++);n==O&&j(),O=n}return+o.slice(e,O)}if(i&&j(),"true"==o.slice(O,O+4))return O+=4,!0;if("false"==o.slice(O,O+5))return O+=5,!1;if("null"==o.slice(O,O+4))return O+=4,null;j()}return"$"},H=function(t){var e,n;if("$"==t&&j(),"string"==typeof t){if("@"==(M?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=z(),"]"!=t;n||(n=!0))n&&(","==t?(t=z(),"]"==t&&j()):j()),","==t&&j(),e.push(H(t));return e}if("{"==t){for(e={};t=z(),"}"!=t;n||(n=!0))n&&(","==t?(t=z(),"}"==t&&j()):j()),","!=t&&"string"==typeof t&&"@"==(M?t.charAt(0):t[0])&&":"==z()||j(),e[t.slice(1)]=H(z());return e}j()}return t},W=function(t,e,n){var i=V(t,e,n);i===m?delete t[e]:t[e]=i},V=function(t,e,n){var i,r=t[e];if("object"==typeof r&&r)if(y.call(r)==S)for(i=r.length;i--;)W(r,i,n);else g(r,function(t){W(r,t,n)});return n.call(t,e,r)};e.parse=function(t,e){var n,i;return O=0,I=""+t,n=H(z()),"$"!=z()&&j(),O=I=null,e&&y.call(e)==x?V((i={},i[""]=n,i),"",e):n}}}return e.runInContext=o,e}var s=n(512),a={"function":!0,object:!0},c=a[typeof e]&&e&&!e.nodeType&&e,l=a[typeof window]&&window||this,u=c&&a[typeof t]&&t&&!t.nodeType&&"object"==typeof r&&r;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(l=u),c&&!s)o(l,c);else{var h=l.JSON,f=l.JSON3,d=!1,p=o(l,l.JSON3={noConflict:function(){return d||(d=!0,l.JSON=h,l.JSON3=f,h=f=null),p}});l.JSON={parse:p.parse,stringify:p.stringify}}s&&(i=function(){return p}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}).call(this)}).call(e,n(349)(t),function(){return this}())},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function n(t){if(t)return i(t)}function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(t){var i=n(513),r=n(516);e.deconstructPacket=function(t){function e(t){if(!t)return t;if(r(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(i(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var c in t)s[c]=e(t[c]);return s}return t}var n=[],o=t.data,s=t;return s.data=e(o),s.attachments=n.length,{packet:s,buffers:n}},e.reconstructPacket=function(t,e){function n(t){if(t&&t._placeholder){var r=e[t.num];return r}if(i(t)){for(var o=0;o<t.length;o++)t[o]=n(t[o]);return t}if(t&&"object"==typeof t){for(var s in t)t[s]=n(t[s]);return t}return t}return t.data=n(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,n){function o(e,c,l){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var u=new FileReader;u.onload=function(){l?l[c]=this.result:a=this.result,--s||n(a)},u.readAsArrayBuffer(e)}else if(i(e))for(var h=0;h<e.length;h++)o(e[h],h,e);else if(e&&"object"==typeof e&&!r(e))for(var f in e)o(e[f],f,e)}var s=0,a=e;o(a),s||n(a)}}).call(e,function(){return this}())},function(t,e){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(e,function(){return this}())},function(t,e,n){function i(t,e){return this instanceof i?(t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new i(t,e)}var r=n(518),o=n(545),s=n(546),a=n(510),c=n(548),l=n(549),u=n(507)("socket.io-client:manager"),h=n(543),f=n(552),d=Object.prototype.hasOwnProperty;t.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},i.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},s(i.prototype),i.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},i.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},i.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=c(e,"open",function(){n.onopen(),t&&t()}),o=c(e,"error",function(e){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var i=new Error("Connection error");i.data=e,t(i)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;u("connect attempt will timeout after %d",s);var a=setTimeout(function(){u("connect attempt timed out after %d",s),i.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},i.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(c(t,"data",l(this,"ondata"))),this.subs.push(c(t,"ping",l(this,"onping"))),this.subs.push(c(t,"pong",l(this,"onpong"))),this.subs.push(c(t,"error",l(this,"onerror"))),this.subs.push(c(t,"close",l(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",l(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(t){this.decoder.add(t)},i.prototype.ondecoded=function(t){this.emit("packet",t)},i.prototype.onerror=function(t){u("error",t),this.emitAll("error",t)},i.prototype.socket=function(t){function e(){~h(i.connecting,n)||i.connecting.push(n)}var n=this.nsps[t];if(!n){n=new o(this,t),this.nsps[t]=n;var i=this;n.on("connecting",e),n.on("connect",function(){n.id=i.engine.id}),this.autoConnect&&e()}return n},i.prototype.destroy=function(t){var e=h(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},i.prototype.packet=function(t){u("writing packet %j",t);var e=this;e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var i=0;i<n.length;i++)e.engine.write(n[i],t.options);e.encoding=!1,e.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},i.prototype.cleanup=function(){u("cleanup");for(var t;t=this.subs.shift();)t.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(t){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();u("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(u("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(u("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(u("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){t.exports=n(519)},function(t,e,n){t.exports=n(520),t.exports.parser=n(527)},function(t,e,n){(function(e){function i(t,n){if(!(this instanceof i))return new i(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure="https"==t.protocol||"wss"==t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"==location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized;var r="object"==typeof e&&e;r.global===r&&n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),this.open()}function r(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var o=n(521),s=n(536),a=n(507)("engine.io-client:socket"),c=n(543),l=n(527),u=n(506),h=n(544),f=n(537);t.exports=i,i.priorWebsocketSuccess=!1,s(i.prototype),i.protocol=l.protocol,i.Socket=i,i.Transport=n(526),i.transports=n(521),i.parser=n(527),i.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=r(this.query);e.EIO=l.protocol,e.transport=t,this.id&&(e.sid=this.id);var n=new o[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return n},i.prototype.open=function(){var t;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},i.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},i.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;h=h||e}h||(a('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(e){if(!h)if("pong"==e.type&&"probe"==e.data){if(a('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",u),!u)return;i.priorWebsocketSuccess="websocket"==u.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){h||"closed"!=f.readyState&&(a("changing transport and sending upgrade packet"),l(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=u.name,f.emit("upgradeError",n)}}))}function n(){h||(h=!0,l(),u.close(),u=null)}function r(e){var i=new Error("probe error: "+e);i.transport=u.name,n(),a('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",i)}function o(){r("transport closed")}function s(){r("socket closed")}function c(t){u&&t.name!=u.name&&(a('"%s" works - aborting "%s"',t.name,u.name),n())}function l(){u.removeListener("open",e),u.removeListener("error",r),u.removeListener("close",o),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),h=!1,f=this;i.priorWebsocketSuccess=!1,u.once("open",e),u.once("error",r),u.once("close",o),this.once("close",s),this.once("upgrading",c),u.open()},i.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},i.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(h(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},i.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},i.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},i.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},i.prototype.sendPacket=function(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){n=n||{},n.compress=!1!==n.compress;var r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},i.prototype.close=function(){function t(){i.onClose("forced close"),a("socket closing - telling transport to close"),i.transport.close()}function e(){i.removeListener("upgrade",e),i.removeListener("upgradeError",e),t()}function n(){i.once("upgrade",e),i.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},i.prototype.onError=function(t){a("socket error %j",t),i.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},i.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}},i.prototype.filterUpgrades=function(t){for(var e=[],n=0,i=t.length;n<i;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t){function i(e){var n,i=!1,a=!1,c=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,u=location.port;u||(u=l?443:80),i=e.hostname!=location.hostname||u!=e.port,a=e.secure!=l}if(e.xdomain=i,e.xscheme=a,n=new r(e),"open"in n&&!e.forceJSONP)return new o(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var r=n(522),o=n(524),s=n(540),a=n(541);e.polling=i,e.websocket=a}).call(e,function(){return this}())},function(t,e,n){var i=n(523);t.exports=function(t){var e=t.xdomain,n=t.xscheme,r=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},function(t,e,n){(function(e){function i(){}function r(t){if(c.call(this,t),e.location){var n="https:"==location.protocol,i=location.port;i||(i=n?443:80),this.xd=t.hostname!=e.location.hostname||i!=t.port,this.xs=t.secure!=n}else this.extraHeaders=t.extraHeaders}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var a=n(522),c=n(525),l=n(536),u=n(538),h=n(507)("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=o,u(r,c),r.prototype.supportsBinary=!0,r.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.extraHeaders=this.extraHeaders,new o(t)},r.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,i=this.request({method:"POST",data:t,isBinary:n}),r=this;i.on("success",e),i.on("error",function(t){r.onError("xhr post error",t)}),this.sendXhr=i},r.prototype.doPoll=function(){h("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},l(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),i=this;try{h("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.extraHeaders[r])}}catch(s){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}"withCredentials"in n&&(n.withCredentials=!0),this.hasXDR()?(n.onload=function(){i.onLoad()},n.onerror=function(){i.onError(n.responseText)}):n.onreadystatechange=function(){4==n.readyState&&(200==n.status||1223==n.status?i.onLoad():setTimeout(function(){i.onError(n.status)},0))},h("xhr data %s",this.data),n.send(this.data)}catch(s){return void setTimeout(function(){i.onError(s)},0)}e.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,t)try{this.xhr.abort()}catch(n){}e.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}if("application/octet-stream"===e)t=this.xhr.response;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(n){for(var i=new Uint8Array(this.xhr.response),r=[],o=0,s=i.length;o<s;o++)r.push(i[o]);t=String.fromCharCode.apply(null,r)}else t=this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},e.document&&(o.requestsCount=0,o.requests={},e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,n){function i(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),r.call(this,t)}var r=n(526),o=n(537),s=n(527),a=n(538),c=n(539),l=n(507)("engine.io-client:polling");t.exports=i;var u=function(){var t=n(522),e=new t({xdomain:!1});return null!=e.responseType}();a(i,r),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(t){function e(){l("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||e()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||e()}))}else e()},i.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(t){var e=this;l("polling got data %s",t);var n=function(t,n,i){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function t(){l("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))},i.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")},e=this;s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},i.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(n=":"+this.port),t.length&&(t="?"+t);var i=this.hostname.indexOf(":")!==-1;return e+"://"+(i?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){function i(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders}var r=n(527),o=n(536);t.exports=i,o(i.prototype),i.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},i.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},i.prototype.onPacket=function(t){this.emit("packet",t)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){(function(t){function i(t,n){var i="b"+e.packets[t.type]+t.data.data;return n(i)}function r(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=t.data,o=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=v[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}function o(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=new FileReader;return r.onload=function(){t.data=r.result,e.encodePacket(t,n,!0,i)},r.readAsArrayBuffer(t.data)}function s(t,n,i){if(!n)return e.encodeBase64Packet(t,i);if(m)return o(t,n,i);var r=new Uint8Array(1);r[0]=v[t.type];var s=new b([r.buffer,t.data]);return i(s)}function a(t,e,n){for(var i=new Array(t.length),r=f(t.length,n),o=function(t,n,r){e(n,function(e,n){i[t]=n,r(e,i)})},s=0;s<t.length;s++)o(s,t[s],r)}var c=n(528),l=n(529),u=n(531),h=n(532),f=n(533),d=n(534),p=navigator.userAgent.match(/Android/i),g=/PhantomJS/i.test(navigator.userAgent),m=p||g;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=c(v),w={type:"error",data:"parser error"},b=n(535);e.encodePacket=function(e,n,o,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof o&&(a=o,o=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return r(e,n,a);if(b&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return i(e,a);var l=v[e.type];return void 0!==e.data&&(l+=o?d.encode(String(e.data)):String(e.data)),a(""+l)},e.encodeBase64Packet=function(n,i){var r="b"+e.packets[n.type];if(b&&n.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];i(r+t)},o.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(a){for(var c=new Uint8Array(n.data),l=new Array(c.length),u=0;u<c.length;u++)l[u]=c[u];s=String.fromCharCode.apply(null,l)}return r+=t.btoa(s),i(r)},e.decodePacket=function(t,n,i){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(i)try{t=d.decode(t)}catch(r){return w}var o=t.charAt(0);return Number(o)==o&&y[o]?t.length>1?{type:y[o],data:t.substring(1)}:{type:y[o]}:w}var s=new Uint8Array(t),o=s[0],a=u(t,1);return b&&"blob"===n&&(a=new b([a])),{type:y[o],data:a}},e.decodeBase64Packet=function(e,n){var i=y[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var r=h.decode(e.substr(1));return"blob"===n&&b&&(r=new b([r])),{type:i,data:r}},e.encodePayload=function(t,n,i){function r(t){return t.length+":"+t}function o(t,i){e.encodePacket(t,!!s&&n,!0,function(t){i(null,r(t))})}"function"==typeof n&&(i=n,n=null);var s=l(t);return n&&s?b&&!m?e.encodePayloadAsBlob(t,i):e.encodePayloadAsArrayBuffer(t,i):t.length?void a(t,o,function(t,e){return i(e.join(""))}):i("0:")},e.decodePayload=function(t,n,i){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,i);"function"==typeof n&&(i=n,n=null);var r;if(""==t)return i(w,0,1);for(var o,s,a="",c=0,l=t.length;c<l;c++){var u=t.charAt(c);if(":"!=u)a+=u;else{if(""==a||a!=(o=Number(a)))return i(w,0,1);if(s=t.substr(c+1,o),a!=s.length)return i(w,0,1);if(s.length){if(r=e.decodePacket(s,n,!0),w.type==r.type&&w.data==r.data)return i(w,0,1);var h=i(r,c+o,l);if(!1===h)return}c+=o,a=""}}return""!=a?i(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){function i(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})}return t.length?void a(t,i,function(t,e){
var i=e.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),r=new Uint8Array(i),o=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var i=new Uint8Array(t.length),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);n=i.buffer}e?r[o++]=0:r[o++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)r[o++]=parseInt(a[s]);r[o++]=255;for(var i=new Uint8Array(n),s=0;s<i.length;s++)r[o++]=i[s]}),n(r.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){function i(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);t=i.buffer,e[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,s=o.toString(),a=new Uint8Array(s.length+1),r=0;r<s.length;r++)a[r]=parseInt(s[r]);if(a[s.length]=255,b){var c=new b([e.buffer,a.buffer,t]);n(null,c)}})}a(t,i,function(t,e){return n(new b(e))})},e.decodePayloadAsBinary=function(t,n,i){"function"==typeof n&&(i=n,n=null);for(var r=t,o=[],s=!1;r.byteLength>0;){for(var a=new Uint8Array(r),c=0===a[0],l="",h=1;255!=a[h];h++){if(l.length>310){s=!0;break}l+=a[h]}if(s)return i(w,0,1);r=u(r,2+l.length),l=parseInt(l);var f=u(r,0,l);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(d){var p=new Uint8Array(f);f="";for(var h=0;h<p.length;h++)f+=String.fromCharCode(p[h])}o.push(f),r=u(r,l)}var g=o.length;o.forEach(function(t,r){i(e.decodePacket(t,n,!0),r,g)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var i in t)n.call(t,i)&&e.push(i);return e}},function(t,e,n){(function(e){function i(t){function n(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(r(t)){for(var i=0;i<t.length;i++)if(n(t[i]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&n(t[o]))return!0}return!1}return n(t)}var r=n(530);t.exports=i}).call(e,function(){return this}())},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t,e,n){var i=t.byteLength;if(e=e||0,n=n||i,t.slice)return t.slice(e,n);if(e<0&&(e+=i),n<0&&(n+=i),n>i&&(n=i),e>=i||e>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=r[s];return o.buffer}},function(t,e){!function(t){"use strict";e.encode=function(e){var n,i=new Uint8Array(e),r=i.length,o="";for(n=0;n<r;n+=3)o+=t[i[n]>>2],o+=t[(3&i[n])<<4|i[n+1]>>4],o+=t[(15&i[n+1])<<2|i[n+2]>>6],o+=t[63&i[n+2]];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(e){var n,i,r,o,s,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(n=0;n<c;n+=4)i=t.indexOf(e[n]),r=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),s=t.indexOf(e[n+3]),h[l++]=i<<2|r>>4,h[l++]=(15&r)<<4|o>>2,h[l++]=(3&o)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(t,e){function n(t,e,n){function r(t,i){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(o=!0,e(t),e=n):0!==r.count||o||e(null,i)}var o=!1;return n=n||i,r.count=t,0===t?e():r}function i(){}t.exports=n},function(t,e,n){var i;(function(t,r){!function(o){function s(t){for(var e,n,i=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(n=t.charCodeAt(r++),56320==(64512&n)?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--)):i.push(e);return i}function a(t){for(var e,n=t.length,i=-1,r="";++i<n;)e=t[i],e>65535&&(e-=65536,r+=b(e>>>10&1023|55296),e=56320|1023&e),r+=b(e);return r}function c(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function l(t,e){return b(t>>e&63|128)}function u(t){if(0==(4294967168&t))return b(t);var e="";return 0==(4294965248&t)?e=b(t>>6&31|192):0==(4294901760&t)?(c(t),e=b(t>>12&15|224),e+=l(t,6)):0==(4292870144&t)&&(e=b(t>>18&7|240),e+=l(t,12),e+=l(t,6)),e+=b(63&t|128)}function h(t){for(var e,n=s(t),i=n.length,r=-1,o="";++r<i;)e=n[r],o+=u(e);return o}function f(){if(w>=y)throw Error("Invalid byte index");var t=255&v[w];if(w++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function d(){var t,e,n,i,r;if(w>y)throw Error("Invalid byte index");if(w==y)return!1;if(t=255&v[w],w++,0==(128&t))return t;if(192==(224&t)){var e=f();if(r=(31&t)<<6|e,r>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=f(),n=f(),r=(15&t)<<12|e<<6|n,r>=2048)return c(r),r;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=f(),n=f(),i=f(),r=(15&t)<<18|e<<12|n<<6|i,r>=65536&&r<=1114111))return r;throw Error("Invalid UTF-8 detected")}function p(t){v=s(t),y=v.length,w=0;for(var e,n=[];(e=d())!==!1;)n.push(e);return a(n)}var g="object"==typeof e&&e,m=("object"==typeof t&&t&&t.exports==g&&t,"object"==typeof r&&r);m.global!==m&&m.window!==m||(o=m);var v,y,w,b=String.fromCharCode,x={version:"2.0.0",encode:h,decode:p};i=function(){return x}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this)}).call(e,n(349)(t),function(){return this}())},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var i=n.buffer;if(n.byteLength!==i.byteLength){var r=new Uint8Array(n.byteLength);r.set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=r.buffer}t[e]=i}}}function i(t,e){e=e||{};var i=new o;n(t);for(var r=0;r<t.length;r++)i.append(t[r]);return e.type?i.getBlob(e.type):i.getBlob()}function r(t,e){return n(t),new Blob(t,e||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(e){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),c=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return s?a?e.Blob:r:c?i:void 0}()}).call(e,function(){return this}())},function(t,e){function n(t){if(t)return i(t)}function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){"use strict";function n(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function i(t){var e=0;for(u=0;u<t.length;u++)e=e*a+c[t.charAt(u)];return e}function r(){var t=n(+new Date);return t!==o?(l=0,o=t):t+"."+n(l++)}for(var o,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},l=0,u=0;u<a;u++)c[s[u]]=u;r.encode=n,r.decode=i,t.exports=r},function(t,e,n){(function(e){function i(){}function r(t){o.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=i)},!1)}var o=n(525),s=n(538);t.exports=r;var a,c=/\n/g,l=/\\n/g;s(r,o),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},r.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},r.prototype.doWrite=function(t,e){function n(){i(),e()}function i(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';o=document.createElement(e)}catch(t){o=document.createElement("iframe"),o.name=r.iframeId,o.src="javascript:0"}o.id=r.iframeId,r.form.appendChild(o),r.iframe=o}var r=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),i(),t=t.replace(l,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function i(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,r.call(this,t)}var r=n(526),o=n(527),s=n(537),a=n(538),c=n(539),l=n(507)("engine.io-client:websocket"),u=e.WebSocket||e.MozWebSocket,h=u;if(!h&&"undefined"==typeof window)try{h=n(542)}catch(f){}t.exports=i,a(i,r),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.ws=u?new h(t):new h(t,e,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(t){var e=this;setTimeout(function(){r.prototype.onData.call(e,t)},0)}),i.prototype.write=function(t){function n(){i.emit("flush"),setTimeout(function(){i.writable=!0,i.emit("drain")},0)}var i=this;this.writable=!1;for(var r=t.length,s=0,a=r;s<a;s++)!function(t){o.encodePacket(t,i.supportsBinary,function(o){if(!u){var s={};if(t.options&&(s.compress=t.options.compress),i.perMessageDeflate){var a="string"==typeof o?e.Buffer.byteLength(o):o.length;a<i.perMessageDeflate.threshold&&(s.compress=!1)}}try{u?i.ws.send(o):i.ws.send(o,s)}catch(c){l("websocket closed before onclose event")}--r||n()})}(t[s])},i.prototype.onClose=function(){r.prototype.onClose.call(this)},i.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},i.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),t=s.encode(t),t.length&&(t="?"+t);var i=this.hostname.indexOf(":")!==-1;return e+"://"+(i?"["+this.hostname+"]":this.hostname)+n+this.path+t},i.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===i.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},function(t,e){(function(e){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(i,"@").replace(r,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,n){function i(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var r=n(510),o=n(546),s=n(547),a=n(548),c=n(549),l=n(507)("socket.io-client:socket"),u=n(550);t.exports=e=i;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;o(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},i.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},i.prototype.emit=function(t){if(h.hasOwnProperty(t))return f.apply(this,arguments),this;var e=s(arguments),n=r.EVENT;u(e)&&(n=r.BINARY_EVENT);var i={type:n,data:e};return i.options={},i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},i.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},i.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},i.prototype.onclose=function(t){l("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},i.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(t);break;case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:this.onack(t);break;case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},i.prototype.onevent=function(t){var e=t.data||[];l("emitting event %j",e),null!=t.id&&(l("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},i.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var i=s(arguments);l("sending ack %j",i);var o=u(i)?r.BINARY_ACK:r.ACK;e.packet({type:o,id:t,data:i})}}},i.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(l("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):l("bad ack %s",t.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function n(t){if(t)return i(t)}function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){function n(t,e){var n=[];e=e||0;for(var i=e||0;i<t.length;i++)n[i-e]=t[i];return n}t.exports=n},function(t,e){function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}t.exports=n},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}},function(t,e,n){(function(e){function i(t){function n(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(r(t)){for(var i=0;i<t.length;i++)if(n(t[i]))return!0}else if(t&&"object"==typeof t){t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&n(t[o]))return!0}return!1}return n(t)}var r=n(551);t.exports=i}).call(e,function(){return this}())},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},function(t,e,n){"use strict";var i=n(554);t.exports=i.name},function(t,e,n){"use strict";var i=n(555),r=angular.module("simulator.common.services.timeseries",[]).factory("timeseriesService",i);t.exports=r},function(t,e){"use strict";function n(t,e,n){return{getV4:function(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e({method:"GET",url:"https://"+n.account.timeSeriesHost+"/api/v4/"+t,params:i,headers:{Accept:"application/json"}})}}}n.$inject=["$log","$http","CONFIG"],t.exports=n},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n,r,a,c,l,u,h){var f=Symbol("unsubscribeCallback");return new(function(){function e(){i(this,e),this.devices={}}return o(e,[{key:"addDevice",value:function(t){return this.devices[t.id]||(t.ok=!0,t.sensors={},t.channels=t.channels.filter(function(t){return!(h.general.hiddenChannels||[]).includes(t.channelTemplateName)}),t.channels.forEach(function(e){var n=e.channel.split("/").pop();t.sensors[n]={numericValue:"-",stringValue:"-",type:e.persistenceType}}),t.update=function(e,n){l.sendMessage(t.id,"update",{name:e,value:n})},t.subscribe=this.subscribeDevice.bind(this,t),this.devices[t.id]=t),this.devices[t.id]}},{key:"subscribeDevice",value:function(t){var e=function(e){t.ok=!0,s.assign(t.sensors,e)},n=[];return t.channels.forEach(function(t){var i=r.subscribe(t.channel,e);n.push(i)}),t[f]=function(){return n.forEach(function(t){return t()})},t[f]}},{key:"unsubscribeDevice",value:function(t){s.isObject(t)||(t=this.devices[t]),t[f]&&t[f]()}},{key:"getDevice",value:function(t){var e=this;return this.devices[t]?n.resolve(this.devices[t]):a.getV1("devices/"+t).then(function(t){return t.data.device}).then(function(t){return e.addDevice(t,!0)})}},{key:"getDevices",value:function(){var t=this;return a.getV1("devices",{pageSize:100}).then(function(t){return t.data.devices.results}).then(function(e){return e.forEach(function(e){return t.addDevice(e)}),t.devices})}},{key:"deleteDevice",value:function(t){this.unsubscribeDevice(t),delete this.devices[t.id||t]}},{key:"getTimeSeries",value:function(e){var i=arguments.length<=1||void 0===arguments[1]?100:arguments[1];if(s.isString(e)){var r=e;return c.getV4("data/"+r+"/latest",{pageSize:i}).then(function(e){if(200!==e.status)throw t.error("TimeSeries response:",e),new Error(e.statusText);return e.data.result.reverse()})}var o=e,a=o.channels.filter(function(t){return"timeSeries"===t.persistenceType}).map(function(t){return c.getV4("data/"+t.channel,{pageSize:i})});return n.all(a).then(function(t){return t.filter(function(t){return 404!==t.status})}).then(function(t){return t.map(function(t){return t.data.result.reverse()})})}}]),e}())}r.$inject=["$log","$http","$q","mqttService","blueprintService","timeseriesService","socketService","CONFIG","DEVICES_CONFIG"];var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(348);t.exports=r},function(t,e,n){"use strict";var i=n(558);t.exports=i.name},function(t,e,n){"use strict";var i=n(559),r=angular.module("simulator.common.services.sms",[]).factory("smsService",i);t.exports=r},function(t,e){"use strict";function n(t,e){return{send:function(n,i){return t({url:e.smsService.url,method:"POST",data:{phone:n,message:i}})}}}n.$inject=["$http","CONFIG"],t.exports=n},function(t,e){/**
	 * State-based routing for AngularJS
	 * @version v0.2.18
	 * @link http://angular-ui.github.com/
	 * @license MIT License, http://www.opensource.org/licenses/MIT
	 */
"undefined"!=typeof t&&"undefined"!=typeof e&&t.exports===e&&(t.exports="ui.router"),function(t,e,n){"use strict";function i(t,e){return H(new(H(function(){},{prototype:t})),e)}function r(t){return z(arguments,function(e){e!==t&&z(e,function(e,n){t.hasOwnProperty(n)||(t[n]=e)})}),t}function o(t,e){var n=[];for(var i in t.path){if(t.path[i]!==e.path[i])break;n.push(t.path[i])}return n}function s(t){if(Object.keys)return Object.keys(t);var e=[];return z(t,function(t,n){e.push(n)}),e}function a(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var n=t.length>>>0,i=Number(arguments[2])||0;for(i=i<0?Math.ceil(i):Math.floor(i),i<0&&(i+=n);i<n;i++)if(i in t&&t[i]===e)return i;return-1}function c(t,e,n,i){var r,c=o(n,i),l={},u=[];for(var h in c)if(c[h]&&c[h].params&&(r=s(c[h].params),r.length))for(var f in r)a(u,r[f])>=0||(u.push(r[f]),l[r[f]]=t[r[f]]);return H({},l,e)}function l(t,e,n){if(!n){n=[];for(var i in t)n.push(i)}for(var r=0;r<n.length;r++){var o=n[r];if(t[o]!=e[o])return!1}return!0}function u(t,e){var n={};return z(t,function(t){n[t]=e[t]}),n}function h(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return z(n,function(n){n in t&&(e[n]=t[n])}),e}function f(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var i in t)a(n,i)==-1&&(e[i]=t[i]);return e}function d(t,e){var n=j(t),i=n?[]:{};return z(t,function(t,r){e(t,r)&&(i[n?i.length:r]=t)}),i}function p(t,e){var n=j(t)?[]:{};return z(t,function(t,i){n[i]=e(t,i)}),n}function g(t,e){var i=1,o=2,c={},l=[],u=c,h=H(t.when(c),{$$promises:c,$$values:c});this.study=function(c){function d(t,n){if(y[n]!==o){if(v.push(n),y[n]===i)throw v.splice(0,a(v,n)),new Error("Cyclic dependency: "+v.join(" -> "));if(y[n]=i,N(t))m.push(n,[function(){return e.get(t)}],l);else{var r=e.annotate(t);z(r,function(t){t!==n&&c.hasOwnProperty(t)&&d(c[t],t)}),m.push(n,t,r)}v.pop(),y[n]=o}}function p(t){return U(t)&&t.then&&t.$$promises}if(!U(c))throw new Error("'invocables' must be an object");var g=s(c||{}),m=[],v=[],y={};return z(c,d),c=v=y=null,function(i,o,s){function a(){--b||(x||r(w,o.$$values),v.$$values=w,v.$$promises=v.$$promises||!0,delete v.$$inheritedValues,d.resolve(w))}function c(t){v.$$failure=t,d.reject(t)}function l(n,r,o){function l(t){h.reject(t),c(t)}function u(){if(!O(v.$$failure))try{h.resolve(e.invoke(r,s,w)),h.promise.then(function(t){w[n]=t,a()},l)}catch(t){l(t)}}var h=t.defer(),f=0;z(o,function(t){y.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(f++,y[t].then(function(e){w[t]=e,--f||u()},l))}),f||u(),y[n]=h.promise}if(p(i)&&s===n&&(s=o,o=i,i=null),i){if(!U(i))throw new Error("'locals' must be an object")}else i=u;if(o){if(!p(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=h;var d=t.defer(),v=d.promise,y=v.$$promises={},w=H({},i),b=1+m.length/3,x=!1;if(O(o.$$failure))return c(o.$$failure),v;o.$$inheritedValues&&r(w,f(o.$$inheritedValues,g)),H(y,o.$$promises),o.$$values?(x=r(w,f(o.$$values,g)),v.$$inheritedValues=f(o.$$values,g),a()):(o.$$inheritedValues&&(v.$$inheritedValues=f(o.$$inheritedValues,g)),o.then(a,c));for(var A=0,E=m.length;A<E;A+=3)i.hasOwnProperty(m[A])?a():l(m[A],m[A+1],m[A+2]);return v}},this.resolve=function(t,e,n,i){return this.study(t)(e,n,i)}}function m(t,e,n){this.fromConfig=function(t,e,n){return O(t.template)?this.fromString(t.template,e):O(t.templateUrl)?this.fromUrl(t.templateUrl,e):O(t.templateProvider)?this.fromProvider(t.templateProvider,e,n):null},this.fromString=function(t,e){return I(t)?t(e):t},this.fromUrl=function(n,i){return I(n)&&(n=n(i)),null==n?null:t.get(n,{cache:e,headers:{Accept:"text/html"}}).then(function(t){return t.data})},this.fromProvider=function(t,e,i){return n.invoke(t,null,i||{params:e})}}function v(t,e,r){function o(e,n,i,r){if(m.push(e),p[e])return p[e];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(g[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");return g[e]=new G.Param(e,n,i,r),g[e]}function s(t,e,n,i){var r=["",""],o=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return o;switch(n){case!1:r=["(",")"+(i?"?":"")];break;case!0:o=o.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+n+"|",")?"]}return o+r[0]+e+r[1]}function a(r,o){var s,a,c,l,u;return s=r[2]||r[3],u=e.params[s],c=t.substring(f,r.index),a=o?r[4]:r[4]||("*"==r[1]?".*":null),a&&(l=G.type(a)||i(G.type("string"),{pattern:new RegExp(a,e.caseInsensitive?"i":n)})),{id:s,regexp:a,segment:c,type:l,cfg:u}}e=H({params:{}},U(e)?e:{});var c,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h="^",f=0,d=this.segments=[],p=r?r.params:{},g=this.params=r?r.params.$$new():new G.ParamSet,m=[];this.source=t;for(var v,y,w;(c=l.exec(t))&&(v=a(c,!1),!(v.segment.indexOf("?")>=0));)y=o(v.id,v.type,v.cfg,"path"),h+=s(v.segment,y.type.pattern.source,y.squash,y.isOptional),d.push(v.segment),f=l.lastIndex;w=t.substring(f);var b=w.indexOf("?");if(b>=0){var x=this.sourceSearch=w.substring(b);if(w=w.substring(0,b),this.sourcePath=t.substring(0,f+b),x.length>0)for(f=0;c=u.exec(x);)v=a(c,!0),y=o(v.id,v.type,v.cfg,"search"),f=l.lastIndex}else this.sourcePath=t,this.sourceSearch="";h+=s(w)+(e.strict===!1?"/?":"")+"$",d.push(w),this.regexp=new RegExp(h,e.caseInsensitive?"i":n),this.prefix=d[0],this.$$paramNames=m}function y(t){H(this,t)}function w(){function t(t){return null!=t?t.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):t}function r(t){return null!=t?t.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):t}function o(){return{strict:g,caseInsensitive:f}}function c(t){return I(t)||j(t)&&I(t[t.length-1])}function l(){for(;A.length;){var t=A.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");e.extend(b[t.name],h.invoke(t.def))}}function u(t){H(this,t||{})}G=this;var h,f=!1,g=!0,m=!1,b={},x=!0,A=[],E={string:{encode:t,decode:r,is:function(t){return null==t||!O(t)||"string"==typeof t},pattern:/[^\/]*/},"int":{encode:t,decode:function(t){return parseInt(t,10)},is:function(t){return O(t)&&this.decode(t.toString())===t},pattern:/\d+/},bool:{encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:function(t){return t===!0||t===!1},pattern:/0|1/},date:{encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):n},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):n},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return this.is(t)&&this.is(e)&&t.toISOString()===e.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:e.toJson,decode:e.fromJson,is:e.isObject,equals:e.equals,pattern:/[^\/]*/},any:{encode:e.identity,decode:e.identity,equals:e.equals,pattern:/.*/}};w.$$getDefaultValue=function(t){if(!c(t.value))return t.value;if(!h)throw new Error("Injectable functions cannot be called at configuration time");return h.invoke(t.value)},this.caseInsensitive=function(t){return O(t)&&(f=t),f},this.strictMode=function(t){return O(t)&&(g=t),g},this.defaultSquashPolicy=function(t){if(!O(t))return m;if(t!==!0&&t!==!1&&!N(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return m=t,t},this.compile=function(t,e){return new v(t,H(o(),e))},this.isMatcher=function(t){if(!U(t))return!1;var e=!0;return z(v.prototype,function(n,i){I(n)&&(e=e&&O(t[i])&&I(t[i]))}),e},this.type=function(t,e,n){if(!O(e))return b[t];if(b.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return b[t]=new y(H({name:t},e)),n&&(A.push({name:t,def:n}),x||l()),this},z(E,function(t,e){b[e]=new y(H({name:e},t))}),b=i(b,{}),this.$get=["$injector",function(t){return h=t,x=!1,l(),z(E,function(t,e){b[e]||(b[e]=new y(t))}),this}],this.Param=function(t,i,r,o){function l(t){var e=U(t)?s(t):[],n=a(e,"value")===-1&&a(e,"type")===-1&&a(e,"squash")===-1&&a(e,"array")===-1;return n&&(t={value:t}),t.$$fn=c(t.value)?t.value:function(){return t.value},t}function u(n,i,r){if(n.type&&i)throw new Error("Param '"+t+"' has two type configurations.");return i?i:n.type?e.isString(n.type)?b[n.type]:n.type instanceof y?n.type:new y(n.type):"config"===r?b.any:b.string}function f(){var e={array:"search"===o&&"auto"},n=t.match(/\[\]$/)?{array:!0}:{};return H(e,n,r).array}function g(t,e){var n=t.squash;if(!e||n===!1)return!1;if(!O(n)||null==n)return m;if(n===!0||N(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function v(t,e,i,r){var o,s,c=[{from:"",to:i||e?n:""},{from:null,to:i||e?n:""}];return o=j(t.replace)?t.replace:[],N(r)&&o.push({from:r,to:n}),s=p(o,function(t){return t.from}),d(c,function(t){return a(s,t.from)===-1}).concat(o)}function w(){if(!h)throw new Error("Injectable functions cannot be called at configuration time");var t=h.invoke(r.$$fn);if(null!==t&&t!==n&&!E.type.is(t))throw new Error("Default value ("+t+") for parameter '"+E.id+"' is not an instance of Type ("+E.type.name+")");return t}function x(t){function e(t){return function(e){return e.from===t}}function n(t){var n=p(d(E.replace,e(t)),function(t){return t.to});return n.length?n[0]:t}return t=n(t),O(t)?E.type.$normalize(t):w()}function A(){return"{Param:"+t+" "+i+" squash: '"+C+"' optional: "+S+"}"}var E=this;r=l(r),i=u(r,i,o);var _=f();i=_?i.$asArray(_,"search"===o):i,"string"!==i.name||_||"path"!==o||r.value!==n||(r.value="");var S=r.value!==n,C=g(r,S),M=v(r,_,S,C);H(this,{id:t,type:i,location:o,array:_,squash:C,replace:M,isOptional:S,value:x,dynamic:n,config:r,toString:A})},u.prototype={$$new:function(){return i(this,H(new u,{$$parent:this}))},$$keys:function(){for(var t=[],e=[],n=this,i=s(u.prototype);n;)e.push(n),n=n.$$parent;return e.reverse(),z(e,function(e){z(s(e),function(e){a(t,e)===-1&&a(i,e)===-1&&t.push(e)})}),t},$$values:function(t){var e={},n=this;return z(n.$$keys(),function(i){e[i]=n[i].value(t&&t[i])}),e},$$equals:function(t,e){var n=!0,i=this;return z(i.$$keys(),function(r){var o=t&&t[r],s=e&&e[r];i[r].type.equals(o,s)||(n=!1)}),n},$$validates:function(t){var i,r,o,s,a,c=this.$$keys();for(i=0;i<c.length&&(r=this[c[i]],o=t[c[i]],o!==n&&null!==o||!r.isOptional);i++){if(s=r.type.$normalize(o),!r.type.is(s))return!1;if(a=r.type.encode(s),e.isString(a)&&!r.type.pattern.exec(a))return!1}return!0},$$parent:n},this.ParamSet=u}function b(t,i){function r(t){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source);return null!=e?e[1].replace(/\\(.)/g,"$1"):""}function o(t,e){return t.replace(/\$(\$|\d{1,2})/,function(t,n){return e["$"===n?0:Number(n)]})}function s(t,e,n){if(!n)return!1;var i=t.invoke(e,e,{$match:n});return!O(i)||i}function a(i,r,o,s,a){function f(t,e,n){return"/"===m?t:e?m.slice(0,-1)+t:n?m.slice(1)+t:t}function d(t){function e(t){var e=t(o,i);return!!e&&(N(e)&&i.replace().url(e),!0)}if(!t||!t.defaultPrevented){g&&i.url()===g;g=n;var r,s=l.length;for(r=0;r<s;r++)if(e(l[r]))return;u&&e(u)}}function p(){return c=c||r.$on("$locationChangeSuccess",d)}var g,m=s.baseHref(),v=i.url();return h||p(),{sync:function(){d()},listen:function(){return p()},update:function(t){return t?void(v=i.url()):void(i.url()!==v&&(i.url(v),i.replace()))},push:function(t,e,r){var o=t.format(e||{});null!==o&&e&&e["#"]&&(o+="#"+e["#"]),i.url(o),g=r&&r.$$avoidResync?i.url():n,r&&r.replace&&i.replace()},href:function(n,r,o){if(!n.validates(r))return null;var s=t.html5Mode();e.isObject(s)&&(s=s.enabled),s=s&&a.history;var c=n.format(r);if(o=o||{},s||null===c||(c="#"+t.hashPrefix()+c),null!==c&&r&&r["#"]&&(c+="#"+r["#"]),c=f(c,s,o.absolute),!o.absolute||!c)return c;var l=!s&&c?"/":"",u=i.port();return u=80===u||443===u?"":":"+u,[i.protocol(),"://",i.host(),u,l,c].join("")}}}var c,l=[],u=null,h=!1;this.rule=function(t){if(!I(t))throw new Error("'rule' must be a function");return l.push(t),this},this.otherwise=function(t){if(N(t)){var e=t;t=function(){return e}}else if(!I(t))throw new Error("'rule' must be a function");return u=t,this},this.when=function(t,e){var n,a=N(e);if(N(t)&&(t=i.compile(t)),!a&&!I(e)&&!j(e))throw new Error("invalid 'handler' in when()");var c={matcher:function(t,e){return a&&(n=i.compile(e),e=["$match",function(t){return n.format(t)}]),H(function(n,i){return s(n,e,t.exec(i.path(),i.search()))},{prefix:N(t.prefix)?t.prefix:""})},regex:function(t,e){if(t.global||t.sticky)throw new Error("when() RegExp must not be global or sticky");return a&&(n=e,e=["$match",function(t){return o(n,t)}]),H(function(n,i){return s(n,e,t.exec(i.path()))},{prefix:r(t)})}},l={matcher:i.isMatcher(t),regex:t instanceof RegExp};for(var u in l)if(l[u])return this.rule(c[u](t,e));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(t){t===n&&(t=!0),h=t},this.$get=a,a.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function x(t,r){function o(t){return 0===t.indexOf(".")||0===t.indexOf("^")}function f(t,e){if(!t)return n;var i=N(t),r=i?t:t.name,s=o(r);if(s){if(!e)throw new Error("No reference point given for path '"+r+"'");e=f(e);for(var a=r.split("."),c=0,l=a.length,u=e;c<l;c++)if(""!==a[c]||0!==c){if("^"!==a[c])break;if(!u.parent)throw new Error("Path '"+r+"' not valid for state '"+e.name+"'");u=u.parent}else u=e;a=a.slice(c).join("."),r=u.name+(u.name&&a?".":"")+a}var h=S[r];return!h||!i&&(i||h!==t&&h.self!==t)?n:h}function d(t,e){C[t]||(C[t]=[]),C[t].push(e)}function g(t){for(var e=C[t]||[];e.length;)m(e.shift())}function m(e){e=i(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}});var n=e.name;if(!N(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(S.hasOwnProperty(n))throw new Error("State '"+n+"' is already defined");var r=n.indexOf(".")!==-1?n.substring(0,n.lastIndexOf(".")):N(e.parent)?e.parent:U(e.parent)&&N(e.parent.name)?e.parent.name:"";if(r&&!S[r])return d(r,e.self);for(var o in $)I($[o])&&(e[o]=$[o](e,$.$delegates[o]));return S[n]=e,!e[M]&&e.url&&t.when(e.url,["$match","$stateParams",function(t,n){_.$current.navigable==e&&l(t,n)||_.transitionTo(e,t,{inherit:!0,location:!1})}]),g(n),e}function v(t){return t.indexOf("*")>-1}function y(t){for(var e=t.split("."),n=_.$current.name.split("."),i=0,r=e.length;i<r;i++)"*"===e[i]&&(n[i]="*");return"**"===e[0]&&(n=n.slice(a(n,e[1])),n.unshift("**")),"**"===e[e.length-1]&&(n.splice(a(n,e[e.length-2])+1,Number.MAX_VALUE),n.push("**")),e.length==n.length&&n.join("")===e.join("")}function w(t,e){return N(t)&&!O(e)?$[t]:I(e)&&N(t)?($[t]&&!$.$delegates[t]&&($.$delegates[t]=$[t]),$[t]=e,this):this}function b(t,e){return U(t)?e=t:e.name=t,m(e),this}function x(t,r,o,a,h,d,g,m,w){function b(e,n,i,o){var s=t.$broadcast("$stateNotFound",e,n,i);if(s.defaultPrevented)return g.update(),F;if(!s.retry)return null;if(o.$retry)return g.update(),T;var a=_.transition=r.when(s.retry);return a.then(function(){return a!==_.transition?C:(e.options.$retry=!0,_.transitionTo(e.to,e.toParams,e.options))},function(){return F}),g.update(),a}function x(t,n,i,s,c,l){function f(){var n=[];return z(t.views,function(i,r){var s=i.resolve&&i.resolve!==t.resolve?i.resolve:{};s.$template=[function(){return o.load(r,{view:i,locals:c.globals,params:d,notify:l.notify})||""}],n.push(h.resolve(s,c.globals,c.resolve,t).then(function(n){if(I(i.controllerProvider)||j(i.controllerProvider)){var o=e.extend({},s,c.globals);n.$$controller=a.invoke(i.controllerProvider,null,o)}else n.$$controller=i.controller;n.$$state=t,n.$$controllerAs=i.controllerAs,c[r]=n}))}),r.all(n).then(function(){return c.globals})}var d=i?n:u(t.params.$$keys(),n),p={$stateParams:d};c.resolve=h.resolve(t.resolve,p,c.resolve,t);var g=[c.resolve.then(function(t){c.globals=t})];return s&&g.push(s),r.all(g).then(f).then(function(t){return c})}var C=r.reject(new Error("transition superseded")),$=r.reject(new Error("transition prevented")),F=r.reject(new Error("transition aborted")),T=r.reject(new Error("transition failed"));return E.locals={resolve:null,globals:{$stateParams:{}}},_={params:{},current:E.self,$current:E,transition:null},_.reload=function(t){return _.transitionTo(_.current,d,{reload:t||!0,inherit:!1,notify:!0})},_.go=function(t,e,n){return _.transitionTo(t,e,H({inherit:!0,relative:_.$current},n))},_.transitionTo=function(e,n,o){n=n||{},o=H({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var s,l=_.$current,h=_.params,p=l.path,m=f(e,o.relative),v=n["#"];if(!O(m)){var y={to:e,toParams:n,options:o},w=b(y,l.self,h,o);if(w)return w;if(e=y.to,n=y.toParams,o=y.options,m=f(e,o.relative),!O(m)){if(!o.relative)throw new Error("No such state '"+e+"'");throw new Error("Could not resolve '"+e+"' from state '"+o.relative+"'")}}if(m[M])throw new Error("Cannot transition to abstract state '"+e+"'");if(o.inherit&&(n=c(d,n||{},_.$current,m)),!m.params.$$validates(n))return T;n=m.params.$$values(n),e=m;var S=e.path,F=0,L=S[F],k=E.locals,R=[];if(o.reload){if(N(o.reload)||U(o.reload)){if(U(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var D=o.reload===!0?p[0]:f(o.reload);if(o.reload&&!D)throw new Error("No such reload state '"+(N(o.reload)?o.reload:o.reload.name)+"'");for(;L&&L===p[F]&&L!==D;)k=R[F]=L.locals,F++,L=S[F]}}else for(;L&&L===p[F]&&L.ownParams.$$equals(n,h);)k=R[F]=L.locals,F++,L=S[F];if(A(e,n,l,h,k,o))return v&&(n["#"]=v),_.params=n,W(_.params,d),W(u(e.params.$$keys(),d),e.locals.globals.$stateParams),o.location&&e.navigable&&e.navigable.url&&(g.push(e.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),g.update(!0)),_.transition=null,r.when(_.current);if(n=u(e.params.$$keys(),n||{}),v&&(n["#"]=v),o.notify&&t.$broadcast("$stateChangeStart",e.self,n,l.self,h,o).defaultPrevented)return t.$broadcast("$stateChangeCancel",e.self,n,l.self,h),null==_.transition&&g.update(),$;for(var B=r.when(k),P=F;P<S.length;P++,L=S[P])k=R[P]=i(k),B=x(L,n,L===e,B,k,o);var I=_.transition=B.then(function(){var i,r,s;if(_.transition!==I)return C;for(i=p.length-1;i>=F;i--)s=p[i],s.self.onExit&&a.invoke(s.self.onExit,s.self,s.locals.globals),s.locals=null;for(i=F;i<S.length;i++)r=S[i],r.locals=R[i],r.self.onEnter&&a.invoke(r.self.onEnter,r.self,r.locals.globals);return _.transition!==I?C:(_.$current=e,_.current=e.self,_.params=n,W(_.params,d),_.transition=null,o.location&&e.navigable&&g.push(e.navigable.url,e.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&t.$broadcast("$stateChangeSuccess",e.self,n,l.self,h),g.update(!0),_.current)},function(i){return _.transition!==I?C:(_.transition=null,s=t.$broadcast("$stateChangeError",e.self,n,l.self,h,i),s.defaultPrevented||g.update(),r.reject(i))});return I},_.is=function(t,e,i){i=H({relative:_.$current},i||{});var r=f(t,i.relative);return O(r)?_.$current===r&&(!e||l(r.params.$$values(e),d)):n},_.includes=function(t,e,i){if(i=H({relative:_.$current},i||{}),N(t)&&v(t)){if(!y(t))return!1;t=_.$current.name}var r=f(t,i.relative);return O(r)?!!O(_.$current.includes[r.name])&&(!e||l(r.params.$$values(e),d,s(e))):n},_.href=function(t,e,i){i=H({lossy:!0,inherit:!0,absolute:!1,relative:_.$current},i||{});var r=f(t,i.relative);if(!O(r))return null;i.inherit&&(e=c(d,e||{},_.$current,r));var o=r&&i.lossy?r.navigable:r;return o&&o.url!==n&&null!==o.url?g.href(o.url,u(r.params.$$keys().concat("#"),e||{}),{absolute:i.absolute}):null},_.get=function(t,e){if(0===arguments.length)return p(s(S),function(t){return S[t].self});var n=f(t,e||_.$current);return n&&n.self?n.self:null},_}function A(t,e,n,i,r,o){function s(t,e,n){function i(e){return"search"!=t.params[e].location}var r=t.params.$$keys().filter(i),o=h.apply({},[t.params].concat(r)),s=new G.ParamSet(o);return s.$$equals(e,n)}if(!o.reload&&t===n&&(r===n.locals||t.self.reloadOnSearch===!1&&s(n,i,e)))return!0}var E,_,S={},C={},M="abstract",$={parent:function(t){if(O(t.parent)&&t.parent)return f(t.parent);var e=/^(.+)\.[^.]+$/.exec(t.name);return e?f(e[1]):E},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=i(t.parent.data,t.data)),t.data},url:function(t){var e=t.url,n={params:t.params||{}};if(N(e))return"^"==e.charAt(0)?r.compile(e.substring(1),n):(t.parent.navigable||E).url.concat(e,n);if(!e||r.isMatcher(e))return e;throw new Error("Invalid url '"+e+"' in state '"+t+"'")},navigable:function(t){return t.url?t:t.parent?t.parent.navigable:null},ownParams:function(t){var e=t.url&&t.url.params||new G.ParamSet;return z(t.params||{},function(t,n){e[n]||(e[n]=new G.Param(n,null,t,"config"))}),e},params:function(t){var e=h(t.ownParams,t.ownParams.$$keys());return t.parent&&t.parent.params?H(t.parent.params.$$new(),e):new G.ParamSet},views:function(t){var e={};return z(O(t.views)?t.views:{"":t},function(n,i){i.indexOf("@")<0&&(i+="@"+t.parent.name),e[i]=n}),e},path:function(t){return t.parent?t.parent.path.concat(t):[]},includes:function(t){var e=t.parent?H({},t.parent.includes):{};return e[t.name]=!0,e},$delegates:{}};E=m({name:"",url:"^",views:null,"abstract":!0}),E.navigable=null,this.decorator=w,this.state=b,this.$get=x,x.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function A(){function t(t,e){return{load:function(t,n){var i,r={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=H(r,n),n.view&&(i=e.fromConfig(n.view,n.params,n.locals)),i}}}this.$get=t,t.$inject=["$rootScope","$templateFactory"]}function E(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]}function _(t,n,i,r){function o(){return n.has?function(t){return n.has(t)?n.get(t):null}:function(t){try{return n.get(t)}catch(e){return null}}}function s(t,n){function i(t){return 1===q&&X>=4?!!l.enabled(t):1===q&&X>=2?!!l.enabled():!!c}var r={enter:function(t,e,n){e.after(t),n()},leave:function(t,e){t.remove(),e()}};if(t.noanimation)return r;if(l)return{enter:function(t,n,o){i(t)?e.version.minor>2?l.enter(t,null,n).then(o):l.enter(t,null,n,o):r.enter(t,n,o)},leave:function(t,n){i(t)?e.version.minor>2?l.leave(t).then(n):l.leave(t,n):r.leave(t,n)}};if(c){var o=c&&c(n,t);return{enter:function(t,e,n){o.enter(t,null,e),n()},leave:function(t,e){o.leave(t),e()}}}return r}var a=o(),c=a("$animator"),l=a("$animate"),u={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,a){return function(n,o,c){function l(){function t(){e&&e.remove(),n&&n.$destroy()}var e=h,n=d;n&&(n._willBeDestroyed=!0),f?(v.leave(f,function(){t(),h=null}),h=f):(t(),h=null),f=null,d=null}function u(s){var u,h=C(n,c,o,r),y=h&&t.$current&&t.$current.locals[h];if((s||y!==p)&&!n._willBeDestroyed){u=n.$new(),p=t.$current.locals[h],u.$emit("$viewContentLoading",h);var w=a(u,function(t){v.enter(t,o,function(){d&&d.$emit("$viewContentAnimationEnded"),(e.isDefined(m)&&!m||n.$eval(m))&&i(t)}),l()});f=w,d=u,d.$emit("$viewContentLoaded",h),d.$eval(g)}}var h,f,d,p,g=c.onload||"",m=c.autoscroll,v=s(c,n);n.$on("$stateChangeSuccess",function(){u(!1)}),u(!0)}}};return u}function S(t,e,n,i){return{restrict:"ECA",priority:-400,compile:function(r){var o=r.html();return function(r,s,a){var c=n.$current,l=C(r,a,s,i),u=c&&c.locals[l];if(u){s.data("$uiView",{name:l,state:u.$$state}),s.html(u.$template?u.$template:o);var h=t(s.contents());if(u.$$controller){u.$scope=r,u.$element=s;var f=e(u.$$controller,u);u.$$controllerAs&&(r[u.$$controllerAs]=f),s.data("$ngControllerController",f),s.children().data("$ngControllerController",f)}h(r)}}}}}function C(t,e,n,i){var r=i(e.uiView||e.name||"")(t),o=n.inheritedData("$uiView");return r.indexOf("@")>=0?r:r+"@"+(o?o.state.name:"")}function M(t,e){var n,i=t.match(/^\s*({[^}]*})\s*$/);if(i&&(t=e+"("+i[1]+")"),n=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+t+"'");return{state:n[1],paramExpr:n[3]||null}}function $(t){var e=t.parent().inheritedData("$uiView");if(e&&e.state&&e.state.name)return e.state}function F(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function T(t,e,n,i,r){return function(o){var s=o.which||o.button,a=r();if(!(s>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var c=n(function(){e.go(a.state,a.params,a.options)});o.preventDefault();var l=i.isAnchor&&!a.href?1:0;o.preventDefault=function(){l--<=0&&n.cancel(c)}}}}function L(t,e){return{relative:$(t)||e.$current,inherit:!0}}function k(t,n){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,r,o,s){var a=M(o.uiSref,t.current.name),c={state:a.state,href:null,params:null},l=F(r),u=s[1]||s[0];c.options=H(L(r,t),o.uiSrefOpts?i.$eval(o.uiSrefOpts):{});var h=function(n){n&&(c.params=e.copy(n)),c.href=t.href(a.state,c.params,c.options),u&&u.$$addStateInfo(a.state,c.params),null!==c.href&&o.$set(l.attr,c.href)};a.paramExpr&&(i.$watch(a.paramExpr,function(t){t!==c.params&&h(t)},!0),c.params=e.copy(i.$eval(a.paramExpr))),h(),l.clickable&&r.bind("click",T(r,t,n,l,function(){return c}))}}}function R(t,e){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,r,o){function s(e){h.state=e[0],h.params=e[1],h.options=e[2],h.href=t.href(h.state,h.params,h.options),c&&c.$$addStateInfo(h.state,h.params),h.href&&r.$set(a.attr,h.href)}var a=F(i),c=o[1]||o[0],l=[r.uiState,r.uiStateParams||null,r.uiStateOpts||null],u="["+l.map(function(t){return t||"null"}).join(", ")+"]",h={state:null,params:null,options:null,href:null};n.$watch(u,s,!0),s(n.$eval(u)),a.clickable&&i.bind("click",T(i,t,e,a,function(){return h}))}}}function D(t,e,n){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(e,i,r,o){function s(e,n,r){var o=t.get(e,$(i)),s=a(e,n);g.push({state:o||{name:e},params:n,hash:s}),m[s]=r}function a(t,n){if(!N(t))throw new Error("state should be a string");return U(n)?t+V(n):(n=e.$eval(n),U(n)?t+V(n):t)}function c(){for(var t=0;t<g.length;t++)h(g[t].state,g[t].params)?l(i,m[g[t].hash]):u(i,m[g[t].hash]),f(g[t].state,g[t].params)?l(i,d):u(i,d)}function l(t,e){o(function(){t.addClass(e)})}function u(t,e){t.removeClass(e)}function h(e,n){return t.includes(e.name,n)}function f(e,n){return t.is(e.name,n)}var d,p,g=[],m={};d=n(r.uiSrefActiveEq||"",!1)(e);try{p=e.$eval(r.uiSrefActive)}catch(v){}p=p||n(r.uiSrefActive||"",!1)(e),U(p)&&z(p,function(n,i){if(N(n)){var r=M(n,t.current.name);s(r.state,e.$eval(r.paramExpr),i)}}),this.$$addStateInfo=function(t,e){U(p)&&g.length>0||(s(t,e,p),c())},e.$on("$stateChangeSuccess",c),c()}]}}function B(t){var e=function(e,n){return t.is(e,n)};return e.$stateful=!0,e}function P(t){var e=function(e,n,i){return t.includes(e,n,i)};return e.$stateful=!0,e}var O=e.isDefined,I=e.isFunction,N=e.isString,U=e.isObject,j=e.isArray,z=e.forEach,H=e.extend,W=e.copy,V=e.toJson;e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",g),m.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",m);var G;v.prototype.concat=function(t,e){var n={caseInsensitive:G.caseInsensitive(),strict:G.strictMode(),squash:G.defaultSquashPolicy()};return new v(this.sourcePath+t+this.sourceSearch,H(n,e),this)},v.prototype.toString=function(){return this.source},v.prototype.exec=function(t,e){function n(t){function e(t){return t.split("").reverse().join("")}function n(t){return t.replace(/\\-/g,"-")}var i=e(t).split(/-(?!\\)/),r=p(i,e);return p(r,n).reverse()}var i=this.regexp.exec(t);if(!i)return null;e=e||{};var r,o,s,a=this.parameters(),c=a.length,l=this.segments.length-1,u={};if(l!==i.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var h,f;for(r=0;r<l;r++){for(s=a[r],h=this.params[s],f=i[r+1],o=0;o<h.replace.length;o++)h.replace[o].from===f&&(f=h.replace[o].to);f&&h.array===!0&&(f=n(f)),O(f)&&(f=h.type.decode(f)),u[s]=h.value(f)}for(;r<c;r++){for(s=a[r],u[s]=this.params[s].value(e[s]),h=this.params[s],f=e[s],o=0;o<h.replace.length;o++)h.replace[o].from===f&&(f=h.replace[o].to);O(f)&&(f=h.type.decode(f)),u[s]=h.value(f)}return u},v.prototype.parameters=function(t){return O(t)?this.params[t]||null:this.$$paramNames},v.prototype.validates=function(t){return this.params.$$validates(t)},v.prototype.format=function(t){function e(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})}t=t||{};var n=this.segments,i=this.parameters(),r=this.params;if(!this.validates(t))return null;var o,s=!1,a=n.length-1,c=i.length,l=n[0];for(o=0;o<c;o++){var u=o<a,h=i[o],f=r[h],d=f.value(t[h]),g=f.isOptional&&f.type.equals(f.value(),d),m=!!g&&f.squash,v=f.type.encode(d);if(u){var y=n[o+1],w=o+1===a;if(m===!1)null!=v&&(l+=j(v)?p(v,e).join("-"):encodeURIComponent(v)),l+=y;else if(m===!0){var b=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=y.match(b)[1]}else N(m)&&(l+=m+y);w&&f.squash===!0&&"/"===l.slice(-1)&&(l=l.slice(0,-1))}else{if(null==v||g&&m!==!1)continue;if(j(v)||(v=[v]),0===v.length)continue;v=p(v,encodeURIComponent).join("&"+h+"="),l+=(s?"&":"?")+(h+"="+v),s=!0}}return l},y.prototype.is=function(t,e){return!0},y.prototype.encode=function(t,e){return t},y.prototype.decode=function(t,e){return t},y.prototype.equals=function(t,e){return t==e},y.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},y.prototype.pattern=/.*/,y.prototype.toString=function(){return"{Type:"+this.name+"}"},y.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},y.prototype.$asArray=function(t,e){function i(t,e){function i(t,e){return function(){return t[e].apply(t,arguments)}}function r(t){return j(t)?t:O(t)?[t]:[]}function o(t){switch(t.length){case 0:return n;case 1:return"auto"===e?t[0]:t;default:return t}}function s(t){return!t}function a(t,e){return function(n){if(j(n)&&0===n.length)return n;n=r(n);var i=p(n,t);return e===!0?0===d(i,s).length:o(i)}}function c(t){return function(e,n){var i=r(e),o=r(n);if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(!t(i[s],o[s]))return!1;return!0}}this.encode=a(i(t,"encode")),this.decode=a(i(t,"decode")),this.is=a(i(t,"is"),!0),this.equals=c(i(t,"equals")),this.pattern=t.pattern,this.$normalize=a(i(t,"$normalize")),this.name=t.name,this.$arrayMode=e}if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new i(this,t)},e.module("ui.router.util").provider("$urlMatcherFactory",w),e.module("ui.router.util").run(["$urlMatcherFactory",function(t){}]),b.$inject=["$locationProvider","$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",b),x.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],e.module("ui.router.state").factory("$stateParams",function(){return{}}).provider("$state",x),A.$inject=[],e.module("ui.router.state").provider("$view",A),e.module("ui.router.state").provider("$uiViewScroll",E);var q=e.version.major,X=e.version.minor;_.$inject=["$state","$injector","$uiViewScroll","$interpolate"],S.$inject=["$compile","$controller","$state","$interpolate"],e.module("ui.router.state").directive("uiView",_),e.module("ui.router.state").directive("uiView",S),k.$inject=["$state","$timeout"],R.$inject=["$state","$timeout"],D.$inject=["$state","$stateParams","$interpolate"],e.module("ui.router.state").directive("uiSref",k).directive("uiSrefActive",D).directive("uiSrefActiveEq",D).directive("uiState",R),
B.$inject=["$state"],P.$inject=["$state"],e.module("ui.router.state").filter("isState",B).filter("includedByState",P)}(window,window.angular)},function(t,e,n){"use strict";var i=n(562);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(310),o=n(563),s=n(564),a=i.module("simulator.deviceList",[n(569),n(560),r]).config(o).component("deviceList",s);t.exports=a},function(t,e){"use strict";function n(t){t.state("deviceList",{url:"/devices",template:"<device-list></device-list>"})}n.$inject=["$stateProvider"],t.exports=n},function(t,e,n){"use strict";var i=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(c){r=!0,o=c}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(348);n(565);var o=n(567),s=n(568),a={template:'\n    <header></header>\n    <div class="devices container">\n      <h1>Devices</h1>\n      <div class="content">\n        <table>\n          <thead>\n            <tr>\n              <th ng-repeat="header in ::deviceList.tableHeaders"\n                  ng-click="deviceList.changeOrder(header.field)"\n                  ng-class="{active: deviceList.orderBy === header.field, reverse: deviceList.reverseOrder}">\n                {{ header.title }}\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="device in deviceList.devices | orderBy:deviceList.orderBy:deviceList.reverseOrder track by device.id"\n                ui-sref="simulator({ id: device.id })">\n              <td>\n                <span>{{ device.name || \'N/A\' }}</span>\n                <br>\n                <span class="secondary">{{ device.serialNumber }}</span>\n              </td>\n              <td class="capitalize">{{ device.template.name }}</td>\n              <td>{{ device.provisioningState }}</td>\n              <td>\n                <span ng-if="device.connected">'+o+'</span>\n                <span ng-if="!device.connected">'+s+"</span>\n              </td>\n              <td>{{ device.location || 'N/A' }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  ",controllerAs:"deviceList",controller:["$q","devicesService","blueprintService","CONFIG",function(t,e,n,o){var s=this;this.devices=[],t.all([e.getDevices(),n.getDeviceTemplates()]).then(function(t){var e=i(t,2),n=e[0],o=e[1];n=r.toArray(n),r.forEach(n,function(t){t.template=o[t.deviceTemplateId]}),r.assign(s.devices,n)}),this.tableHeaders=[{title:"Name",field:"name"},{title:"Type",field:"template.name"},{title:"Provisioning Status",field:"provisioningState"},{title:"Connection Status",field:"connected"},{title:"Location",field:"location"}],this.orderBy=this.tableHeaders[0].field,this.reverseOrder=!1,this.changeOrder=function(t){s.orderBy===t?s.reverseOrder=!s.reverseOrder:s.orderBy=t}}]};t.exports=a},function(t,e){},,function(t,e){t.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 12.2" enable-background="new 0 0 18 12.2" xml:space="preserve"><g id="XMLID_374_"><path id="XMLID_320_" fill="#343D5A" d="M17.5,5.4c-0.2,0-0.3-0.1-0.4-0.2C15.4,2.5,12.5,1,9,1C5.5,1,2.7,2.5,0.9,5.2 C0.8,5.4,0.5,5.5,0.2,5.3C0,5.2-0.1,4.9,0.1,4.6C2,1.6,5.2,0,9,0c3.8,0,7,1.6,8.9,4.6c0.2,0.2,0.1,0.5-0.1,0.7 C17.7,5.4,17.6,5.4,17.5,5.4z"></path><path id="XMLID_376_" fill="#343D5A" d="M14.9,7.5c-0.2,0-0.3-0.1-0.4-0.2C13.3,5.4,11.4,4.4,9,4.4c-2.4,0-4.3,1-5.5,2.8 C3.4,7.5,3.1,7.5,2.8,7.4C2.6,7.3,2.5,6.9,2.7,6.7C4,4.6,6.3,3.4,9,3.4c2.7,0,5,1.2,6.3,3.3c0.1,0.2,0.1,0.5-0.1,0.7 C15.1,7.5,15,7.5,14.9,7.5z"></path><path id="XMLID_378_" fill="#343D5A" d="M5.6,9.6c-0.1,0-0.2,0-0.3-0.1C5.1,9.3,5,9,5.1,8.8c0.8-1.3,2.2-2,3.9-2c1.6,0,3,0.7,3.9,2 C13.1,9,13,9.3,12.8,9.5c-0.2,0.2-0.5,0.1-0.7-0.1c-0.7-1-1.7-1.6-3-1.6c-1.3,0-2.4,0.6-3,1.6C5.9,9.5,5.7,9.6,5.6,9.6z"></path><path id="XMLID_301_" fill="#343D5A" d="M8.9,12.2c-0.8,0-1.4-0.6-1.4-1.4s0.6-1.4,1.4-1.4c0.8,0,1.4,0.6,1.4,1.4 S9.7,12.2,8.9,12.2z"></path></g></svg>'},function(t,e){t.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 12.2" enable-background="new 0 0 18 12.2" xml:space="preserve"><g id="XMLID_417_"><path id="XMLID_423_" fill="#CDCCCC" d="M17.5,5.4c-0.2,0-0.3-0.1-0.4-0.2C15.4,2.5,12.5,1,9,1C5.5,1,2.7,2.5,0.9,5.2 C0.8,5.4,0.5,5.5,0.2,5.3C0,5.2-0.1,4.9,0.1,4.6C2,1.6,5.2,0,9,0c3.8,0,7,1.6,8.9,4.6c0.2,0.2,0.1,0.5-0.1,0.7 C17.7,5.4,17.6,5.4,17.5,5.4z"></path><path id="XMLID_422_" fill="#CDCCCC" d="M14.9,7.5c-0.2,0-0.3-0.1-0.4-0.2C13.3,5.4,11.4,4.4,9,4.4c-2.4,0-4.3,1-5.5,2.8 C3.4,7.5,3.1,7.5,2.8,7.4C2.6,7.3,2.5,6.9,2.7,6.7C4,4.6,6.3,3.4,9,3.4c2.7,0,5,1.2,6.3,3.3c0.1,0.2,0.1,0.5-0.1,0.7 C15.1,7.5,15,7.5,14.9,7.5z"></path><path id="XMLID_421_" fill="#CDCCCC" d="M5.6,9.6c-0.1,0-0.2,0-0.3-0.1C5.1,9.3,5,9,5.1,8.8c0.8-1.3,2.2-2,3.9-2c1.6,0,3,0.7,3.9,2 C13.1,9,13,9.3,12.8,9.5c-0.2,0.2-0.5,0.1-0.7-0.1c-0.7-1-1.7-1.6-3-1.6c-1.3,0-2.4,0.6-3,1.6C5.9,9.5,5.7,9.6,5.6,9.6z"></path><path id="XMLID_419_" fill="#989898" d="M8.9,12.2c-0.8,0-1.4-0.6-1.4-1.4s0.6-1.4,1.4-1.4c0.8,0,1.4,0.6,1.4,1.4 S9.7,12.2,8.9,12.2z"></path></g><g id="XMLID_2257_"><g id="XMLID_2258_"><g id="XMLID_2259_"><line id="XMLID_2260_" fill="none" stroke="#989898" stroke-width="2.0242" stroke-linecap="round" stroke-miterlimit="10" x1="9" y1="7.8" x2="9" y2="2.4"></line></g></g></g></svg>'},function(t,e,n){n(570),t.exports="ngAnimate"},function(t,e){/**
	 * @license AngularJS v1.5.5
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(t,e){"use strict";function n(t,e,n){if(!t)throw gt("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function i(t,e){return t||e?t?e?(z(t)&&(t=t.join(" ")),z(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function r(t){var e={};return t&&(t.to||t.from)&&(e.to=t.to,e.from=t.from),e}function o(t,e,n){var i="";return t=z(t)?t:t&&H(t)&&t.length?t.split(/\s+/):[],j(t,function(t,r){t&&t.length>0&&(i+=r>0?" ":"",i+=n?e+t:t+e)}),i}function s(t,e){var n=t.indexOf(e);e>=0&&t.splice(n,1)}function a(t){if(t instanceof U)switch(t.length){case 0:return[];case 1:if(t[0].nodeType===Y)return t;break;default:return U(c(t))}if(t.nodeType===Y)return U(t)}function c(t){if(!t[0])return t;for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType==Y)return n}}function l(t,e,n){j(e,function(e){t.addClass(e,n)})}function u(t,e,n){j(e,function(e){t.removeClass(e,n)})}function h(t){return function(e,n){n.addClass&&(l(t,e,n.addClass),n.addClass=null),n.removeClass&&(u(t,e,n.removeClass),n.removeClass=null)}}function f(t){if(t=t||{},!t.$$prepared){var e=t.domOperation||O;t.domOperation=function(){t.$$domOperationFired=!0,e(),e=O},t.$$prepared=!0}return t}function d(t,e){p(t,e),g(t,e)}function p(t,e){e.from&&(t.css(e.from),e.from=null)}function g(t,e){e.to&&(t.css(e.to),e.to=null)}function m(t,e,n){var i=e.options||{},r=n.options||{},o=(i.addClass||"")+" "+(r.addClass||""),s=(i.removeClass||"")+" "+(r.removeClass||""),a=v(t.attr("class"),o,s);r.preparationClasses&&(i.preparationClasses=_(r.preparationClasses,i.preparationClasses),delete r.preparationClasses);var c=i.domOperation!==O?i.domOperation:null;return N(i,r),c&&(i.domOperation=c),a.addClass?i.addClass=a.addClass:i.addClass=null,a.removeClass?i.removeClass=a.removeClass:i.removeClass=null,e.addClass=i.addClass,e.removeClass=i.removeClass,i}function v(t,e,n){function i(t){H(t)&&(t=t.split(" "));var e={};return j(t,function(t){t.length&&(e[t]=!0)}),e}var r=1,o=-1,s={};t=i(t),e=i(e),j(e,function(t,e){s[e]=r}),n=i(n),j(n,function(t,e){s[e]=s[e]===r?null:o});var a={addClass:"",removeClass:""};return j(s,function(e,n){var i,s;e===r?(i="addClass",s=!t[n]):e===o&&(i="removeClass",s=t[n]),s&&(a[i].length&&(a[i]+=" "),a[i]+=n)}),a}function y(t){return t instanceof e.element?t[0]:t}function w(t,e,n){var i="";e&&(i=o(e,Q,!0)),n.addClass&&(i=_(i,o(n.addClass,K))),n.removeClass&&(i=_(i,o(n.removeClass,Z))),i.length&&(n.preparationClasses=i,t.addClass(i))}function b(t,e){e.preparationClasses&&(t.removeClass(e.preparationClasses),e.preparationClasses=null),e.activeClasses&&(t.removeClass(e.activeClasses),e.activeClasses=null)}function x(t,e){var n=e?"-"+e+"s":"";return E(t,[dt,n]),[dt,n]}function A(t,e){var n=e?"paused":"",i=B+lt;return E(t,[i,n]),[i,n]}function E(t,e){var n=e[0],i=e[1];t.style[n]=i}function _(t,e){return t?e?t+" "+e:t:e}function S(t){return[ft,t+"s"]}function C(t,e){var n=e?ht:dt;return[n,t+"s"]}function M(t,e,n){var i=Object.create(null),r=t.getComputedStyle(e)||{};return j(n,function(t,e){var n=r[t];if(n){var o=n.charAt(0);("-"===o||"+"===o||o>=0)&&(n=$(n)),0===n&&(n=null),i[e]=n}}),i}function $(t){var e=0,n=t.split(/\s*,\s*/);return j(n,function(t){"s"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t=parseFloat(t)||0,e=e?Math.max(t,e):t}),e}function F(t){return 0===t||null!=t}function T(t,e){var n=R,i=t+"s";return e?n+=rt:i+=" linear all",[n,i]}function L(){var t=Object.create(null);return{flush:function(){t=Object.create(null)},count:function(e){var n=t[e];return n?n.total:0},get:function(e){var n=t[e];return n&&n.value},put:function(e,n){t[e]?t[e].total++:t[e]={total:1,value:n}}}}function k(t,e,n){j(n,function(n){t[n]=G(t[n])?t[n]:e.style.getPropertyValue(n)})}var R,D,B,P,O=e.noop,I=e.copy,N=e.extend,U=e.element,j=e.forEach,z=e.isArray,H=e.isString,W=e.isObject,V=e.isUndefined,G=e.isDefined,q=e.isFunction,X=e.isElement,Y=1,K="-add",Z="-remove",Q="ng-",J="-active",tt="-prepare",et="ng-animate",nt="$$ngAnimateChildren",it="";V(t.ontransitionend)&&G(t.onwebkittransitionend)?(it="-webkit-",R="WebkitTransition",D="webkitTransitionEnd transitionend"):(R="transition",D="transitionend"),V(t.onanimationend)&&G(t.onwebkitanimationend)?(it="-webkit-",B="WebkitAnimation",P="webkitAnimationEnd animationend"):(B="animation",P="animationend");var rt="Duration",ot="Property",st="Delay",at="TimingFunction",ct="IterationCount",lt="PlayState",ut=9999,ht=B+st,ft=B+rt,dt=R+st,pt=R+rt,gt=e.$$minErr("ng"),mt=["$$rAF",function(t){function e(t){i=i.concat(t),n()}function n(){if(i.length){for(var e=i.shift(),o=0;o<e.length;o++)e[o]();r||t(function(){r||n()})}}var i,r;return i=e.queue=[],e.waitUntilQuiet=function(e){r&&r(),r=t(function(){r=null,e(),n()})},e}],vt=["$interpolate",function(t){return{link:function(n,i,r){function o(t){t="on"===t||"true"===t,i.data(nt,t)}var s=r.ngAnimateChildren;e.isString(s)&&0===s.length?i.data(nt,!0):(o(t(s)(n)),r.$observe("ngAnimateChildren",o))}}}],yt="$$animateCss",wt=1e3,bt=3,xt=1.5,At={transitionDuration:pt,transitionDelay:dt,transitionProperty:R+ot,animationDuration:ft,animationDelay:ht,animationIterationCount:B+ct},Et={transitionDuration:pt,transitionDelay:dt,animationDuration:ft,animationDelay:ht},_t=["$animateProvider",function(t){var e=L(),n=L();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(t,i,a,c,l,u,m,v){function w(t,e){var n="$$ngAnimateParentKey",i=t.parentNode,r=i[n]||(i[n]=++U);return r+"-"+t.getAttribute("class")+"-"+e}function b(n,i,r,o){var s=e.get(r);return s||(s=M(t,n,o),"infinite"===s.animationIterationCount&&(s.animationIterationCount=1)),e.put(r,s),s}function _(r,s,a,c){var l;if(e.count(a)>0&&(l=n.get(a),!l)){var u=o(s,"-stagger");i.addClass(r,u),l=M(t,r,c),l.animationDuration=Math.max(l.animationDuration,0),l.transitionDuration=Math.max(l.transitionDuration,0),i.removeClass(r,u),n.put(a,l)}return l||{}}function $(t){H.push(t),m.waitUntilQuiet(function(){e.flush(),n.flush();for(var t=l(),i=0;i<H.length;i++)H[i](t);H.length=0})}function L(t,e,n){var i=b(t,e,n,At),r=i.animationDelay,o=i.transitionDelay;return i.maxDelay=r&&o?Math.max(r,o):r||o,i.maxDuration=Math.max(i.animationDuration*i.animationIterationCount,i.transitionDuration),i}var N=h(i),U=0,H=[];return function(t,n){function l(){m()}function h(){m(!0)}function m(e){if(!(q||Y&&X)){q=!0,X=!1,W.$$skipPreparationClasses||i.removeClass(t,At),i.removeClass(t,St),A(G,!1),x(G,!1),j(lt,function(t){G.style[t[0]]=""}),N(t,W),d(t,W),Object.keys(V).length&&j(V,function(t,e){t?G.style.setProperty(e,t):G.style.removeProperty(e)}),W.onDone&&W.onDone(),dt&&dt.length&&t.off(dt.join(" "),U);var n=t.data(yt);n&&(c.cancel(n[0].timer),t.removeData(yt)),tt&&tt.complete(!e)}}function b(t){Nt.blockTransition&&x(G,t),Nt.blockKeyframeAnimation&&A(G,!!t)}function M(){return tt=new a({end:l,cancel:h}),$(O),m(),{$$willAnimate:!1,start:function(){return tt},end:l}}function U(t){t.stopPropagation();var e=t.originalEvent||t,n=e.$manualTimeStamp||Date.now(),i=parseFloat(e.elapsedTime.toFixed(bt));Math.max(n-ct,0)>=it&&i>=rt&&(Y=!0,m())}function H(){function e(){if(!q){if(b(!1),j(lt,function(t){var e=t[0],n=t[1];G.style[e]=n}),N(t,W),i.addClass(t,St),Nt.recalculateTimingStyles){if(_t=G.className+" "+At,$t=w(G,_t),Ot=L(G,_t,$t),It=Ot.maxDelay,nt=Math.max(It,0),rt=Ot.maxDuration,0===rt)return void m();Nt.hasTransitions=Ot.transitionDuration>0,Nt.hasAnimations=Ot.animationDuration>0}if(Nt.applyAnimationDelay&&(It="boolean"!=typeof W.delay&&F(W.delay)?parseFloat(W.delay):It,nt=Math.max(It,0),Ot.animationDelay=It,Ut=C(It,!0),lt.push(Ut),G.style[Ut[0]]=Ut[1]),it=nt*wt,st=rt*wt,W.easing){var e,r=W.easing;Nt.hasTransitions&&(e=R+at,lt.push([e,r]),G.style[e]=r),Nt.hasAnimations&&(e=B+at,lt.push([e,r]),G.style[e]=r)}Ot.transitionDuration&&dt.push(D),Ot.animationDuration&&dt.push(P),ct=Date.now();var o=it+xt*st,s=ct+o,a=t.data(yt)||[],l=!0;if(a.length){var u=a[0];l=s>u.expectedEndTime,l?c.cancel(u.timer):a.push(m)}if(l){var h=c(n,o,!1);a[0]={timer:h,expectedEndTime:s},a.push(m),t.data(yt,a)}dt.length&&t.on(dt.join(" "),U),W.to&&(W.cleanupStyles&&k(V,G,Object.keys(W.to)),g(t,W))}}function n(){var e=t.data(yt);if(e){for(var n=1;n<e.length;n++)e[n]();t.removeData(yt)}}if(!q){if(!G.parentNode)return void m();var r=function(t){if(Y)X&&t&&(X=!1,m());else if(X=!t,Ot.animationDuration){var e=A(G,X);X?lt.push(e):s(lt,e)}},o=Bt>0&&(Ot.transitionDuration&&0===Ft.transitionDuration||Ot.animationDuration&&0===Ft.animationDuration)&&Math.max(Ft.animationDelay,Ft.transitionDelay);o?c(e,Math.floor(o*Bt*wt),!1):e(),et.resume=function(){r(!0)},et.pause=function(){r(!1)}}}var W=n||{};W.$$prepared||(W=f(I(W)));var V={},G=y(t);if(!G||!G.parentNode||!v.enabled())return M();var q,X,Y,tt,et,nt,it,rt,st,ct,lt=[],ht=t.attr("class"),ft=r(W),dt=[];if(0===W.duration||!u.animations&&!u.transitions)return M();var pt=W.event&&z(W.event)?W.event.join(" "):W.event,gt=pt&&W.structural,mt="",vt="";gt?mt=o(pt,Q,!0):pt&&(mt=pt),W.addClass&&(vt+=o(W.addClass,K)),W.removeClass&&(vt.length&&(vt+=" "),vt+=o(W.removeClass,Z)),W.applyClassesEarly&&vt.length&&N(t,W);var At=[mt,vt].join(" ").trim(),_t=ht+" "+At,St=o(At,J),Ct=ft.to&&Object.keys(ft.to).length>0,Mt=(W.keyframeStyle||"").length>0;if(!Mt&&!Ct&&!At)return M();var $t,Ft;if(W.stagger>0){var Tt=parseFloat(W.stagger);Ft={transitionDelay:Tt,animationDelay:Tt,transitionDuration:0,animationDuration:0}}else $t=w(G,_t),Ft=_(G,At,$t,Et);W.$$skipPreparationClasses||i.addClass(t,At);var Lt;if(W.transitionStyle){var kt=[R,W.transitionStyle];E(G,kt),lt.push(kt)}if(W.duration>=0){Lt=G.style[R].length>0;var Rt=T(W.duration,Lt);E(G,Rt),lt.push(Rt)}if(W.keyframeStyle){var Dt=[B,W.keyframeStyle];E(G,Dt),lt.push(Dt)}var Bt=Ft?W.staggerIndex>=0?W.staggerIndex:e.count($t):0,Pt=0===Bt;Pt&&!W.skipBlocking&&x(G,ut);var Ot=L(G,_t,$t),It=Ot.maxDelay;nt=Math.max(It,0),rt=Ot.maxDuration;var Nt={};if(Nt.hasTransitions=Ot.transitionDuration>0,Nt.hasAnimations=Ot.animationDuration>0,Nt.hasTransitionAll=Nt.hasTransitions&&"all"==Ot.transitionProperty,Nt.applyTransitionDuration=Ct&&(Nt.hasTransitions&&!Nt.hasTransitionAll||Nt.hasAnimations&&!Nt.hasTransitions),Nt.applyAnimationDuration=W.duration&&Nt.hasAnimations,Nt.applyTransitionDelay=F(W.delay)&&(Nt.applyTransitionDuration||Nt.hasTransitions),Nt.applyAnimationDelay=F(W.delay)&&Nt.hasAnimations,Nt.recalculateTimingStyles=vt.length>0,(Nt.applyTransitionDuration||Nt.applyAnimationDuration)&&(rt=W.duration?parseFloat(W.duration):rt,Nt.applyTransitionDuration&&(Nt.hasTransitions=!0,Ot.transitionDuration=rt,Lt=G.style[R+ot].length>0,lt.push(T(rt,Lt))),Nt.applyAnimationDuration&&(Nt.hasAnimations=!0,Ot.animationDuration=rt,lt.push(S(rt)))),0===rt&&!Nt.recalculateTimingStyles)return M();if(null!=W.delay){var Ut;"boolean"!=typeof W.delay&&(Ut=parseFloat(W.delay),nt=Math.max(Ut,0)),Nt.applyTransitionDelay&&lt.push(C(Ut)),Nt.applyAnimationDelay&&lt.push(C(Ut,!0))}return null==W.duration&&Ot.transitionDuration>0&&(Nt.recalculateTimingStyles=Nt.recalculateTimingStyles||Pt),it=nt*wt,st=rt*wt,W.skipBlocking||(Nt.blockTransition=Ot.transitionDuration>0,Nt.blockKeyframeAnimation=Ot.animationDuration>0&&Ft.animationDelay>0&&0===Ft.animationDuration),W.from&&(W.cleanupStyles&&k(V,G,Object.keys(W.from)),p(t,W)),Nt.blockTransition||Nt.blockKeyframeAnimation?b(rt):W.skipBlocking||x(G,!1),{$$willAnimate:!0,end:l,start:function(){if(!q)return et={end:l,cancel:h,resume:null,pause:null},tt=new a(et),$(H),tt}}}}]}],St=["$$animationProvider",function(t){function e(t){return t.parentNode&&11===t.parentNode.nodeType}t.drivers.push("$$animateCssDriver");var n="ng-animate-shim",i="ng-anchor",r="ng-anchor-out",o="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(t,s,a,c,l,u,f){function d(t){return t.replace(/\bng-\S+\b/g,"")}function p(t,e){return H(t)&&(t=t.split(" ")),H(e)&&(e=e.split(" ")),t.filter(function(t){return e.indexOf(t)===-1}).join(" ")}function g(e,s,c){function l(t){var e={},n=y(t).getBoundingClientRect();return j(["width","height","top","left"],function(t){var i=n[t];switch(t){case"top":i+=w.scrollTop;break;case"left":i+=w.scrollLeft}e[t]=Math.floor(i)+"px"}),e}function u(){var e=t(m,{addClass:r,delay:!0,from:l(s)});return e.$$willAnimate?e:null}function h(t){return t.attr("class")||""}function f(){var e=d(h(c)),n=p(e,v),i=p(v,e),s=t(m,{to:l(c),addClass:o+" "+n,removeClass:r+" "+i,delay:!0});return s.$$willAnimate?s:null}function g(){m.remove(),s.removeClass(n),c.removeClass(n)}var m=U(y(s).cloneNode(!0)),v=d(h(m));s.addClass(n),c.addClass(n),m.addClass(i),x.append(m);var b,A=u();if(!A&&(b=f(),!b))return g();var E=A||b;return{start:function(){function t(){n&&n.end()}var e,n=E.start();return n.done(function(){return n=null,!b&&(b=f())?(n=b.start(),n.done(function(){n=null,g(),e.complete()}),n):(g(),void e.complete())}),e=new a({end:t,cancel:t})}}}function m(t,e,n,i){var r=v(t,O),o=v(e,O),s=[];if(j(i,function(t){var e=t.out,i=t["in"],r=g(n,e,i);r&&s.push(r)}),r||o||0!==s.length)return{start:function(){function t(){j(e,function(t){t.end()})}var e=[];r&&e.push(r.start()),o&&e.push(o.start()),j(s,function(t){e.push(t.start())});var n=new a({end:t,cancel:t});return a.all(e,function(t){n.complete(t)}),n}}}function v(e){var n=e.element,i=e.options||{};e.structural&&(i.event=e.event,i.structural=!0,i.applyClassesEarly=!0,"leave"===e.event&&(i.onDone=i.domOperation)),i.preparationClasses&&(i.event=_(i.event,i.preparationClasses));var r=t(n,i);return r.$$willAnimate?r:null}if(!l.animations&&!l.transitions)return O;var w=f[0].body,b=y(c),x=U(e(b)||w.contains(b)?b:w);h(u);return function(t){return t.from&&t.to?m(t.from,t.to,t.classes,t.anchors):v(t)}}]}],Ct=["$animateProvider",function(t){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(e,n,i){function r(n){n=z(n)?n:n.split(" ");for(var i=[],r={},o=0;o<n.length;o++){var s=n[o],a=t.$$registeredAnimations[s];a&&!r[s]&&(i.push(e.get(a)),r[s]=!0)}return i}var o=h(i);return function(t,e,i,s){function a(){s.domOperation(),o(t,s)}function c(){p=!0,a(),d(t,s)}function l(t,e,i,r,o){var s;switch(i){case"animate":s=[e,r.from,r.to,o];break;case"setClass":s=[e,v,y,o];break;case"addClass":s=[e,v,o];break;case"removeClass":s=[e,y,o];break;default:s=[e,o]}s.push(r);var a=t.apply(t,s);if(a)if(q(a.start)&&(a=a.start()),a instanceof n)a.done(o);else if(q(a))return a;return O}function u(t,e,i,r,o){var s=[];return j(r,function(r){var a=r[o];a&&s.push(function(){var r,o,s=!1,c=function(t){s||(s=!0,(o||O)(t),r.complete(!t))};return r=new n({end:function(){c()},cancel:function(){c(!0)}}),o=l(a,t,e,i,function(t){var e=t===!1;c(e)}),r})}),s}function h(t,e,i,r,o){var s=u(t,e,i,r,o);if(0===s.length){var a,c;"beforeSetClass"===o?(a=u(t,"removeClass",i,r,"beforeRemoveClass"),c=u(t,"addClass",i,r,"beforeAddClass")):"setClass"===o&&(a=u(t,"removeClass",i,r,"removeClass"),c=u(t,"addClass",i,r,"addClass")),a&&(s=s.concat(a)),c&&(s=s.concat(c))}if(0!==s.length)return function(t){var e=[];return s.length&&j(s,function(t){e.push(t())}),e.length?n.all(e,t):t(),function(t){j(e,function(e){t?e.cancel():e.end()})}}}var p=!1;3===arguments.length&&W(i)&&(s=i,i=null),s=f(s),i||(i=t.attr("class")||"",s.addClass&&(i+=" "+s.addClass),s.removeClass&&(i+=" "+s.removeClass));var g,m,v=s.addClass,y=s.removeClass,w=r(i);if(w.length){var b,x;"leave"==e?(x="leave",b="afterLeave"):(x="before"+e.charAt(0).toUpperCase()+e.substr(1),b=e),"enter"!==e&&"move"!==e&&(g=h(t,e,s,w,x)),m=h(t,e,s,w,b)}if(g||m){var A;return{$$willAnimate:!0,end:function(){return A?A.end():(c(),A=new n,A.complete(!0)),A},start:function(){function t(t){c(t),A.complete(t)}function e(e){p||((i||O)(e),t(e))}if(A)return A;A=new n;var i,r=[];return g&&r.push(function(t){i=g(t)}),r.length?r.push(function(t){a(),t(!0)}):a(),m&&r.push(function(t){i=m(t)}),A.setHost({end:function(){e()},cancel:function(){e(!0)}}),n.chain(r,t),A}}}}}]}],Mt=["$$animationProvider",function(t){t.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(t,e){function n(e){var n=e.element,i=e.event,r=e.options,o=e.classes;return t(n,i,o,r)}return function(t){if(t.from&&t.to){var i=n(t.from),r=n(t.to);if(!i&&!r)return;return{start:function(){function t(){return function(){j(o,function(t){t.end()})}}function n(t){s.complete(t)}var o=[];i&&o.push(i.start()),r&&o.push(r.start()),e.all(o,n);var s=new e({end:t(),cancel:t()});return s}}}return n(t)}}]}],$t="data-ng-animate",Ft="$ngAnimatePin",Tt=["$animateProvider",function(i){function r(t){if(!t)return null;var e=t.split(g),n=Object.create(null);return j(e,function(t){n[t]=!0}),n}function o(t,e){if(t&&e){var n=r(e);return t.split(g).some(function(t){return n[t]})}}function s(t,e,n,i){return v[t].some(function(t){return t(e,n,i)})}function l(t,e){var n=(t.addClass||"").length>0,i=(t.removeClass||"").length>0;return e?n&&i:n||i}var u=1,p=2,g=" ",v=this.rules={skip:[],cancel:[],join:[]};v.join.push(function(t,e,n){return!e.structural&&l(e)}),v.skip.push(function(t,e,n){return!e.structural&&!l(e)}),v.skip.push(function(t,e,n){return"leave"==n.event&&e.structural}),v.skip.push(function(t,e,n){return n.structural&&n.state===p&&!e.structural}),v.cancel.push(function(t,e,n){return n.structural&&e.structural}),v.cancel.push(function(t,e,n){return n.state===p&&e.structural}),v.cancel.push(function(t,e,n){if(n.structural)return!1;var i=e.addClass,r=e.removeClass,s=n.addClass,a=n.removeClass;return!(V(i)&&V(r)||V(s)&&V(a))&&(o(i,a)||o(r,s))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(r,o,g,v,x,A,E,_,S,C){function M(){var t=!1;return function(e){t?e():o.$$postDigest(function(){t=!0,e()})}}function $(t,e){return m(t,e,{})}function F(t,e,n){var i=y(e),r=y(t),o=[],s=J[n];return s&&j(s,function(t){rt.call(t.node,i)?o.push(t.callback):"leave"===n&&rt.call(t.node,r)&&o.push(t.callback)}),o}function T(t,e,n){var i=c(e);return t.filter(function(t){var e=t.node===i&&(!n||t.callback===n);return!e})}function L(t,e){"close"!==t||e[0].parentNode||ot.off(e)}function k(t,e,n){function i(e,n,i,o){S(function(){var e=F(g,t,n);e.length?r(function(){j(e,function(e){e(t,i,o)}),L(i,t)}):L(i,t)}),e.progress(n,i,o)}function c(e){b(t,x),it(t,x),d(t,x),x.domOperation(),_.complete(!e)}var h,g,x=I(n);t=a(t),t&&(h=y(t),g=t.parent()),x=f(x);var _=new E,S=M();if(z(x.addClass)&&(x.addClass=x.addClass.join(" ")),x.addClass&&!H(x.addClass)&&(x.addClass=null),z(x.removeClass)&&(x.removeClass=x.removeClass.join(" ")),x.removeClass&&!H(x.removeClass)&&(x.removeClass=null),x.from&&!W(x.from)&&(x.from=null),x.to&&!W(x.to)&&(x.to=null),!h)return c(),_;var C=[h.className,x.addClass,x.removeClass].join(" ");if(!et(C))return c(),_;var T=["enter","move","leave"].indexOf(e)>=0,k=v[0].hidden,B=!Z||k||K.get(h),N=!B&&q.get(h)||{},U=!!N.state;if(B||U&&N.state==u||(B=!P(t,g,e)),B)return k&&i(_,e,"start"),c(),k&&i(_,e,"close"),_;T&&R(t);var V={structural:T,element:t,event:e,addClass:x.addClass,removeClass:x.removeClass,close:c,options:x,runner:_};if(U){var G=s("skip",t,V,N);if(G)return N.state===p?(c(),_):(m(t,N,V),N.runner);var X=s("cancel",t,V,N);if(X)if(N.state===p)N.runner.end();else{if(!N.structural)return m(t,N,V),N.runner;N.close()}else{var Y=s("join",t,V,N);if(Y){if(N.state!==p)return w(t,T?e:null,x),e=V.event=N.event,x=m(t,N,V),N.runner;$(t,V)}}}else $(t,V);var Q=V.structural;if(Q||(Q="animate"===V.event&&Object.keys(V.options.to||{}).length>0||l(V)),!Q)return c(),D(t),_;var J=(N.counter||0)+1;return V.counter=J,O(t,u,V),o.$$postDigest(function(){var n=q.get(h),r=!n;n=n||{};var o=t.parent()||[],s=o.length>0&&("animate"===n.event||n.structural||l(n));if(r||n.counter!==J||!s)return r&&(it(t,x),d(t,x)),(r||T&&n.event!==e)&&(x.domOperation(),_.end()),void(s||D(t));e=!n.structural&&l(n,!0)?"setClass":n.event,O(t,p);var a=A(t,e,n.options);_.setHost(a),i(_,e,"start",{}),a.done(function(n){c(!n);var r=q.get(h);r&&r.counter===J&&D(y(t)),i(_,e,"close",{})})}),_}function R(t){var e=y(t),n=e.querySelectorAll("["+$t+"]");j(n,function(t){var e=parseInt(t.getAttribute($t)),n=q.get(t);if(n)switch(e){case p:n.runner.end();case u:q.remove(t)}})}function D(t){var e=y(t);e.removeAttribute($t),q.remove(e)}function B(t,e){return y(t)===y(e)}function P(t,e,n){var i,r=U(v[0].body),o=B(t,r)||"HTML"===t[0].nodeName,s=B(t,g),a=!1,c=K.get(y(t)),l=U.data(t[0],Ft);for(l&&(e=l),e=y(e);e&&(s||(s=B(e,g)),e.nodeType===Y);){var u=q.get(e)||{};if(!a){var h=K.get(e);if(h===!0&&c!==!1){c=!0;break}h===!1&&(c=!1),a=u.structural}if(V(i)||i===!0){var f=U.data(e,nt);G(f)&&(i=f)}if(a&&i===!1)break;if(o||(o=B(e,r)),o&&s)break;e=s||!(l=U.data(e,Ft))?e.parentNode:y(l)}var d=(!a||i)&&c!==!0;return d&&s&&o}function O(t,e,n){n=n||{},n.state=e;var i=y(t);i.setAttribute($t,e);var r=q.get(i),o=r?N(r,n):n;q.put(i,o)}var q=new x,K=new x,Z=null,Q=o.$watch(function(){return 0===_.totalPendingRequests},function(t){t&&(Q(),o.$$postDigest(function(){o.$$postDigest(function(){null===Z&&(Z=!0)})}))}),J={},tt=i.classNameFilter(),et=tt?function(t){return tt.test(t)}:function(){return!0},it=h(S),rt=t.Node.prototype.contains||function(t){return this===t||!!(16&this.compareDocumentPosition(t))},ot={on:function(t,e,n){var i=c(e);J[t]=J[t]||[],J[t].push({node:i,callback:n}),U(e).on("$destroy",function(){var r=q.get(i);r||ot.off(t,e,n)})},off:function(t,n,i){if(1!==arguments.length||e.isString(arguments[0])){var r=J[t];r&&(J[t]=1===arguments.length?null:T(r,n,i))}else{n=arguments[0];for(var o in J)J[o]=T(J[o],n)}},pin:function(t,e){n(X(t),"element","not an element"),n(X(e),"parentElement","not an element"),t.data(Ft,e)},push:function(t,e,n,i){return n=n||{},n.domOperation=i,k(t,e,n)},enabled:function(t,e){var n=arguments.length;if(0===n)e=!!Z;else{var i=X(t);if(i){var r=y(t),o=K.get(r);1===n?e=!o:K.put(r,!e)}else e=Z=!!t}return e}};return ot}]}],Lt=["$animateProvider",function(t){function e(t,e){t.data(a,e)}function n(t){t.removeData(a)}function r(t){return t.data(a)}var o="ng-animate-ref",s=this.drivers=[],a="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(t,a,c,l,u,p){function g(t){function e(t){if(t.processed)return t;t.processed=!0;var n=t.domNode,i=n.parentNode;o.put(n,t);for(var s;i;){if(s=o.get(i)){s.processed||(s=e(s));break}i=i.parentNode}return(s||r).children.push(t),t}function n(t){var e,n=[],i=[];for(e=0;e<t.children.length;e++)i.push(t.children[e]);var r=i.length,o=0,s=[];for(e=0;e<i.length;e++){var a=i[e];r<=0&&(r=o,o=0,n.push(s),s=[]),s.push(a.fn),a.children.forEach(function(t){o++,i.push(t)}),r--}return s.length&&n.push(s),n}var i,r={children:[]},o=new u;for(i=0;i<t.length;i++){var s=t[i];o.put(s.domNode,t[i]={domNode:s.domNode,fn:s.fn,children:[]})}for(i=0;i<t.length;i++)e(t[i]);return n(r)}var m=[],v=h(t);return function(u,h,w){function b(t){var e="["+o+"]",n=t.hasAttribute(o)?[t]:t.querySelectorAll(e),i=[];return j(n,function(t){var e=t.getAttribute(o);e&&e.length&&i.push(t)}),i}function x(t){var e=[],n={};j(t,function(t,i){var r=t.element,s=y(r),a=t.event,c=["enter","move"].indexOf(a)>=0,l=t.structural?b(s):[];if(l.length){var u=c?"to":"from";j(l,function(t){var e=t.getAttribute(o);n[e]=n[e]||{},n[e][u]={animationID:i,element:U(t)}})}else e.push(t)});var i={},r={};return j(n,function(n,o){var s=n.from,a=n.to;if(!s||!a){var c=s?s.animationID:a.animationID,l=c.toString();return void(i[l]||(i[l]=!0,e.push(t[c])))}var u=t[s.animationID],h=t[a.animationID],f=s.animationID.toString();if(!r[f]){var d=r[f]={structural:!0,beforeStart:function(){u.beforeStart(),h.beforeStart()},close:function(){u.close(),h.close()},classes:A(u.classes,h.classes),from:u,to:h,anchors:[]};d.classes.length?e.push(d):(e.push(u),e.push(h))}r[f].anchors.push({out:s.element,"in":a.element})}),e}function A(t,e){t=t.split(" "),e=e.split(" ");for(var n=[],i=0;i<t.length;i++){var r=t[i];if("ng-"!==r.substring(0,3))for(var o=0;o<e.length;o++)if(r===e[o]){n.push(r);break}}return n.join(" ")}function E(t){for(var e=s.length-1;e>=0;e--){var n=s[e];if(c.has(n)){var i=c.get(n),r=i(t);if(r)return r}}}function _(){u.addClass(et),L&&t.addClass(u,L),k&&(t.removeClass(u,k),k=null)}function S(t,e){function n(t){r(t).setHost(e)}t.from&&t.to?(n(t.from.element),n(t.to.element)):n(t.element)}function C(){var t=r(u);!t||"leave"===h&&w.$$domOperationFired||t.end()}function M(e){u.off("$destroy",C),n(u),v(u,w),d(u,w),w.domOperation(),L&&t.removeClass(u,L),u.removeClass(et),F.complete(!e)}w=f(w);var $=["enter","move","leave"].indexOf(h)>=0,F=new l({end:function(){M()},cancel:function(){M(!0)}});if(!s.length)return M(),F;e(u,F);var T=i(u.attr("class"),i(w.addClass,w.removeClass)),L=w.tempClasses;L&&(T+=" "+L,w.tempClasses=null);var k;return $&&(k="ng-"+h+tt,t.addClass(u,k)),m.push({element:u,classes:T,event:h,structural:$,options:w,beforeStart:_,close:M}),u.on("$destroy",C),m.length>1?F:(a.$$postDigest(function(){var t=[];j(m,function(e){r(e.element)?t.push(e):e.close()}),m.length=0;var e=x(t),n=[];j(e,function(t){n.push({domNode:y(t.from?t.from.element:t.element),fn:function(){t.beforeStart();var e,n=t.close,i=t.anchors?t.from.element||t.to.element:t.element;if(r(i)){var o=E(t);o&&(e=o.start)}if(e){var s=e();s.done(function(t){n(!t)}),S(t,s)}else n()}})}),p(g(n))}),F)}}]}],kt=["$animate","$rootScope",function(t,e){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(e,n,i,r,o){var s,a;e.$watchCollection(i.ngAnimateSwap||i["for"],function(i){s&&t.leave(s),a&&(a.$destroy(),a=null),(i||0===i)&&(a=e.$new(),o(a,function(e){s=e,t.enter(e,null,n)}))})}}}];e.module("ngAnimate",[]).directive("ngAnimateSwap",kt).directive("ngAnimateChildren",vt).factory("$$rAFScheduler",mt).provider("$$animateQueue",Tt).provider("$$animation",Lt).provider("$animateCss",_t).provider("$$animateCssDriver",St).provider("$$animateJs",Ct).provider("$$animateJsDriver",Mt)}(window,window.angular)},function(t,e,n){"use strict";var i=n(572);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(573),o=n(574),s=n(577),a=i.module("simulator.rules",[]).factory("rulesService",r).component("rules",s).component("conditionList",o);t.exports=a},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return new(function(){function i(){n(this,i)}return r(i,[{key:"getRules",value:function(){return e({method:"GET",url:"/api/rules"})["catch"](function(e){throw t.error("rulesService#getRules error:",e),e})}},{key:"getRule",value:function(n){return e({method:"GET",url:"/api/rules/"+n})["catch"](function(e){throw t.error("rulesService#getRule error:",e),e})}},{key:"createRule",value:function(n){return e({method:"POST",url:"/api/rules",data:n})["catch"](function(e){throw t.error("rulesService#createRule error:",e),e})}},{key:"updateRule",value:function(n,i){return e({method:"PUT",url:"/api/rules/"+n,data:i})["catch"](function(e){throw t.error("rulesService#updateRule error:",e),e})}},{key:"removeRule",value:function(n){return e({method:"DELETE",url:"/api/rules/"+n})["catch"](function(e){throw t.error("rulesService#removeRule error:",e),e})}}]),i}())}i.$inject=["$log","$http"];var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t.exports=i},function(t,e,n){"use strict";var i=n(348);n(575);var r={template:'\n    <div class="condition-container">\n      <div class="condition-block">\n        <div class="mode-selector">\n          if\n          <select ng-model="conditionList.conditions.mode">\n            <option>all</option>\n            <option>any</option>\n          </select>\n          conditions are true\n        </div>\n\n        <div class="condition-row" ng-repeat="rule in conditionList.conditions.rules">\n          <select class="min-width"\n            ng-disabled="!rule.editing"\n            ng-model="rule.template"\n            ng-options="template.name for template in conditionList.templates track by template.id"\n            ></select>\n          <select class="min-width"\n            ng-disabled="!rule.editing"\n            ng-model="rule.channel"\n            ng-options="channel.name for channel in rule.template.channels track by channel.id"\n            ></select>\n          <select class="min-width" ng-disabled="!rule.editing" ng-model="rule.operator">\n            <option value="$lt"> &lt; </option>\n            <option value="$lte">&lt;=</option>\n            <option value="$gt">&gt;</option>\n            <option value="$gte">&gt;=</option>\n            <option value="$eq">=</option>\n            <option value="$in">Contains</option>\n            <option value="$nin">Doesn\'t contain</option>\n          </select>\n          <input type="text" ng-disabled="!rule.editing" ng-model="rule.value" placeholder="value"/>\n          <button class="button secondary-outline"\n            ng-class="{active: rule.editing}"\n            ng-click="conditionList.editRule(conditionList.conditions.rules, $index)">\n            Edit\n          </button>\n          <button class="button delete-outline" ng-click="conditionList.deleteRule(conditionList.conditions.rules, $index)">\n            Remove\n          </button>\n        </div>\n\n        <div class="condition-row">\n          <select class="min-width"\n            ng-model="conditionList.newRule.template"\n            ng-options="template.name for template in conditionList.templates track by template.id"\n            ></select>\n          <select class="min-width"\n            ng-disabled="!conditionList.newRule.template"\n            ng-model="conditionList.newRule.channel"\n            ng-options="channel.name for channel in conditionList.newRule.template.channels track by channel.id"\n            ></select>\n          <select class="min-width" ng-model="conditionList.newRule.operator">\n            <option value="$lt"> &lt; </option>\n            <option value="$lte">&lt;=</option>\n            <option value="$gt">&gt;</option>\n            <option value="$gte">&gt;=</option>\n            <option value="$eq">=</option>\n            <option value="$in">Contains</option>\n            <option value="$nin">Doesn\'t contain</option>\n          </select>\n          <input type="text" ng-model="conditionList.newRule.value" placeholder="value"/>\n          <button class="button primary-outline" type="submit"\n            ng-click="conditionList.addRule()"\n            ng-disabled="!conditionList.newRule.template || !conditionList.newRule.channel || !conditionList.newRule.value">\n            + Add\n          </button>\n        </div>\n      </div>\n\n      <div class="condition-container" ng-repeat="condition in conditionList.conditions.additionalRules">\n        <div class="mode-selector">\n          if\n          <select ng-model="condition.mode">\n            <option>all</option>\n            <option>any</option>\n          </select>\n          conditions are true\n        </div>\n\n        <div class="condition-row" ng-repeat="rule in condition.rules">\n          <select class="min-width"\n            ng-disabled="!rule.editing"\n            ng-model="rule.template"\n            ng-options="template.name for template in conditionList.templates track by template.id"\n            ></select>\n          <select class="min-width"\n            ng-disabled="!rule.editing"\n            ng-model="rule.channel"\n            ng-options="channel.name for channel in rule.template.channels track by channel.id"\n            ></select>\n          <select class="min-width" ng-disabled="!rule.editing" ng-model="rule.operator">\n            <option value="$lt"> &lt; </option>\n            <option value="$lte">&lt;=</option>\n            <option value="$gt">&gt;</option>\n            <option value="$gte">&gt;=</option>\n            <option value="$eq">=</option>\n            <option value="$in">Contains</option>\n            <option value="$nin">Doesn\'t contain</option>\n          </select>\n          <input type="text" ng-disabled="!rule.editing" ng-model="rule.value" placeholder="value"/>\n          <button class="button secondary-outline"\n            ng-class="{active: rule.editing}"\n            ng-click="conditionList.editRule(condition.rules, $index)">\n            Edit\n          </button>\n          <button class="button delete-outline" ng-click="conditionList.deleteRule(condition.rules, $index)">\n            Remove\n          </button>\n        </div>\n\n        <div class="condition-row">\n          <select class="min-width"\n            ng-model="conditionList.newAdditionalRules[$index].template"\n            ng-options="template.name for template in conditionList.templates track by template.id"\n            ></select>\n          <select class="min-width"\n            ng-disabled="!conditionList.newAdditionalRules[$index].template"\n            ng-model="conditionList.newAdditionalRules[$index].channel"\n            ng-options="channel.name for channel in conditionList.newAdditionalRules[$index].template.channels track by channel.id"\n            ></select>\n          <select class="min-width" ng-model="conditionList.newAdditionalRules[$index].operator">\n            <option value="$lt"> &lt; </option>\n            <option value="$lte">&lt;=</option>\n            <option value="$gt">&gt;</option>\n            <option value="$gte">&gt;=</option>\n            <option value="$eq">=</option>\n            <option value="$in">Contains</option>\n            <option value="$nin">Doesn\'t contain</option>\n          </select>\n          <input type="text" ng-model="conditionList.newAdditionalRules[$index].value" placeholder="value"/>\n          <button class="button primary-outline" type="submit"\n            ng-click="conditionList.addAdditionalRule($index)"\n            ng-disabled="!conditionList.newAdditionalRules[$index].template || !conditionList.newAdditionalRules[$index].channel || !conditionList.newAdditionalRules[$index].value">\n            + Add\n          </button>\n        </div>\n\n        <div>\n          <button class="button delete-outline" ng-click="conditionList.removeCombination($index)">Remove combination</button>\n        </div>\n      </div>\n\n      <div class="condition-container">\n        <button class="button primary-outline" type="submit"\n          ng-click="conditionList.addAdditionalCombination()">\n          + Add Combination\n        </button>\n      </div>\n    </div>\n  ',
controllerAs:"conditionList",bindings:{conditions:"=",templates:"<"},controller:["devicesService",function(t){var e=this,n={operator:"$eq",editing:!1};this.newAdditionalRules=[],this.newRule=i.clone(n),this.addRule=function(){e.conditions.rules.push(i.clone(e.newRule)),e.newRule=i.clone(n)},this.addAdditionalCombination=function(){e.conditions.additionalRules.push({mode:"any",rules:[]}),e.newAdditionalRules.push(i.clone(n))},this.addAdditionalRule=function(t){var r=i.clone(e.newAdditionalRules[t]);e.conditions.additionalRules[t].rules.push(r),e.newAdditionalRules[t]=i.clone(n)},this.removeCombination=function(t){e.conditions.additionalRules.splice(t,1),e.newAdditionalRules.rules.splice(t,1)},this.deleteRule=function(t,e){return t.splice(e,1)},this.editRule=function(t,e){t[e].editing=!t[e].editing}}]};t.exports=r},function(t,e){},,function(t,e,n){"use strict";n(578);var i=n(348),r={template:'\n    <section class="rules container" ng-hide="rules.selectedRule">\n      <header>\n        <h1 class="title">Rules List</h1>\n        <a class="pull-right new-button" ng-click="rules.createNewRule()">\n          <button type="button" class="button primary">New Rule</button>\n        </a>\n      </header>\n\n      <div class="content">\n        <div class="no-rules" ng-if="!rules.rules.length">\n          <h3>Your rules will appear here</h3>\n          <p>At the moment you haven\'t created any rules. You can make one by\n            <a href="" ng-click="rules.createNewRule()">clicking here</a>.</p>\n        </div>\n\n        <div ng-if="rules.rules.length">\n          <ul class="rule-list">\n            <li ng-repeat="rule in rules.rules track by $index">\n              <a class="rule-name" ng-click="rules.editRule(rule.id)">{{rule.ruleConfig.name}}</a>\n              <div class="pull-right">\n                <a ng-click="rules.editRule(rule.id)">\n                  <button type="button" class="button primary-outline">View rule</button>\n                </a>\n                <button class="button delete-outline" ng-click="rules.removeRule(rule.id)">Remove rule</button>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </section>\n\n    <section class="rules-manage container" ng-show="rules.selectedRule">\n      <header>\n        <h1 class="title">{{rules.title}}</h1>\n      </header>\n\n      <div class="content">\n        <form name="ruleForm" novalidate>\n          <input class="wide-input" type="text" placeholder="Name" name="ruleName"\n            ng-model="rules.rule.name" ng-required="true"/>\n\n          <div>\n            <h2 class="subtitle">\n              Conditions\n              <small class="error" ng-if="!rules.rule.conditions.rules.length">You need to specify at least one rule</small>\n            </h2>\n            <condition-list conditions="rules.rule.conditions" templates="rules.templates"></condition-list>\n          </div>\n\n          <div>\n            <h2 class="subtitle">\n              Actions\n              <small class="error" ng-if="!rules.rule.actions.salesforceCase.enabled">You have to select at least one action</small>\n            </h2>\n            <div class="actions">\n              <div class="form-row">\n                <label for="case">\n                  <input id="case" type="checkbox" ng-model="rules.rule.actions.salesforceCase.enabled"\n                    ng-change="rules.checkActions()" />\n                  <span>Create a salesforce case titled:</span>\n                  <input type="text" class="wide-input" ng-model="rules.rule.actions.salesforceCase.value"\n                    ng-required="rules.rule.actions.salesforceCase.enabled"/>\n                </label>\n              </div>\n\n              <!-- <div class="form-row">\n                <label for="opportunity">\n                  <input id="opportunity" type="checkbox" name=\'opportunity\' value=\'true\' ng-model=\'caseTypes.opportunity.selected\'/>\n                  Create a salesforce opportunity titled:\n                  <input id="emailName" type="text" class="large-input" name="opportunityName" ng-model=\'caseTypes.opportunity.value\'/>\n                </label>\n              </div>\n\n              <div class="form-row">\n                <label for="emailch">\n                  <input id="emailch" type="checkbox" name=\'emailch\' value=\'true\' ng-model=\'caseTypes.email.selected\'/>\n                  Send email to:\n                  <input id="email" type="text" class="large-input" name="email" ng-model=\'caseTypes.email.value\'/>\n                </label>\n              </div> -->\n            </div>\n          </div>\n\n          <div>\n            <button class="button primary" type="submit"\n              ng-click="rules.save()"\n              ng-disabled="ruleForm.$invalid || !rules.rule.conditions.rules.length || !rules.actionSelected">\n              Save\n            </button>\n            <button class="button" ng-click="rules.clearSelection()">Cancel</button>\n          </div>\n        </form>\n      </div>\n    </section>\n  ',controllerAs:"rules",controller:["rulesService","devicesService","blueprintService",function(t,e,n){function r(){return n.getDeviceTemplates().then(function(t){return i.map(t,function(t){return t.channelTemplates&&t.channelTemplates.push({name:"log:message",id:"_log"}),{id:t.id,name:t.name,channels:t.channelTemplates}})})}var o=this,s={name:"",conditions:{mode:"all",rules:[],additionalRules:[]},actions:{salesforceCase:{value:"",enabled:!1}}};Promise.all([r(),t.getRules()]).then(function(e){o.templates=e[0],o.rules=e[1].data,o.removeRule=function(e){t.removeRule(e).then(function(){t.getRules().then(function(t){o.rules=t.data})})},o.save=function(){return"new"===o.selectedRule?t.createRule(o.rule).then(function(){o.selectedRule=!1,t.getRules().then(function(t){o.rules=t.data})}):void t.updateRule(o.selectedRule,o.rule).then(function(){o.selectedRule=!1,t.getRules().then(function(t){o.rules=t.data})})},o.createNewRule=function(){o.title="New Rule",o.rule=i.clone(s),o.selectedRule="new"},o.editRule=function(e){o.title="Edit rule",o.selectedRule=e,t.getRule(e).then(function(t){o.rule=t.data.ruleConfig})},o.clearSelection=function(){o.selectedRule=!1},o.checkActions=function(){o.actionSelected=i.some(o.rule.actions,function(t){return t.enabled})}})}]};t.exports=r},function(t,e){},,function(t,e,n){"use strict";var i=n(581);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(310),o=n(582),s=n(583),a=n(587),c=n(590),l=n(593),u=n(596),h=n(602);n(605),n(606),n(609),n(611);var f=i.module("simulator.settings",[n(612),"ui.ace","ngTagsInput",r]).factory("settingsService",o).component("settings",s).component("editor",a).component("deviceForm",c).component("credentials",l).component("deviceConfig",u).component("imageUpload",h);t.exports=f},function(t,e){"use strict";function n(t,e,n){var i={updateDeviceConfig:function(n,i){return e({method:"PUT",url:"/api/device-config",data:i,params:{templateName:n}}).then(function(t){return t.data.config||{}})["catch"](function(e){throw t.error("settingsService#updateDeviceConfig error:",e),e})},getOriginalDeviceConfig:function(n){return e({method:"GET",url:"/api/device-config/original",params:{templateName:n}}).then(function(t){return t.data||{}})["catch"](function(e){throw t.error("settingsService#getOriginalDeviceConfig error:",e),e})}};return i.updateDeviceConfigDebounce=n.debounce(i.updateDeviceConfig.bind(i),500),i}n.$inject=["$log","$http","utils"],t.exports=n},function(t,e,n){"use strict";n(584);var i={template:'\n    <tabs>\n      <tab name="Credentials">\n        <credentials></credentials>\n      </tab>\n      <tab name="Device settings">\n        <device-config></device-config>\n      </tab>\n    </tabs>\n  ',controllerAs:"settings",controller:function(){}};t.exports=i},function(t,e){},,,function(t,e,n){"use strict";var i=n(348);n(588);var r={template:'\n    <div ui-ace="editor.aceOptions" ng-model="editor.json"></div>\n  ',controllerAs:"editor",bindings:{json:"=",error:"=",update:"&"},controller:["$scope",function(t){var e=this;this.error=!1,this.aceOptions={useWrapMode:!0,showGutter:!0,mode:"json",onLoad:function(t){t.setOptions({minLines:10,maxLines:1/0,autoScrollEditorIntoView:!0}),t.$blockScrolling=1/0},onChange:i.debounce(function(){if(e.error=!1,e.json.length)try{var t=JSON.parse(e.json);e.update({config:t})}catch(n){e.error=!0}},500)}}]};t.exports=r},function(t,e){},,function(t,e,n){"use strict";n(591);var i={template:'\n    <form novalidate>\n      <div class="form-row">\n        <label>Sensors</label>\n        <tags-input ng-model="deviceForm.sensors"\n          min-length="1"\n          placeholder="Add sensor"\n          replace-spaces-with-dashes="false">\n        </tags-input>\n      </div>\n      <div class="form-row header" ng-if="deviceForm.sensors.length">\n        <label></label>\n        <div class="labels">\n          <div class="label">Minimum</div>\n          <div class="label">Maximum</div>\n          <div class="label">Top [px]</div>\n          <div class="label">Left [px]</div>\n          <div class="label">Unit</div>\n        </div>\n      </div>\n      <div class="form-row sensors" ng-repeat="sensor in deviceForm.sensors track by sensor.text">\n        <label>{{ sensor.text }}</label>\n        <div class="inputs">\n            <input type="number" class="input-field" placeholder="Minimum" ng-model="sensor.min"/>\n            <input type="number" class="input-field" placeholder="Maximum" ng-model="sensor.max"/>\n            <input type="number" class="input-field" placeholder="Top [px]" ng-model="sensor.top"/>\n            <input type="number" class="input-field" placeholder="Left [px]" ng-model="sensor.left"/>\n            <input type="text" class="input-field" placeholder="Unit" ng-model="sensor.unit"/>\n        </div>\n      </div>\n    </form>\n  ',controllerAs:"deviceForm",bindings:{update:"&",image:"=",sensors:"="},controller:["$scope",function(t){var e=this;t.$watch(function(){return e},function(){e.update({deviceForm:e})},!0)}]};t.exports=i},function(t,e){},,function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(594);var r=n(348),o={template:'\n    <div class="credentials">\n      <div class="credential" ng-repeat="(name, value) in credentials.config">\n        <h2 class="name">\n          <span>{{ name }}</span>\n          <span ng-if="::value.link">\n            &nbsp;|&nbsp;\n            <a class="link" href="{{ ::value.link.url }}" target="_blank">{{ ::value.link.text }}</a>\n          </span>\n        </h2>\n        <ul class="credentials-list">\n          <li class="form-row" ng-repeat="(subname, object) in value.items">\n            <label>{{ ::subname }}</label>\n            <span ng-if="!object.isPassword">\n              <input type="text"\n                placeholder="Not available"\n                ng-model="object.text"\n                ng-click="credentials.select($event)"\n                ng-readonly="{{ !object.editable }}"/>\n              <span ng-show="object.text" copy="object.text">copy</span>\n            </span>\n            <span ng-if="object.isPassword">\n              <input class="pointer"\n                type="text"\n                value="Hidden. Click here to view."\n                ng-click="object.isPassword = false"\n                readonly/>\n            </span>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class="buttons">\n      <button class="button pull-right"\n        ng-disabled="credentials.saveIsDisabled()"\n        ng-click="credentials.saveSalesforceConfig()">\n        Update Salesforce credentials\n      </button>\n    </div>\n  ',controllerAs:"credentials",controller:["$scope","$window","applicationConfigService","CONFIG",function(t,e,n,o){var s,a=this;this.config={"Xively Account":{link:{text:"open the Xively platform",url:"https://"+o.account.idmHost.replace("id.","app.")+"/login?accountId="+o.account.accountId},items:(s={},i(s,"Account ID",{text:o.account.accountId}),i(s,"Username",{text:o.account.emailAddress}),i(s,"Password",{isPassword:!0,text:o.account.password}),s)},"Salesforce Settings":{items:{Username:{text:null,editable:!0},Password:{isPassword:!0,text:null,editable:!0},Token:{isPassword:!0,text:null,editable:!0}}}},n.get().then(function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r.merge(a.config,{"Salesforce Settings":{items:{Username:{text:t.salesforceUsername},Password:{text:t.salesforcePassword},Token:{text:t.salesforceToken}}}})}),this.saveIsDisabled=function(){var t=a.config["Salesforce Settings"].items,e=t.Username,n=t.Password,i=t.Token;return!(e.text&&n.text&&i.text)},this.saveSalesforceConfig=function(){var t=a.config["Salesforce Settings"].items,i=t.Username,r=t.Password,o=t.Token;a.saveIsDisabled()||n.update({salesforceUsername:i.text,salesforcePassword:r.text,salesforceToken:o.text}).then(function(){return e.location.reload(!0)})},this.select=function(t){var e=t.currentTarget;e.select()}}]};t.exports=o},function(t,e){},,function(t,e,n){"use strict";var i=n(348);n(597);var r=n(600),o=n(601),s={template:'\n    <div class="section" ng-show="!deviceConfig.editGlobal">\n      <image-upload image="deviceConfig.image"></image-upload>\n      <div class="selector">\n        <div class="mode">\n          <div ng-class="{active: deviceConfig.advancedMode}"\n               ng-click="deviceConfig.advancedMode = true">\n            '+r+'\n          </div>\n          <div ng-class="{active: !deviceConfig.advancedMode}"\n               ng-click="deviceConfig.advancedMode = false">\n            '+o+'\n          </div>\n        </div>\n        <select\n          ng-model="deviceConfig.options.selectedOption"\n          ng-change="deviceConfig.options.selectedOption.select()"\n          ng-options="template.name for template in deviceConfig.options.availableOptions track by template.id">\n        </select>\n\n        <div class="new-template" ng-if="deviceConfig.options.selectedOption.id === \'newdevice\'">\n          <div class="form-row">\n            <label>Template name</label>\n            <input type="text" placeholder="Enter tempalte name" ng-model="deviceConfig.newDeviceTemplate.tempalteName"/>\n          </div>\n          <div class="form-row">\n            <label>Organization</label>\n            <select\n              class="org-selector"\n              ng-model="deviceConfig.newDeviceTemplate.organization"\n              ng-options="org.name for org in deviceConfig.organizations track by org.id">\n            </select>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div class="section" ng-show="!deviceConfig.editGlobal">\n      <div class="form" ng-show="!deviceConfig.advancedMode">\n        <device-form\n          image="deviceConfig.image"\n          sensors="deviceConfig.sensors"\n          update="deviceConfig.update(deviceForm)">\n        </device-form>\n      </div>\n      <editor ng-show="deviceConfig.advancedMode"\n              json="deviceConfig.json"\n              error="deviceConfig.error"\n              update="deviceConfig.setNewConfig(config)"></editor>\n    </div>\n\n    <div class="section global-editor" ng-show="deviceConfig.editGlobal">\n      <editor json="deviceConfig.globalJson"\n              error="deviceConfig.error"\n              update="deviceConfig.updateGlobalConfig()"></editor>\n    </div>\n\n    <div class="section buttons">\n      <button type="button" class="button reset" ng-click="deviceConfig.resetConfig()">Reset to default</button>\n      <button type="button" class="button ok global-toggle" ng-click="deviceConfig.editGlobal = !deviceConfig.editGlobal">{{ deviceConfig.editGlobal ? \'Hide\' : \'Show\' }} global device code</button>\n      <button type="button" class="button ok pull-right" ng-click="deviceConfig.applyConfig()" ng-disabled="deviceConfig.error">OK</button>\n    </div>\n  ',controllerAs:"deviceConfig",controller:["$scope","$window","devicesService","settingsService","blueprintService","DEVICES_CONFIG",function(t,e,n,r,o,s){var a=this,c=this,l="Add New Device...";this.error=!1,o.getOrganizations().then(function(t){a.organizations=t}),o.getDeviceTemplates().then(function(t){var e=i.map(t,function(t,e){return{id:e,name:t.name,select:function(){var e={image:"",width:800,widgets:[],sensors:t.channelTemplates.filter(function(t){return"control"!==t.name}).reduce(function(t,e){return t[e.name]={min:0,max:100,wiggle:!1,unit:""},t},{})};c.setNewConfig(s[this.name]||e)}}}).filter(function(t){return"Default Device Template"!==t.name}),n=e[0];e[0].select(),e.unshift({id:"newdevice",name:l,select:function(){c.setNewConfig({image:"",width:800,height:700,widgets:[],defaultSensor:"",sensors:{}})}}),a.options={availableOptions:e,selectedOption:n}}),this.config={},t.$watch(function(){return a.config},function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a.json=JSON.stringify(t,null,2),a.options&&a.options.selectedOption&&a.options.selectedOption.name!==l&&r.updateDeviceConfigDebounce(a.options.selectedOption.name,a.json)},!0),t.$watch(function(){return a.json},function(){a.advancedMode&&!a.error&&r.updateDeviceConfigDebounce(a.options.selectedOption.name,a.json)},!0),this.update=function(e){t.$applyAsync(function(){if(a.config.image=e.image,a.config.width=a.config.width||800,a.config.height=a.config.height||700,e.sensors){var t=e.sensors.map(function(t){return t.text});a.config.sensors=i.pick(a.config.sensors,t),a.config.sensors=i.defaults(a.config.sensors,e.sensors.reduce(function(t,e,n){return t[e.text]={min:e.min,max:e.max,wiggle:!1,unit:e.unit,tooltip:{position:{top:e.top,left:e.left},labelPosition:{top:0,left:20},distance:100,direction:"bottom"}},t},{})),i.merge(a.config.sensors,e.sensors.reduce(function(t,e){t[e.text]={min:e.min,max:e.max,unit:e.unit};var n=void 0;return a.config.sensors[e.text].widget?n="widget":a.config.sensors[e.text].tooltip&&(n="tooltip"),n&&(t[e.text][n]={position:{top:e.top,left:e.left}}),t},{}))}})},this.applyConfig=function(){return a.options.selectedOption.name!==l?e.location.reload(!0):void o.createDeviceTemplate({templateName:a.newDeviceTemplate.tempalteName}).then(function(t){var e=a.sensors.map(function(t){return t.text});Promise.all([o.createDevice({organizationId:a.newDeviceTemplate.organization.id,deviceTemplateId:t.id,deviceTemplateName:t.name}),o.createChannelTemplates({channelNames:e,deviceTemplateId:t.id,deviceTemplateName:t.name})])}).then(function(){return r.updateDeviceConfigDebounce(a.newDeviceTemplate.tempalteName,a.json)}).then(function(){return e.location.reload(!0)})},this.resetConfig=function(){if(e.confirm("Do you really want to reset the device config?")){var t=a.editGlobal?"general":a.options.selectedOption.name;r.getOriginalDeviceConfig(t).then(function(t){a.editGlobal?a.globalJson=JSON.stringify(t,null,2):a.setNewConfig(t)})}},this.setNewConfig=function(e){e&&t.$applyAsync(function(){Object.keys(a.config).forEach(function(t){return delete a.config[t]}),i.assign(a.config,e),a.image=a.config.image,a.sensors=i.map(a.config.sensors||{},function(t,e){return{text:e,min:t.min,max:t.max,unit:t.unit,top:((t.tooltip||t.widget||{}).position||{}).top,left:((t.tooltip||t.widget||{}).position||{}).left}})})},this.editGlobal=!1,this.globalJson=JSON.stringify(s.general,null,2),this.updateGlobalConfig=function(){r.updateDeviceConfigDebounce("general",a.globalJson)}}]};t.exports=s},function(t,e){},,,function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 490 490"><path d="M438.7 104.3L337.4 3C337.3 3 334.8 0 329.7 0H58.5c-5.6 0-10.2 4.6-10.2 10.2v469.6c0 5.6 4.6 10.2 10.2 10.2h373.1c5.6 0 10.2-4.6 10.2-10.2V111.6C441.7 109.7 441.3 107 438.7 104.3zM406.9 101.4h-66.6l0-66.6L406.9 101.4zM421.3 469.6H68.6V20.4h251.3 0l0 91.2c0 5.6 4.6 10.2 10.2 10.2h91.2l0 0V469.6z"></path><polygon points="117 271.6 188.8 305.4 188.8 283.6 141.4 261.1 188.8 239.3 188.8 217.6 117 251.4 "></polygon><polygon points="203.7 336.3 224.5 336.3 286.5 200.9 265.5 200.9 "></polygon><polygon points="301.2 239.3 348.6 261.1 301.2 283.6 301.2 305.4 373 271.6 373 251.4 301.2 217.6 "></polygon></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 490 490"><path d="M438.7 104.3L337.4 3c-0.1-0.1-2.5-3-7.6-3H58.5c-5.6 0-10.2 4.6-10.2 10.2v469.6c0 5.6 4.6 10.2 10.2 10.2h373.1c5.6 0 10.2-4.6 10.2-10.2V111.6C441.7 109.7 441.3 107 438.7 104.3zM406.9 101.4h-66.6l0-66.6L406.9 101.4zM421.3 469.6H68.6V20.4h251.3l0 0 0 91.2c0 5.6 4.6 10.2 10.2 10.2h91.2l0 0L421.3 469.6 421.3 469.6z"></path><path d="M162.4 217.3h-49.2v-53.3h49.2V217.3zM121.2 209.3h33.1v-37.2h-33.1V209.3z"></path><path d="M162.5 318.6h-49.3v-53.5h49.3V318.6zM121.2 310.5h33.2v-37.3h-33.2V310.5z"></path><path d="M162.5 419.7h-49.3v-53.5h49.3V419.7zM121.2 411.7h33.2v-37.3h-33.2V411.7z"></path><rect x="208.9" y="184.7" width="168" height="12"></rect><rect x="208.9" y="285.9" width="168" height="12"></rect><rect x="208.9" y="387" width="168" height="12"></rect></svg>'},function(t,e,n){"use strict";n(603);var i={template:'\n    <div class="image-upload" ng-click="imageUpload.showModal()">\n      <div class="upload-field">\n        <img class="thumbnail" ng-show="imageUpload.image" ng-src="{{imageUpload.image}}" />\n      </div>\n      <small>Click to update image</small>\n    </div>\n    <modal name="imageUpload" width="580px" height="300px">\n      <tabs>\n        <tab name="From my computer">\n          <div class="drop-box"\n               ng-model="imageUpload.newFile"\n               ngf-select ngf-drop\n               ngf-drag-over-class="{pattern: \'image/*\', accept:\'accept\', reject:\'reject\', delay:100}"\n               ngf-accept="\'image/*\'" accept="image/*">\n               <span>Click to select or Drop Image</span>\n               <img ng-show="imageUpload.newFile" ngf-src="imageUpload.newFile"/>\n          </div>\n          <div class="buttons">\n            <button class="button" ng-disabled="!imageUpload.newFile" ng-click="imageUpload.uploadImage()">Upload</button>\n            <button class="button" ng-click="imageUpload.closeModal()">Cancel</button>\n          </div>\n        </tab>\n        <tab name="From the web">\n          <input type="text" class="input-field" placeholder="{{ imageUpload.image }}" ng-model="imageUpload.newImage"/>\n          <div class="buttons">\n            <button class="button" ng-disabled="!imageUpload.newImage" ng-click="imageUpload.applyImage()">OK</button>\n            <button class="button" ng-click="imageUpload.closeModal()">Cancel</button>\n          </div>\n        </tab>\n      </tabs>\n    </modal>\n  ',controllerAs:"imageUpload",bindings:{image:"="},controller:["settingsService","modalService","Upload",function(t,e,n){var i=this;this.showModal=function(){e.open("imageUpload")},this.closeModal=function(){e.close("imageUpload")},this.uploadImage=function(){n.upload({url:"/api/images",data:{file:i.newFile}}).then(function(t){i.image=t.data.imageUrl,i.closeModal()})},this.applyImage=function(){i.image=i.newImage,i.closeModal()}}]};t.exports=i},function(t,e){},,function(t,e){/*! ngTagsInput v3.0.0 License: MIT */
!function(){"use strict";var t={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,"delete":46,comma:188},e=9007199254740991,n=["text","email","url"],i=angular.module("ngTagsInput",[]);i.directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function(i,r,o,s,a){function c(t,e,n,i){var r,o,s,c={};return r=function(e){return a.safeToString(e[t.displayProperty])},o=function(e,n){e[t.displayProperty]=n},s=function(e){var i=r(e);return i&&i.length>=t.minLength&&i.length<=t.maxLength&&t.allowedTagsPattern.test(i)&&!a.findInObjectArray(c.items,e,t.keyProperty||t.displayProperty)&&n({$tag:e})},c.items=[],c.addText=function(t){var e={};return o(e,t),c.add(e)},c.add=function(n){var i=r(n);return t.replaceSpacesWithDashes&&(i=a.replaceSpacesWithDashes(i)),o(n,i),s(n)?(c.items.push(n),e.trigger("tag-added",{$tag:n})):i&&e.trigger("invalid-tag",{$tag:n}),n},c.remove=function(t){var n=c.items[t];return i({$tag:n})?(c.items.splice(t,1),c.clearSelection(),e.trigger("tag-removed",{$tag:n}),n):void 0},c.select=function(t){0>t?t=c.items.length-1:t>=c.items.length&&(t=0),c.index=t,c.selected=c.items[t]},c.selectPrior=function(){c.select(--c.index)},c.selectNext=function(){c.select(++c.index)},c.removeSelected=function(){return c.remove(c.index)},c.clearSelection=function(){c.selected=null,c.index=-1},c.clearSelection(),c}function l(t){return-1!==n.indexOf(t)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(t,n,i){t.events=a.simplePubSub(),s.load("tagsInput",t,n,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",l],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,e],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,e],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),t.tagList=new c(t.options,t.events,a.handleUndefinedResult(t.onTagAdding,!0),a.handleUndefinedResult(t.onTagRemoving,!0)),this.registerAutocomplete=function(){var e=i.find("input");return{addTag:function(e){return t.tagList.add(e)},focusInput:function(){e[0].focus()},getTags:function(){return t.tagList.items},getCurrentTagText:function(){return t.newTag.text()},getOptions:function(){return t.options},on:function(e,n){return t.events.on(e,n),this}}},this.registerTagItem=function(){return{getOptions:function(){return t.options},removeTag:function(e){t.disabled||t.tagList.remove(e)}}}}],link:function(e,n,s,c){var l,u=[t.enter,t.comma,t.space,t.backspace,t["delete"],t.left,t.right],h=e.tagList,f=e.events,d=e.options,p=n.find("input"),g=["minTags","maxTags","allowLeftoverText"];l=function(){c.$setValidity("maxTags",h.items.length<=d.maxTags),c.$setValidity("minTags",h.items.length>=d.minTags),c.$setValidity("leftoverText",!(!e.hasFocus&&!d.allowLeftoverText)||!e.newTag.text())},c.$isEmpty=function(t){return!t||!t.length},e.newTag={text:function(t){return angular.isDefined(t)?(e.text=t,void f.trigger("input-change",t)):e.text||""},invalid:null},e.track=function(t){return t[d.keyProperty||d.displayProperty]},e.$watch("tags",function(t){t?(h.items=a.makeObjectArray(t,d.displayProperty),e.tags=h.items):h.items=[]}),e.$watch("tags.length",function(){l(),c.$validate()}),s.$observe("disabled",function(t){e.disabled=t}),e.eventHandlers={input:{keydown:function(t){f.trigger("input-keydown",t)},focus:function(){e.hasFocus||(e.hasFocus=!0,f.trigger("input-focus"))},blur:function(){i(function(){var t=r.prop("activeElement"),i=t===p[0],o=n[0].contains(t);(i||!o)&&(e.hasFocus=!1,f.trigger("input-blur"))})},paste:function(t){t.getTextData=function(){var e=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData;return e?e.getData("text/plain"):o.clipboardData.getData("Text")},f.trigger("input-paste",t)}},host:{click:function(){e.disabled||p[0].focus()}},tag:{click:function(t){f.trigger("tag-clicked",{$tag:t})}}},f.on("tag-added",e.onTagAdded).on("invalid-tag",e.onInvalidTag).on("tag-removed",e.onTagRemoved).on("tag-clicked",e.onTagClicked).on("tag-added",function(){e.newTag.text("")}).on("tag-added tag-removed",function(){e.tags=h.items,c.$setDirty()}).on("invalid-tag",function(){e.newTag.invalid=!0}).on("option-change",function(t){-1!==g.indexOf(t.name)&&l()}).on("input-change",function(){h.clearSelection(),e.newTag.invalid=null}).on("input-focus",function(){n.triggerHandler("focus"),c.$setValidity("leftoverText",!0)}).on("input-blur",function(){d.addOnBlur&&!d.addFromAutocompleteOnly&&h.addText(e.newTag.text()),n.triggerHandler("blur"),l()}).on("input-keydown",function(n){var i,r,o,s,c=n.keyCode,l={};if(!a.isModifierOn(n)&&-1!==u.indexOf(c)){if(l[t.enter]=d.addOnEnter,l[t.comma]=d.addOnComma,l[t.space]=d.addOnSpace,i=!d.addFromAutocompleteOnly&&l[c],r=(c===t.backspace||c===t["delete"])&&h.selected,s=c===t.backspace&&0===e.newTag.text().length&&d.enableEditingLastTag,o=(c===t.backspace||c===t.left||c===t.right)&&0===e.newTag.text().length&&!d.enableEditingLastTag,i)h.addText(e.newTag.text());else if(s){var f;h.selectPrior(),f=h.removeSelected(),f&&e.newTag.text(f[d.displayProperty])}else r?h.removeSelected():o&&(c===t.left||c===t.backspace?h.selectPrior():c===t.right&&h.selectNext());(i||o||r||s)&&n.preventDefault()}}).on("input-paste",function(t){if(d.addOnPaste){var e=t.getTextData(),n=e.split(d.pasteSplitPattern);n.length>1&&(n.forEach(function(t){h.addText(t)}),t.preventDefault())}})}}}]),i.directive("tiTagItem",["tiUtil",function(t){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(e,n,i,r){var o=r.registerTagItem(),s=o.getOptions();e.$$template=s.template,e.$$removeTagSymbol=s.removeTagSymbol,e.$getDisplayText=function(){return t.safeToString(e.data[s.displayProperty])},e.$removeTag=function(){o.removeTag(e.$index)},e.$watch("$parent.$index",function(t){e.$index=t})}}}]),i.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(e,n,i,r,o,s){function a(t,e,n){var i,o,a,c={};return a=function(){return e.tagsInput.keyProperty||e.tagsInput.displayProperty},i=function(t,n){return t.filter(function(t){return!s.findInObjectArray(n,t,a(),function(t,n){return e.tagsInput.replaceSpacesWithDashes&&(t=s.replaceSpacesWithDashes(t),n=s.replaceSpacesWithDashes(n)),s.defaultComparer(t,n)})})},c.reset=function(){o=null,c.items=[],c.visible=!1,c.index=-1,c.selected=null,c.query=null},c.show=function(){e.selectFirstMatch?c.select(0):c.selected=null,c.visible=!0},c.load=s.debounce(function(n,l){c.query=n;var u=r.when(t({$query:n}));o=u,u.then(function(t){u===o&&(t=s.makeObjectArray(t.data||t,a()),t=i(t,l),c.items=t.slice(0,e.maxResultsToShow),c.items.length>0?c.show():c.reset())})},e.debounceDelay),c.selectNext=function(){c.select(++c.index)},c.selectPrior=function(){c.select(--c.index)},c.select=function(t){0>t?t=c.items.length-1:t>=c.items.length&&(t=0),c.index=t,c.selected=c.items[t],n.trigger("suggestion-selected",t)},c.reset(),c}function c(t,e){var n=t.find("li").eq(e),i=n.parent(),r=n.prop("offsetTop"),o=n.prop("offsetHeight"),s=i.prop("clientHeight"),a=i.prop("scrollTop");a>r?i.prop("scrollTop",r):r+o>s+a&&i.prop("scrollTop",r+o-s)}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(t,e,n){t.events=s.simplePubSub(),o.load("autoComplete",t,n,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),t.suggestionList=new a(t.source,t.options,t.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return t.options},getQuery:function(){return t.suggestionList.query}}}}],link:function(e,n,i,r){var o,a=[t.enter,t.tab,t.escape,t.up,t.down],l=e.suggestionList,u=r.registerAutocomplete(),h=e.options,f=e.events;h.tagsInput=u.getOptions(),o=function(t){return t&&t.length>=h.minLength||!t&&h.loadOnEmpty},e.addSuggestionByIndex=function(t){l.select(t),e.addSuggestion()},e.addSuggestion=function(){var t=!1;return l.selected&&(u.addTag(angular.copy(l.selected)),l.reset(),u.focusInput(),t=!0),t},e.track=function(t){return t[h.tagsInput.keyProperty||h.tagsInput.displayProperty]},u.on("tag-added tag-removed invalid-tag input-blur",function(){l.reset()}).on("input-change",function(t){o(t)?l.load(t,u.getTags()):l.reset()}).on("input-focus",function(){var t=u.getCurrentTagText();h.loadOnFocus&&o(t)&&l.load(t,u.getTags())}).on("input-keydown",function(n){var i=n.keyCode,r=!1;if(!s.isModifierOn(n)&&-1!==a.indexOf(i))return l.visible?i===t.down?(l.selectNext(),r=!0):i===t.up?(l.selectPrior(),r=!0):i===t.escape?(l.reset(),r=!0):(i===t.enter||i===t.tab)&&(r=e.addSuggestion()):i===t.down&&e.options.loadOnDownArrow&&(l.load(u.getCurrentTagText(),u.getTags()),r=!0),r?(n.preventDefault(),n.stopImmediatePropagation(),!1):void 0}),f.on("suggestion-selected",function(t){c(n,t)})}}}]),i.directive("tiAutocompleteMatch",["$sce","tiUtil",function(t,e){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(n,i,r,o){var s=o.registerAutocompleteMatch(),a=s.getOptions();n.$$template=a.template,n.$index=n.$parent.$index,n.$highlight=function(n){return a.highlightMatchedText&&(n=e.safeHighlight(n,s.getQuery())),t.trustAsHtml(n)},n.$getDisplayText=function(){return e.safeToString(n.data[a.displayProperty||a.tagsInput.displayProperty])}}}}]),i.directive("tiTranscludeAppend",function(){return function(t,e,n,i,r){r(function(t){e.append(t)})}}),i.directive("tiAutosize",["tagsInputConfig",function(t){return{restrict:"A",require:"ngModel",link:function(e,n,i,r){var o,s,a=t.getTextAutosizeThreshold();o=angular.element('<span class="input"></span>'),o.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),n.parent().append(o),s=function(t){var e,r=t;return angular.isString(r)&&0===r.length&&(r=i.placeholder),r&&(o.text(r),o.css("display",""),e=o.prop("offsetWidth"),o.css("display","none")),n.css("width",e?e+a+"px":""),t},r.$parsers.unshift(s),r.$formatters.unshift(s),i.$observe("placeholder",function(t){r.$modelValue||s(t)})}}}]),i.directive("tiBindAttrs",function(){return function(t,e,n){t.$watch(n.tiBindAttrs,function(t){angular.forEach(t,function(t,e){n.$set(e,t)})},!0)}}),i.provider("tagsInputConfig",function(){var t={},e={},n=3;this.setDefaults=function(e,n){return t[e]=n,this},this.setActiveInterpolation=function(t,n){return e[t]=n,this},this.setTextAutosizeThreshold=function(t){return n=t,this},this.$get=["$interpolate",function(i){var r={};return r[String]=function(t){return t},r[Number]=function(t){return parseInt(t,10)},r[Boolean]=function(t){return"true"===t.toLowerCase()},r[RegExp]=function(t){return new RegExp(t)},{load:function(n,o,s,a){var c=function(){return!0};o.options={},angular.forEach(a,function(a,l){var u,h,f,d,p,g;u=a[0],h=a[1],f=a[2]||c,d=r[u],p=function(){var e=t[n]&&t[n][l];return angular.isDefined(e)?e:h},g=function(t){o.options[l]=t&&f(t)?d(t):p()},e[n]&&e[n][l]?s.$observe(l,function(t){g(t),o.events.trigger("option-change",{name:l,newValue:t})}):g(s[l]&&i(s[l])(o.$parent))})},getTextAutosizeThreshold:function(){return n}}}]}),i.factory("tiUtil",["$timeout",function(t){var e={};return e.debounce=function(e,n){var i;return function(){var r=arguments;t.cancel(i),i=t(function(){e.apply(null,r)},n)}},e.makeObjectArray=function(t,e){if(!angular.isArray(t)||0===t.length||angular.isObject(t[0]))return t;var n=[];return t.forEach(function(t){var i={};i[e]=t,n.push(i)}),n},e.findInObjectArray=function(t,n,i,r){var o=null;return r=r||e.defaultComparer,t.some(function(t){return r(t[i],n[i])?(o=t,!0):void 0}),o},e.defaultComparer=function(t,n){return e.safeToString(t).toLowerCase()===e.safeToString(n).toLowerCase()},e.safeHighlight=function(t,n){function i(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!n)return t;t=e.encodeHTML(t),n=e.encodeHTML(n);var r=new RegExp("&[^;]+;|"+i(n),"gi");return t.replace(r,function(t){return t.toLowerCase()===n.toLowerCase()?"<em>"+t+"</em>":t})},e.safeToString=function(t){return angular.isUndefined(t)||null==t?"":t.toString().trim()},e.encodeHTML=function(t){return e.safeToString(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.handleUndefinedResult=function(t,e){return function(){var n=t.apply(null,arguments);return angular.isUndefined(n)?e:n}},e.replaceSpacesWithDashes=function(t){return e.safeToString(t).replace(/\s/g,"-")},e.isModifierOn=function(t){return t.shiftKey||t.ctrlKey||t.altKey||t.metaKey},e.simplePubSub=function(){var t={};return{on:function(e,n){return e.split(" ").forEach(function(e){t[e]||(t[e]=[]),t[e].push(n)}),this},trigger:function(n,i){var r=t[n]||[];return r.every(function(t){return e.handleUndefinedResult(t,!0)(i)}),this}}},e}]),i.run(["$templateCache",function(t){t.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),t.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),t.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),t.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}()},function(t,e,n){!function(){function t(t){var e=n;t&&(n[t]||(n[t]={}),e=n[t]),e.define&&e.define.packaged||(i.original=e.define,e.define=i,e.define.packaged=!0),e.acequire&&e.acequire.packaged||(o.original=e.acequire,e.acequire=o,e.acequire.packaged=!0)}var e="ace",n=function(){return this}();if(n||"undefined"==typeof window||(n=window),e||"undefined"==typeof acequirejs){var i=function(t,e,n){return"string"!=typeof t?void(i.original?i.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())):(2==arguments.length&&(n=e),void(i.modules[t]||(i.payloads[t]=n,i.modules[t]=null)))};i.modules={},i.payloads={};var r=function(t,e,n){if("string"==typeof e){var i=a(t,e);if(void 0!=i)return n&&n(),i}else if("[object Array]"===Object.prototype.toString.call(e)){for(var r=[],s=0,c=e.length;s<c;++s){var l=a(t,e[s]);if(void 0==l&&o.original)return;r.push(l)}return n&&n.apply(null,r)||!0}},o=function(t,e){var n=r("",t,e);return void 0==n&&o.original?o.original.apply(this,arguments):n},s=function(t,e){if(e.indexOf("!")!==-1){var n=e.split("!");return s(t,n[0])+"!"+s(t,n[1])}if("."==e.charAt(0)){var i=t.split("/").slice(0,-1).join("/");for(e=i+"/"+e;e.indexOf(".")!==-1&&r!=e;){var r=e;e=e.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return e},a=function(t,e){e=s(t,e);var n=i.modules[e];if(!n){if(n=i.payloads[e],"function"==typeof n){var o={},a={id:e,uri:"",exports:o,packaged:!0},c=function(t,n){return r(e,t,n)},l=n(c,o,a);o=l||a.exports,i.modules[e]=o,delete i.payloads[e]}n=i.modules[e]=o||n}return n};t(e)}}(),ace.define("ace/lib/regexp",["require","exports","module"],function(t,e,n){"use strict";function i(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function r(t,e,n){if(Array.prototype.indexOf)return t.indexOf(e,n);for(var i=n||0;i<t.length;i++)if(t[i]===e)return i;return-1}var o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},s=void 0===o.exec.call(/()??/,"")[1],a=function(){var t=/^/g;return o.test.call(t,""),!t.lastIndex}();a&&s||(RegExp.prototype.exec=function(t){var e,n,c=o.exec.apply(this,arguments);if("string"==typeof t&&c){if(!s&&c.length>1&&r(c,"")>-1&&(n=RegExp(this.source,o.replace.call(i(this),"g","")),o.replace.call(t.slice(c.index),n,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(c[t]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var l=1;l<c.length;l++)e=this._xregexp.captureNames[l-1],e&&(c[e]=c[l]);!a&&this.global&&!c[0].length&&this.lastIndex>c.index&&this.lastIndex--}return c},a||(RegExp.prototype.test=function(t){var e=o.exec.call(this,t);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(t,e,n){function i(){}function r(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(e){}}function o(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var n=p.call(arguments,1),r=function(){if(this instanceof r){var i=e.apply(this,n.concat(p.call(arguments)));return Object(i)===i?i:this}return e.apply(t,n.concat(p.call(arguments)))};return e.prototype&&(i.prototype=e.prototype,r.prototype=new i,i.prototype=null),r});var s,a,c,l,u,h=Function.prototype.call,f=Array.prototype,d=Object.prototype,p=f.slice,g=h.bind(d.toString),m=h.bind(d.hasOwnProperty);if((u=m(d,"__defineGetter__"))&&(s=h.bind(d.__defineGetter__),a=h.bind(d.__defineSetter__),c=h.bind(d.__lookupGetter__),l=h.bind(d.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function t(t){var e=new Array(t+2);return e[0]=e[1]=0,e}var e,n=[];if(n.splice.apply(n,t(20)),n.splice.apply(n,t(26)),e=n.length,n.splice(5,0,"XXX"),e+1==n.length,e+1==n.length)return!0}()){var v=Array.prototype.splice;Array.prototype.splice=function(t,e){return arguments.length?v.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(p.call(arguments,2))):[]}}else Array.prototype.splice=function(t,e){var n=this.length;t>0?t>n&&(t=n):void 0==t?t=0:t<0&&(t=Math.max(n+t,0)),t+e<n||(e=n-t);var i=this.slice(t,t+e),r=p.call(arguments,2),o=r.length;if(t===n)o&&this.push.apply(this,r);else{var s=Math.min(e,n-t),a=t+s,c=a+o-s,l=n-a,u=n-s;if(c<a)for(var h=0;h<l;++h)this[c+h]=this[a+h];else if(c>a)for(h=l;h--;)this[c+h]=this[a+h];if(o&&t===u)this.length=u,this.push.apply(this,r);else for(this.length=u+o,h=0;h<o;++h)this[t+h]=r[h]}return i};Array.isArray||(Array.isArray=function(t){return"[object Array]"==g(t)});var y=Object("a"),w="a"!=y[0]||!(0 in y);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=P(this),n=w&&"[object String]"==g(this)?this.split(""):e,i=arguments[1],r=-1,o=n.length>>>0;if("[object Function]"!=g(t))throw new TypeError;for(;++r<o;)r in n&&t.call(i,n[r],r,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=P(this),n=w&&"[object String]"==g(this)?this.split(""):e,i=n.length>>>0,r=Array(i),o=arguments[1];if("[object Function]"!=g(t))throw new TypeError(t+" is not a function");for(var s=0;s<i;s++)s in n&&(r[s]=t.call(o,n[s],s,e));return r}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n=P(this),i=w&&"[object String]"==g(this)?this.split(""):n,r=i.length>>>0,o=[],s=arguments[1];if("[object Function]"!=g(t))throw new TypeError(t+" is not a function");for(var a=0;a<r;a++)a in i&&(e=i[a],t.call(s,e,a,n)&&o.push(e));return o}),Array.prototype.every||(Array.prototype.every=function(t){var e=P(this),n=w&&"[object String]"==g(this)?this.split(""):e,i=n.length>>>0,r=arguments[1];if("[object Function]"!=g(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in n&&!t.call(r,n[o],o,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=P(this),n=w&&"[object String]"==g(this)?this.split(""):e,i=n.length>>>0,r=arguments[1];if("[object Function]"!=g(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in n&&t.call(r,n[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=P(this),n=w&&"[object String]"==g(this)?this.split(""):e,i=n.length>>>0;if("[object Function]"!=g(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,o=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o++];break}if(++o>=i)throw new TypeError("reduce of empty array with no initial value")}for(;o<i;o++)o in n&&(r=t.call(void 0,r,n[o],o,e));return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=P(this),n=w&&"[object String]"==g(this)?this.split(""):e,i=n.length>>>0;if("[object Function]"!=g(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,o=i-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do o in this&&(r=t.call(void 0,r,n[o],o,e));while(o--);return r}),Array.prototype.indexOf&&[0,1].indexOf(1,2)==-1||(Array.prototype.indexOf=function(t){var e=w&&"[object String]"==g(this)?this.split(""):P(this),n=e.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=o(arguments[1])),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)==-1||(Array.prototype.lastIndexOf=function(t){var e=w&&"[object String]"==g(this)?this.split(""):P(this),n=e.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in e&&t===e[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:d)}),!Object.getOwnPropertyDescriptor){var b="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,e){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(b+t);if(m(t,e)){var n,i,r;if(n={enumerable:!0,configurable:!0},u){var o=t.__proto__;t.__proto__=d;var i=c(t,e),r=l(t,e);if(t.__proto__=o,i||r)return i&&(n.get=i),r&&(n.set=r),n}return n.value=t[e],n}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var x;x=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var t={};for(var e in t)t[e]=null;return t.constructor=t.hasOwnProperty=t.propertyIsEnumerable=t.isPrototypeOf=t.toLocaleString=t.toString=t.valueOf=t.__proto__=null,t},Object.create=function(t,e){var n;if(null===t)n=x();else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,n=new i,n.__proto__=t}return void 0!==e&&Object.defineProperties(n,e),n}}if(Object.defineProperty){var A=r({}),E="undefined"==typeof document||r(document.createElement("div"));if(!A||!E)var _=Object.defineProperty}if(!Object.defineProperty||_){var S="Property description must be an object: ",C="Object.defineProperty called on non-object: ",M="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,e,n){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(C+t);if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError(S+n);if(_)try{return _.call(Object,t,e,n)}catch(i){}if(m(n,"value"))if(u&&(c(t,e)||l(t,e))){var r=t.__proto__;t.__proto__=d,delete t[e],t[e]=n.value,t.__proto__=r}else t[e]=n.value;else{if(!u)throw new TypeError(M);m(n,"get")&&s(t,e,n.get),m(n,"set")&&a(t,e,n.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,e){for(var n in e)m(e,n)&&Object.defineProperty(t,n,e[n]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch($){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var e="";m(t,e);)e+="?";t[e]=!0;var n=m(t,e);return delete t[e],n}),!Object.keys){var F=!0,T=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],L=T.length;for(var k in{toString:null})F=!1;Object.keys=function O(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var O=[];for(var e in t)m(t,e)&&O.push(e);if(F)for(var n=0,i=L;n<i;n++){var r=T[n];m(t,r)&&O.push(r)}return O}}Date.now||(Date.now=function(){return(new Date).getTime()});var R="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||R.trim()){R="["+R+"]";var D=new RegExp("^"+R+R+"*"),B=new RegExp(R+R+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(B,"")}}var P=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(t,e,n){"use strict";t("./regexp"),t("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(t,e,n){"use strict";var i="http://www.w3.org/1999/xhtml";return e.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||i,t):document.createElement(t)},e.hasCssClass=function(t,e){var n=(t.className||"").split(/\s+/g);return n.indexOf(e)!==-1},e.addCssClass=function(t,n){e.hasCssClass(t,n)||(t.className+=" "+n)},e.removeCssClass=function(t,e){for(var n=t.className.split(/\s+/g);;){var i=n.indexOf(e);if(i==-1)break;n.splice(i,1)}t.className=n.join(" ")},e.toggleCssClass=function(t,e){for(var n=t.className.split(/\s+/g),i=!0;;){var r=n.indexOf(e);if(r==-1)break;i=!1,n.splice(r,1)}return i&&n.push(e),t.className=n.join(" "),i},e.setCssClass=function(t,n,i){i?e.addCssClass(t,n):e.removeCssClass(t,n)},e.hasCssString=function(t,e){var n,i=0;if(e=e||document,e.createStyleSheet&&(n=e.styleSheets)){for(;i<n.length;)if(n[i++].owningElement.id===t)return!0}else if(n=e.getElementsByTagName("style"))for(;i<n.length;)if(n[i++].id===t)return!0;return!1},e.importCssString=function(t,n,i){if(i=i||document,n&&e.hasCssString(n,i))return null;var r;n&&(t+="\n/*# sourceURL=ace/css/"+n+" */"),i.createStyleSheet?(r=i.createStyleSheet(),r.cssText=t,n&&(r.owningElement.id=n)):(r=e.createElement("style"),r.appendChild(i.createTextNode(t)),n&&(r.id=n),e.getDocumentHead(i).appendChild(r))},e.importCssStylsheet=function(t,n){if(n.createStyleSheet)n.createStyleSheet(t);else{var i=e.createElement("link");i.rel="stylesheet",i.href=t,e.getDocumentHead(n).appendChild(i)}},e.getInnerWidth=function(t){return parseInt(e.computedStyle(t,"paddingLeft"),10)+parseInt(e.computedStyle(t,"paddingRight"),10)+t.clientWidth},e.getInnerHeight=function(t){return parseInt(e.computedStyle(t,"paddingTop"),10)+parseInt(e.computedStyle(t,"paddingBottom"),10)+t.clientHeight},e.scrollbarWidth=function(t){var n=e.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=e.createElement("ace_outer"),r=i.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",i.appendChild(n);var o=t.documentElement;o.appendChild(i);var s=n.offsetWidth;r.overflow="scroll";var a=n.offsetWidth;return s==a&&(a=i.clientWidth),o.removeChild(i),s-a},"undefined"==typeof document?void(e.importCssString=function(){}):(void 0!==window.pageYOffset?(e.getPageScrollTop=function(){return window.pageYOffset},e.getPageScrollLeft=function(){return window.pageXOffset}):(e.getPageScrollTop=function(){return document.body.scrollTop},e.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?e.computedStyle=function(t,e){return e?(window.getComputedStyle(t,"")||{})[e]||"":window.getComputedStyle(t,"")||{}}:e.computedStyle=function(t,e){return e?t.currentStyle[e]:t.currentStyle},e.setInnerHtml=function(t,e){var n=t.cloneNode(!1);return n.innerHTML=e,t.parentNode.replaceChild(n,t),n},"textContent"in document.documentElement?(e.setInnerText=function(t,e){t.textContent=e},e.getInnerText=function(t){return t.textContent}):(e.setInnerText=function(t,e){t.innerText=e},e.getInnerText=function(t){return t.innerText}),void(e.getParentWindow=function(t){return t.defaultView||t.parentWindow}))}),ace.define("ace/lib/oop",["require","exports","module"],function(t,e,n){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var n in e)t[n]=e[n];return t},e.implement=function(t,n){e.mixin(t,n)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(t,e,n){"use strict";t("./fixoldbrowsers");var i=t("./oop"),r=function(){var t,e,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in n.FUNCTION_KEYS)t=n.FUNCTION_KEYS[e].toLowerCase(),
n[t]=parseInt(e,10);for(e in n.PRINTABLE_KEYS)t=n.PRINTABLE_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n["return"],n.escape=n.esc,n.del=n["delete"],n[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)n.KEY_MODS[e]=t.filter(function(t){return e&n.KEY_MODS[t]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(e,r),e.keyCodeToString=function(t){var e=r[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(t,e,n){"use strict";if(e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS},"object"==typeof navigator){var i=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),r=navigator.userAgent;e.isWin="win"==i,e.isMac="mac"==i,e.isLinux="linux"==i,e.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,e.isOldGecko=e.isGecko&&parseInt((r.match(/rv\:(\d+)/)||[])[1],10)<4,e.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,e.isAIR=r.indexOf("AdobeAIR")>=0,e.isIPad=r.indexOf("iPad")>=0,e.isTouchPad=r.indexOf("TouchPad")>=0,e.isChromeOS=r.indexOf(" CrOS ")>=0}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,e,n){"use strict";function i(t,e,n){var i=l(e);if(!s.isMac&&a){if(a.OSKey&&(i|=8),a.altGr){if(3==(3&i))return;a.altGr=0}if(18===n||17===n){var r="location"in e?e.location:e.keyLocation;if(17===n&&1===r)1==a[n]&&(c=e.timeStamp);else if(18===n&&3===i&&2===r){var u=e.timeStamp-c;u<50&&(a.altGr=!0)}}}if(n in o.MODIFIER_KEYS&&(n=-1),8&i&&n>=91&&n<=93&&(n=-1),!i&&13===n){var r="location"in e?e.location:e.keyLocation;if(3===r&&(t(e,i,-n),e.defaultPrevented))return}if(s.isChromeOS&&8&i){if(t(e,i,n),e.defaultPrevented)return;i&=-9}return!!(i||n in o.FUNCTION_KEYS||n in o.PRINTABLE_KEYS)&&t(e,i,n)}function r(){a=Object.create(null),a.count=0,a.lastT=0}var o=t("./keys"),s=t("./useragent"),a=null,c=0;e.addListener=function(t,e,n){if(t.addEventListener)return t.addEventListener(e,n,!1);if(t.attachEvent){var i=function(){n.call(t,window.event)};n._wrapper=i,t.attachEvent("on"+e,i)}},e.removeListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):void(t.detachEvent&&t.detachEvent("on"+e,n._wrapper||n))},e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||s.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.preventDefault?t.button:{1:0,2:2,4:1}[t.button]},e.capture=function(t,n,i){function r(t){n&&n(t),i&&i(t),e.removeListener(document,"mousemove",n,!0),e.removeListener(document,"mouseup",r,!0),e.removeListener(document,"dragstart",r,!0)}return e.addListener(document,"mousemove",n,!0),e.addListener(document,"mouseup",r,!0),e.addListener(document,"dragstart",r,!0),r},e.addTouchMoveListener=function(t,n){if("ontouchmove"in t){var i,r;e.addListener(t,"touchstart",function(t){var e=t.changedTouches[0];i=e.clientX,r=e.clientY}),e.addListener(t,"touchmove",function(t){var e=1,o=t.changedTouches[0];t.wheelX=-(o.clientX-i)/e,t.wheelY=-(o.clientY-r)/e,i=o.clientX,r=o.clientY,n(t)})}},e.addMouseWheelListener=function(t,n){"onmousewheel"in t?e.addListener(t,"mousewheel",function(t){var e=8;void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/e,t.wheelY=-t.wheelDeltaY/e):(t.wheelX=0,t.wheelY=-t.wheelDelta/e),n(t)}):"onwheel"in t?e.addListener(t,"wheel",function(t){var e=.35;switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=t.deltaX*e||0,t.wheelY=t.deltaY*e||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}n(t)}):e.addListener(t,"DOMMouseScroll",function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),n(t)})},e.addMultiMouseDownListener=function(t,n,i,r){function o(t){if(0!==e.getButton(t)?h=0:t.detail>1?(h++,h>4&&(h=1)):h=1,s.isIE){var o=Math.abs(t.clientX-c)>5||Math.abs(t.clientY-l)>5;u&&!o||(h=1),u&&clearTimeout(u),u=setTimeout(function(){u=null},n[h-1]||600),1==h&&(c=t.clientX,l=t.clientY)}if(t._clicks=h,i[r]("mousedown",t),h>4)h=0;else if(h>1)return i[r](f[h],t)}function a(t){h=2,u&&clearTimeout(u),u=setTimeout(function(){u=null},n[h-1]||600),i[r]("mousedown",t),i[r](f[h],t)}var c,l,u,h=0,f={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(t)||(t=[t]),t.forEach(function(t){e.addListener(t,"mousedown",o),s.isOldIE&&e.addListener(t,"dblclick",a)})};var l=!s.isMac||!s.isOpera||"KeyboardEvent"in window?function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)}:function(t){return 0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0)};if(e.getModifierString=function(t){return o.KEY_MODS[l(t)]},e.addCommandKeyListener=function(t,n){var o=e.addListener;if(s.isOldGecko||s.isOpera&&!("KeyboardEvent"in window)){var c=null;o(t,"keydown",function(t){c=t.keyCode}),o(t,"keypress",function(t){return i(n,t,c)})}else{var l=null;o(t,"keydown",function(t){var e=t.keyCode;a[e]=(a[e]||0)+1,91==e||92==e?a.OSKey=!0:a.OSKey&&t.timeStamp-a.lastT>200&&1==a.count&&r(),1==a[e]&&a.count++,a.lastT=t.timeStamp;var o=i(n,t,e);return l=t.defaultPrevented,o}),o(t,"keypress",function(t){l&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),l=null)}),o(t,"keyup",function(t){var e=t.keyCode;a[e]?a.count=Math.max(a.count-1,0):r(),91!=e&&92!=e||(a.OSKey=!1),a[e]=null}),a||(r(),o(window,"focus",r))}},"object"==typeof window&&window.postMessage&&!s.isOldIE){var u=1;e.nextTick=function(t,n){n=n||window;var i="zero-timeout-message-"+u;e.addListener(n,"message",function r(o){o.data==i&&(e.stopPropagation(o),e.removeListener(n,"message",r),t())}),n.postMessage(i,"*")}}e.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame?e.nextFrame=e.nextFrame.bind(window):e.nextFrame=function(t){setTimeout(t,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(t,e,n){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>=1)&&(t+=t);return n};var i=/^\s\s*/,r=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(i,"")},e.stringTrimRight=function(t){return t.replace(r,"")},e.copyObject=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.copyArray=function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&"object"==typeof t[n]?e[n]=this.copyObject(t[n]):e[n]=t[n];return e},e.deepCopy=function o(t){if("object"!=typeof t||!t)return t;var e;if(Array.isArray(t)){e=[];for(var n=0;n<t.length;n++)e[n]=o(t[n]);return e}var i=t.constructor;if(i===RegExp)return t;e=i();for(var n in t)e[n]=o(t[n]);return e},e.arrayToMap=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var n in t)e[n]=t[n];return e},e.arrayRemove=function(t,e){for(var n=0;n<=t.length;n++)e===t[n]&&t.splice(n,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return t.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var n=[];return t.replace(e,function(t){n.push({offset:arguments[arguments.length-2],length:t.length})}),n},e.deferredCall=function(t){var e=null,n=function(){e=null,t()},i=function(t){return i.cancel(),e=setTimeout(n,t||0),i};return i.schedule=i,i.call=function(){return this.cancel(),t(),i},i.cancel=function(){return clearTimeout(e),e=null,i},i.isPending=function(){return e},i},e.delayedCall=function(t,e){var n=null,i=function(){n=null,t()},r=function(t){null==n&&(n=setTimeout(i,t||e))};return r.delay=function(t){n&&clearTimeout(n),n=setTimeout(i,t||e)},r.schedule=r,r.call=function(){this.cancel(),t()},r.cancel=function(){n&&clearTimeout(n),n=null},r.isPending=function(){return n},r}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("../lib/dom"),s=t("../lib/lang"),a=r.isChrome<18,c=r.isIE,l=function(t,e){function n(t){if(!g){if(g=!0,$)e=0,n=t?0:h.value.length-1;else var e=t?2:1,n=2;try{h.setSelectionRange(e,n)}catch(i){}g=!1}}function l(){g||(h.value=f,r.isWebKit&&x.schedule())}function u(){clearTimeout(j),j=setTimeout(function(){m&&(h.style.cssText=m,m=""),null==e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=!0,e.renderer.$moveTextAreaToCursor())},r.isOldIE?200:0)}var h=o.createElement("textarea");h.className="ace_text-input",r.isTouchPad&&h.setAttribute("x-palm-disable-auto-cap",!0),h.setAttribute("wrap","off"),h.setAttribute("autocorrect","off"),h.setAttribute("autocapitalize","off"),h.setAttribute("spellcheck",!1),h.style.opacity="0",r.isOldIE&&(h.style.top="-1000px"),t.insertBefore(h,t.firstChild);var f="",d=!1,p=!1,g=!1,m="",v=!0;try{var y=document.activeElement===h}catch(w){}i.addListener(h,"blur",function(t){e.onBlur(t),y=!1}),i.addListener(h,"focus",function(t){y=!0,e.onFocus(t),n()}),this.focus=function(){if(m)return h.focus();var t=h.style.top;h.style.position="fixed",h.style.top="0px",h.focus(),setTimeout(function(){h.style.position="","0px"==h.style.top&&(h.style.top=t)},0)},this.blur=function(){h.blur()},this.isFocused=function(){return y};var b=s.delayedCall(function(){y&&n(v)}),x=s.delayedCall(function(){g||(h.value=f,y&&n())});r.isWebKit||e.addEventListener("changeSelection",function(){e.selection.isEmpty()!=v&&(v=!v,b.schedule())}),l(),y&&e.onFocus();var A=function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length};if(!h.setSelectionRange&&h.createTextRange&&(h.setSelectionRange=function(t,e){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",e),n.select()},A=function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){}return!(!e||e.parentElement()!=t)&&e.text==t.value}),r.isOldIE){var E=!1,_=function(t){if(!E){var e=h.value;if(!g&&e&&e!=f){if(t&&e==f[0])return S.schedule();T(e),E=!0,l(),E=!1}}},S=s.delayedCall(_);i.addListener(h,"propertychange",_);var C={13:1,27:1};i.addListener(h,"keyup",function(t){return!g||h.value&&!C[t.keyCode]||setTimeout(N,0),(h.value.charCodeAt(0)||0)<129?S.call():void(g?I():O())}),i.addListener(h,"keydown",function(t){S.schedule(50)})}var M=function(t){d?d=!1:A(h)?(e.selectAll(),n()):$&&n(e.selection.isEmpty())},$=null;this.setInputHandler=function(t){$=t},this.getInputHandler=function(){return $};var F=!1,T=function(t){$&&(t=$(t),$=null),p?(n(),t&&e.onPaste(t),p=!1):t==f.charAt(0)?F?e.execCommand("del",{source:"ace"}):e.execCommand("backspace",{source:"ace"}):(t.substring(0,2)==f?t=t.substr(2):t.charAt(0)==f.charAt(0)?t=t.substr(1):t.charAt(t.length-1)==f.charAt(0)&&(t=t.slice(0,-1)),t.charAt(t.length-1)==f.charAt(0)&&(t=t.slice(0,-1)),t&&e.onTextInput(t)),F&&(F=!1)},L=function(t){if(!g){var e=h.value;T(e),l()}},k=function(t,e){var n=t.clipboardData||window.clipboardData;if(n&&!a){var i=c?"Text":"text/plain";return e?n.setData(i,e)!==!1:n.getData(i)}},R=function(t,r){var o=e.getCopyText();return o?void(k(t,o)?(r?e.onCut():e.onCopy(),i.preventDefault(t)):(d=!0,h.value=o,h.select(),setTimeout(function(){d=!1,l(),n(),r?e.onCut():e.onCopy()}))):i.preventDefault(t)},D=function(t){R(t,!0)},B=function(t){R(t,!1)},P=function(t){var o=k(t);"string"==typeof o?(o&&e.onPaste(o,t),r.isIE&&setTimeout(n),i.preventDefault(t)):(h.value="",p=!0)};i.addCommandKeyListener(h,e.onCommandKey.bind(e)),i.addListener(h,"select",M),i.addListener(h,"input",L),i.addListener(h,"cut",D),i.addListener(h,"copy",B),i.addListener(h,"paste",P),"oncut"in h&&"oncopy"in h&&"onpaste"in h||i.addListener(t,"keydown",function(t){if((!r.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:B(t);break;case 86:P(t);break;case 88:D(t)}});var O=function(t){g||!e.onCompositionStart||e.$readOnly||(g={},e.onCompositionStart(),setTimeout(I,0),e.on("mousedown",N),e.selection.isEmpty()||(e.insert(""),e.session.markUndoGroup(),e.selection.clearSelection()),e.session.markUndoGroup())},I=function(){if(g&&e.onCompositionUpdate&&!e.$readOnly){var t=h.value.replace(/\x01/g,"");if(g.lastValue!==t&&(e.onCompositionUpdate(t),g.lastValue&&e.undo(),g.lastValue=t,g.lastValue)){var n=e.selection.getRange();e.insert(g.lastValue),e.session.markUndoGroup(),g.range=e.selection.getRange(),e.selection.setRange(n),e.selection.clearSelection()}}},N=function(t){if(e.onCompositionEnd&&!e.$readOnly){var n=g;g=!1;var i=setTimeout(function(){i=null;var t=h.value.replace(/\x01/g,"");g||(t==n.lastValue?l():!n.lastValue&&t&&(l(),T(t)))});$=function(t){return i&&clearTimeout(i),t=t.replace(/\x01/g,""),t==n.lastValue?"":(n.lastValue&&i&&e.undo(),t)},e.onCompositionEnd(),e.removeListener("mousedown",N),"compositionend"==t.type&&n.range&&e.selection.setRange(n.range)}},U=s.delayedCall(I,50);i.addListener(h,"compositionstart",O),r.isGecko?i.addListener(h,"text",function(){U.schedule()}):(i.addListener(h,"keyup",function(){U.schedule()}),i.addListener(h,"keydown",function(){U.schedule()})),i.addListener(h,"compositionend",N),this.getElement=function(){return h},this.setReadOnly=function(t){h.readOnly=t},this.onContextMenu=function(t){F=!0,n(e.selection.isEmpty()),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,n){if(n||!r.isOldIE){m||(m=h.style.cssText),h.style.cssText=(n?"z-index:100000;":"")+"height:"+h.style.height+";"+(r.isIE?"opacity:0.1;":"");var s=e.container.getBoundingClientRect(),a=o.computedStyle(e.container),c=s.top+(parseInt(a.borderTopWidth)||0),l=s.left+(parseInt(s.borderLeftWidth)||0),f=s.bottom-c-h.clientHeight-2,d=function(t){h.style.left=t.clientX-l-2+"px",h.style.top=Math.min(t.clientY-c-2,f)+"px"};d(t),"mousedown"==t.type&&(e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=null),clearTimeout(j),r.isWin&&!r.isOldIE&&i.capture(e.container,d,u))}},this.onContextMenuClose=u;var j,z=function(t){e.textInput.onContextMenu(t),u()};i.addListener(h,"mouseup",z),i.addListener(h,"mousedown",function(t){t.preventDefault(),u()}),i.addListener(e.renderer.scroller,"contextmenu",z),i.addListener(h,"contextmenu",z)};e.TextInput=l}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";function i(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t)),e.setDefaultHandler("touchmove",this.onTouchMove.bind(t));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(e){t[e]=this[e]},this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function r(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}function o(t,e){if(t.start.row==t.end.row)var n=2*e.column-t.start.column-t.end.column;else if(t.start.row!=t.end.row-1||t.start.column||t.end.column)var n=2*e.row-t.start.row-t.end.row;else var n=e.column-4;return n<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}var s=(t("../lib/dom"),t("../lib/event"),t("../lib/useragent"),0);(function(){this.onMouseDown=function(t){var e=t.inSelection(),n=t.getDocumentPosition();this.mousedownEvent=t;var i=this.editor,r=t.getButton();if(0!==r){var o=i.getSelectionRange(),s=o.isEmpty();return i.$blockScrolling++,(s||1==r)&&i.selection.moveToPosition(n),i.$blockScrolling--,void(2==r&&i.textInput.onContextMenu(t.domEvent))}return this.mousedownEvent.time=Date.now(),!e||i.isFocused()||(i.focus(),!this.$focusTimout||this.$clickSelection||i.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(n,t.domEvent._clicks>1),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;n.$blockScrolling++,this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(t):e||n.selection.moveToPosition(t),e||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"),n.$blockScrolling--},this.select=function(){var t,e=this.editor,n=e.renderer.screenToTextCoordinates(this.x,this.y);if(e.$blockScrolling++,this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(i==-1)t=this.$clickSelection.end;else if(1==i)t=this.$clickSelection.start;else{var r=o(this.$clickSelection,n);n=r.cursor,t=r.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(n),e.$blockScrolling--,e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),r=n.selection[t](i.row,i.column);if(n.$blockScrolling++,this.$clickSelection){var s=this.$clickSelection.comparePoint(r.start),a=this.$clickSelection.comparePoint(r.end);if(s==-1&&a<=0)e=this.$clickSelection.end,r.end.row==i.row&&r.end.column==i.column||(i=r.start);else if(1==a&&s>=0)e=this.$clickSelection.start,r.start.row==i.row&&r.start.column==i.column||(i=r.end);else if(s==-1&&1==a)i=r.end,e=r.start;else{var c=o(this.$clickSelection,i);i=c.cursor,e=c.anchor}n.selection.setSelectionAnchor(e.row,e.column)}n.selection.selectToPosition(i),n.$blockScrolling--,n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),e=Date.now();(t>s||e-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),n=this.editor,i=n.session,r=i.getBracketRange(e);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=n.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(e.row,e.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=t.domEvent.timeStamp,n=e-(this.$lastScrollTime||0),i=this.editor,r=i.renderer.isScrollableBy(t.wheelX*t.speed,t.wheelY*t.speed);return r||n<200?(this.$lastScrollTime=e,i.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}},this.onTouchMove=function(t){var e=t.domEvent.timeStamp,n=e-(this.$lastScrollTime||0),i=this.editor,r=i.renderer.isScrollableBy(t.wheelX*t.speed,t.wheelY*t.speed);if(r||n<200)return this.$lastScrollTime=e,i.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()}}).call(i.prototype),e.DefaultHandlers=i}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(t,e,n){"use strict";function i(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}var r=(t("./lib/oop"),t("./lib/dom"));(function(){this.$init=function(){return this.$element=r.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){r.setInnerText(this.getElement(),t)},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){r.addCssClass(this.getElement(),t)},this.show=function(t,e,n){null!=t&&this.setText(t),null!=e&&null!=n&&this.setPosition(e,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(i.prototype),e.Tooltip=i}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(t,e,n){"use strict";function i(t){function e(){var e=h.getDocumentPosition().row,r=c.$annotations[e];if(!r)return n();var o=s.session.getLength();if(e==o){var a=s.renderer.pixelToScreenCoordinates(0,h.y).row,u=h.$pos;if(a>s.session.documentToScreenRow(u.row,u.column))return n()}if(f!=r)if(f=r.text.join("<br/>"),l.setHtml(f),l.show(),s.on("mousewheel",n),t.$tooltipFollowsMouse)i(h);else{var d=h.domEvent.target,p=d.getBoundingClientRect(),g=l.getElement().style;g.left=p.right+"px",g.top=p.bottom+"px"}}function n(){u&&(u=clearTimeout(u)),f&&(l.hide(),f=null,s.removeEventListener("mousewheel",n))}function i(t){l.setPosition(t.x,t.y)}var s=t.editor,c=s.renderer.$gutterLayer,l=new r(s.container);t.editor.setDefaultHandler("guttermousedown",function(e){if(s.isFocused()&&0==e.getButton()){var n=c.getRegion(e);if("foldWidgets"!=n){var i=e.getDocumentPosition().row,r=s.session.selection;if(e.getShiftKey())r.selectTo(i,0);else{if(2==e.domEvent.detail)return s.selectAll(),e.preventDefault();t.$clickSelection=s.selection.getLineRange(i)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}}});var u,h,f;t.editor.setDefaultHandler("guttermousemove",function(r){var s=r.domEvent.target||r.domEvent.srcElement;return o.hasCssClass(s,"ace_fold-widget")?n():(f&&t.$tooltipFollowsMouse&&i(r),h=r,void(u||(u=setTimeout(function(){u=null,h&&!t.isMousePressed?e():n()},50))))}),a.addListener(s.renderer.$gutter,"mouseout",function(t){h=null,f&&!u&&(u=setTimeout(function(){u=null,n()},50))}),s.on("changeSession",n)}function r(t){c.call(this,t)}var o=t("../lib/dom"),s=t("../lib/oop"),a=t("../lib/event"),c=t("../tooltip").Tooltip;s.inherits(r,c),function(){this.setPosition=function(t,e){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=this.getWidth(),o=this.getHeight();t+=15,e+=15,t+r>n&&(t-=t+r-n),e+o>i&&(e-=20+o),c.prototype.setPosition.call(this,t,e)}}.call(r.prototype),e.GutterHandler=i}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor,e=t.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=e.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,e,n){"use strict";function i(t){function e(t,e){var n=Date.now(),i=!e||t.row!=e.row,o=!e||t.column!=e.column;if(!$||i||o)m.$blockScrolling+=1,m.moveCursorToPosition(t),m.$blockScrolling-=1,$=n,F={x:b,y:x};else{var s=r(F.x,F.y,b,x);s>u?$=null:n-$>=l&&(m.renderer.scrollCursorIntoView(),$=null)}}function n(t,e){var n=Date.now(),i=m.renderer.layerConfig.lineHeight,r=m.renderer.layerConfig.characterWidth,o=m.renderer.scroller.getBoundingClientRect(),s={x:{left:b-o.left,right:o.right-b},y:{top:x-o.top,bottom:o.bottom-x}},a=Math.min(s.x.left,s.x.right),l=Math.min(s.y.top,s.y.bottom),u={row:t.row,column:t.column};a/r<=2&&(u.column+=s.x.left<s.x.right?-3:2),l/i<=1&&(u.row+=s.y.top<s.y.bottom?-1:1);var h=t.row!=u.row,f=t.column!=u.column,d=!e||t.row!=e.row;h||f&&!d?M?n-M>=c&&m.renderer.scrollCursorIntoView(u):M=n:M=null}function i(){var t=_;_=m.renderer.screenToTextCoordinates(b,x),e(_,t),n(_,t)}function h(){E=m.selection.toOrientedRange(),w=m.session.addMarker(E,"ace_selection",m.getSelectionStyle()),m.clearSelection(),m.isFocused()&&m.renderer.$cursorLayer.setBlinking(!1),clearInterval(A),i(),A=setInterval(i,20),L=0,s.addListener(document,"mousemove",d)}function f(){clearInterval(A),m.session.removeMarker(w),w=null,m.$blockScrolling+=1,m.selection.fromOrientedRange(E),m.$blockScrolling-=1,m.isFocused()&&!C&&m.renderer.$cursorLayer.setBlinking(!m.getReadOnly()),E=null,_=null,L=0,M=null,$=null,s.removeListener(document,"mousemove",d)}function d(){null==k&&(k=setTimeout(function(){null!=k&&w&&f()},20))}function p(t){var e=t.types;return!e||Array.prototype.some.call(e,function(t){return"text/plain"==t||"Text"==t})}function g(t){var e=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],i=a.isMac?t.altKey:t.ctrlKey,r="uninitialized";try{r=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var o="none";return i&&e.indexOf(r)>=0?o="copy":n.indexOf(r)>=0?o="move":e.indexOf(r)>=0&&(o="copy"),o}var m=t.editor,v=o.createElement("img");v.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.isOpera&&(v.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var y=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];y.forEach(function(e){t[e]=this[e]},this),m.addEventListener("mousedown",this.onMouseDown.bind(t));var w,b,x,A,E,_,S,C,M,$,F,T=m.container,L=0;this.onDragStart=function(t){if(this.cancelDrag||!T.draggable){var e=this;return setTimeout(function(){e.startSelect(),e.captureMouse(t)},0),t.preventDefault()}E=m.getSelectionRange();var n=t.dataTransfer;n.effectAllowed=m.getReadOnly()?"copy":"copyMove",a.isOpera&&(m.container.appendChild(v),v.scrollTop=0),n.setDragImage&&n.setDragImage(v,0,0),a.isOpera&&m.container.removeChild(v),n.clearData(),n.setData("Text",m.session.getTextRange()),C=!0,this.setState("drag")},this.onDragEnd=function(t){if(T.draggable=!1,C=!1,this.setState(null),!m.getReadOnly()){var e=t.dataTransfer.dropEffect;S||"move"!=e||m.session.remove(m.getSelectionRange()),m.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){if(!m.getReadOnly()&&p(t.dataTransfer))return b=t.clientX,x=t.clientY,w||h(),L++,t.dataTransfer.dropEffect=S=g(t),s.preventDefault(t)},this.onDragOver=function(t){if(!m.getReadOnly()&&p(t.dataTransfer))return b=t.clientX,x=t.clientY,w||(h(),L++),null!==k&&(k=null),t.dataTransfer.dropEffect=S=g(t),s.preventDefault(t)},this.onDragLeave=function(t){if(L--,L<=0&&w)return f(),S=null,s.preventDefault(t)},this.onDrop=function(t){if(_){var e=t.dataTransfer;if(C)switch(S){case"move":E=E.contains(_.row,_.column)?{start:_,end:_}:m.moveText(E,_);break;case"copy":E=m.moveText(E,_,!0)}else{var n=e.getData("Text");E={start:_,end:m.session.insert(_,n)},m.focus(),S=null}return f(),s.preventDefault(t)}},s.addListener(T,"dragstart",this.onDragStart.bind(t)),s.addListener(T,"dragend",this.onDragEnd.bind(t)),s.addListener(T,"dragenter",this.onDragEnter.bind(t)),s.addListener(T,"dragover",this.onDragOver.bind(t)),s.addListener(T,"dragleave",this.onDragLeave.bind(t)),s.addListener(T,"drop",this.onDrop.bind(t));var k=null}function r(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}var o=t("../lib/dom"),s=t("../lib/event"),a=t("../lib/useragent"),c=200,l=200,u=5;(function(){this.dragWait=function(){var t=Date.now()-this.mousedownEvent.time;t>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var t=this.editor.container;t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor,e=t.container;e.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var n=a.isWin?"default":"move";t.renderer.setCursorStyle(n),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;if(a.isIE&&"dragReady"==this.state){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&e.dragDrop()}if("dragWait"===this.state){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,n=t.inSelection(),i=t.getButton(),r=t.domEvent.detail||1;if(1===r&&0===i&&n){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in o&&(o.unselectable="on"),e.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;var s=e.container;s.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(i.prototype),e.DragdropHandler=i}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";var i=t("./dom");e.get=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)},e.loadScript=function(t,e){var n=i.getDocumentHead(),r=document.createElement("script");r.src=t,n.appendChild(r),r.onload=r.onreadystatechange=function(t,n){!n&&r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(r=r.onload=r.onreadystatechange=null,n||e())}},e.qualifyURL=function(t){var e=document.createElement("a");
return e.href=t,e.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(t,e,n){"use strict";var i={},r=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[t]||[],i=this._defaultHandlers[t];if(n.length||i){"object"==typeof e&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=r),e.preventDefault||(e.preventDefault=o),n=n.slice();for(var s=0;s<n.length&&(n[s](e,this),!e.propagationStopped);s++);return i&&!e.defaultPrevented?i(e,this):void 0}},i._signal=function(t,e){var n=(this._eventRegistry||{})[t];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](e,this)}},i.once=function(t,e){var n=this;e&&this.addEventListener(t,function i(){n.removeEventListener(t,i),e.apply(null,arguments)})},i.setDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[t]){var i=n[t],r=n._disabled_[t];r||(n._disabled_[t]=r=[]),r.push(i);var o=r.indexOf(e);o!=-1&&r.splice(o,1)}n[t]=e},i.removeDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n){var i=n._disabled_[t];if(n[t]==e){n[t];i&&this.setDefaultHandler(t,i.pop())}else if(i){var r=i.indexOf(e);r!=-1&&i.splice(r,1)}}},i.on=i.addEventListener=function(t,e,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[t];return i||(i=this._eventRegistry[t]=[]),i.indexOf(e)==-1&&i[n?"unshift":"push"](e),e},i.off=i.removeListener=i.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];if(n){var i=n.indexOf(e);i!==-1&&n.splice(i,1)}},i.removeAllListeners=function(t){this._eventRegistry&&(this._eventRegistry[t]=[])},e.EventEmitter=i}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"no use strict";function i(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function r(t,e){var n=new Error(t);n.data=e,"object"==typeof console&&console.error&&console.error(n),setTimeout(function(){throw n})}var o=t("./oop"),s=t("./event_emitter").EventEmitter,a={setOptions:function(t){Object.keys(t).forEach(function(e){this.setOption(e,t[e])},this)},getOptions:function(t){var e={};return t?Array.isArray(t)||(e=t,t=Object.keys(e)):t=Object.keys(this.$options),t.forEach(function(t){e[t]=this.getOption(t)},this),e},setOption:function(t,e){if(this["$"+t]!==e){var n=this.$options[t];if(!n)return i('misspelled option "'+t+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(t,e);n.handlesSet||(this["$"+t]=e),n&&n.set&&n.set.call(this,e)}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:i('misspelled option "'+t+'"')}},c=function(){this.$defaultOptions={}};(function(){o.implement(this,s),this.defineOptions=function(t,e,n){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(n).forEach(function(e){var i=n[e];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=e),t.$options[i.name]=i,"initialValue"in i&&(t["$"+i.name]=i.initialValue)}),o.implement(t,a),this},this.resetOptions=function(t){Object.keys(t.$options).forEach(function(e){var n=t.$options[e];"value"in n&&t.setOption(e,n.value)})},this.setDefaultValue=function(t,e,n){var i=this.$defaultOptions[t]||(this.$defaultOptions[t]={});i[e]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,e,n):i[e].value=n)},this.setDefaultValues=function(t,e){Object.keys(e).forEach(function(n){this.setDefaultValue(t,n,e[n])},this)},this.warn=i,this.reportError=r}).call(c.prototype),e.AppConfig=c}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(t,e,i){"no use strict";function r(r){if(l&&l.document){u.packaged=r||t.packaged||i.packaged||l.define&&n(607).packaged;for(var s={},a="",c=document.currentScript||document._currentScript,h=c&&c.ownerDocument||document,f=h.getElementsByTagName("script"),d=0;d<f.length;d++){var p=f[d],g=p.src||p.getAttribute("src");if(g){for(var m=p.attributes,v=0,y=m.length;v<y;v++){var w=m[v];0===w.name.indexOf("data-ace-")&&(s[o(w.name.replace(/^data-ace-/,""))]=w.value)}var b=g.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(a=b[1])}}a&&(s.base=s.base||a,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base;for(var x in s)"undefined"!=typeof s[x]&&e.set(x,s[x])}}function o(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}var s=t("./lib/lang"),a=(t("./lib/oop"),t("./lib/net")),c=t("./lib/app_config").AppConfig;i.exports=e=new c;var l=function(){return this||"undefined"!=typeof window&&window}(),u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};e.get=function(t){if(!u.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return u[t]},e.set=function(t,e){if(!u.hasOwnProperty(t))throw new Error("Unknown config key: "+t);u[t]=e},e.all=function(){return s.copyObject(u)},e.moduleUrl=function(t,e){if(u.$moduleUrls[t])return u.$moduleUrls[t];var n=t.split("/");e=e||n[n.length-2]||"";var i="snippets"==e?"/":"-",r=n[n.length-1];if("worker"==e&&"-"==i){var o=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");r=r.replace(o,"")}(!r||r==e)&&n.length>1&&(r=n[n.length-2]);var s=u[e+"Path"];return null==s?s=u.basePath:"/"==i&&(e=i=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+e+i+r+this.get("suffix")},e.setModuleUrl=function(t,e){return u.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(n,i){var r,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{r=t(n)}catch(s){}if(r&&!e.$loading[n])return i&&i(r);if(e.$loading[n]||(e.$loading[n]=[]),e.$loading[n].push(i),!(e.$loading[n].length>1)){var c=function(){t([n],function(t){e._emit("load.module",{name:n,module:t});var i=e.$loading[n];e.$loading[n]=null,i.forEach(function(e){e&&e(t)})})};return e.get("packaged")?void a.loadScript(e.moduleUrl(n,o),c):c()}},r(!0),e.init=r}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("./default_handlers").DefaultHandlers,s=t("./default_gutter_handler").GutterHandler,a=t("./mouse_event").MouseEvent,c=t("./dragdrop_handler").DragdropHandler,l=t("../config"),u=function(t){var e=this;this.editor=t,new o(this),new s(this),new c(this);var n=function(e){var n=!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement());n&&window.focus(),t.focus()},a=t.renderer.getMouseEventTarget();i.addListener(a,"click",this.onMouseEvent.bind(this,"click")),i.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener([a,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),i.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel")),i.addTouchMoveListener(t.container,this.onTouchMove.bind(this,"touchmove"));var l=t.renderer.$gutter;i.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(a,"mousedown",n),i.addListener(l,"mousedown",n),r.isIE&&t.renderer.scrollBarV&&(i.addListener(t.renderer.scrollBarV.element,"mousedown",n),i.addListener(t.renderer.scrollBarH.element,"mousedown",n)),t.on("mousemove",function(n){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var i=t.renderer.screenToTextCoordinates(n.x,n.y),r=t.session.selection.getRange(),o=t.renderer;!r.isEmpty()&&r.insideStart(i.row,i.column)?o.setCursorStyle("default"):o.setCursorStyle("")}})};(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new a(e,this.editor))},this.onMouseMove=function(t,e){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(t,new a(e,this.editor))},this.onMouseWheel=function(t,e){var n=new a(e,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.onTouchMove=function(t,e){var n=new a(e,this.editor);n.speed=1,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var o=this,s=function(t){if(t){if(r.isWebKit&&!t.which&&o.releaseMouse)return o.releaseMouse();o.x=t.clientX,o.y=t.clientY,e&&e(t),o.mouseEvent=new a(t,o.editor),o.$mouseMoved=!0}},c=function(t){clearInterval(u),l(),o[o.state+"End"]&&o[o.state+"End"](t),o.state="",null==n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),o.isMousePressed=!1,o.$onCaptureMouseMove=o.releaseMouse=null,t&&o.onMouseEvent("mouseup",t)},l=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout(function(){c(t)});o.$onCaptureMouseMove=s,o.releaseMouse=i.capture(this.editor.container,s,c);var u=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&i.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)}}).call(u.prototype),l.defineOptions(u.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=u}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(t,e,n){"use strict";function i(t){t.on("click",function(e){var n=e.getDocumentPosition(),i=t.session,r=i.getFoldAt(n.row,n.column,1);r&&(e.getAccelKey()?i.removeFold(r):i.expandFold(r),e.stop())}),t.on("gutterclick",function(e){var n=t.renderer.$gutterLayer.getRegion(e);if("foldWidgets"==n){var i=e.getDocumentPosition().row,r=t.session;r.foldWidgets&&r.foldWidgets[i]&&t.session.onFoldWidgetClick(i,e),t.isFocused()||t.focus(),e.stop()}}),t.on("gutterdblclick",function(e){var n=t.renderer.$gutterLayer.getRegion(e);if("foldWidgets"==n){var i=e.getDocumentPosition().row,r=t.session,o=r.getParentFoldRangeData(i,!0),s=o.range||o.firstRange;if(s){i=s.start.row;var a=r.getFoldAt(i,r.getLine(i).length,1);a?r.removeFold(a):(r.addFold("...",s),t.renderer.scrollCursorIntoView({row:s.start.row,column:0}))}e.stop()}})}e.FoldHandler=i}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(t,e,n){"use strict";var i=t("../lib/keys"),r=t("../lib/event"),o=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t);var n=this.$handlers.indexOf(t);n!=-1&&this.$handlers.splice(n,1),void 0==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),n==-1&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return e!=-1&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(e,t)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,n,i){for(var o,s=!1,a=this.$editor.commands,c=this.$handlers.length;c--&&(o=this.$handlers[c].handleKeyboard(this.$data,t,e,n,i),!(o&&o.command&&(s="null"==o.command||a.exec(o.command,this.$editor,o.args,i),s&&i&&t!=-1&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(i),s))););return s||t!=-1||(o={command:"insertstring"},s=a.exec("insertstring",this.$editor,e)),s&&this.$editor._signal("keyboardActivity",o),s},this.onCommandKey=function(t,e,n){var r=i.keyCodeToString(n);this.$callKeyboardHandlers(e,r,n,t)},this.onTextInput=function(t){this.$callKeyboardHandlers(-1,t)}}).call(o.prototype),e.KeyBinding=o}),ace.define("ace/range",["require","exports","module"],function(t,e,n){"use strict";var i=function(t,e){return t.row-e.row||t.column-e.column},r=function(t,e,n,i){this.start={row:t,column:e},this.end={row:n,column:i}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e,n=t.end,i=t.start;return e=this.compare(n.row,n.column),1==e?(e=this.compare(i.row,i.column),1==e?2:0==e?1:0):e==-1?-2:(e=this.compare(i.row,i.column),e==-1?-1:1==e?42:0)},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return e==-1||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==typeof t?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==typeof t?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&(!this.isEnd(t,e)&&!this.isStart(t,e))},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row===t?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){if(this.end.row>e)var n={row:e+1,column:0};else if(this.end.row<t)var n={row:t,column:0};if(this.start.row>e)var i={row:e+1,column:0};else if(this.start.row<t)var i={row:t,column:0};return r.fromPoints(i||this.start,n||this.end)},this.extend=function(t,e){var n=this.compare(t,e);if(0==n)return this;if(n==-1)var i={row:t,column:e};else var o={row:t,column:e};return r.fromPoints(i||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),n=t.documentToScreenPosition(this.end);return new r(e.row,e.column,n.row,n.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(r.prototype),r.fromPoints=function(t,e){return new r(t.row,t.column,e.row,e.column)},r.comparePoints=i,r.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=r}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/lang"),o=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,a=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var e=this;this.lead.on("change",function(t){e._emit("changeCursor"),e.$isEmpty||e._emit("changeSelection"),e.$keepDesiredColumnOnChange||t.old.column==t.value.column||(e.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){e.$isEmpty||e._emit("changeSelection")})};(function(){i.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.anchor.setPosition(t,e),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(t){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+t);var e=this.getSelectionAnchor(),n=this.getSelectionLead(),i=this.isBackwards();i&&0===e.column||this.setSelectionAnchor(e.row,e.column+t),(i||0!==n.column)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+t)})},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.isEmpty()?s.fromPoints(e,e):this.isBackwards()?s.fromPoints(e,t):s.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var t=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(t,this.doc.getLine(t).length)},this.setRange=this.setSelectionRange=function(t,e){e?(this.setSelectionAnchor(t.end.row,t.end.column),this.selectTo(t.start.row,t.start.column)):(this.setSelectionAnchor(t.start.row,t.start.column),this.selectTo(t.end.row,t.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection(function(){this.moveCursorTo(t,e)})},this.selectToPosition=function(t){this.$moveSelection(function(){this.moveCursorToPosition(t)})},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if("undefined"==typeof e){var n=t||this.lead;t=n.row,e=n.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var n,i="number"==typeof t?t:this.lead.row,r=this.session.getFoldLine(i);return r?(i=r.start.row,n=r.end.row):n=i,e===!0?new s(i,0,n,this.session.getLine(n).length):new s(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-n,e.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,n=this.session.documentToScreenRow(t,e),i=this.session.screenToDocumentPosition(n,0),r=this.session.getDisplayLine(t,null,i.row,i.column),o=r.match(/^\s*/);o[0].length==e||this.session.$useEmacsStyleLineStart||(i.column+=o[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var n=this.session.getLine(e.row);if(e.column==n.length){var i=n.search(/\s+$/);i>0&&(e.column=i)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t,e=this.lead.row,n=this.lead.column,i=this.doc.getLine(e),r=i.substring(n);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(e,n,1);return o?void this.moveCursorTo(o.end.row,o.end.column):((t=this.session.nonTokenRe.exec(r))&&(n+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=i.substring(n)),n>=i.length?(this.moveCursorTo(e,i.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight())):((t=this.session.tokenRe.exec(r))&&(n+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,n)))},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return void this.moveCursorTo(t.start.row,t.start.column);var i=this.session.getFoldStringAt(e,n,-1);null==i&&(i=this.doc.getLine(e).substring(0,n));var o,s=r.stringReverse(i);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(o=this.session.nonTokenRe.exec(s))&&(n-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0?(this.moveCursorTo(e,0),this.moveCursorLeft(),void(e>0&&this.moveCursorWordLeft())):((o=this.session.tokenRe.exec(s))&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,n))},this.$shortWordEndIndex=function(t){var e,n,i=0,r=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,e=this.session.tokenRe.exec(t))i=this.session.tokenRe.lastIndex;else{for(;(n=t[i])&&r.test(n);)i++;if(i<1)for(o.lastIndex=0;(n=t[i])&&!o.test(n);)if(o.lastIndex=0,i++,r.test(n)){if(i>2){i--;break}for(;(n=t[i])&&r.test(n);)i++;if(i>2)break}}return o.lastIndex=0,i},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e),r=this.session.getFoldAt(t,e,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(e==n.length){var o=this.doc.getLength();do t++,i=this.doc.getLine(t);while(t<o&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),e=0}var s=this.$shortWordEndIndex(i);this.moveCursorTo(t,e+s)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return this.moveCursorTo(t.start.row,t.start.column);var i=this.session.getLine(e).substring(0,n);if(0===n){do e--,i=this.doc.getLine(e);while(e>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var o=r.stringReverse(i),s=this.$shortWordEndIndex(o);return this.moveCursorTo(e,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===e&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var i=this.session.screenToDocumentPosition(n.row+t,n.column);0!==t&&0===e&&i.row===this.lead.row&&i.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[i.row]&&(i.row>0||t>0)&&i.row++,this.moveCursorTo(i.row,i.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,n){var i=this.session.getFoldAt(t,e,1);i&&(t=i.start.row,e=i.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,n){var i=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var n=this.getCursor();return s.fromPoints(e,n)}catch(i){return s.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map(function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e});else{var t=this.getRange();t.isBackwards=this.isBackwards()}return t},this.fromJSON=function(t){if(void 0==t.start){if(this.rangeList){this.toSingleRange(t[0]);for(var e=t.length;e--;){var n=s.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(a.prototype),e.Selection=a}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(t,e,n){"use strict";var i=t("./config"),r=2e3,o=function(t){this.states=t,this.regExps={},this.matchMappings={};for(var e in this.states){for(var n=this.states[e],i=[],r=0,o=this.matchMappings[e]={defaultToken:"text"},s="g",a=[],c=0;c<n.length;c++){var l=n[c];if(l.defaultToken&&(o.defaultToken=l.defaultToken),l.caseInsensitive&&(s="gi"),null!=l.regex){l.regex instanceof RegExp&&(l.regex=l.regex.toString().slice(1,-1));var u=l.regex,h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(l.token)?1==l.token.length||1==h?l.token=l.token[0]:h-1!=l.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:l,groupCount:h-1}),l.token=l.token[0]):(l.tokenArray=l.token,l.token=null,l.onMatch=this.$arrayTokens):"function"!=typeof l.token||l.onMatch||(h>1?l.onMatch=this.$applyToken:l.onMatch=l.token),h>1&&(/\\\d/.test(l.regex)?u=l.regex.replace(/\\([0-9]+)/g,function(t,e){return"\\"+(parseInt(e,10)+r+1)}):(h=1,u=this.removeCapturingGroups(l.regex)),l.splitRegex||"string"==typeof l.token||a.push(l)),o[r]=c,r+=h,i.push(u),l.onMatch||(l.onMatch=null)}}i.length||(o[0]=0,i.push("$")),a.forEach(function(t){t.splitRegex=this.createSplitterRegexp(t.regex,s)},this),this.regExps[e]=new RegExp("("+i.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(t){r=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),n=this.token.apply(this,e);if("string"==typeof n)return[{type:n,value:t}];for(var i=[],r=0,o=n.length;r<o;r++)e[r]&&(i[i.length]={type:n[r],value:e[r]});return i},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var n=[],i=this.tokenArray,r=0,o=i.length;r<o;r++)e[r+1]&&(n[n.length]={type:i[r],value:e[r+1]});return n},this.removeCapturingGroups=function(t){var e=t.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(t,e){return e?"(?:":t});return e},this.createSplitterRegexp=function(t,e){if(t.indexOf("(?=")!=-1){var n=0,i=!1,r={};t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(t,e,o,s,a,c){return i?i="]"!=a:a?i=!0:s?(n==r.stack&&(r.end=c+1,r.stack=-1),n--):o&&(n++,1!=o.length&&(r.stack=n,r.start=c)),t}),null!=r.end&&/^\)*$/.test(t.substr(r.end))&&(t=t.substring(0,r.start)+t.substr(r.end))}return"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){if(e&&"string"!=typeof e){var n=e.slice(0);e=n[0],"#tmp"===e&&(n.shift(),e=n.shift())}else var n=[];var i=e||"start",o=this.states[i];o||(i="start",o=this.states[i]);var s=this.matchMappings[i],a=this.regExps[i];a.lastIndex=0;for(var c,l=[],u=0,h=0,f={type:null,value:""};c=a.exec(t);){var d=s.defaultToken,p=null,g=c[0],m=a.lastIndex;if(m-g.length>u){var v=t.substring(u,m-g.length);f.type==d?f.value+=v:(f.type&&l.push(f),f={type:d,value:v})}for(var y=0;y<c.length-2;y++)if(void 0!==c[y+1]){p=o[s[y]],d=p.onMatch?p.onMatch(g,i,n):p.token,p.next&&(i="string"==typeof p.next?p.next:p.next(i,n),o=this.states[i],o||(this.reportError("state doesn't exist",i),i="start",o=this.states[i]),s=this.matchMappings[i],u=m,a=this.regExps[i],a.lastIndex=m);break}if(g)if("string"==typeof d)p&&p.merge===!1||f.type!==d?(f.type&&l.push(f),f={type:d,value:g}):f.value+=g;else if(d){f.type&&l.push(f),f={type:null,value:""};for(var y=0;y<d.length;y++)l.push(d[y])}if(u==t.length)break;if(u=m,h++>r){for(h>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});u<t.length;)f.type&&l.push(f),f={value:t.substring(u,u+=2e3),type:"overflow"};i="start",n=[];break}}return f.type&&l.push(f),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:l,state:n.length?n:i}},this.reportError=i.reportError}).call(o.prototype),e.Tokenizer=o}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(t,e,n){"use strict";var i=t("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,e){if(e)for(var n in t){for(var i=t[n],r=0;r<i.length;r++){var o=i[r];
(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(e)&&(o.next=e+o.next),o.nextState&&0!==o.nextState.indexOf(e)&&(o.nextState=e+o.nextState))}this.$rules[e+n]=i}else for(var n in t)this.$rules[n]=t[n]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,n,r,o){var s="function"==typeof t?(new t).getRules():t;if(r)for(var a=0;a<r.length;a++)r[a]=e+r[a];else{r=[];for(var c in s)r.push(e+c)}if(this.addRules(s,e),n)for(var l=Array.prototype[o?"push":"unshift"],a=0;a<r.length;a++)l.apply(this.$rules[r[a]],i.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var t=function(t,e){return("start"!=t||e.length)&&e.unshift(this.nextState,t),this.nextState},e=function(t,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){function n(o){var s=r[o];s.processed=!0;for(var a=0;a<s.length;a++){var c=s[a];!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var l=c.next||c.push;if(l&&Array.isArray(l)){var u=c.stateName;u||(u=c.token,"string"!=typeof u&&(u=u[0]||""),r[u]&&(u+=i++)),r[u]=l,c.next=u,n(u)}else"pop"==l&&(c.next=e);if(c.push&&(c.nextState=c.next||c.push,c.next=t,delete c.push),c.rules)for(var h in c.rules)r[h]?r[h].push&&r[h].push.apply(r[h],c.rules[h]):r[h]=c.rules[h];if(c.include||"string"==typeof c)var f=c.include||c,d=r[f];else Array.isArray(c)&&(d=c);if(d){var p=[a,1].concat(d);c.noEscape&&(p=p.filter(function(t){return!t.next})),s.splice.apply(s,p),a--,d=null}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}var i=0,r=this.$rules;Object.keys(r).forEach(n,this)},this.createKeywordMapper=function(t,e,n,i){var r=Object.create(null);return Object.keys(t).forEach(function(e){var o=t[e];n&&(o=o.toLowerCase());for(var s=o.split(i||"|"),a=s.length;a--;)r[s[a]]=e}),Object.getPrototypeOf(r)&&(r.__proto__=null),this.$keywordList=Object.keys(r),t=null,n?function(t){return r[t.toLowerCase()]||e}:function(t){return r[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),e.TextHighlightRules=r}),ace.define("ace/mode/behaviour",["require","exports","module"],function(t,e,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(t,e,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=n},this.addBehaviours=function(t){for(var e in t)for(var n in t[e])this.add(e,n,t[e][n])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){if("function"==typeof t)var n=(new t).getBehaviours(e);else var n=t.getBehaviours(e);this.addBehaviours(n)},this.getBehaviours=function(t){if(t){for(var e={},n=0;n<t.length;n++)this.$behaviours[t[n]]&&(e[t[n]]=this.$behaviours[t[n]]);return e}return this.$behaviours}}).call(i.prototype),e.Behaviour=i}),ace.define("ace/unicode",["require","exports","module"],function(t,e,n){"use strict";function i(t){var n=/\w{4}/g;for(var i in t)e.packages[i]=t[i].replace(n,"\\u$&")}e.packages={},i({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/token_iterator",["require","exports","module"],function(t,e,n){"use strict";var i=function(t,e,n){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var i=t.getTokenAt(e,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var t;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,n=t[e].start;if(void 0!==n)return n;for(n=0;e>0;)e-=1,n+=t[e].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}}}).call(i.prototype),e.TokenIterator=i}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(t,e,n){"use strict";var i=t("../tokenizer").Tokenizer,r=t("./text_highlight_rules").TextHighlightRules,o=t("./behaviour").Behaviour,s=t("../unicode"),a=t("../lib/lang"),c=t("../token_iterator").TokenIterator,l=t("../range").Range,u=function(){this.HighlightRules=r,this.$behaviour=new o};(function(){this.tokenRe=new RegExp("^["+s.packages.L+s.packages.Mn+s.packages.Mc+s.packages.Nd+s.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+s.packages.L+s.packages.Mn+s.packages.Mc+s.packages.Nd+s.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,n,i){function r(t){for(var e=n;e<=i;e++)t(o.getLine(e),e)}var o=e.doc,s=!0,c=!0,l=1/0,u=e.getTabSize(),h=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var f=this.lineCommentStart.map(a.escapeRegExp).join("|"),d=this.lineCommentStart[0];else var f=a.escapeRegExp(this.lineCommentStart),d=this.lineCommentStart;f=new RegExp("^(\\s*)(?:"+f+") ?"),h=e.getUseSoftTabs();var p=function(t,e){var n=t.match(f);if(n){var i=n[1].length,r=n[0].length;y(t,i,r)||" "!=n[0][r-1]||r--,o.removeInLine(e,i,r)}},g=d+" ",m=function(t,e){s&&!/\S/.test(t)||(y(t,l,l)?o.insertInLine({row:e,column:l},g):o.insertInLine({row:e,column:l},d))},v=function(t,e){return f.test(t)},y=function(t,e,n){for(var i=0;e--&&" "==t.charAt(e);)i++;if(i%u!=0)return!1;for(var i=0;" "==t.charAt(n++);)i++;return u>2?i%u!=u-1:i%u==0}}else{if(!this.blockComment)return!1;var d=this.blockComment.start,w=this.blockComment.end,f=new RegExp("^(\\s*)(?:"+a.escapeRegExp(d)+")"),b=new RegExp("(?:"+a.escapeRegExp(w)+")\\s*$"),m=function(t,e){v(t,e)||s&&!/\S/.test(t)||(o.insertInLine({row:e,
column:t.length},w),o.insertInLine({row:e,column:l},d))},p=function(t,e){var n;(n=t.match(b))&&o.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(f))&&o.removeInLine(e,n[1].length,n[0].length)},v=function(t,n){if(f.test(t))return!0;for(var i=e.getTokens(n),r=0;r<i.length;r++)if("comment"===i[r].type)return!0}}var x=1/0;r(function(t,e){var n=t.search(/\S/);n!==-1?(n<l&&(l=n),c&&!v(t,e)&&(c=!1)):x>t.length&&(x=t.length)}),l==1/0&&(l=x,s=!1,c=!1),h&&l%u!=0&&(l=Math.floor(l/u)*u),r(c?p:m)},this.toggleBlockComment=function(t,e,n,i){var r=this.blockComment;if(r){!r.start&&r[0]&&(r=r[0]);var o,s,a=new c(e,i.row,i.column),u=a.getCurrentToken(),h=(e.selection,e.selection.toOrientedRange());if(u&&/comment/.test(u.type)){for(var f,d;u&&/comment/.test(u.type);){var p=u.value.indexOf(r.start);if(p!=-1){var g=a.getCurrentTokenRow(),m=a.getCurrentTokenColumn()+p;f=new l(g,m,g,m+r.start.length);break}u=a.stepBackward()}for(var a=new c(e,i.row,i.column),u=a.getCurrentToken();u&&/comment/.test(u.type);){var p=u.value.indexOf(r.end);if(p!=-1){var g=a.getCurrentTokenRow(),m=a.getCurrentTokenColumn()+p;d=new l(g,m,g,m+r.end.length);break}u=a.stepForward()}d&&e.remove(d),f&&(e.remove(f),o=f.start.row,s=-r.start.length)}else s=r.start.length,o=n.start.row,e.insert(n.end,r.end),e.insert(n.start,r.start);h.start.row==o&&(h.start.column+=s),h.end.row==o&&(h.end.column+=s),e.selection.fromOrientedRange(h)}},this.getNextLineIndent=function(t,e,n){return this.$getIndent(e)},this.checkOutdent=function(t,e,n){return!1},this.autoOutdent=function(t,e,n){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){this.$embeds=[],this.$modes={};for(var e in t)t[e]&&(this.$embeds.push(e),this.$modes[e]=new t[e]);for(var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],e=0;e<n.length;e++)!function(t){var i=n[e],r=t[i];t[n[e]]=function(){return this.$delegator(i,arguments,r)}}(this)},this.$delegator=function(t,e,n){var i=e[0];"string"!=typeof i&&(i=i[0]);for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var o=i.split(this.$embeds[r]);if(!o[0]&&o[1]){e[0]=o[1];var s=this.$modes[this.$embeds[r]];return s[t].apply(s,e)}}var a=n.apply(this,e);return n?a:void 0},this.transformAction=function(t,e,n,i,r){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][e]){var a=o[s][e].apply(this,arguments);if(a)return a}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,n=[];for(var i in e)for(var r=e[i],o=0,s=r.length;o<s;o++)if("string"==typeof r[o].token)/keyword|support|storage/.test(r[o].token)&&n.push(r[o].regex);else if("object"==typeof r[o].token)for(var a=0,c=r[o].token.length;a<c;a++)if(/keyword|support|storage/.test(r[o].token[a])){var i=r[o].regex.match(/\(.+?\)/g)[a];n.push(i.substr(1,i.length-2))}this.completionKeywords=n}return t?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,n,i){var r=this.$keywordList||this.$createKeywordList();return r.map(function(t){return{name:t,value:t,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(u.prototype),e.Mode=u}),ace.define("ace/apply_delta",["require","exports","module"],function(t,e,n){"use strict";e.applyDelta=function(t,e,n){var i=e.start.row,r=e.start.column,o=t[i]||"";switch(e.action){case"insert":var s=e.lines;if(1===s.length)t[i]=o.substring(0,r)+e.lines[0]+o.substring(r);else{var a=[i,1].concat(e.lines);t.splice.apply(t,a),t[i]=o.substring(0,r)+t[i],t[i+e.lines.length-1]+=o.substring(r)}break;case"remove":var c=e.end.column,l=e.end.row;i===l?t[i]=o.substring(0,r)+o.substring(c):t.splice(i,l-i+1,o.substring(0,r)+t[l].substring(c))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter,o=e.Anchor=function(t,e,n){this.$onChange=this.onChange.bind(this),this.attach(t),"undefined"==typeof n?this.setPosition(e.row,e.column):this.setPosition(e,n)};(function(){function t(t,e,n){var i=n?t.column<=e.column:t.column<e.column;return t.row<e.row||t.row==e.row&&i}function e(e,n,i){var r="insert"==e.action,o=(r?1:-1)*(e.end.row-e.start.row),s=(r?1:-1)*(e.end.column-e.start.column),a=e.start,c=r?a:e.end;return t(n,a,i)?{row:n.row,column:n.column}:t(c,n,!i)?{row:n.row+o,column:n.column+(n.row==c.row?s:0)}:{row:a.row,column:a.column}}i.implement(this,r),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row||t.start.row>this.row)){var n=e(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(t,e,n){var i;if(i=n?{row:t,column:e}:this.$clipPositionToDocument(t,e),this.row!=i.row||this.column!=i.column){var r={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:r,value:i})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var n={};return t>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):t<0?(n.row=0,n.column=0):(n.row=t,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,e))),e<0&&(n.column=0),n}}).call(o.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./apply_delta").applyDelta,o=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,a=t("./anchor").Anchor,c=function(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){i.implement(this,o),this.setValue=function(t){var e=this.getLength()-1;this.remove(new s(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new a(this,t,e)},0==="aaa".split(/a/).length?this.$split=function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e;if(t.start.row===t.end.row)e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{e=this.getLines(t.start.row,t.end.row),e[0]=(e[0]||"").substring(t.start.column);var n=e.length-1;t.end.row-t.start.row==n&&(e[n]=e[n].substring(0,t.end.column))}return e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var n=this.clippedPos(t.row,t.column),i=this.pos(t.row,t.column+e.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[e]},!0),this.clonePos(i)},this.clippedPos=function(t,e){var n=this.getLength();void 0===t?t=n:t<0?t=0:t>=n&&(t=n-1,e=void 0);var i=this.getLine(t);return void 0==e&&(e=i.length),e=Math.min(Math.max(e,0),i.length),{row:t,column:e}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){t=Math.min(Math.max(t,0),this.getLength());var n=0;t<this.getLength()?(e=e.concat([""]),n=0):(e=[""].concat(e),t--,n=this.$lines[t].length),this.insertMergedLines({row:t,column:n},e)},this.insertMergedLines=function(t,e){var n=this.clippedPos(t.row,t.column),i={row:n.row+e.length-1,column:(1==e.length?n.column:0)+e[e.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:e}),this.clonePos(i)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),n=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:n,action:"remove",lines:this.getLinesForRange({start:e,end:n})}),this.clonePos(e)},this.removeInLine=function(t,e,n){var i=this.clippedPos(t,e),r=this.clippedPos(t,n);return this.applyDelta({start:i,end:r,action:"remove",lines:this.getLinesForRange({start:i,end:r})},!0),this.clonePos(i)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1),e=Math.min(Math.max(0,e),this.getLength()-1);var n=e==this.getLength()-1&&t>0,i=e<this.getLength()-1,r=n?t-1:t,o=n?this.getLine(r).length:0,a=i?e+1:e,c=i?0:this.getLine(a).length,l=new s(r,o,a,c),u=this.$lines.slice(t,e+1);return this.applyDelta({start:l.start,end:l.end,action:"remove",lines:this.getLinesForRange(l)}),u},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){if(t instanceof s||(t=s.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty())return t.start;if(e==this.getTextRange(t))return t.end;this.remove(t);var n;return n=e?this.insert(t.start,e):t.start},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;e>=0;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var n="insert"==t.action;(n?t.lines.length<=1&&!t.lines[0]:!s.comparePoints(t.start,t.end))||(n&&t.lines.length>2e4&&this.$splitAndapplyLargeDelta(t,2e4),r(this.$lines,t,e),this._signal("change",t))},this.$splitAndapplyLargeDelta=function(t,e){for(var n=t.lines,i=n.length,r=t.start.row,o=t.start.column,s=0,a=0;;){s=a,a+=e-1;var c=n.slice(s,a);if(a>i){t.lines=c,t.start.row=r+s,t.start.column=o;break}c.push(""),this.applyDelta({start:this.pos(r+s,o),end:this.pos(r+a,o=0),action:t.action,lines:c},!0)}},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=e||0,o=n.length;r<o;r++)if(t-=n[r].length+i,t<0)return{row:r,column:t+n[r].length+i};return{row:o-1,column:n[o-1].length}},this.positionToIndex=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=0,o=Math.min(t.row,n.length),s=e||0;s<o;++s)r+=n[s].length+i;return r+t.column}}).call(c.prototype),e.Document=c}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter,o=function(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var n=this;this.$worker=function(){if(n.running){for(var t=new Date,e=n.currentLine,i=-1,r=n.doc,o=e;n.lines[e];)e++;var s=r.getLength(),a=0;for(n.running=!1;e<s;){n.$tokenizeRow(e),i=e;do e++;while(n.lines[e]);if(a++,a%5===0&&new Date-t>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=e,o<=i&&n.fireUpdateEvent(o,i)}}};(function(){i.implement(this,r),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){var n={first:t,last:e};this._signal("update",{data:n})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.lines[e]=null;else if("remove"==t.action)this.lines.splice(e,n+1,null),this.states.splice(e,n+1,null);else{var i=Array(n+1);i.unshift(e,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),n=this.states[t-1],i=this.tokenizer.getLineTokens(e,n,t);return this.states[t]+""!=i.state+""?(this.states[t]=i.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=i.tokens}}).call(o.prototype),e.BackgroundTokenizer=o}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,e,n){"use strict";var i=t("./lib/lang"),r=(t("./lib/oop"),t("./range").Range),o=function(t,e,n){this.setRegexp(t),this.clazz=e,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,n,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,c=s;c<=a;c++){var l=this.cache[c];null==l&&(l=i.getMatchOffsets(n.getLine(c),this.regExp),l.length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES)),l=l.map(function(t){return new r(c,t.offset,c,t.offset+t.length)}),this.cache[c]=l.length?l:"");for(var u=l.length;u--;)e.drawSingleLineMarker(t,l[u].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),e.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(t,e,n){"use strict";function i(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var n=e[e.length-1];this.range=new r(e[0].start.row,e[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(t){t.setFoldLine(this)},this)}var r=t("../range").Range;(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach(function(e){e.start.row+=t,e.end.row+=t})},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort(function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)}),this.range.compareEnd(t.start.row,t.start.column)>0?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,n){var i,r,o,s=0,a=this.folds,c=!0;null==e&&(e=this.end.row,n=this.end.column);for(var l=0;l<a.length;l++){if(i=a[l],r=i.range.compareStart(e,n),r==-1)return void t(null,e,n,s,c);if(o=t(null,i.start.row,i.start.column,s,c),o=!o&&t(i.placeholder,i.start.row,i.start.column,s),o||0===r)return;c=!i.sameRow,s=i.end.column}t(null,e,n,s,c)},this.getNextFoldTo=function(t,e){for(var n,i,r=0;r<this.folds.length;r++){if(n=this.folds[r],i=n.range.compareEnd(t,e),i==-1)return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(t,e,n){var i,r,o=this.getNextFoldTo(t,e);if(o)if(i=o.fold,"inside"==o.kind&&i.start.column!=e&&i.start.row!=t)window.console&&window.console.log(t,e,i);else if(i.start.row==t){r=this.folds;var s=r.indexOf(i);for(0===s&&(this.start.column+=n),s;s<r.length;s++){if(i=r[s],i.start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(t,e){var n=this.getNextFoldTo(t,e);if(!n||"inside"==n.kind)return null;var r=n.fold,o=this.folds,s=this.foldData,a=o.indexOf(r),c=o[a-1];this.end.row=c.end.row,this.end.column=c.end.column,o=o.splice(a,o.length-a);var l=new i(s,o);return s.splice(s.indexOf(this)+1,0,l),l},this.merge=function(t){for(var e=t.folds,n=0;n<e.length;n++)this.addFold(e[n]);var i=this.foldData;i.splice(i.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach(function(e){t.push("  "+e.toString())}),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if(t-=i.start.column-e,t<0)return{row:i.start.row,column:i.start.column+t};if(t-=i.placeholder.length,t<0)return i.start;e=i.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(i.prototype),e.FoldLine=i}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(t,e,n){"use strict";var i=t("./range").Range,r=i.comparePoints,o=function(){this.ranges=[]};(function(){this.comparePoints=r,this.pointIndex=function(t,e,n){for(var i=this.ranges,o=n||0;o<i.length;o++){var s=i[o],a=r(t,s.end);if(!(a>0)){var c=r(t,s.start);return 0===a?e&&0!==c?-o-2:o:c>0||0===c&&!e?o:-o-1}}return-o-1},this.add=function(t){var e=!t.isEmpty(),n=this.pointIndex(t.start,e);n<0&&(n=-n-1);var i=this.pointIndex(t.end,e,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,t)},this.addList=function(t){for(var e=[],n=t.length;n--;)e.push.apply(e,this.add(t[n]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges.splice(e,1)},this.merge=function(){var t=[],e=this.ranges;e=e.sort(function(t,e){return r(t.start,e.start)});for(var n,i=e[0],o=1;o<e.length;o++){n=i,i=e[o];var s=r(n.end,i.start);s<0||(0!=s||n.isEmpty()||i.isEmpty())&&(r(n.end,i.end)<0&&(n.end.row=i.end.row,n.end.column=i.end.column),e.splice(o,1),t.push(i),i=n,o--)}return this.ranges=e,t},this.contains=function(t,e){return this.pointIndex({row:t,column:e})>=0},this.containsPoint=function(t){return this.pointIndex(t)>=0},this.rangeAtPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges[e]},this.clipRows=function(t,e){var n=this.ranges;if(n[0].start.row>e||n[n.length-1].start.row<t)return[];var i=this.pointIndex({row:t,column:0});i<0&&(i=-i-1);var r=this.pointIndex({row:e,column:0},i);r<0&&(r=-r-1);for(var o=[],s=i;s<r;s++)o.push(n[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){if("insert"==t.action)var e=t.start,n=t.end;else var n=t.start,e=t.end;for(var i=e.row,r=n.row,o=r-i,s=-e.column+n.column,a=this.ranges,c=0,l=a.length;c<l;c++){var u=a[c];if(!(u.end.row<i)){if(u.start.row>i)break;if(u.start.row==i&&u.start.column>=e.column&&(u.start.column==e.column&&this.$insertRight||(u.start.column+=s,u.start.row+=o)),u.end.row==i&&u.end.column>=e.column){if(u.end.column==e.column&&this.$insertRight)continue;u.end.column==e.column&&s>0&&c<l-1&&u.end.column>u.start.column&&u.end.column==a[c+1].start.column&&(u.end.column-=s),u.end.column+=s,u.end.row+=o}}}if(0!=o&&c<l)for(;c<l;c++){var u=a[c];u.start.row+=o,u.end.row+=o}}}).call(o.prototype),e.RangeList=o}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(t,e,n){"use strict";function i(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function r(t,e){i(t.start,e),i(t.end,e)}function o(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}function s(t,e){o(t.start,e),o(t.end,e)}var a=(t("../range").Range,t("../range_list").RangeList),c=t("../lib/oop"),l=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};c.inherits(l,a),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach(function(e){e.setFoldLine(t)})},this.clone=function(){var t=this.range.clone(),e=new l(t,this.placeholder);return this.subFolds.forEach(function(t){e.subFolds.push(t.clone())}),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){if(!this.range.containsRange(t))throw new Error("A fold can't intersect already existing fold"+t.range+this.range);r(t,this.start);for(var e=t.start.row,n=t.start.column,i=0,o=-1;i<this.subFolds.length&&(o=this.subFolds[i].range.compare(e,n),1==o);i++);var s=this.subFolds[i];if(0==o)return s.addSubFold(t);for(var e=t.range.end.row,n=t.range.end.column,a=i,o=-1;a<this.subFolds.length&&(o=this.subFolds[a].range.compare(e,n),1==o);a++);this.subFolds[a];if(0==o)throw new Error("A fold can't intersect already existing fold"+t.range+this.range);this.subFolds.splice(i,a-i,t);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return s(t,this.start)}}.call(l.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(t,e,n){"use strict";function i(){this.getFoldAt=function(t,e,n){var i=this.getFoldLine(t);if(!i)return null;for(var r=i.folds,o=0;o<r.length;o++){var s=r[o];if(s.range.contains(t,e)){if(1==n&&s.range.isEnd(t,e))continue;if(n==-1&&s.range.isStart(t,e))continue;return s}}},this.getFoldsInRange=function(t){var e=t.start,n=t.end,i=this.$foldData,r=[];e.column+=1,n.column-=1;for(var o=0;o<i.length;o++){var s=i[o].range.compareRange(t);if(2!=s){if(s==-2)break;for(var a=i[o].folds,c=0;c<a.length;c++){var l=a[c];if(s=l.range.compareRange(t),s==-2)break;if(2!=s){if(42==s)break;r.push(l)}}}}return e.column-=1,n.column+=1,r},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach(function(t){e=e.concat(this.getFoldsInRange(t))},this)}else var e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,n=0;n<e.length;n++)for(var i=0;i<e[n].folds.length;i++)t.push(e[n].folds[i]);return t},this.getFoldStringAt=function(t,e,n,i){if(i=i||this.getFoldLine(t),!i)return null;for(var r,o,s={end:{column:0}},a=0;a<i.folds.length;a++){o=i.folds[a];var c=o.range.compareEnd(t,e);if(c==-1){r=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===c)return null;s=o}return r||(r=this.getLine(o.start.row).substring(s.end.column)),n==-1?r.substring(0,e-s.end.column):1==n?r.substring(e-s.end.column):r},this.getFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),i==-1&&(i=0),i;i<n.length;i++){var r=n[i];if(r.start.row<=t&&r.end.row>=t)return r;if(r.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),i==-1&&(i=0),i;i<n.length;i++){var r=n[i];if(r.end.row>=t)return r}return null},this.getFoldedRowCount=function(t,e){for(var n=this.$foldData,i=e-t+1,r=0;r<n.length;r++){var o=n[r],s=o.end.row,a=o.start.row;if(s>=e){a<e&&(a>=t?i-=e-a:i=0);break}s>=t&&(i-=a>=t?s-a:s-t+1)}return i},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort(function(t,e){return t.start.row-e.start.row}),t},this.addFold=function(t,e){var n,i=this.$foldData,r=!1;t instanceof s?n=t:(n=new s(e,t),n.collapseChildren=e.collapseChildren),this.$clipRangeToDocument(n.range);var a=n.start.row,c=n.start.column,l=n.end.row,u=n.end.column;if(!(a<l||a==l&&c<=u-2))throw new Error("The range has to be at least 2 characters width");var h=this.getFoldAt(a,c,1),f=this.getFoldAt(l,u,-1);if(h&&f==h)return h.addSubFold(n);h&&!h.range.isStart(a,c)&&this.removeFold(h),f&&!f.range.isEnd(l,u)&&this.removeFold(f);var d=this.getFoldsInRange(n.range);d.length>0&&(this.removeFolds(d),d.forEach(function(t){n.addSubFold(t)}));for(var p=0;p<i.length;p++){var g=i[p];if(l==g.start.row){g.addFold(n),r=!0;break}if(a==g.end.row){if(g.addFold(n),r=!0,!n.sameRow){var m=i[p+1];if(m&&m.start.row==l){g.merge(m);break}}break}if(l<=g.start.row)break}return r||(g=this.$addFoldLine(new o(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(t){t.forEach(function(t){this.addFold(t)},this)},this.removeFold=function(t){var e=t.foldLine,n=e.start.row,i=e.end.row,r=this.$foldData,o=e.folds;if(1==o.length)r.splice(r.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))o.pop(),e.end.row=o[o.length-1].end.row,e.end.column=o[o.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))o.shift(),e.start.row=o[0].start.row,e.start.column=o[0].start.column;else if(t.sameRow)o.splice(o.indexOf(t),1);else{var s=e.split(t.start.row,t.start.column);o=s.folds,o.shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);e.forEach(function(t){this.removeFold(t)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(e){t.restoreRange(e),this.addFold(e)},this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach(function(t){this.expandFold(t)},this)},this.unfold=function(t,e){var n,i;if(null==t?(n=new r(0,0,this.getLength(),0),e=!0):n="number"==typeof t?new r(t,0,t,this.getLine(t).length):"row"in t?r.fromPoints(t,t):t,i=this.getFoldsInRangeList(n),e)this.removeFolds(i);else for(var o=i;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(n);if(i.length)return i},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var n=this.getFoldLine(t,e);return n?n.end.row:t},this.getRowFoldStart=function(t,e){var n=this.getFoldLine(t,e);return n?n.start.row:t},this.getFoldDisplayLine=function(t,e,n,i,r){null==i&&(i=t.start.row),null==r&&(r=0),null==e&&(e=t.end.row),null==n&&(n=this.getLine(e).length);var o=this.doc,s="";return t.walk(function(t,e,n,a){if(!(e<i)){if(e==i){if(n<r)return;a=Math.max(r,a)}s+=null!=t?t:o.getLine(e).substring(a,n)}},e,n),s},this.getDisplayLine=function(t,e,n,i){var r=this.getFoldLine(t);if(r)return this.getFoldDisplayLine(r,t,e,n,i);var o;return o=this.doc.getLine(t),o.substring(i||0,e||o.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(e){var n=e.folds.map(function(t){return t.clone()});return new o(t,n)})},this.toggleFold=function(t){var e,n,i=this.selection,r=i.getRange();if(r.isEmpty()){var o=r.start;if(e=this.getFoldAt(o.row,o.column))return void this.expandFold(e);(n=this.findMatchingBracket(o))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(o.row,o.column)||r}else{var s=this.getFoldsInRange(r);if(t&&s.length)return void this.expandFolds(s);1==s.length&&(e=s[0])}if(e||(e=this.getFoldAt(r.start.row,r.start.column)),e&&e.range.toString()==r.toString())return void this.expandFold(e);var a="...";if(!r.isMultiLine()){if(a=this.getTextRange(r),a.length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,r)},this.getCommentFoldRange=function(t,e,n){var i=new a(this,t,e),o=i.getCurrentToken();if(o&&/^comment|string/.test(o.type)){var s=new r,c=new RegExp(o.type.replace(/\..*/,"\\."));if(1!=n){do o=i.stepBackward();while(o&&c.test(o.type));i.stepForward()}if(s.start.row=i.getCurrentTokenRow(),s.start.column=i.getCurrentTokenColumn()+2,i=new a(this,t,e),n!=-1){do o=i.stepForward();while(o&&c.test(o.type));o=i.stepBackward()}else o=i.getCurrentToken();return s.end.row=i.getCurrentTokenRow(),s.end.column=i.getCurrentTokenColumn()+o.value.length-2,s}},this.foldAll=function(t,e,n){void 0==n&&(n=1e5);var i=this.foldWidgets;if(i){e=e||this.getLength(),t=t||0;for(var r=t;r<e;r++)if(null==i[r]&&(i[r]=this.getFoldWidget(r)),"start"==i[r]){var o=this.getFoldWidgetRange(r);if(o&&o.isMultiLine()&&o.end.row<=e&&o.start.row>=t){r=o.end.row;try{var s=this.addFold("...",o);s&&(s.collapseChildren=n)}catch(a){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,"manual"==t&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){if(this.$foldMode!=t){if(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!t||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(t,e){var n=this.foldWidgets;if(!n||e&&n[t])return{};for(var i,r=t-1;r>=0;){var o=n[r];if(null==o&&(o=n[r]=this.getFoldWidget(r)),"start"==o){var s=this.getFoldWidgetRange(r);if(i||(i=s),s&&s.end.row>=t)break}r--}return{range:r!==-1&&s,firstRange:i}},this.onFoldWidgetClick=function(t,e){e=e.domEvent;var n={children:e.shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey},i=this.$toggleFoldWidget(t,n);if(!i){var r=e.target||e.srcElement;r&&/ace_fold-widget/.test(r.className)&&(r.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){
var n=this.getFoldWidget(t),i=this.getLine(t),r="end"===n?-1:1,o=this.getFoldAt(t,r===-1?0:i.length,r);if(o)return void(e.children||e.all?this.removeFold(o):this.expandFold(o));var s=this.getFoldWidgetRange(t,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1),o&&s.isEqual(o.range)))return void this.removeFold(o);if(e.siblings){var a=this.getParentFoldRangeData(t);if(a.range)var c=a.range.start.row+1,l=a.range.end.row;this.foldAll(c,l,e.all?1e4:0)}else e.children?(l=s?s.end.row:this.getLength(),this.foldAll(t+1,l,e.all?1e4:0)):s&&(e.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var n=this.$toggleFoldWidget(e,{});if(!n){var i=this.getParentFoldRangeData(e,!0);if(n=i.range||i.firstRange){e=n.start.row;var r=this.getFoldAt(e,this.getLine(e).length,1);r?this.removeFold(r):this.addFold("...",n)}}},this.updateFoldWidgets=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.foldWidgets[e]=null;else if("remove"==t.action)this.foldWidgets.splice(e,n+1,null);else{var i=Array(n+1);i.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}var r=t("../range").Range,o=t("./fold_line").FoldLine,s=t("./fold").Fold,a=t("../token_iterator").TokenIterator;e.Folding=i}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(t,e,n){"use strict";function i(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var n=e||this.getLine(t.row).charAt(t.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],t):this.$findOpeningBracket(i[2],t):null},this.getBracketRange=function(t){var e,n=this.getLine(t.row),i=!0,r=n.charAt(t.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(s||(r=n.charAt(t.column),t={row:t.row,column:t.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),i=!1),!s)return null;if(s[1]){var a=this.$findClosingBracket(s[1],t);if(!a)return null;e=o.fromPoints(t,a),i||(e.end.column++,e.start.column--),e.cursor=e.end}else{var a=this.$findOpeningBracket(s[2],t);if(!a)return null;e=o.fromPoints(a,t),i||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(t,e,n){var i=this.$brackets[t],o=1,s=new r(this,e.row,e.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var c=e.column-s.getCurrentTokenColumn()-2,l=a.value;;){for(;c>=0;){var u=l.charAt(c);if(u==i){if(o-=1,0==o)return{row:s.getCurrentTokenRow(),column:c+s.getCurrentTokenColumn()}}else u==t&&(o+=1);c-=1}do a=s.stepBackward();while(a&&!n.test(a.type));if(null==a)break;l=a.value,c=l.length-1}return null}},this.$findClosingBracket=function(t,e,n){var i=this.$brackets[t],o=1,s=new r(this,e.row,e.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var c=e.column-s.getCurrentTokenColumn();;){for(var l=a.value,u=l.length;c<u;){var h=l.charAt(c);if(h==i){if(o-=1,0==o)return{row:s.getCurrentTokenRow(),column:c+s.getCurrentTokenColumn()}}else h==t&&(o+=1);c+=1}do a=s.stepForward();while(a&&!n.test(a.type));if(null==a)break;c=0}return null}}}var r=t("../token_iterator").TokenIterator,o=t("../range").Range;e.BracketMatch=i}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/lang"),o=t("./config"),s=t("./lib/event_emitter").EventEmitter,a=t("./selection").Selection,c=t("./mode/text").Mode,l=t("./range").Range,u=t("./document").Document,h=t("./background_tokenizer").BackgroundTokenizer,f=t("./search_highlight").SearchHighlight,d=function(t,e){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof t&&t.getLine||(t=new u(t)),this.setDocument(t),this.selection=new a(this),o.resetOptions(this),this.setMode(e),o._signal("session",this)};(function(){function t(t){return!(t<4352)&&(t>=4352&&t<=4447||t>=4515&&t<=4519||t>=4602&&t<=4607||t>=9001&&t<=9002||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12283||t>=12288&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12589||t>=12593&&t<=12686||t>=12688&&t<=12730||t>=12736&&t<=12771||t>=12784&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=13054||t>=13056&&t<=19903||t>=19968&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=55216&&t<=55238||t>=55243&&t<=55291||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=65281&&t<=65376||t>=65504&&t<=65510)}i.implement(this,s),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=t,t.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,t)+1;e>n&&(this.$docRowCache.splice(n,e),this.$screenRowCache.splice(n,e))},this.$getRowCacheIndex=function(t,e){for(var n=0,i=t.length-1;n<=i;){var r=n+i>>1,o=t[r];if(e>o)n=r+1;else{if(!(e<o))return r;i=r-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){var e=t.data;this.$resetRowCache(e.start.row)},this.onChange=function(t){this.$modified=!0,this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);this.$fromUndo||!this.$undoManager||t.ignore||(this.$deltasDoc.push(t),e&&0!=e.length&&this.$deltasFold.push({action:"removeFolds",folds:e}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var n,i=this.bgTokenizer.getTokens(t),r=0;if(null==e)o=i.length-1,r=this.getLine(t).length;else for(var o=0;o<i.length&&(r+=i[o].value.length,!(r>=e));o++);return(n=i[o])?(n.index=o,n.start=r-n.value.length,n):null},this.setUndoManager=function(t){if(this.$undoManager=t,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),t){var e=this;this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.$deltasFold.length&&(e.$deltas.push({group:"fold",deltas:e.$deltasFold}),e.$deltasFold=[]),e.$deltasDoc.length&&(e.$deltas.push({group:"doc",deltas:e.$deltasDoc}),e.$deltasDoc=[]),e.$deltas.length>0&&t.execute({action:"aceupdate",args:[e.$deltas,e],merge:e.mergeUndoDeltas}),e.mergeUndoDeltas=!1,e.$deltas=[]},this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,n,i){var r=this.$markerId++,o={range:t,type:n||"line",renderer:"function"==typeof n?n:null,clazz:e,inFront:!!i,id:r};return i?(this.$frontMarkers[r]=o,this._signal("changeFrontMarker")):(this.$backMarkers[r]=o,this._signal("changeBackMarker")),r},this.addDynamicMarker=function(t,e){if(t.update){var n=this.$markerId++;return t.id=n,t.inFront=!!e,e?(this.$frontMarkers[n]=t,this._signal("changeFrontMarker")):(this.$backMarkers[n]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];if(e){var n=e.inFront?this.$frontMarkers:this.$backMarkers;e&&(delete n[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){if(!this.$searchHighlight){var e=new f(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,n,i){"number"!=typeof e&&(n=e,e=t),n||(n="ace_step");var r=new l(t,0,e,1/0);return r.id=this.addMarker(r,n,"fullLine",i),r},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);e?this.$autoNewLine=e[1]:this.$autoNewLine="\n"},this.getWordRange=function(t,e){var n=this.getLine(t),i=!1;if(e>0&&(i=!!n.charAt(e-1).match(this.tokenRe)),i||(i=!!n.charAt(e).match(this.tokenRe)),i)var r=this.tokenRe;else if(/^\s+$/.test(n.slice(e-1,e+1)))var r=/\s/;else var r=this.nonTokenRe;var o=e;if(o>0){do o--;while(o>=0&&n.charAt(o).match(r));o++}for(var s=e;s<n.length&&n.charAt(s).match(r);)s++;return new l(t,o,t,s)},this.getAWordRange=function(t,e){for(var n=this.getWordRange(t,e),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){var e=t.data;this.bgTokenizer.start(e.first),this._signal("tokenizerUpdate",t)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"==typeof t){if(t.getTokenizer)return this.$onChangeMode(t);var n=t,i=n.path}else i=t||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[i]&&!n?(this.$onChangeMode(this.$modes[i]),void(e&&e())):(this.$modeId=i,o.loadModule(["mode",i],function(t){return this.$modeId!==i?e&&e():(this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):t&&t.Mode&&(t=new t.Mode(n),n||(this.$modes[i]=t,t.$id=i),this.$onChangeMode(t)),void(e&&e()))}.bind(this)),void(this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)))},this.$onChangeMode=function(t,e){if(e||(this.$modeId=t.$id),this.$mode!==t){this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=t.getTokenizer();if(void 0!==n.addEventListener){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new h(n);var r=this;this.bgTokenizer.addEventListener("update",function(t){r._signal("tokenizerUpdate",t)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){o.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>t&&(t=e.screenWidth)}),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,r=0,o=this.$foldData[r],s=o?o.start.row:1/0,a=e.length,c=0;c<a;c++){if(c>s){if(c=o.end.row+1,c>=a)break;o=this.$foldData[r++],s=o?o.start.row:1/0}null==n[c]&&(n[c]=this.$getStringScreenWidth(e[c])[0]),n[c]>i&&(i=n[c])}this.screenWidth=i}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=null,i=t.length-1;i!=-1;i--){var r=t[i];"doc"==r.group?(this.doc.revertDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!0,n)):r.deltas.forEach(function(t){this.addFolds(t.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!e&&this.selection.setSelectionRange(n),n}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=null,i=0;i<t.length;i++){var r=t[i];"doc"==r.group&&(this.doc.applyDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!e&&this.selection.setSelectionRange(n),n}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e,n){function i(t){return e?"insert"!==t.action:"insert"===t.action}var r,o,s=t[0],a=!1;i(s)?(r=l.fromPoints(s.start,s.end),a=!0):(r=l.fromPoints(s.start,s.start),a=!1);for(var c=1;c<t.length;c++)s=t[c],i(s)?(o=s.start,r.compare(o.row,o.column)==-1&&r.setStart(o),o=s.end,1==r.compare(o.row,o.column)&&r.setEnd(o),a=!0):(o=s.start,r.compare(o.row,o.column)==-1&&(r=l.fromPoints(s.start,s.start)),a=!1);if(null!=n){0===l.comparePoints(n.start,r.start)&&(n.start.column+=r.end.column-r.start.column,n.end.column+=r.end.column-r.start.column);var u=n.compareRange(r);1==u?r.setStart(n.start):u==-1&&r.setEnd(n.end)}return r},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,n){var i=this.getTextRange(t),r=this.getFoldsInRange(t),o=l.fromPoints(e,e);if(!n){this.remove(t);var s=t.start.row-t.end.row,a=s?-t.end.column:t.start.column-t.end.column;a&&(o.start.row==t.end.row&&o.start.column>t.end.column&&(o.start.column+=a),o.end.row==t.end.row&&o.end.column>t.end.column&&(o.end.column+=a)),s&&o.start.row>=t.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,i),r.length){var c=t.start,u=o.start,s=u.row-c.row,a=u.column-c.column;this.addFolds(r.map(function(t){return t=t.clone(),t.start.row==c.row&&(t.start.column+=a),t.end.row==c.row&&(t.end.column+=a),t.start.row+=s,t.end.row+=s,t}))}return o},this.indentRows=function(t,e,n){n=n.replace(/\t/g,this.getTabString());for(var i=t;i<=e;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(t){for(var e=t.collapseRows(),n=new l(0,0,0,0),i=this.getTabSize(),r=e.start.row;r<=e.end.row;++r){var o=this.getLine(r);n.start.row=r,n.end.row=r;for(var s=0;s<i&&" "==o.charAt(s);++s);s<i&&"\t"==o.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(t,e,n){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),n<0){var i=this.getRowFoldStart(t+n);if(i<0)return 0;var r=i-t}else if(n>0){var i=this.getRowFoldEnd(e+n);if(i>this.doc.getLength()-1)return 0;var r=i-e}else{t=this.$clipRowToDocument(t),e=this.$clipRowToDocument(e);var r=e-t+1}var o=new l(t,0,e,Number.MAX_VALUE),s=this.getFoldsInRange(o).map(function(t){return t=t.clone(),t.start.row+=r,t.end.row+=r,t}),a=0==n?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+r,a),s.length&&this.addFolds(s),r},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return e<0?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){if(e=Math.max(0,e),t<0)t=0,e=0;else{var n=this.doc.getLength();t>=n?(t=n-1,e=this.doc.getLine(n-1).length):e=Math.min(this.doc.getLine(t).length,e)}return{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){if(t!=this.$useWrapMode){if(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var n=this.$wrapLimitRange;n.max<0&&(n={min:e,max:e});var i=this.$constrainWrapLimit(t,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,n){return e&&(t=Math.max(e,t)),n&&(t=Math.min(n,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e=this.$useWrapMode,n=t.action,i=t.start,r=t.end,o=i.row,s=r.row,a=s-o,c=null;if(this.$updating=!0,0!=a)if("remove"===n){this[e?"$wrapData":"$rowLengthCache"].splice(o,a);var l=this.$foldData;c=this.getFoldsInRange(t),this.removeFolds(c);var u=this.getFoldLine(r.row),h=0;if(u){u.addRemoveChars(r.row,r.column,i.column-r.column),u.shiftRow(-a);var f=this.getFoldLine(o);f&&f!==u&&(f.merge(u),u=f),h=l.indexOf(u)+1}for(h;h<l.length;h++){var u=l[h];u.start.row>=r.row&&u.shiftRow(-a)}s=o}else{var d=Array(a);d.unshift(o,0);var p=e?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,d);var l=this.$foldData,u=this.getFoldLine(o),h=0;if(u){var g=u.range.compareInside(i.row,i.column);0==g?(u=u.split(i.row,i.column),u&&(u.shiftRow(a),u.addRemoveChars(s,0,r.column-i.column))):g==-1&&(u.addRemoveChars(o,0,r.column-i.column),u.shiftRow(a)),h=l.indexOf(u)+1}for(h;h<l.length;h++){var u=l[h];u.start.row>=o&&u.shiftRow(a)}}else{a=Math.abs(t.start.column-t.end.column),"remove"===n&&(c=this.getFoldsInRange(t),this.removeFolds(c),a=-a);var u=this.getFoldLine(o);u&&u.addRemoveChars(o,i.column,a)}return e&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,e?this.$updateWrapData(o,s):this.$updateRowLengthCache(o,s),c},this.$updateRowLengthCache=function(t,e,n){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(t,e){var n,i,r=this.doc.getAllLines(),o=this.getTabSize(),s=this.$wrapData,c=this.$wrapLimit,l=t;for(e=Math.min(e,r.length-1);l<=e;)i=this.getFoldLine(l,i),i?(n=[],i.walk(function(t,e,i,o){var s;if(null!=t){s=this.$getDisplayTokens(t,n.length),s[0]=a;for(var c=1;c<s.length;c++)s[c]=u}else s=this.$getDisplayTokens(r[e].substring(o,i),n.length);n=n.concat(s)}.bind(this),i.end.row,r[i.end.row].length+1),s[i.start.row]=this.$computeWrapSplits(n,c,o),l=i.end.row+1):(n=this.$getDisplayTokens(r[l]),s[l]=this.$computeWrapSplits(n,c,o),l++)};var e=1,n=2,a=3,u=4,d=9,p=10,g=11,m=12;this.$computeWrapSplits=function(t,e,i){function r(){var e=0;if(0===y)return e;if(v)for(var n=0;n<t.length;n++){var r=t[n];if(r==p)e+=1;else{if(r!=g){if(r==m)continue;break}e+=i}}return f&&v!==!1&&(e+=i),Math.min(e,y)}function o(e){var n=t.slice(l,e),i=n.length;n.join("").replace(/12/g,function(){i-=1}).replace(/2/g,function(){i-=1}),s.length||(w=r(),s.indent=w),h+=i,s.push(h),l=e}if(0==t.length)return[];for(var s=[],c=t.length,l=0,h=0,f=this.$wrapAsCode,v=this.$indentedSoftWrap,y=e<=Math.max(2*i,8)||v===!1?0:Math.floor(e/2),w=0;c-l>e-w;){var b=l+e-w;if(t[b-1]>=p&&t[b]>=p)o(b);else if(t[b]!=a&&t[b]!=u){for(var x=Math.max(b-(e-(e>>2)),l-1);b>x&&t[b]<a;)b--;if(f){for(;b>x&&t[b]<a;)b--;for(;b>x&&t[b]==d;)b--}else for(;b>x&&t[b]<p;)b--;b>x?o(++b):(b=l+e,t[b]==n&&b--,o(b-w))}else{for(b;b!=l-1&&t[b]!=a;b--);if(b>l){o(b);continue}for(b=l+e;b<t.length&&t[b]==u;b++);if(b==t.length)break;o(b)}}return s},this.$getDisplayTokens=function(i,r){var o,s=[];r=r||0;for(var a=0;a<i.length;a++){var c=i.charCodeAt(a);if(9==c){o=this.getScreenTabSize(s.length+r),s.push(g);for(var l=1;l<o;l++)s.push(m)}else 32==c?s.push(p):c>39&&c<48||c>57&&c<64?s.push(d):c>=4352&&t(c)?s.push(e,n):s.push(e)}return s},this.$getStringScreenWidth=function(e,n,i){if(0==n)return[0,0];null==n&&(n=1/0),i=i||0;var r,o;for(o=0;o<e.length&&(r=e.charCodeAt(o),i+=9==r?this.getScreenTabSize(i):r>=4352&&t(r)?2:1,!(i>n));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(t){if(this.lineWidgets)var e=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0;else e=0;return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),n=this.$wrapData[e.row];return n.length&&n[0]<e.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var n=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(t,e){var n=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-t%this.$tabSize},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e){if(t<0)return{row:0,column:0};var n,i,r=0,o=0,s=0,a=0,c=this.$screenRowCache,l=this.$getRowCacheIndex(c,t),u=c.length;if(u&&l>=0)var s=c[l],r=this.$docRowCache[l],h=t>c[u-1];else var h=!u;for(var f=this.getLength()-1,d=this.getNextFoldLine(r),p=d?d.start.row:1/0;s<=t&&(a=this.getRowLength(r),!(s+a>t||r>=f));)s+=a,r++,r>p&&(r=d.end.row+1,d=this.getNextFoldLine(r,d),p=d?d.start.row:1/0),h&&(this.$docRowCache.push(r),this.$screenRowCache.push(s));if(d&&d.start.row<=r)n=this.getFoldDisplayLine(d),r=d.start.row;else{if(s+a<=t||r>f)return{row:f,column:this.getLine(f).length};n=this.getLine(r),d=null}var g=0;if(this.$useWrapMode){var m=this.$wrapData[r];if(m){var v=Math.floor(t-s);i=m[v],v>0&&m.length&&(g=m.indent,o=m[v-1]||m[m.length-1],n=n.substring(o))}}return o+=this.$getStringScreenWidth(n,e-g)[1],this.$useWrapMode&&o>=i&&(o=i-1),d?d.idxToPosition(o):{row:r,column:o}},this.documentToScreenPosition=function(t,e){if("undefined"==typeof e)var n=this.$clipPositionToDocument(t.row,t.column);else n=this.$clipPositionToDocument(t,e);t=n.row,e=n.column;var i=0,r=null,o=null;o=this.getFoldAt(t,e,1),o&&(t=o.start.row,e=o.start.column);var s,a=0,c=this.$docRowCache,l=this.$getRowCacheIndex(c,t),u=c.length;if(u&&l>=0)var a=c[l],i=this.$screenRowCache[l],h=t>c[u-1];else var h=!u;for(var f=this.getNextFoldLine(a),d=f?f.start.row:1/0;a<t;){if(a>=d){if(s=f.end.row+1,s>t)break;f=this.getNextFoldLine(s,f),d=f?f.start.row:1/0}else s=a+1;i+=this.getRowLength(a),a=s,h&&(this.$docRowCache.push(a),this.$screenRowCache.push(i))}var p="";f&&a>=d?(p=this.getFoldDisplayLine(f,t,e),r=f.start.row):(p=this.getLine(t).substring(0,e),r=t);var g=0;if(this.$useWrapMode){var m=this.$wrapData[r];if(m){for(var v=0;p.length>=m[v];)i++,v++;p=p.substring(m[v-1]||0,p.length),g=v>0?m.indent:0}}return{row:i,column:g+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,r=0,e=this.$foldData[r++],o=e?e.start.row:1/0;i<n;){var s=this.$wrapData[i];t+=s?s.length+1:1,i++,i>o&&(i=e.end.row+1,e=this.$foldData[r++],o=e?e.start.row:1/0)}else{t=this.getLength();for(var a=this.$foldData,r=0;r<a.length;r++)e=a[r],t-=e.end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,n,i){if(0===n)return[0,0];n||(n=1/0),i=i||0;var r,o;for(o=0;o<e.length&&(r=e.charAt(o),i+="\t"===r?this.getScreenTabSize(i):t.getCharacterWidth(r),!(i>n));o++);return[i,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}).call(d.prototype),t("./edit_session/folding").Folding.call(d.prototype),t("./edit_session/bracket_match").BracketMatch.call(d.prototype),o.defineOptions(d.prototype,"session",{wrap:{set:function(t){if(t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t)if(this.$wrap=t,t){var e="number"==typeof t?t:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){t="auto"==t?"text"!=this.$mode.type:"text"!=t,t!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){isNaN(t)||this.$tabSize===t||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId}}}),e.EditSession=d}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,e,n){"use strict";var i=t("./lib/lang"),r=t("./lib/oop"),o=t("./range").Range,s=function(){this.$options={}};(function(){this.set=function(t){return r.mixin(this.$options,t),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,n=this.$matchIterator(t,e);if(!n)return!1;var i=null;return n.forEach(function(t,n,r){if(t.start)i=t;else{var s=t.offset+(r||0);if(i=new o(n,s,n,s+t.length),!t.length&&e.start&&e.start.start&&0!=e.skipCurrent&&i.isEqual(e.start))return i=null,!1}return!0}),i},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var n=e.range,r=n?t.getLines(n.start.row,n.end.row):t.doc.getAllLines(),s=[],a=e.re;if(e.$isMultiLine){var c,l=a.length,u=r.length-l;t:for(var h=a.offset||0;h<=u;h++){for(var f=0;f<l;f++)if(r[h+f].search(a[f])==-1)continue t;var d=r[h],p=r[h+l-1],g=d.length-d.match(a[0])[0].length,m=p.match(a[l-1])[0].length;c&&c.end.row===h&&c.end.column>g||(s.push(c=new o(h,g,h+l-1,m)),l>2&&(h=h+l-2))}}else for(var v=0;v<r.length;v++)for(var y=i.getMatchOffsets(r[v],a),f=0;f<y.length;f++){var w=y[f];s.push(new o(v,w.offset,v,w.offset+w.length))}if(n){for(var b=n.start.column,x=n.start.column,v=0,f=s.length-1;v<f&&s[v].start.column<b&&s[v].start.row==n.start.row;)v++;for(;v<f&&s[f].end.column>x&&s[f].end.row==n.end.row;)f--;for(s=s.slice(v,f+1),v=0,f=s.length;v<f;v++)s[v].start.row+=n.start.row,s[v].end.row+=n.start.row}return s},this.replace=function(t,e){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return e;if(i){var r=i.exec(t);if(!r||r[0].length!=t.length)return null;if(e=t.replace(i,e),n.preserveCase){e=e.split("");for(var o=Math.min(t.length,t.length);o--;){var s=t[o];s&&s.toLowerCase()!=s?e[o]=e[o].toUpperCase():e[o]=e[o].toLowerCase()}e=e.join("")}return e}},this.$matchIterator=function(t,e){var n=this.$assembleRegExp(e);if(!n)return!1;var r;if(e.$isMultiLine)var s=n.length,a=function(e,i,a){var c=e.search(n[0]);
if(c!=-1){for(var l=1;l<s;l++)if(e=t.getLine(i+l),e.search(n[l])==-1)return;var u=e.match(n[s-1])[0].length,h=new o(i,c,i+s-1,u);return 1==n.offset?(h.start.row--,h.start.column=Number.MAX_VALUE):a&&(h.start.column+=a),!!r(h)||void 0}};else if(e.backwards)var a=function(t,e,o){for(var s=i.getMatchOffsets(t,n),a=s.length-1;a>=0;a--)if(r(s[a],e,o))return!0};else var a=function(t,e,o){for(var s=i.getMatchOffsets(t,n),a=0;a<s.length;a++)if(r(s[a],e,o))return!0};var c=this.$lineIterator(t,e);return{forEach:function(t){r=t,c.forEach(a)}}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var n=t.needle;if(!t.needle)return t.re=!1;t.regExp||(n=i.escapeRegExp(n)),t.wholeWord&&(n="\\b"+n+"\\b");var r=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(n),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(n,r);try{var o=new RegExp(n,r)}catch(s){o=!1}return t.re=o},this.$assembleMultilineRegExp=function(t,e){for(var n=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],r=0;r<n.length;r++)try{i.push(new RegExp(n[r],e))}catch(o){return!1}return""==n[0]?(i.shift(),i.offset=1):i.offset=0,i},this.$lineIterator=function(t,e){var n=1==e.backwards,i=0!=e.skipCurrent,r=e.range,o=e.start;o||(o=r?r[n?"end":"start"]:t.selection.getRange()),o.start&&(o=o[i!=n?"end":"start"]);var s=r?r.start.row:0,a=r?r.end.row:t.getLength()-1,c=n?function(n){var i=o.row,r=t.getLine(i).substring(0,o.column);if(!n(r,i)){for(i--;i>=s;i--)if(n(t.getLine(i),i))return;if(0!=e.wrap)for(i=a,s=o.row;i>=s;i--)if(n(t.getLine(i),i))return}}:function(n){var i=o.row,r=t.getLine(i).substr(o.column);if(!n(r,i,o.column)){for(i+=1;i<=a;i++)if(n(t.getLine(i),i))return;if(0!=e.wrap)for(i=s,a=o.row;i<=a;i++)if(n(t.getLine(i),i))return}};return{forEach:c}}}).call(s.prototype),e.Search=s}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,e,n){"use strict";function i(t,e){this.platform=e||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function r(t,e){i.call(this,t,e),this.$singleCommand=!1}var o=t("../lib/keys"),s=t("../lib/useragent"),a=o.KEY_MODS;r.prototype=i.prototype,function(){function t(t){return"object"==typeof t&&t.bindKey&&t.bindKey.position||0}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var n=t&&("string"==typeof t?t:t.name);t=this.commands[n],e||delete this.commands[n];var i=this.commandKeyBinding;for(var r in i){var o=i[r];if(o==t)delete i[r];else if(Array.isArray(o)){var s=o.indexOf(t);s!=-1&&(o.splice(s,1),1==o.length&&(i[r]=o[0]))}}},this.bindKey=function(t,e,n){if("object"==typeof t&&t&&(void 0==n&&(n=t.position),t=t[this.platform]),t)return"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach(function(t){var i="";if(t.indexOf(" ")!=-1){var r=t.split(/\s+/);t=r.pop(),r.forEach(function(t){var e=this.parseKeys(t),n=a[e.hashId]+e.key;i+=(i?" ":"")+n,this._addCommandToBinding(i,"chainKeys")},this),i+=" "}var o=this.parseKeys(t),s=a[o.hashId]+o.key;this._addCommandToBinding(i+s,e,n)},this)},this._addCommandToBinding=function(e,n,i){var r,o=this.commandKeyBinding;if(n)if(!o[e]||this.$singleCommand)o[e]=n;else{Array.isArray(o[e])?(r=o[e].indexOf(n))!=-1&&o[e].splice(r,1):o[e]=[o[e]],"number"!=typeof i&&(i=i||n.isDefault?-100:t(n));var s=o[e];for(r=0;r<s.length;r++){var a=s[r],c=t(a);if(c>i)break}s.splice(r,0,n)}else delete o[e]},this.addCommands=function(t){t&&Object.keys(t).forEach(function(e){var n=t[e];if(n){if("string"==typeof n)return this.bindKey(n,e);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=e),this.addCommand(n))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(t){return t}),n=e.pop(),i=o[n];if(o.FUNCTION_KEYS[i])n=o.FUNCTION_KEYS[i].toLowerCase();else{if(!e.length)return{key:n,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:n.toUpperCase(),hashId:-1}}for(var r=0,s=e.length;s--;){var a=o.KEY_MODS[e[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+e[s]+" in "+t),!1;r|=a}return{key:n,hashId:r}},this.findKeyCommand=function(t,e){var n=a[t]+e;return this.commandKeyBinding[n]},this.handleKeyboard=function(t,e,n,i){if(!(i<0)){var r=a[e]+n,o=this.commandKeyBinding[r];return t.$keyChain&&(t.$keyChain+=" "+r,o=this.commandKeyBinding[t.$keyChain]||o),!o||"chainKeys"!=o&&"chainKeys"!=o[o.length-1]?(t.$keyChain&&(e&&4!=e||1!=n.length?(e==-1||i>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-r.length-1)),{command:o}):(t.$keyChain=t.$keyChain||r,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}.call(i.prototype),e.HashHandler=i,e.MultiHashHandler=r}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../keyboard/hash_handler").MultiHashHandler,o=t("../lib/event_emitter").EventEmitter,s=function(t,e){r.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",function(t){return t.command.exec(t.editor,t.args||{})})};i.inherits(s,r),function(){i.implement(this,o),this.exec=function(t,e,n){if(Array.isArray(t)){for(var i=t.length;i--;)if(this.exec(t[i],e,n))return!0;return!1}if("string"==typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;var r={editor:e,command:t,args:n};return r.returnValue=this._emit("exec",r),this._signal("afterExec",r),r.returnValue!==!1},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach(function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map(function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t})}}.call(s.prototype),e.CommandManager=s}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(t,e,n){"use strict";function i(t,e){return{win:t,mac:e}}var r=t("../lib/lang"),o=t("../config"),s=t("../range").Range;e.commands=[{name:"showSettingsMenu",bindKey:i("Ctrl-,","Command-,"),exec:function(t){o.loadModule("ace/ext/settings_menu",function(e){e.init(t),t.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:i("Alt-E","Ctrl-E"),exec:function(t){o.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:i("Alt-Shift-E","Ctrl-Shift-E"),exec:function(t){o.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:i("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",bindKey:i(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:i("Ctrl-L","Command-L"),exec:function(t){var e=parseInt(prompt("Enter line number:"),10);isNaN(e)||t.gotoLine(e)},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:i("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:i("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:i(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:i("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:i("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:i("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:i("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",bindKey:i("Ctrl-F","Command-F"),exec:function(t){o.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:i("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:i("Shift-Up","Shift-Up"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:i("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:i("Ctrl-Shift-End","Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:i("Shift-Down","Shift-Down"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:i("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:i("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:i("Alt-Shift-Left","Command-Shift-Left"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:i("Shift-Left","Shift-Left"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:i("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:i("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:i("Alt-Shift-Right","Command-Shift-Right"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:i("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:i("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:i(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:i(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:i("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:i("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",bindKey:i("Ctrl-P","Ctrl-P"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:i("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:i("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:i(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(t){},readOnly:!0},{name:"cut",exec:function(t){var e=t.getSelectionRange();t._emit("cut",e),t.selection.isEmpty()||(t.session.remove(e),t.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",bindKey:i("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:i("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:i("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:i("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:i("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:i("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:i("Ctrl-H","Command-Option-F"),exec:function(t){o.loadModule("ace/ext/searchbox",function(e){e.Search(t,!0)})}},{name:"undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:i("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:i("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:i("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:i("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:i("Shift-Delete",null),exec:function(t){return!!t.selection.isEmpty()&&void t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:i("Alt-Delete","Ctrl-K"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:i("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:i("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:i("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(t,e){t.insert(r.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:i(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:i("Ctrl-T","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:i("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:i(null,null),exec:function(t){for(var e=t.selection.isBackwards(),n=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),i=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),o=t.session.doc.getLine(n.row).length,a=t.session.doc.getTextRange(t.selection.getRange()),c=a.replace(/\n\s*/," ").length,l=t.session.doc.getLine(n.row),u=n.row+1;u<=i.row+1;u++){var h=r.stringTrimLeft(r.stringTrimRight(t.session.doc.getLine(u)));0!==h.length&&(h=" "+h),l+=h}i.row+1<t.session.doc.getLength()-1&&(l+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new s(n.row,0,i.row+2,0),l),c>0?(t.selection.moveCursorTo(n.row,n.column),t.selection.selectTo(n.row,n.column+c)):(o=t.session.doc.getLine(n.row).length>o?o+1:o,t.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:i(null,null),exec:function(t){var e=t.session.doc.getLength()-1,n=t.session.doc.getLine(e).length,i=t.selection.rangeList.ranges,r=[];i.length<1&&(i=[t.selection.getRange()]);for(var o=0;o<i.length;o++)o==i.length-1&&(i[o].end.row===e&&i[o].end.column===n||r.push(new s(i[o].end.row,i[o].end.column,e,n))),0===o?0===i[o].start.row&&0===i[o].start.column||r.push(new s(0,0,i[o].start.row,i[o].start.column)):r.push(new s(i[o-1].end.row,i[o-1].end.column,i[o].start.row,i[o].start.column));t.exitMultiSelectMode(),t.clearSelection();for(var o=0;o<r.length;o++)t.selection.addRange(r[o],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./lib/lang"),s=t("./lib/useragent"),a=t("./keyboard/textinput").TextInput,c=t("./mouse/mouse_handler").MouseHandler,l=t("./mouse/fold_handler").FoldHandler,u=t("./keyboard/keybinding").KeyBinding,h=t("./edit_session").EditSession,f=t("./search").Search,d=t("./range").Range,p=t("./lib/event_emitter").EventEmitter,g=t("./commands/command_manager").CommandManager,m=t("./commands/default_commands").commands,v=t("./config"),y=t("./token_iterator").TokenIterator,w=function(t,e){var n=t.getContainerElement();this.container=n,this.renderer=t,this.commands=new g(s.isMac?"mac":"win",m),this.textInput=new a(t.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new u(this),this.$mouseHandler=new c(this),new l(this),this.$blockScrolling=0,this.$search=(new f).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(t,e){e._$emitInputEvent.schedule(31)}),this.setSession(e||new h("")),v.resetOptions(this),v._signal("editor",this)};(function(){i.implement(this,p),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(t){if(this.curOp){if(t&&t.returnValue===!1)return this.curOp=null;this._signal("beforeEndOperation");var e=this.curOp.command;e.name&&this.$blockScrolling>0&&this.$blockScrolling--;var n=e&&e.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),r=this.renderer.layerConfig;(i.start.row>=r.lastRow||i.end.row<=r.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){if(this.$mergeUndoDeltas){var e=this.prevOp,n=this.$mergeableCommands,i=e.command&&t.command.name==e.command.name;if("insertstring"==t.command.name){var r=t.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(e.args)),this.mergeNextCommand=!0}else i=i&&n.indexOf(t.command.name)!==-1;"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:n.indexOf(t.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,e){if(t&&"string"==typeof t){this.$keybindingId=t;var n=this;v.loadModule(["keybinding",t],function(i){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(i&&i.handler),e&&e()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){if(this.session!=t){this.curOp&&this.endOperation(),this.curOp={};var e=this.session;if(e){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=t,t?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this})}},this.getSession=function(){return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():e==-1&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container,"fontSize")},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var t=this;this.$highlightPending=!0,setTimeout(function(){t.$highlightPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=e.findMatchingBracket(t.getCursorPosition());if(n)var i=new d(n.row,n.column,n.row,n.column+1);else if(e.$mode.getMatching)var i=e.$mode.getMatching(t.session);i&&(e.$bracketHighlight=e.addMarker(i,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var t=this;this.$highlightTagPending=!0,setTimeout(function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=t.getCursorPosition(),i=new y(t.session,n.row,n.column),r=i.getCurrentToken();if(!r||!/\b(?:tag-open|tag-name)/.test(r.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(r.type.indexOf("tag-open")==-1||(r=i.stepForward())){var o=r.value,s=0,a=i.stepBackward();if("<"==a.value){do a=r,r=i.stepForward(),r&&r.value===o&&r.type.indexOf("tag-name")!==-1&&("<"===a.value?s++:"</"===a.value&&s--);while(r&&s>=0)}else{do r=a,a=i.stepBackward(),r&&r.value===o&&r.type.indexOf("tag-name")!==-1&&("<"===a.value?s++:"</"===a.value&&s--);while(a&&s<=0);i.stepForward()}if(!r)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var c=i.getCurrentTokenRow(),l=i.getCurrentTokenColumn(),u=new d(c,l,c,l+r.value.length);
e.$tagHighlight&&0!==u.compareRange(e.$backMarkers[e.$tagHighlight].range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),u&&!e.$tagHighlight&&(e.$tagHighlight=e.addMarker(u,"ace_bracket","text"))}}},50)}},this.focus=function(){var t=this;setTimeout(function(){t.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(t){var e=this.session.$useWrapMode,n=t.start.row==t.end.row?t.end.row:1/0;this.renderer.updateLines(t.start.row,n,e),this._signal("change",t),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(v.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new d(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();e.$selectionMarker=e.addMarker(n,"ace_selection",i)}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var n=e.start.column-1,i=e.end.column+1,r=t.getLine(e.start.row),o=r.length,s=r.substring(Math.max(n,0),Math.min(i,o));if(!(n>=0&&/^[\w\d]/.test(s)||i<=o&&/[\w\d]$/.test(s))&&(s=r.substring(e.start.column,e.end.column),/^[\w\d]+$/.test(s))){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s});return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText();return this._signal("copy",t),t},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){var n={text:t,event:e};this.commands.exec("paste",this,n)},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(e);else{var n=e.split(/\r\n|\r|\n/),i=this.selection.rangeList.ranges;if(n.length>i.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,e);for(var r=i.length;r--;){var o=i[r];o.isEmpty()||this.session.remove(o),this.session.insert(o.start,n[r])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var n=this.session,i=n.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var o=i.transformAction(n.getState(r.row),"insertion",this,n,t);o&&(t!==o.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),t=o.text)}if("\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var s=new d.fromPoints(r,r);s.end.column+=t.length,this.session.remove(s)}}else{var s=this.getSelectionRange();r=this.session.remove(s),this.clearSelection()}if("\n"==t||"\r\n"==t){var a=n.getLine(r.row);if(r.column>a.search(/\S|$/)){var c=a.substr(r.column).search(/\S|$/);n.doc.removeInLine(r.row,r.column,r.column+c)}}this.clearSelection();var l=r.column,u=n.getState(r.row),a=n.getLine(r.row),h=i.checkOutdent(u,a,t);n.insert(r,t);if(o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new d(r.row,l+o.selection[0],r.row,l+o.selection[1])):this.selection.setSelectionRange(new d(r.row+o.selection[0],o.selection[1],r.row+o.selection[2],o.selection[3]))),n.getDocument().isNewLine(t)){var f=i.getNextLineIndent(u,a.slice(0,r.column),n.getTabString());n.insert({row:r.row+1,column:0},f)}h&&i.autoOutdent(u,n,r.row)},this.onTextInput=function(t){this.keyBinding.onTextInput(t)},this.onCommandKey=function(t,e,n){this.keyBinding.onCommandKey(t,e,n)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(e.start.row),r=n.getMode().transformAction(i,"deletion",this,n,e);if(0===e.end.column){var o=n.getTextRange(e);if("\n"==o[o.length-1]){var s=n.getLine(e.end.row);/^\s+$/.test(s)&&(e.end.column=s.length)}}r&&(e=r)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var t=this.getCursorPosition(),e=t.column;if(0!==e){var n,i,r=this.session.getLine(t.row);e<r.length?(n=r.charAt(e)+r.charAt(e-1),i=new d(t.row,e-1,t.row,e+1)):(n=r.charAt(e-1)+r.charAt(e-2),i=new d(t.row,e-2,t.row,e)),this.session.replace(i,n)}}},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(e.start.row<e.end.row){var n=this.$getSelectedRows();return void t.indentRows(n.first,n.last,"\t")}if(e.start.column<e.end.column){var i=t.getTextRange(e);if(!/^\s+$/.test(i)){var n=this.$getSelectedRows();return void t.indentRows(n.first,n.last,"\t")}}var r=t.getLine(e.start.row),s=e.start,a=t.getTabSize(),c=t.documentToScreenColumn(s.row,s.column);if(this.session.getUseSoftTabs())var l=a-c%a,u=o.stringRepeat(" ",l);else{for(var l=c%a;" "==r[e.start.column]&&l;)e.start.column--,l--;this.selection.setSelectionRange(e),u="\t"}return this.insert(u)},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){var t=this.$getSelectedRows(),e=this.session,n=[];for(r=t.first;r<=t.last;r++)n.push(e.getLine(r));n.sort(function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0});for(var i=new d(0,0,0,0),r=t.first;r<=t.last;r++){var o=e.getLine(r);i.start.row=r,i.end.row=r,i.end.column=o.length,e.replace(i,n[r-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,n,t)},this.getNumberAt=function(t,e){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(t);n.lastIndex<e;){var r=n.exec(i);if(r.index<=e&&r.index+r[0].length>=e){var o={value:r[0],start:r.index,end:r.index+r[0].length};return o}}return null},this.modifyNumber=function(t){var e=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new d(e,n-1,e,n),r=this.session.getTextRange(i);if(!isNaN(parseFloat(r))&&isFinite(r)){var o=this.getNumberAt(e,n);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,c=parseFloat(o.value);c*=Math.pow(10,a),t*=s!==o.end&&n<s?Math.pow(10,o.end-n-1):Math.pow(10,o.end-n),c+=t,c/=Math.pow(10,a);var l=c.toFixed(a),u=new d(e,o.start,e,o.end);this.session.replace(u,l),this.moveCursorTo(e,Math.max(o.start+1,n+l.length-o.value.length))}}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t=this.selection,e=this.session,n=t.getRange(),i=t.isBackwards();if(n.isEmpty()){var r=n.start.row;e.duplicateLines(r,r)}else{var o=i?n.start:n.end,s=e.insert(o,e.getTextRange(n),!1);n.start=o,n.end=s,t.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,n){return this.session.moveText(t,e,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var n,i,r=this.selection;if(!r.inMultiSelectMode||this.inVirtualSelectionMode){var o=r.toOrientedRange();n=this.$getSelectedRows(o),i=this.session.$moveLines(n.first,n.last,e?0:t),e&&t==-1&&(i=0),o.moveBy(i,0),r.fromOrientedRange(o)}else{var s=r.rangeList.ranges;r.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,c=0,l=s.length,u=0;u<l;u++){var h=u;s[u].moveBy(a,0),n=this.$getSelectedRows(s[u]);for(var f=n.first,d=n.last;++u<l;){c&&s[u].moveBy(c,0);var p=this.$getSelectedRows(s[u]);if(e&&p.first!=d)break;if(!e&&p.first>d+1)break;d=p.last}for(u--,a=this.session.$moveLines(f,d,e?0:t),e&&t==-1&&(h=u+1);h<=u;)s[h].moveBy(a,0),h++;e||(a=0),c+=a}r.fromOrientedRange(r.ranges[0]),r.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var n=this.renderer,i=this.renderer.layerConfig,r=t*Math.floor(i.height/i.lineHeight);this.$blockScrolling++,e===!0?this.selection.$moveSelection(function(){this.moveCursorBy(r,0)}):e===!1&&(this.selection.moveCursorBy(r,0),this.selection.clearSelection()),this.$blockScrolling--;var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight),null!=e&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,n,i){this.renderer.scrollToLine(t,e,n,i)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var n=this.getCursorPosition(),i=new y(this.session,n.row,n.column),r=i.getCurrentToken(),o=r||i.stepForward();if(o){var s,a,c=!1,l={},u=n.column-o.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;u<o.value.length&&!c;u++)if(h[o.value[u]])switch(a=h[o.value[u]]+"."+o.type.replace("rparen","lparen"),isNaN(l[a])&&(l[a]=0),o.value[u]){case"(":case"[":case"{":l[a]++;break;case")":case"]":case"}":l[a]--,l[a]===-1&&(s="bracket",c=!0)}}else o&&o.type.indexOf("tag-name")!==-1&&(isNaN(l[o.value])&&(l[o.value]=0),"<"===r.value?l[o.value]++:"</"===r.value&&l[o.value]--,l[o.value]===-1&&(s="tag",c=!0));c||(r=o,o=i.stepForward(),u=0)}while(o&&!c);if(s){var f,p;if("bracket"===s)f=this.session.getBracketRange(n),f||(f=new d(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1),p=f.start,(e||p.row===n.row&&Math.abs(p.column-n.column)<2)&&(f=this.session.getBracketRange(p)));else if("tag"===s){if(!o||o.type.indexOf("tag-name")===-1)return;var g=o.value;if(f=new d(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2),0===f.compare(n.row,n.column)){c=!1;do o=r,r=i.stepBackward(),r&&(r.type.indexOf("tag-close")!==-1&&f.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),o.value===g&&o.type.indexOf("tag-name")!==-1&&("<"===r.value?l[g]++:"</"===r.value&&l[g]--,0===l[g]&&(c=!0)));while(r&&!c)}o&&o.type.indexOf("tag-name")&&(p=f.start,p.row==n.row&&Math.abs(p.column-n.column)<2&&(p=f.end))}p=f&&f.cursor||p,p&&(t?f&&e?this.selection.setRange(f):f&&f.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(p.row,p.column):this.selection.moveTo(p.row,p.column))}}},this.gotoLine=function(t,e,n){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.$blockScrolling-=1,this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,n)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,t)&&(i=1),null!==n&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),i):i},this.replaceAll=function(t,e){e&&this.$search.set(e);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;this.$blockScrolling+=1;var r=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],t)&&i++;return this.selection.setSelectionRange(r),this.$blockScrolling-=1,i},this.$tryReplace=function(t,e){var n=this.session.getTextRange(t);return e=this.$search.replace(n,e),null!==e?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,n){e||(e={}),"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==typeof t&&i.mixin(e,t);var r=this.selection.getRange();null==e.needle&&(t=this.session.getTextRange(r)||this.$search.$options.needle,t||(r=this.session.getWordRange(r.start.row,r.start.column),t=this.session.getTextRange(r)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:r});var o=this.$search.find(this.session);return e.preventScroll?o:o?(this.revealRange(o,n),o):(e.backwards?r.start=r.end:r.end=r.start,void this.selection.setRange(r))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.$blockScrolling+=1,this.session.unfold(t),this.selection.setSelectionRange(t),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),e!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(t){if(t){var e,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var r=this.$scrollAnchor;r.style.cssText="position:absolute",this.container.insertBefore(r,this.container.firstChild);var o=this.on("changeSelection",function(){i=!0}),s=this.renderer.on("beforeRender",function(){i&&(e=n.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(i&&e&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var t=n.renderer,o=t.$cursorLayer.$pixelPos,s=t.layerConfig,a=o.top-s.offset;i=o.top>=0&&a+e.top<0||!(o.top<s.height&&o.top+e.top+s.lineHeight>window.innerHeight)&&null,null!=i&&(r.style.top=a+"px",r.style.left=o.left+"px",r.style.height=s.lineHeight+"px",r.scrollIntoView(i)),i=e=null}});this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,r.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))}}).call(w.prototype),v.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.keybindingId},handlesSet:!0},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),e.Editor=w}),ace.define("ace/undomanager",["require","exports","module"],function(t,e,n){"use strict";var i=function(){this.reset()};(function(){function t(t){return{action:t.action,start:t.start,end:t.end,lines:1==t.lines.length?null:t.lines,text:1==t.lines.length?t.lines[0]:null}}function e(t){return{action:t.action,start:t.start,end:t.end,lines:t.lines||[t.text]}}function n(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++){for(var r=t[i],o={group:r.group,deltas:new Array(r.length)},s=0;s<r.deltas.length;s++){var a=r.deltas[s];o.deltas[s]=e(a)}n[i]=o}return n}this.execute=function(t){var e=t.args[0];this.$doc=t.args[1],t.merge&&this.hasUndo()&&(this.dirtyCounter--,e=this.$undoStack.pop().concat(e)),this.$undoStack.push(e),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(t){var e=this.$undoStack.pop(),n=null;return e&&(n=this.$doc.undoChanges(e,t),this.$redoStack.push(e),this.dirtyCounter--),n},this.redo=function(t){var e=this.$redoStack.pop(),n=null;return e&&(n=this.$doc.redoChanges(this.$deserializeDeltas(e),t),this.$undoStack.push(e),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(e){return n(e,t)},this.$deserializeDeltas=function(t){return n(t,e)}}).call(i.prototype),e.UndoManager=i}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/oop"),o=t("../lib/lang"),s=t("../lib/event_emitter").EventEmitter,a=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){r.implement(this,s),this.setSession=function(t){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=t,t&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var n=t[e],i=n.row,r=this.$annotations[i];r||(r=this.$annotations[i]={text:[]});var s=n.text;s=s?o.escapeHTML(s):n.html||"",r.text.indexOf(s)===-1&&r.text.push(s);var a=n.type;"error"==a?r.className=" ace_error":"warning"==a&&" ace_error"!=r.className?r.className=" ace_warning":"info"!=a||r.className||(r.className=" ace_info")}},this.$updateAnnotations=function(t){if(this.$annotations.length){var e=t.start.row,n=t.end.row-e;if(0===n);else if("remove"==t.action)this.$annotations.splice(e,n+1,null);else{var i=new Array(n+1);i.unshift(e,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(t){for(var e=this.session,n=t.firstRow,r=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1),o=e.getNextFoldLine(n),s=o?o.start.row:1/0,a=this.$showFoldWidgets&&e.foldWidgets,c=e.$breakpoints,l=e.$decorations,u=e.$firstLineNumber,h=0,f=e.gutterRenderer||this.$renderer,d=null,p=-1,g=n;;){if(g>s&&(g=o.end.row+1,o=e.getNextFoldLine(g,o),s=o?o.start.row:1/0),g>r){for(;this.$cells.length>p+1;)d=this.$cells.pop(),this.element.removeChild(d.element);break}d=this.$cells[++p],d||(d={element:null,textNode:null,foldWidget:null},d.element=i.createElement("div"),d.textNode=document.createTextNode(""),d.element.appendChild(d.textNode),this.element.appendChild(d.element),this.$cells[p]=d);var m="ace_gutter-cell ";c[g]&&(m+=c[g]),l[g]&&(m+=l[g]),this.$annotations[g]&&(m+=this.$annotations[g].className),d.element.className!=m&&(d.element.className=m);var v=e.getRowLength(g)*t.lineHeight+"px";if(v!=d.element.style.height&&(d.element.style.height=v),a){var y=a[g];null==y&&(y=a[g]=e.getFoldWidget(g))}if(y){d.foldWidget||(d.foldWidget=i.createElement("span"),d.element.appendChild(d.foldWidget));var m="ace_fold-widget ace_"+y;m+="start"==y&&g==s&&g<o.end.row?" ace_closed":" ace_open",d.foldWidget.className!=m&&(d.foldWidget.className=m);var v=t.lineHeight+"px";d.foldWidget.style.height!=v&&(d.foldWidget.style.height=v)}else d.foldWidget&&(d.element.removeChild(d.foldWidget),d.foldWidget=null);var w=h=f?f.getText(e,g):g+u;w!=d.textNode.data&&(d.textNode.data=w),g++}this.element.style.height=t.minHeight+"px",(this.$fixedWidth||e.$useWrapMode)&&(h=e.getLength()+u);var b=f?f.getWidth(e,h,t):h.toString().length*t.characterWidth,x=this.$padding||this.$computePadding();b+=x.left+x.right,b===this.gutterWidth||isNaN(b)||(this.gutterWidth=b,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",b))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(t.paddingLeft)+1||0,
this.$padding.right=parseInt(t.paddingRight)||0,this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return t.x<e.left+n.left?"markers":this.$showFoldWidgets&&t.x>n.right-e.right?"foldWidgets":void 0}}).call(a.prototype),e.Gutter=a}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(t,e,n){"use strict";var i=t("../range").Range,r=t("../lib/dom"),o=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)};(function(){function t(t,e,n,i){return(t?1:0)|(e?2:0)|(n?4:0)|(i?8:0)}this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.update=function(t){var t=t||this.config;if(t){this.config=t;var e=[];for(var n in this.markers){var i=this.markers[n];if(i.range){var r=i.range.clipRows(t.firstRow,t.lastRow);if(!r.isEmpty())if(r=r.toScreenRange(this.session),i.renderer){var o=this.$getTop(r.start.row,t),s=this.$padding+r.start.column*t.characterWidth;i.renderer(e,r,s,o,t)}else"fullLine"==i.type?this.drawFullLineMarker(e,r,i.clazz,t):"screenLine"==i.type?this.drawScreenLineMarker(e,r,i.clazz,t):r.isMultiLine()?"text"==i.type?this.drawTextMarker(e,r,i.clazz,t):this.drawMultiLineMarker(e,r,i.clazz,t):this.drawSingleLineMarker(e,r,i.clazz+" ace_start ace_br15",t)}else i.update(e,this,this.session,t)}this.element.innerHTML=e.join("")}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(e,n,r,o,s){for(var a=this.session,c=n.start.row,l=n.end.row,u=c,h=0,f=0,d=a.getScreenLastRowColumn(u),p=new i(u,n.start.column,u,f);u<=l;u++)p.start.row=p.end.row=u,p.start.column=u==c?n.start.column:a.getRowWrapIndent(u),p.end.column=d,h=f,f=d,d=u+1<l?a.getScreenLastRowColumn(u+1):u==l?0:n.end.column,this.drawSingleLineMarker(e,p,r+(u==c?" ace_start":"")+" ace_br"+t(u==c||u==c+1&&n.start.column,h<f,f>d,u==l),o,u==l?0:1,s)},this.drawMultiLineMarker=function(t,e,n,i,r){var o=this.$padding,s=i.lineHeight,a=this.$getTop(e.start.row,i),c=o+e.start.column*i.characterWidth;r=r||"",t.push("<div class='",n," ace_br1 ace_start' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",c,"px;",r,"'></div>"),a=this.$getTop(e.end.row,i);var l=e.end.column*i.characterWidth;if(t.push("<div class='",n," ace_br12' style='","height:",s,"px;","width:",l,"px;","top:",a,"px;","left:",o,"px;",r,"'></div>"),s=(e.end.row-e.start.row-1)*i.lineHeight,!(s<=0)){a=this.$getTop(e.start.row+1,i);var u=(e.start.column?1:0)|(e.end.column?0:8);t.push("<div class='",n,u?" ace_br"+u:"","' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",o,"px;",r,"'></div>")}},this.drawSingleLineMarker=function(t,e,n,i,r,o){var s=i.lineHeight,a=(e.end.column+(r||0)-e.start.column)*i.characterWidth,c=this.$getTop(e.start.row,i),l=this.$padding+e.start.column*i.characterWidth;t.push("<div class='",n,"' style='","height:",s,"px;","width:",a,"px;","top:",c,"px;","left:",l,"px;",o||"","'></div>")},this.drawFullLineMarker=function(t,e,n,i,r){var o=this.$getTop(e.start.row,i),s=i.lineHeight;e.start.row!=e.end.row&&(s+=this.$getTop(e.end.row,i)-o),t.push("<div class='",n,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")},this.drawScreenLineMarker=function(t,e,n,i,r){var o=this.$getTop(e.start.row,i),s=i.lineHeight;t.push("<div class='",n,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")}}).call(o.prototype),e.Marker=o}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../lib/dom"),o=t("../lib/lang"),s=(t("../lib/useragent"),t("../lib/event_emitter").EventEmitter),a=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){i.implement(this,s),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.$updateEolChar=function(){var t="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(t){this.$padding=t,this.element.style.padding="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(t){this._signal("changeCharacterSize",t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e=this.$tabStrings=[0],n=1;n<t+1;n++)this.showInvisibles?e.push("<span class='ace_invisible ace_invisible_tab'>"+o.stringRepeat(this.TAB_CHAR,n)+"</span>"):e.push(o.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide",r="",s="";if(this.showInvisibles){i+=" ace_invisible",r=" ace_invisible_space",s=" ace_invisible_tab";var a=o.stringRepeat(this.SPACE_CHAR,this.tabSize),c=o.stringRepeat(this.TAB_CHAR,this.tabSize)}else var a=o.stringRepeat(" ",this.tabSize),c=a;this.$tabStrings[" "]="<span class='"+i+r+"'>"+a+"</span>",this.$tabStrings["\t"]="<span class='"+i+s+"'>"+c+"</span>"}},this.updateLines=function(t,e,n){this.config.lastRow==t.lastRow&&this.config.firstRow==t.firstRow||this.scrollLines(t),this.config=t;for(var i=Math.max(e,t.firstRow),r=Math.min(n,t.lastRow),o=this.element.childNodes,s=0,a=t.firstRow;a<i;a++){var c=this.session.getFoldLine(a);if(c){if(c.containsRow(i)){i=c.start.row;break}a=c.end.row}s++}for(var a=i,c=this.session.getNextFoldLine(a),l=c?c.start.row:1/0;;){if(a>l&&(a=c.end.row+1,c=this.session.getNextFoldLine(a,c),l=c?c.start.row:1/0),a>r)break;var u=o[s++];if(u){var h=[];this.$renderLine(h,a,!this.$useLineGroups(),a==l&&c),u.style.height=t.lineHeight*this.session.getRowLength(a)+"px",u.innerHTML=h.join("")}a++}},this.scrollLines=function(t){var e=this.config;if(this.config=t,!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);var n=this.element;if(e.firstRow<t.firstRow)for(var i=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);i>0;i--)n.removeChild(n.firstChild);if(e.lastRow>t.lastRow)for(var i=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);i>0;i--)n.removeChild(n.lastChild);if(t.firstRow<e.firstRow){var r=this.$renderLinesFragment(t,t.firstRow,e.firstRow-1);n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}if(t.lastRow>e.lastRow){var r=this.$renderLinesFragment(t,e.lastRow+1,t.lastRow);n.appendChild(r)}},this.$renderLinesFragment=function(t,e,n){for(var i=this.element.ownerDocument.createDocumentFragment(),o=e,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;;){if(o>a&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),a=s?s.start.row:1/0),o>n)break;var c=r.createElement("div"),l=[];if(this.$renderLine(l,o,!1,o==a&&s),c.innerHTML=l.join(""),this.$useLineGroups())c.className="ace_line_group",i.appendChild(c),c.style.height=t.lineHeight*this.session.getRowLength(o)+"px";else for(;c.firstChild;)i.appendChild(c.firstChild);o++}return i},this.update=function(t){this.config=t;for(var e=[],n=t.firstRow,i=t.lastRow,r=n,o=this.session.getNextFoldLine(r),s=o?o.start.row:1/0;;){if(r>s&&(r=o.end.row+1,o=this.session.getNextFoldLine(r,o),s=o?o.start.row:1/0),r>i)break;this.$useLineGroups()&&e.push("<div class='ace_line_group' style='height:",t.lineHeight*this.session.getRowLength(r),"px'>"),this.$renderLine(e,r,!1,r==s&&o),this.$useLineGroups()&&e.push("</div>"),r++}this.element.innerHTML=e.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,n,i){var r=this,s=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,a=function(t,n,i,s,a){if(n)return r.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+o.stringRepeat(r.SPACE_CHAR,t.length)+"</span>":t;if("&"==t)return"&#38;";if("<"==t)return"&#60;";if(">"==t)return"&#62;";if("\t"==t){var c=r.session.getScreenTabSize(e+s);return e+=c-1,r.$tabStrings[c]}if("　"==t){var l=r.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",u=r.showInvisibles?r.SPACE_CHAR:"";return e+=1,"<span class='"+l+"' style='width:"+2*r.config.characterWidth+"px'>"+u+"</span>"}return i?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+r.SPACE_CHAR+"</span>":(e+=1,"<span class='ace_cjk' style='width:"+2*r.config.characterWidth+"px'>"+t+"</span>")},c=i.replace(s,a);if(this.$textToken[n.type])t.push(c);else{var l="ace_"+n.type.replace(/\./g," ace_"),u="";"fold"==n.type&&(u=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),t.push("<span class='",l,"'",u,">",c,"</span>")}return e+i.length},this.renderIndentGuide=function(t,e,n){var i=e.search(this.$indentGuideRe);return i<=0||i>=n?e:" "==e[0]?(i-=i%this.tabSize,t.push(o.stringRepeat(this.$tabStrings[" "],i/this.tabSize)),e.substr(i)):"\t"==e[0]?(t.push(o.stringRepeat(this.$tabStrings["\t"],i)),e.substr(i)):e},this.$renderWrappedLine=function(t,e,n,i){for(var r=0,s=0,a=n[0],c=0,l=0;l<e.length;l++){var u=e[l],h=u.value;if(0==l&&this.displayIndentGuides){if(r=h.length,h=this.renderIndentGuide(t,h,a),!h)continue;r-=h.length}if(r+h.length<a)c=this.$renderToken(t,c,u,h),r+=h.length;else{for(;r+h.length>=a;)c=this.$renderToken(t,c,u,h.substring(0,a-r)),h=h.substring(a-r),r=a,i||t.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),t.push(o.stringRepeat(" ",n.indent)),s++,c=0,a=n[s]||Number.MAX_VALUE;0!=h.length&&(r+=h.length,c=this.$renderToken(t,c,u,h))}}},this.$renderSimpleLine=function(t,e){var n=0,i=e[0],r=i.value;this.displayIndentGuides&&(r=this.renderIndentGuide(t,r)),r&&(n=this.$renderToken(t,n,i,r));for(var o=1;o<e.length;o++)i=e[o],r=i.value,n=this.$renderToken(t,n,i,r)},this.$renderLine=function(t,e,n,i){if(i||0==i||(i=this.session.getFoldLine(e)),i)var r=this.$getFoldLineTokens(e,i);else var r=this.session.getTokens(e);if(n||t.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(e)),"px'>"),r.length){var o=this.session.getRowSplitData(e);o&&o.length?this.$renderWrappedLine(t,r,o,n):this.$renderSimpleLine(t,r)}this.showInvisibles&&(i&&(e=i.end.row),t.push("<span class='ace_invisible ace_invisible_eol'>",e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||t.push("</div>")},this.$getFoldLineTokens=function(t,e){function n(t,e,n){for(var i=0,o=0;o+t[i].value.length<e;)if(o+=t[i].value.length,i++,i==t.length)return;if(o!=e){var s=t[i].value.substring(e-o);s.length>n-e&&(s=s.substring(0,n-e)),r.push({type:t[i].type,value:s}),o=e+s.length,i+=1}for(;o<n&&i<t.length;){var s=t[i].value;s.length+o>n?r.push({type:t[i].type,value:s.substring(0,n-o)}):r.push(t[i]),o+=s.length,i+=1}}var i=this.session,r=[],o=i.getTokens(t);return e.walk(function(t,e,s,a,c){null!=t?r.push({type:"fold",value:t}):(c&&(o=i.getTokens(e)),o.length&&n(o,a,s))},e.end.row,this.session.getLine(e.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),e.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";var i,r=t("../lib/dom"),o=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),void 0===i&&(i=!("opacity"in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(i?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(t){for(var e=this.cursors,n=e.length;n--;)e[n].style.visibility=t?"":"hidden"},this.$updateOpacity=function(t){for(var e=this.cursors,n=e.length;n--;)e[n].style.opacity=t?"":"0"},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t==this.smoothBlinking||i||(this.smoothBlinking=t,r.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var t=r.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(this.cursors.length>1){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var e=function(){this.timeoutId=setTimeout(function(){t(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){t(!0),e()},this.blinkInterval),e()}},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t||(t=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(t),i=this.$padding+n.column*this.config.characterWidth,r=(n.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:r}},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,n=0,i=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]);for(var n=0,r=e.length;n<r;n++){var o=this.getPixelPosition(e[n].cursor,!0);if(!((o.top>t.height+t.offset||o.top<0)&&n>1)){var s=(this.cursors[i++]||this.addCursor()).style;this.drawCursor?this.drawCursor(s,o,t,e[n],this.session):(s.left=o.left+"px",s.top=o.top+"px",s.width=t.characterWidth+"px",s.height=t.lineHeight+"px")}}for(;this.cursors.length>i;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(o.prototype),e.Cursor=o}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./lib/event"),s=t("./lib/event_emitter").EventEmitter,a=function(t){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){i.implement(this,s),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t}}).call(a.prototype);var c=function(t,e){a.call(this,t),this.scrollTop=0,e.$scrollbarWidth=this.width=r.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};i.inherits(c,a),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=function(t){this.inner.style.height=t+"px"},this.setScrollHeight=function(t){this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=t)}}.call(c.prototype);var l=function(t,e){a.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(l.prototype),e.ScrollBar=c,e.ScrollBarV=c,e.ScrollBarH=l,e.VScrollBar=c,e.HScrollBar=l}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(t,e,n){"use strict";var i=t("./lib/event"),r=function(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.window=e||window};(function(){this.schedule=function(t){if(this.changes=this.changes|t,!this.pending&&this.changes){this.pending=!0;var e=this;i.nextFrame(function(){e.pending=!1;for(var t;t=e.changes;)e.changes=0,e.onRender(t)},this.window)}}}).call(r.prototype),e.RenderLoop=r}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(t,e,n){var i=t("../lib/oop"),r=t("../lib/dom"),o=t("../lib/lang"),s=t("../lib/useragent"),a=t("../lib/event_emitter").EventEmitter,c=0,l=e.FontMetrics=function(t){this.el=r.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=r.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=r.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),c||this.$testFractionalRect(),this.$measureNode.innerHTML=o.stringRepeat("X",c),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){i.implement(this,a),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var t=r.createElement("div");this.$setMeasureNodeStyles(t.style),t.style.width="0.2px",document.documentElement.appendChild(t);var e=t.getBoundingClientRect().width;c=e>0&&e<1?50:100,t.parentNode.removeChild(t)},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",s.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(){var t=this.$measureSizes();if(t&&(this.$characterSize.width!==t.width||this.$characterSize.height!==t.height)){this.$measureNode.style.fontWeight="bold";var e=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=setInterval(function(){t.checkForSizeChanges()},500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50===c){var t=null;try{t=this.$measureNode.getBoundingClientRect()}catch(e){t={width:0,height:0}}var n={height:t.height,width:t.width/c}}else var n={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/c};return 0===n.width||0===n.height?null:n},this.$measureCharWidth=function(t){this.$main.innerHTML=o.stringRepeat(t,c);var e=this.$main.getBoundingClientRect();return e.width/c},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(l.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./config"),s=t("./lib/useragent"),a=t("./layer/gutter").Gutter,c=t("./layer/marker").Marker,l=t("./layer/text").Text,u=t("./layer/cursor").Cursor,h=t("./scrollbar").HScrollBar,f=t("./scrollbar").VScrollBar,d=t("./renderloop").RenderLoop,p=t("./layer/font_metrics").FontMetrics,g=t("./lib/event_emitter").EventEmitter,m='.ace_editor {\tposition: relative;\toverflow: hidden;\tfont: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;\tdirection: ltr;\t}\t.ace_scroller {\tposition: absolute;\toverflow: hidden;\ttop: 0;\tbottom: 0;\tbackground-color: inherit;\t-ms-user-select: none;\t-moz-user-select: none;\t-webkit-user-select: none;\tuser-select: none;\tcursor: text;\t}\t.ace_content {\tposition: absolute;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tmin-width: 100%;\t}\t.ace_dragging .ace_scroller:before{\tposition: absolute;\ttop: 0;\tleft: 0;\tright: 0;\tbottom: 0;\tcontent: \'\';\tbackground: rgba(250, 250, 250, 0.01);\tz-index: 1000;\t}\t.ace_dragging.ace_dark .ace_scroller:before{\tbackground: rgba(0, 0, 0, 0.01);\t}\t.ace_selecting, .ace_selecting * {\tcursor: text !important;\t}\t.ace_gutter {\tposition: absolute;\toverflow : hidden;\twidth: auto;\ttop: 0;\tbottom: 0;\tleft: 0;\tcursor: default;\tz-index: 4;\t-ms-user-select: none;\t-moz-user-select: none;\t-webkit-user-select: none;\tuser-select: none;\t}\t.ace_gutter-active-line {\tposition: absolute;\tleft: 0;\tright: 0;\t}\t.ace_scroller.ace_scroll-left {\tbox-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\t}\t.ace_gutter-cell {\tpadding-left: 19px;\tpadding-right: 6px;\tbackground-repeat: no-repeat;\t}\t.ace_gutter-cell.ace_error {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");\tbackground-repeat: no-repeat;\tbackground-position: 2px center;\t}\t.ace_gutter-cell.ace_warning {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");\tbackground-position: 2px center;\t}\t.ace_gutter-cell.ace_info {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");\tbackground-position: 2px center;\t}\t.ace_dark .ace_gutter-cell.ace_info {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");\t}\t.ace_scrollbar {\tposition: absolute;\tright: 0;\tbottom: 0;\tz-index: 6;\t}\t.ace_scrollbar-inner {\tposition: absolute;\tcursor: text;\tleft: 0;\ttop: 0;\t}\t.ace_scrollbar-v{\toverflow-x: hidden;\toverflow-y: scroll;\ttop: 0;\t}\t.ace_scrollbar-h {\toverflow-x: scroll;\toverflow-y: hidden;\tleft: 0;\t}\t.ace_print-margin {\tposition: absolute;\theight: 100%;\t}\t.ace_text-input {\tposition: absolute;\tz-index: 0;\twidth: 0.5em;\theight: 1em;\topacity: 0;\tbackground: transparent;\t-moz-appearance: none;\tappearance: none;\tborder: none;\tresize: none;\toutline: none;\toverflow: hidden;\tfont: inherit;\tpadding: 0 1px;\tmargin: 0 -1px;\ttext-indent: -1em;\t-ms-user-select: text;\t-moz-user-select: text;\t-webkit-user-select: text;\tuser-select: text;\twhite-space: pre!important;\t}\t.ace_text-input.ace_composition {\tbackground: inherit;\tcolor: inherit;\tz-index: 1000;\topacity: 1;\ttext-indent: 0;\t}\t.ace_layer {\tz-index: 1;\tposition: absolute;\toverflow: hidden;\tword-wrap: normal;\twhite-space: pre;\theight: 100%;\twidth: 100%;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tpointer-events: none;\t}\t.ace_gutter-layer {\tposition: relative;\twidth: auto;\ttext-align: right;\tpointer-events: auto;\t}\t.ace_text-layer {\tfont: inherit !important;\t}\t.ace_cjk {\tdisplay: inline-block;\ttext-align: center;\t}\t.ace_cursor-layer {\tz-index: 4;\t}\t.ace_cursor {\tz-index: 4;\tposition: absolute;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tborder-left: 2px solid;\ttransform: translatez(0);\t}\t.ace_slim-cursors .ace_cursor {\tborder-left-width: 1px;\t}\t.ace_overwrite-cursors .ace_cursor {\tborder-left-width: 0;\tborder-bottom: 1px solid;\t}\t.ace_hidden-cursors .ace_cursor {\topacity: 0.2;\t}\t.ace_smooth-blinking .ace_cursor {\t-webkit-transition: opacity 0.18s;\ttransition: opacity 0.18s;\t}\t.ace_editor.ace_multiselect .ace_cursor {\tborder-left-width: 1px;\t}\t.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\tposition: absolute;\tz-index: 3;\t}\t.ace_marker-layer .ace_selection {\tposition: absolute;\tz-index: 5;\t}\t.ace_marker-layer .ace_bracket {\tposition: absolute;\tz-index: 6;\t}\t.ace_marker-layer .ace_active-line {\tposition: absolute;\tz-index: 2;\t}\t.ace_marker-layer .ace_selected-word {\tposition: absolute;\tz-index: 4;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\t}\t.ace_line .ace_fold {\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tdisplay: inline-block;\theight: 11px;\tmargin-top: -2px;\tvertical-align: middle;\tbackground-image:\turl("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\turl("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");\tbackground-repeat: no-repeat, repeat-x;\tbackground-position: center center, top left;\tcolor: transparent;\tborder: 1px solid black;\tborder-radius: 2px;\tcursor: pointer;\tpointer-events: auto;\t}\t.ace_dark .ace_fold {\t}\t.ace_fold:hover{\tbackground-image:\turl("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\turl("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");\t}\t.ace_tooltip {\tbackground-color: #FFF;\tbackground-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));\tbackground-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\tborder: 1px solid gray;\tborder-radius: 1px;\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\tcolor: black;\tmax-width: 100%;\tpadding: 3px 4px;\tposition: fixed;\tz-index: 999999;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tcursor: default;\twhite-space: pre;\tword-wrap: break-word;\tline-height: normal;\tfont-style: normal;\tfont-weight: normal;\tletter-spacing: normal;\tpointer-events: none;\t}\t.ace_folding-enabled > .ace_gutter-cell {\tpadding-right: 13px;\t}\t.ace_fold-widget {\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tmargin: 0 -12px 0 1px;\tdisplay: none;\twidth: 11px;\tvertical-align: top;\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");\tbackground-repeat: no-repeat;\tbackground-position: center;\tborder-radius: 3px;\tborder: 1px solid transparent;\tcursor: pointer;\t}\t.ace_folding-enabled .ace_fold-widget {\tdisplay: inline-block;   \t}\t.ace_fold-widget.ace_end {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");\t}\t.ace_fold-widget.ace_closed {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");\t}\t.ace_fold-widget:hover {\tborder: 1px solid rgba(0, 0, 0, 0.3);\tbackground-color: rgba(255, 255, 255, 0.2);\tbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\t}\t.ace_fold-widget:active {\tborder: 1px solid rgba(0, 0, 0, 0.4);\tbackground-color: rgba(0, 0, 0, 0.05);\tbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\t}\t.ace_dark .ace_fold-widget {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");\t}\t.ace_dark .ace_fold-widget.ace_end {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");\t}\t.ace_dark .ace_fold-widget.ace_closed {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");\t}\t.ace_dark .ace_fold-widget:hover {\tbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\tbackground-color: rgba(255, 255, 255, 0.1);\t}\t.ace_dark .ace_fold-widget:active {\tbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\t}\t.ace_fold-widget.ace_invalid {\tbackground-color: #FFB4B4;\tborder-color: #DE5555;\t}\t.ace_fade-fold-widgets .ace_fold-widget {\t-webkit-transition: opacity 0.4s ease 0.05s;\ttransition: opacity 0.4s ease 0.05s;\topacity: 0;\t}\t.ace_fade-fold-widgets:hover .ace_fold-widget {\t-webkit-transition: opacity 0.05s ease 0.05s;\ttransition: opacity 0.05s ease 0.05s;\topacity:1;\t}\t.ace_underline {\ttext-decoration: underline;\t}\t.ace_bold {\tfont-weight: bold;\t}\t.ace_nobold .ace_bold {\tfont-weight: normal;\t}\t.ace_italic {\tfont-style: italic;\t}\t.ace_error-marker {\tbackground-color: rgba(255, 0, 0,0.2);\tposition: absolute;\tz-index: 9;\t}\t.ace_highlight-marker {\tbackground-color: rgba(255, 255, 0,0.2);\tposition: absolute;\tz-index: 8;\t}\t.ace_br1 {border-top-left-radius    : 3px;}\t.ace_br2 {border-top-right-radius   : 3px;}\t.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\t.ace_br4 {border-bottom-right-radius: 3px;}\t.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\t.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\t.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\t.ace_br8 {border-bottom-left-radius : 3px;}\t.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\t.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\t.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\t.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\t.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\t.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\t.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\t';
r.importCssString(m,"ace_editor.css");var v=function(t,e){var n=this;this.container=t||r.createElement("div"),this.$keepTextAreaAtCursor=!s.isOldIE,r.addCssClass(this.container,"ace_editor"),this.setTheme(e),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new c(this.content);var i=this.$textLayer=new l(this.content);this.canvas=i.element,this.$markerFront=new c(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new f(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",function(t){n.$scrollAnimation||n.session.setScrollTop(t.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(t){n.$scrollAnimation||n.session.setScrollLeft(t.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(t){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",t)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,g),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,n){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=t?1:0;var r=this.container;i||(i=r.clientHeight||r.scrollHeight),n||(n=r.clientWidth||r.scrollWidth);var o=this.$updateCachedSize(t,e,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,n,i){i-=this.$extraHeight||0;var r=0,o=this.$size,s={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};return i&&(t||o.height!=i)&&(o.height=i,r|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",r|=this.CHANGE_SCROLL),n&&(t||o.width!=n)&&(r|=this.CHANGE_SIZE,o.width=n,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,this.scrollBarH.element.style.left=this.scroller.style.left=e+"px",o.scrollerWidth=Math.max(0,n-e-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(r|=this.CHANGE_FULL)),o.$dirty=!n||!i,r&&this._signal("resize",s),r},this.onGutterResize=function(){var t=this.$showGutter?this.$gutter.offsetWidth:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var t=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(t/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var t=this.$cursorLayer.$pixelPos,e=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,t=this.$cursorLayer.getPixelPosition(n,!0),e*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=t.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=e+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var t=r.createElement("div");t.className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var t=this.layerConfig,e=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;e-=t.offset;var i=this.textarea.style,r=this.lineHeight;if(e<0||e>t.height-r)return void(i.top=i.left="0");var o=this.characterWidth;if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"");o*=this.session.$getStringScreenWidth(s)[0]+2,r+=2}n-=this.scrollLeft,n>this.$size.scrollerWidth-o&&(n=this.$size.scrollerWidth-o),n+=this.gutterWidth,i.height=r+"px",i.width=o+"px",i.left=Math.min(n,this.$size.scrollerWidth-o)+"px",i.top=Math.min(e,this.$size.height-r)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow,n=this.session.documentToScreenRow(e,0)*t.lineHeight;return n-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,n,i){var r=this.scrollMargin;r.top=0|t,r.bottom=0|e,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,r.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-r.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(t-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>t-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!t&&!e)return void(this.$changes|=t);if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var n=this.layerConfig;if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL){if(t|=this.$computeLayerConfig(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig())}n=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px"}return t&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):t&this.CHANGE_SCROLL?(t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(t&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),void this._signal("afterRender"))},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,n=Math.max((this.$minLines||1)*this.lineHeight,Math.min(e,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight());var i=t>e;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var r=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,r,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,n=e.height<=2*this.lineHeight,i=this.session.getScreenLength(),r=i*this.lineHeight,o=this.$getLongestLine(),s=!n&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-o-2*this.$padding<0),a=this.$horizScroll!==s;a&&(this.$horizScroll=s,this.scrollBarH.setVisible(s));var c=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=this.scrollTop%this.lineHeight,u=e.scrollerHeight+this.lineHeight,h=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;r+=h;var f=this.scrollMargin;this.session.setScrollTop(Math.max(-f.top,Math.min(this.scrollTop,r-e.scrollerHeight+f.bottom))),this.session.setScrollLeft(Math.max(-f.left,Math.min(this.scrollLeft,o+2*this.$padding-e.scrollerWidth+f.right)));var d=!n&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-r+h<0||this.scrollTop>f.top),p=c!==d;p&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var g,m,v=Math.ceil(u/this.lineHeight)-1,y=Math.max(0,Math.round((this.scrollTop-l)/this.lineHeight)),w=y+v,b=this.lineHeight;y=t.screenToDocumentRow(y,0);var x=t.getFoldLine(y);x&&(y=x.start.row),g=t.documentToScreenRow(y,0),m=t.getRowLength(y)*b,w=Math.min(t.screenToDocumentRow(w,0),t.getLength()-1),u=e.scrollerHeight+t.getRowLength(w)*b+m,l=this.scrollTop-g*b;var A=0;return this.layerConfig.width!=o&&(A=this.CHANGE_H_SCROLL),(a||p)&&(A=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),p&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:y,firstRowScreen:g,lastRow:w,lineHeight:b,characterWidth:this.characterWidth,minHeight:u,maxHeight:r,offset:l,gutterOffset:Math.max(0,Math.ceil((l+e.height-e.scrollerHeight)/b)),height:this.$size.scrollerHeight},A},this.$updateLines=function(){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(t>n.lastRow+1||e<n.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,t,e),!0)},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,n){this.scrollCursorIntoView(t,n),this.scrollCursorIntoView(e,n)},this.scrollCursorIntoView=function(t,e,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(t),r=i.left,o=i.top,s=n&&n.top||0,a=n&&n.bottom||0,c=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;c+s>o?(e&&c+s>o+this.lineHeight&&(o-=e*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):c+this.$size.scrollerHeight-a<o+this.lineHeight&&(e&&c+this.$size.scrollerHeight-a<o-this.lineHeight&&(o+=e*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight-this.$size.scrollerHeight));var l=this.scrollLeft;l>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):l+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):l<=this.$padding&&r-l<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var n=this.$cursorLayer.getPixelPosition(t),i=this.$size.scrollerHeight-this.lineHeight,r=n.top-i*(e||0);return this.session.setScrollTop(r),r},this.STEPS=8,this.$calcSteps=function(t,e){var n=0,i=this.STEPS,r=[],o=function(t,e,n){return n*(Math.pow(t-1,3)+1)+e};for(n=0;n<i;++n)r.push(o(n/this.STEPS,t,e-t));return r},this.scrollToLine=function(t,e,n,i){var r=this.$cursorLayer.getPixelPosition({row:t,column:0}),o=r.top;e&&(o-=this.$size.scrollerHeight/2);var s=this.scrollTop;this.session.setScrollTop(o),n!==!1&&this.animateScrolling(s,i)},this.animateScrolling=function(t,e){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(t!=n){if(this.$scrollAnimation){var r=this.$scrollAnimation.steps;if(r.length&&(t=r[0],t==n))return}var o=i.$calcSteps(t,n);this.$scrollAnimation={from:t,to:n,steps:o},clearInterval(this.$timer),i.session.setScrollTop(o.shift()),i.session.$scrollTop=n,this.$timer=setInterval(function(){o.length?(i.session.setScrollTop(o.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,e&&e())},10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return e<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(e>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(t<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(t>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=(t+this.scrollLeft-n.left-this.$padding)/this.characterWidth,r=Math.floor((e+this.scrollTop-n.top)/this.lineHeight),o=Math.round(i);return{row:r,column:o,side:i-o>0?1:-1}},this.screenToTextCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=Math.round((t+this.scrollLeft-n.left-this.$padding)/this.characterWidth),r=(e+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(r,Math.max(i,0))},this.textToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(t,e),r=this.$padding+Math.round(i.column*this.characterWidth),o=i.row*this.lineHeight;return{pageX:n.left+r-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(t){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(r.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(t,e){function n(n){if(i.$themeId!=t)return e&&e();if(n.cssClass){r.importCssString(n.cssText,n.cssClass,i.container.ownerDocument),i.theme&&r.removeCssClass(i.container,i.theme.cssClass);var o="padding"in n?n.padding:"padding"in(i.theme||{})?4:i.$padding;i.$padding&&o!=i.$padding&&i.setPadding(o),i.$theme=n.cssClass,i.theme=n,r.addCssClass(i.container,n.cssClass),r.setCssClass(i.container,"ace_dark",n.isDark),i.$size&&(i.$size.width=0,i.$updateSizeAsync()),i._dispatchEvent("themeLoaded",{theme:n}),e&&e()}}var i=this;if(this.$themeId=t,i._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t)n(t);else{var s=t||this.$options.theme.initialValue;o.loadModule(["theme",s],n)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){r.setCssClass(this.container,t,e!==!1)},this.unsetStyle=function(t){r.removeCssClass(this.container,t)},this.setCursorStyle=function(t){this.scroller.style.cursor!=t&&(this.scroller.style.cursor=t)},this.setMouseCursor=function(t){this.scroller.style.cursor=t},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(v.prototype),o.defineOptions(v.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t)},initialValue:!0},showLineNumbers:{set:function(t){this.$gutterLayer.setShowLineNumbers(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=t?"":"none",void(this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight())):(this.$gutterLineHighlight=r.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight))},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(t){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.updateFull()}},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),e.VirtualRenderer=v}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(t,e,i){"use strict";var r=t("../lib/oop"),o=t("../lib/net"),s=t("../lib/event_emitter").EventEmitter,a=t("../config"),c=function(e,i,r,o){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),a.get("packaged")||!t.toUrl)o=o||a.moduleUrl(i.id,"worker");else{var s=this.$normalizePath;o=o||s(t.toUrl("ace/worker/worker.js",null,"_"));var c={};e.forEach(function(e){c[e]=s(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{var l=i.src,u=n(608),h=new u([l],{type:"application/javascript"}),f=(window.URL||window.webkitURL).createObjectURL(h);this.$worker=new Worker(f)}catch(d){if(!(d instanceof window.DOMException))throw d;var h=this.$workerBlob(o),p=window.URL||window.webkitURL,g=p.createObjectURL(h);this.$worker=new Worker(g),p.revokeObjectURL(g)}this.$worker.postMessage({init:!0,tlns:c,module:i.id,classname:r}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,s),this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var n=this.callbacks[e.id];n&&(n(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return o.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,e.push(i)}this.send(t,e)},this.emit=function(t,e){try{this.$worker.postMessage({event:t,data:{data:e.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))},this.$workerBlob=function(t){var e="importScripts('"+o.qualifyURL(t)+"');";try{return new Blob([e],{type:"application/javascript"})}catch(n){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,r=new i;return r.append(e),r.getBlob("application/javascript")}}}).call(c.prototype);var l=function(t,e,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var i=null,r=!1,o=Object.create(s),c=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(t){c.messageBuffer.push(t),i&&(r?setTimeout(l):l())},this.setEmitSync=function(t){r=t};var l=function(){var t=c.messageBuffer.shift();t.command?i[t.command].apply(i,t.args):t.event&&o._signal(t.event,t.data)};o.postMessage=function(t){c.onMessage({data:t})},o.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},o.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},a.loadModule(["worker",e],function(t){for(i=new t[n](o);c.messageBuffer.length;)l()})};l.prototype=c.prototype,e.UIWorkerClient=l,e.WorkerClient=c}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(t,e,n){"use strict";var i=t("./range").Range,r=t("./lib/event_emitter").EventEmitter,o=t("./lib/oop"),s=function(t,e,n,i,r,o){var s=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=r,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=n;var a=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,r),this.setup=function(){var t=this,e=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=n.addMarker(new i(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var i=e.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),t.others.push(i)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,e=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),e.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){
if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var n="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,r=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,o=e.start.column-this.pos.column;if(this.updateAnchors(t),r&&(this.length+=n),r&&!this.session.$fromUndo)if("insert"===t.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],c={row:a.row,column:a.column+o};this.doc.insertMergedLines(c,t.lines)}else if("remove"===t.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],c={row:a.row,column:a.column+o};this.doc.remove(new i(c.row,c.column,c.row,c.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,n=function(n,r){e.removeMarker(n.markerId),n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),r,null,!1)};n(this.pos,this.mainClass);for(var r=this.others.length;r--;)n(this.others[r],this.othersClass)}},this.onCursorChange=function(t){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth!==-1){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,n=0;n<e;n++)t.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),e.PlaceHolder=s}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,e,n){function i(t,e){return t.row==e.row&&t.column==e.column}function r(t){var e=t.domEvent,n=e.altKey,r=e.shiftKey,a=e.ctrlKey,c=t.getAccelKey(),l=t.getButton();if(a&&s.isMac&&(l=e.button),t.editor.inMultiSelectMode&&2==l)return void t.editor.textInput.onContextMenu(t.domEvent);if(!a&&!n&&!c)return void(0===l&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode());if(0===l){var u,h=t.editor,f=h.selection,d=h.inMultiSelectMode,p=t.getDocumentPosition(),g=f.getCursor(),m=t.inSelection()||f.isEmpty()&&i(p,g),v=t.x,y=t.y,w=function(t){v=t.clientX,y=t.clientY},b=h.session,x=h.renderer.pixelToScreenCoordinates(v,y),A=x;if(h.$mouseHandler.$enableJumpToDef)a&&n||c&&n?u=r?"block":"add":n&&h.$blockSelectEnabled&&(u="block");else if(c&&!n){if(u="add",!d&&r)return}else n&&h.$blockSelectEnabled&&(u="block");if(u&&s.isMac&&e.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==u){if(!d&&m)return;if(!d){var E=f.toOrientedRange();h.addSelectionMarker(E)}var _=f.rangeList.rangeAtPoint(p);h.$blockScrolling++,h.inVirtualSelectionMode=!0,r&&(_=null,E=f.ranges[0]||E,h.removeSelectionMarker(E)),h.once("mouseup",function(){var t=f.toOrientedRange();_&&t.isEmpty()&&i(_.cursor,t.cursor)?f.substractPoint(t.cursor):(r?f.substractPoint(E.cursor):E&&(h.removeSelectionMarker(E),f.addRange(E)),f.addRange(t)),h.$blockScrolling--,h.inVirtualSelectionMode=!1})}else if("block"==u){t.stop(),h.inVirtualSelectionMode=!0;var S,C=[],M=function(){var t=h.renderer.pixelToScreenCoordinates(v,y),e=b.screenToDocumentPosition(t.row,t.column);i(A,t)&&i(e,f.lead)||(A=t,h.$blockScrolling++,h.selection.moveToPosition(e),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(C),C=f.rectangularRangeBlock(A,x),h.$mouseHandler.$clickSelection&&1==C.length&&C[0].isEmpty()&&(C[0]=h.$mouseHandler.$clickSelection.clone()),C.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers(),h.$blockScrolling--)};h.$blockScrolling++,d&&!c?f.toSingleRange():!d&&c&&(S=f.toOrientedRange(),h.addSelectionMarker(S)),r?x=b.documentToScreenPosition(f.lead):f.moveToPosition(p),h.$blockScrolling--,A={row:-1,column:-1};var $=function(t){clearInterval(T),h.removeSelectionMarkers(C),C.length||(C=[f.toOrientedRange()]),h.$blockScrolling++,S&&(h.removeSelectionMarker(S),f.toSingleRange(S));for(var e=0;e<C.length;e++)f.addRange(C[e]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null,h.$blockScrolling--},F=M;o.capture(h.container,w,$);var T=setInterval(function(){F()},20);return t.preventDefault()}}}var o=t("../lib/event"),s=t("../lib/useragent");e.onMouseDown=r}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(t,e,n){e.defaultCommands=[{name:"addCursorAbove",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(t){t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var i=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new i(e.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(t,e,n){function i(t,e,n){return g.$options.wrap=!0,g.$options.needle=e,g.$options.backwards=n==-1,g.find(t)}function r(t,e){return t.row==e.row&&t.column==e.column}function o(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",u),t.commands.addCommands(d.defaultCommands),s(t))}function s(t){function e(e){i&&(t.renderer.setMouseCursor(""),i=!1)}var n=t.textInput.getElement(),i=!1;h.addListener(n,"keydown",function(n){var r=18==n.keyCode&&!(n.ctrlKey||n.shiftKey||n.metaKey);t.$blockSelectEnabled&&r?i||(t.renderer.setMouseCursor("crosshair"),i=!0):i&&e()}),h.addListener(n,"keyup",e),h.addListener(n,"blur",e)}var a=t("./range_list").RangeList,c=t("./range").Range,l=t("./selection").Selection,u=t("./mouse/multi_select_handler").onMouseDown,h=t("./lib/event"),f=t("./lib/lang"),d=t("./commands/multi_select_commands");e.commands=d.defaultCommands.concat(d.multiSelectCommands);var p=t("./search").Search,g=new p,m=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(m.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}t.cursor||(t.cursor=t.end);var i=this.rangeList.add(t);return this.$onAddRange(t),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length?this.$onRemoveRange(t):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var e=this.rangeList.ranges.pop();t.push(e),this.rangeCount=0}for(var n=t.length;n--;){var i=this.ranges.indexOf(t[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),e=e||this.ranges[0],e&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=c.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var n=this.getRange(),i=this.isBackwards(),r=n.start.row,o=n.end.row;if(r==o){if(i)var s=n.end,a=n.start;else var s=n.start,a=n.end;return this.addRange(c.fromPoints(a,a)),void this.addRange(c.fromPoints(s,s))}var l=[],u=this.getLineRange(r,!0);u.start.column=n.start.column,l.push(u);for(var h=r+1;h<o;h++)l.push(this.getLineRange(h,!0));u=this.getLineRange(o,!0),u.end.column=n.end.column,l.push(u),l.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=c.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var i=this.session.documentToScreenPosition(this.selectionLead),r=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(i,r);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(t,e,n){var i=[],o=t.column<e.column;if(o)var s=t.column,a=e.column;else var s=e.column,a=t.column;var l=t.row<e.row;if(l)var u=t.row,h=e.row;else var u=e.row,h=t.row;s<0&&(s=0),u<0&&(u=0),u==h&&(n=!0);for(var f=u;f<=h;f++){var d=c.fromPoints(this.session.screenToDocumentPosition(f,s),this.session.screenToDocumentPosition(f,a));if(d.isEmpty()){if(p&&r(d.end,p))break;var p=d.end}d.cursor=o?d.start:d.end,i.push(d)}if(l&&i.reverse(),!n){for(var g=i.length-1;i[g].isEmpty()&&g>0;)g--;if(g>0)for(var m=0;i[m].isEmpty();)m++;for(var v=g;v>=m;v--)i[v].isEmpty()&&i.splice(v,1)}return i}}.call(l.prototype);var v=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){if(t.marker){this.session.removeMarker(t.marker);var e=this.session.$selectionMarkers.indexOf(t);e!=-1&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,n=t.length;n--;){var i=t[n];if(i.marker){this.session.removeMarker(i.marker);var r=e.indexOf(i);r!=-1&&e.splice(r,1)}}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(d.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(d.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e=t.command,n=t.editor;if(n.multiSelect){if(e.multiSelectAction)"forEach"==e.multiSelectAction?i=n.forEachSelection(e,t.args):"forEachLine"==e.multiSelectAction?i=n.forEachSelection(e,t.args,!0):"single"==e.multiSelectAction?(n.exitMultiSelectMode(),i=e.exec(n,t.args||{})):i=e.multiSelectAction(n,t.args||{});else{var i=e.exec(n,t.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(t,e,n){if(!this.inVirtualSelectionMode){var i,r=n&&n.keepOrder,o=1==n||n&&n.$byLines,s=this.session,a=this.selection,c=a.rangeList,u=(r?a:c).ranges;if(!u.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var h=a._eventRegistry;a._eventRegistry={};var f=new l(s);this.inVirtualSelectionMode=!0;for(var d=u.length;d--;){if(o)for(;d>0&&u[d].start.row==u[d-1].end.row;)d--;f.fromOrientedRange(u[d]),f.index=d,this.selection=s.selection=f;var p=t.exec?t.exec(this,e||{}):t(this,e||{});i||void 0===p||(i=p),f.toOrientedRange(u[d])}f.detach(),this.selection=s.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=h,a.mergeOverlappingRanges();var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,n=[],i=0;i<e.length;i++)n.push(this.session.getTextRange(e[i]));var r=this.session.getDocument().getNewLineCharacter();t=n.join(r),t.length==(n.length-1)*r.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var i=e==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row==e.row&&this.session.$clipPositionToDocument(i.row,i.column).column==e.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(t,e,n){if(e=e||{},e.needle=t||e.needle,void 0==e.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(i)}this.$search.set(e);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var o=this.multiSelect;n||o.toSingleRange(r[0]);for(var s=r.length;s--;)o.addRange(r[s],!0);return i&&o.rangeList.rangeAtPoint(i.start)&&o.addRange(i,!0),this.$blockScrolling-=1,r.length},this.selectMoreLines=function(t,e){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,r=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(r.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(r.row+t,r.column);if(n.isEmpty())var s=o;else var a=this.session.documentToScreenPosition(i?n.end:n.start),s=this.session.screenToDocumentPosition(a.row+t,a.column);if(i){var l=c.fromPoints(o,s);l.cursor=l.start}else{var l=c.fromPoints(s,o);l.cursor=l.end}if(l.desiredColumn=r.column,this.selection.inMultiSelectMode){if(e)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(l),u&&this.selection.substractPoint(u)},this.transposeSelections=function(t){for(var e=this.session,n=e.multiSelect,i=n.ranges,r=i.length;r--;){var o=i[r];if(o.isEmpty()){var s=e.getWordRange(o.start.row,o.start.column);o.start.row=s.start.row,o.start.column=s.start.column,o.end.row=s.end.row,o.end.column=s.end.column}}n.mergeOverlappingRanges();for(var a=[],r=i.length;r--;){var o=i[r];a.unshift(e.getTextRange(o))}t<0?a.unshift(a.pop()):a.push(a.shift());for(var r=i.length;r--;){var o=i[r],s=o.clone();e.replace(o,a[r]),o.start.row=s.start.row,o.start.column=s.start.column}},this.selectMore=function(t,e,n){var r=this.session,o=r.multiSelect,s=o.toOrientedRange();if(!s.isEmpty()||(s=r.getWordRange(s.start.row,s.start.column),s.cursor=t==-1?s.start:s.end,this.multiSelect.addRange(s),!n)){var a=r.getTextRange(s),c=i(r,a,t);c&&(c.cursor=t==-1?c.start:c.end,this.$blockScrolling+=1,this.session.unfold(c),this.multiSelect.addRange(c),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(s.cursor)}},this.alignCursors=function(){var t=this.session,e=t.multiSelect,n=e.ranges,i=-1,r=n.filter(function(t){return t.cursor.row==i||void(i=t.cursor.row)});if(n.length&&r.length!=n.length-1){r.forEach(function(t){e.substractPoint(t.cursor)});var o=0,s=1/0,a=n.map(function(e){var n=e.cursor,i=t.getLine(n.row),r=i.substr(n.column).search(/\S/g);return r==-1&&(r=0),n.column>o&&(o=n.column),r<s&&(s=r),r});n.forEach(function(e,n){var i=e.cursor,r=o-i.column,l=a[n]-s;r>l?t.insert(i,f.stringRepeat(" ",r-l)):t.remove(new c(i.row,i.column,i.row,i.column-r+l)),e.start.column=e.end.column=o,e.start.row=e.end.row=i.row,e.cursor=e.end}),e.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var l=this.selection.getRange(),u=l.start.row,h=l.end.row,d=u==h;if(d){var p,g=this.session.getLength();do p=this.session.getLine(h);while(/[=:]/.test(p)&&++h<g);do p=this.session.getLine(u);while(/[=:]/.test(p)&&--u>0);u<0&&(u=0),h>=g&&(h=g-1)}var m=this.session.removeFullLines(u,h);m=this.$reAlignText(m,d),this.session.insert({row:u,column:0},m.join("\n")+"\n"),d||(l.start.column=0,l.end.column=m[m.length-1].length),this.selection.setRange(l)}},this.$reAlignText=function(t,e){function n(t){return f.stringRepeat(" ",t)}function i(t){return t[2]?n(s)+t[2]+n(a-t[2].length+c)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}function r(t){return t[2]?n(s+a-t[2].length)+t[2]+n(c," ")+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}function o(t){return t[2]?n(s)+t[2]+n(c)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}var s,a,c,l=!0,u=!0;return t.map(function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==s?(s=e[1].length,a=e[2].length,c=e[3].length,e):(s+a+c!=e[1].length+e[2].length+e[3].length&&(u=!1),s!=e[1].length&&(l=!1),s>e[1].length&&(s=e[1].length),a<e[2].length&&(a=e[2].length),c>e[3].length&&(c=e[3].length),e):[t]}).map(e?i:l?u?r:i:o)}}).call(v.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var n=t.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=o,t("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(t){o(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",u)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",u))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(t,e,n){"use strict";var i=t("../../range").Range,r=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(t,e,n){return null},this.indentationBlock=function(t,e,n){var r=/\S/,o=t.getLine(e),s=o.search(r);if(s!=-1){for(var a=n||o.length,c=t.getLength(),l=e,u=e;++e<c;){var h=t.getLine(e).search(r);if(h!=-1){if(h<=s)break;u=e}}if(u>l){var f=t.getLine(u).length;return new i(l,a,u,f)}}},this.openingBracketBlock=function(t,e,n,r,o){var s={row:n,column:r+1},a=t.$findClosingBracket(e,s,o);if(a){var c=t.foldWidgets[a.row];return null==c&&(c=t.getFoldWidget(a.row)),"start"==c&&a.row>s.row&&(a.row--,a.column=t.getLine(a.row).length),i.fromPoints(s,a)}},this.closingBracketBlock=function(t,e,n,r,o){var s={row:n,column:r},a=t.$findOpeningBracket(e,s);if(a)return a.column++,s.column--,i.fromPoints(a,s)}}).call(r.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(t,e,n){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {\tbackground: #f0f0f0;\tcolor: #333;\t}\t.ace-tm .ace_print-margin {\twidth: 1px;\tbackground: #e8e8e8;\t}\t.ace-tm .ace_fold {\tbackground-color: #6B72E6;\t}\t.ace-tm {\tbackground-color: #FFFFFF;\tcolor: black;\t}\t.ace-tm .ace_cursor {\tcolor: black;\t}\t.ace-tm .ace_invisible {\tcolor: rgb(191, 191, 191);\t}\t.ace-tm .ace_storage,\t.ace-tm .ace_keyword {\tcolor: blue;\t}\t.ace-tm .ace_constant {\tcolor: rgb(197, 6, 11);\t}\t.ace-tm .ace_constant.ace_buildin {\tcolor: rgb(88, 72, 246);\t}\t.ace-tm .ace_constant.ace_language {\tcolor: rgb(88, 92, 246);\t}\t.ace-tm .ace_constant.ace_library {\tcolor: rgb(6, 150, 14);\t}\t.ace-tm .ace_invalid {\tbackground-color: rgba(255, 0, 0, 0.1);\tcolor: red;\t}\t.ace-tm .ace_support.ace_function {\tcolor: rgb(60, 76, 114);\t}\t.ace-tm .ace_support.ace_constant {\tcolor: rgb(6, 150, 14);\t}\t.ace-tm .ace_support.ace_type,\t.ace-tm .ace_support.ace_class {\tcolor: rgb(109, 121, 222);\t}\t.ace-tm .ace_keyword.ace_operator {\tcolor: rgb(104, 118, 135);\t}\t.ace-tm .ace_string {\tcolor: rgb(3, 106, 7);\t}\t.ace-tm .ace_comment {\tcolor: rgb(76, 136, 107);\t}\t.ace-tm .ace_comment.ace_doc {\tcolor: rgb(0, 102, 255);\t}\t.ace-tm .ace_comment.ace_doc.ace_tag {\tcolor: rgb(128, 159, 191);\t}\t.ace-tm .ace_constant.ace_numeric {\tcolor: rgb(0, 0, 205);\t}\t.ace-tm .ace_variable {\tcolor: rgb(49, 132, 149);\t}\t.ace-tm .ace_xml-pe {\tcolor: rgb(104, 104, 91);\t}\t.ace-tm .ace_entity.ace_name.ace_function {\tcolor: #0000A2;\t}\t.ace-tm .ace_heading {\tcolor: rgb(12, 7, 255);\t}\t.ace-tm .ace_list {\tcolor:rgb(185, 6, 144);\t}\t.ace-tm .ace_meta.ace_tag {\tcolor:rgb(0, 22, 142);\t}\t.ace-tm .ace_string.ace_regex {\tcolor: rgb(255, 0, 0)\t}\t.ace-tm .ace_marker-layer .ace_selection {\tbackground: rgb(181, 213, 255);\t}\t.ace-tm.ace_multiselect .ace_selection.ace_start {\tbox-shadow: 0 0 3px 0px white;\t}\t.ace-tm .ace_marker-layer .ace_step {\tbackground: rgb(252, 255, 0);\t}\t.ace-tm .ace_marker-layer .ace_stack {\tbackground: rgb(164, 229, 101);\t}\t.ace-tm .ace_marker-layer .ace_bracket {\tmargin: -1px 0 0 -1px;\tborder: 1px solid rgb(192, 192, 192);\t}\t.ace-tm .ace_marker-layer .ace_active-line {\tbackground: rgba(0, 0, 0, 0.07);\t}\t.ace-tm .ace_gutter-active-line {\tbackground-color : #dcdcdc;\t}\t.ace-tm .ace_marker-layer .ace_selected-word {\tbackground: rgb(250, 250, 255);\tborder: 1px solid rgb(200, 200, 250);\t}\t.ace-tm .ace_indent-guide {\tbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\t}\t';var i=t("../lib/dom");i.importCssString(e.cssText,e.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(t,e,n){"use strict";function i(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var r=(t("./lib/oop"),t("./lib/dom"));t("./range").Range;(function(){this.getRowLength=function(t){var e;return e=this.lineWidgets?this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0:0,this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)}),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})}},this.updateOnFold=function(t,e){var n=e.lineWidgets;if(n&&t.action){for(var i=t.data,r=i.start.row,o=i.end.row,s="add"==t.action,a=r+1;a<o;a++)n[a]&&(n[a].hidden=s);n[o]&&(s?n[r]?n[o].hidden=s:n[r]=n[o]:(n[r]==n[o]&&(n[r]=void 0),n[o].hidden=s))}},this.updateOnChange=function(t){var e=this.session.lineWidgets;if(e){var n=t.start.row,i=t.end.row-n;if(0===i);else if("remove"==t.action){var r=e.splice(n+1,i);r.forEach(function(t){t&&this.removeLineWidget(t)},this),this.$updateRows()}else{var o=new Array(i);o.unshift(n,0),e.splice.apply(e,o),this.$updateRows()}}},this.$updateRows=function(){var t=this.session.lineWidgets;if(t){var e=!0;t.forEach(function(t,n){if(t)for(e=!1,t.row=n;t.$oldWidget;)t.$oldWidget.row=n,t=t.$oldWidget}),e&&(this.session.lineWidgets=null)}},this.addLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];e&&(t.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[t.row]=t,t.session=this.session;var n=this.editor.renderer;t.html&&!t.el&&(t.el=r.createElement("div"),t.el.innerHTML=t.html),t.el&&(r.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,n.container.appendChild(t.el),t._inDocument=!0),t.coverGutter||(t.el.style.zIndex=3),t.pixelHeight||(t.pixelHeight=t.el.offsetHeight),null==t.rowCount&&(t.rowCount=t.pixelHeight/n.layerConfig.lineHeight);var i=this.session.getFoldAt(t.row,0);if(t.$fold=i,i){var o=this.session.lineWidgets;t.row!=i.end.row||o[i.start.row]?t.hidden=!0:o[i.start.row]=t}return this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(e){}if(this.session.lineWidgets){var n=this.session.lineWidgets[t.row];if(n==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;n;){if(n.$oldWidget==t){n.$oldWidget=t.$oldWidget;break}n=n.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,n=e&&e[t],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var n=this.session._changedWidgets,i=e.layerConfig;if(n&&n.length){for(var r=1/0,o=0;o<n.length;o++){var s=n[o];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,e.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var a=s.h/i.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row),a<0&&(a=0)),s.rowCount!=a&&(s.rowCount=a,s.row<r&&(r=s.row))}}r!=1/0&&(this.session._emit("changeFold",{data:{start:{row:r}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var n=e.layerConfig,i=this.session.lineWidgets;if(i){for(var r=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,i.length);r>0&&!i[r];)r--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,e.$cursorLayer.config=n;for(var s=r;s<=o;s++){var a=i[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,e.container.appendChild(a.el));var c=e.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(c+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=c-n.offset+"px";var l=a.coverGutter?0:e.gutterWidth;a.fixedWidth||(l-=e.scrollLeft),a.el.style.left=l+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=e.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(i.prototype),e.LineWidgets=i}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(t,e,n){"use strict";function i(t,e,n){for(var i=0,r=t.length-1;i<=r;){var o=i+r>>1,s=n(e,t[o]);if(s>0)i=o+1;else{if(!(s<0))return o;r=o-1}}return-(i+1)}function r(t,e,n){var r=t.getAnnotations().sort(a.comparePoints);if(r.length){var o=i(r,{row:e,column:-1},a.comparePoints);o<0&&(o=-o-1),o>=r.length?o=n>0?0:r.length-1:0===o&&n<0&&(o=r.length-1);
var s=r[o];if(s&&n){if(s.row===e){do s=r[o+=n];while(s&&s.row===e);if(!s)return r.slice()}var c=[];e=s.row;do c[n<0?"unshift":"push"](s),s=r[o+=n];while(s&&s.row==e);return c.length&&c}}}var o=t("../line_widgets").LineWidgets,s=t("../lib/dom"),a=t("../range").Range;e.showErrorMarker=function(t,e){var n=t.session;n.widgetManager||(n.widgetManager=new o(n),n.widgetManager.attach(t));var i=t.getCursorPosition(),a=i.row,c=n.widgetManager.getWidgetsAtRow(a).filter(function(t){return"errorMarker"==t.type})[0];c?c.destroy():a-=e;var l,u=r(n,a,e);if(u){var h=u[0];i.column=(h.pos&&"number"!=typeof h.column?h.pos.sc:h.column)||0,i.row=h.row,l=t.renderer.$gutterLayer.$annotations[i.row]}else{if(c)return;l={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(i.row),t.selection.moveToPosition(i);var f={row:i.row,fixedWidth:!0,coverGutter:!0,el:s.createElement("div"),type:"errorMarker"},d=f.el.appendChild(s.createElement("div")),p=f.el.appendChild(s.createElement("div"));p.className="error_widget_arrow "+l.className;var g=t.renderer.$cursorLayer.getPixelPosition(i).left;p.style.left=g+t.renderer.gutterWidth-5+"px",f.el.className="error_widget_wrapper",d.className="error_widget "+l.className,d.innerHTML=l.text.join("<br>"),d.appendChild(s.createElement("div"));var m=function(t,e,n){if(0===e&&("esc"===n||"return"===n))return f.destroy(),{command:"null"}};f.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(f),t.off("changeSelection",f.destroy),t.off("changeSession",f.destroy),t.off("mouseup",f.destroy),t.off("change",f.destroy))},t.keyBinding.addKeyboardHandler(m),t.on("changeSelection",f.destroy),t.on("changeSession",f.destroy),t.on("mouseup",f.destroy),t.on("change",f.destroy),t.session.widgetManager.addLineWidget(f),f.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:f.el.offsetHeight})},s.importCssString("\t    .error_widget_wrapper {\t        background: inherit;\t        color: inherit;\t        border:none\t    }\t    .error_widget {\t        border-top: solid 2px;\t        border-bottom: solid 2px;\t        margin: 5px 0;\t        padding: 10px 40px;\t        white-space: pre-wrap;\t    }\t    .error_widget.ace_error, .error_widget_arrow.ace_error{\t        border-color: #ff5a5a\t    }\t    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\t        border-color: #F1D817\t    }\t    .error_widget.ace_info, .error_widget_arrow.ace_info{\t        border-color: #5a5a5a\t    }\t    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\t        border-color: #5aaa5a\t    }\t    .error_widget_arrow {\t        position: absolute;\t        border: solid 5px;\t        border-top-color: transparent!important;\t        border-right-color: transparent!important;\t        border-left-color: transparent!important;\t        top: -5px;\t    }\t","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var i=t("./lib/dom"),r=t("./lib/event"),o=t("./editor").Editor,s=t("./edit_session").EditSession,a=t("./undomanager").UndoManager,c=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.acequire=t,e.edit=function(t){if("string"==typeof t){var n=t;if(t=document.getElementById(n),!t)throw new Error("ace.edit can't find div #"+n)}if(t&&t.env&&t.env.editor instanceof o)return t.env.editor;var s="";if(t&&/input|textarea/i.test(t.tagName)){var a=t;s=a.value,t=i.createElement("pre"),a.parentNode.replaceChild(t,a)}else t&&(s=i.getInnerText(t),t.innerHTML="");var l=e.createEditSession(s),u=new o(new c(t));u.setSession(l);var h={document:l,editor:u,onResize:u.resize.bind(u,null)};return a&&(h.textarea=a),r.addListener(window,"resize",h.onResize),u.on("destroy",function(){r.removeListener(window,"resize",h.onResize),h.editor.container.env=null}),u.container.env=u.env=h,u},e.createEditSession=function(t,e){var n=new s(t,e);return n.setUndoManager(new a),n},e.EditSession=s,e.UndoManager=a,e.version="1.2.3"}),function(){ace.acequire(["ace/ace"],function(t){t&&t.config.init(!0),window.ace||(window.ace=t);for(var e in t)t.hasOwnProperty(e)&&(window.ace[e]=t[e])})}(),t.exports=window.ace.acequire("ace/ace")},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){function n(){if(e.Blob)try{return new Blob(["asdf"],{type:"text/plain"}),Blob}catch(t){}var n=e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder;return function(t,e){var i=new n,r=e.endings,o=e.type;if(r)for(var s=0,a=t.length;s<a;++s)i.append(t[s],r);else for(var s=0,a=t.length;s<a;++s)i.append(t[s]);return o?i.getBlob(o):i.getBlob()}}t.exports=n()}).call(e,function(){return this}())},function(t,e,n){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'[^"\\\\]+'},{token:"string",regex:'"',next:"start"},{token:"string",regex:"",next:"start"}]}};i.inherits(o,r),e.JsonHighlightRules=o}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,e,n){"use strict";var i=t("../range").Range,r=function(){};(function(){this.checkOutdent=function(t,e){return!!/^\s+$/.test(t)&&/^\s*\}/.test(e)},this.autoOutdent=function(t,e){var n=t.getLine(e),r=n.match(/^(\s*\})/);if(!r)return 0;var o=r[1].length,s=t.findMatchingBracket({row:e,column:o});if(!s||s.row==e)return 0;var a=this.$getIndent(t.getLine(s.row));t.replace(new i(e,0,e,o-1),a)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(r.prototype),e.MatchingBraceOutdent=r}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,e,n){"use strict";var i,r=t("../../lib/oop"),o=t("../behaviour").Behaviour,s=t("../../token_iterator").TokenIterator,a=t("../../lib/lang"),c=["text","paren.rparen","punctuation.operator"],l=["text","paren.rparen","punctuation.operator","comment"],u={},h=function(t){var e=-1;return t.multiSelect&&(e=t.selection.index,u.rangeCount!=t.multiSelect.rangeCount&&(u={rangeCount:t.multiSelect.rangeCount})),u[e]?i=u[e]:void(i=u[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""})},f=function(t,e,n,i){var r=t.end.row-t.start.row;return{text:n+e+i,selection:[0,t.start.column+1,r,t.end.column+(r?0:1)]}},d=function(){this.add("braces","insertion",function(t,e,n,r,o){var s=n.getCursorPosition(),c=r.doc.getLine(s.row);if("{"==o){h(n);var l=n.getSelectionRange(),u=r.doc.getTextRange(l);if(""!==u&&"{"!==u&&n.getWrapBehavioursEnabled())return f(l,u,"{","}");if(d.isSaneInsertion(n,r))return/[\]\}\)]/.test(c[s.column])||n.inMultiSelectMode?(d.recordAutoInsert(n,r,"}"),{text:"{}",selection:[1,1]}):(d.recordMaybeInsert(n,r,"{"),{text:"{",selection:[1,1]})}else if("}"==o){h(n);var p=c.substring(s.column,s.column+1);if("}"==p){var g=r.$findOpeningBracket("}",{column:s.column+1,row:s.row});if(null!==g&&d.isAutoInsertedClosing(s,c,o))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==o||"\r\n"==o){h(n);var m="";d.isMaybeInsertedClosing(s,c)&&(m=a.stringRepeat("}",i.maybeInsertedBrackets),d.clearMaybeInsertedClosing());var p=c.substring(s.column,s.column+1);if("}"===p){var v=r.findMatchingBracket({row:s.row,column:s.column+1},"}");if(!v)return null;var y=this.$getIndent(r.getLine(v.row))}else{if(!m)return void d.clearMaybeInsertedClosing();var y=this.$getIndent(c)}var w=y+r.getTabString();return{text:"\n"+w+"\n"+y+m,selection:[1,w.length,1,w.length]}}d.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(t,e,n,r,o){var s=r.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==s){h(n);var a=r.doc.getLine(o.start.row),c=a.substring(o.end.column,o.end.column+1);if("}"==c)return o.end.column++,o;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(t,e,n,i,r){if("("==r){h(n);var o=n.getSelectionRange(),s=i.doc.getTextRange(o);if(""!==s&&n.getWrapBehavioursEnabled())return f(o,s,"(",")");if(d.isSaneInsertion(n,i))return d.recordAutoInsert(n,i,")"),{text:"()",selection:[1,1]}}else if(")"==r){h(n);var a=n.getCursorPosition(),c=i.doc.getLine(a.row),l=c.substring(a.column,a.column+1);if(")"==l){var u=i.$findOpeningBracket(")",{column:a.column+1,row:a.row});if(null!==u&&d.isAutoInsertedClosing(a,c,r))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"("==o){h(n);var s=i.doc.getLine(r.start.row),a=s.substring(r.start.column+1,r.start.column+2);if(")"==a)return r.end.column++,r}}),this.add("brackets","insertion",function(t,e,n,i,r){if("["==r){h(n);var o=n.getSelectionRange(),s=i.doc.getTextRange(o);if(""!==s&&n.getWrapBehavioursEnabled())return f(o,s,"[","]");if(d.isSaneInsertion(n,i))return d.recordAutoInsert(n,i,"]"),{text:"[]",selection:[1,1]}}else if("]"==r){h(n);var a=n.getCursorPosition(),c=i.doc.getLine(a.row),l=c.substring(a.column,a.column+1);if("]"==l){var u=i.$findOpeningBracket("]",{column:a.column+1,row:a.row});if(null!==u&&d.isAutoInsertedClosing(a,c,r))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"["==o){h(n);var s=i.doc.getLine(r.start.row),a=s.substring(r.start.column+1,r.start.column+2);if("]"==a)return r.end.column++,r}}),this.add("string_dquotes","insertion",function(t,e,n,i,r){if('"'==r||"'"==r){h(n);var o=r,s=n.getSelectionRange(),a=i.doc.getTextRange(s);if(""!==a&&"'"!==a&&'"'!=a&&n.getWrapBehavioursEnabled())return f(s,a,o,o);if(!a){var c=n.getCursorPosition(),l=i.doc.getLine(c.row),u=l.substring(c.column-1,c.column),d=l.substring(c.column,c.column+1),p=i.getTokenAt(c.row,c.column),g=i.getTokenAt(c.row,c.column+1);if("\\"==u&&p&&/escape/.test(p.type))return null;var m,v=p&&/string|escape/.test(p.type),y=!g||/string|escape/.test(g.type);if(d==o)m=v!==y;else{if(v&&!y)return null;if(v&&y)return null;var w=i.$mode.tokenRe;w.lastIndex=0;var b=w.test(u);w.lastIndex=0;var x=w.test(u);if(b||x)return null;if(d&&!/[\s;,.})\]\\]/.test(d))return null;m=!0}return{text:m?o+o:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&('"'==o||"'"==o)){h(n);var s=i.doc.getLine(r.start.row),a=s.substring(r.start.column+1,r.start.column+2);if(a==o)return r.end.column++,r}})};d.isSaneInsertion=function(t,e){var n=t.getCursorPosition(),i=new s(e,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",c)){var r=new s(e,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",c))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",l)},d.$matchTokenType=function(t,e){return e.indexOf(t.type||t)>-1},d.recordAutoInsert=function(t,e,n){var r=t.getCursorPosition(),o=e.doc.getLine(r.row);this.isAutoInsertedClosing(r,o,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=r.row,i.autoInsertedLineEnd=n+o.substr(r.column),i.autoInsertedBrackets++},d.recordMaybeInsert=function(t,e,n){var r=t.getCursorPosition(),o=e.doc.getLine(r.row);this.isMaybeInsertedClosing(r,o)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=r.row,i.maybeInsertedLineStart=o.substr(0,r.column)+n,i.maybeInsertedLineEnd=o.substr(r.column),i.maybeInsertedBrackets++},d.isAutoInsertedClosing=function(t,e,n){return i.autoInsertedBrackets>0&&t.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&e.substr(t.column)===i.autoInsertedLineEnd},d.isMaybeInsertedClosing=function(t,e){return i.maybeInsertedBrackets>0&&t.row===i.maybeInsertedRow&&e.substr(t.column)===i.maybeInsertedLineEnd&&e.substr(0,t.column)==i.maybeInsertedLineStart},d.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},d.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(d,o),e.CstyleBehaviour=d}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,e,n){"use strict";var i=t("../../lib/oop"),r=t("../../range").Range,o=t("./fold_mode").FoldMode,s=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+t.end)))};i.inherits(s,o),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var r=this._getFoldWidgetBase(t,e,n);return!r&&this.startRegionRe.test(i)?"start":r},this.getFoldWidgetRange=function(t,e,n,i){var r=t.getLine(n);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(t,r,n);var o=r.match(this.foldingStartMarker);if(o){var s=o.index;if(o[1])return this.openingBracketBlock(t,o[1],n,s);var a=t.getCommentFoldRange(n,s+o[0].length,1);return a&&!a.isMultiLine()&&(i?a=this.getSectionRange(t,n):"all"!=e&&(a=null)),a}if("markbegin"!==e){var o=r.match(this.foldingStopMarker);if(o){var s=o.index+o[0].length;return o[1]?this.closingBracketBlock(t,o[1],n,s):t.getCommentFoldRange(n,s,-1)}}},this.getSectionRange=function(t,e){var n=t.getLine(e),i=n.search(/\S/),o=e,s=n.length;e+=1;for(var a=e,c=t.getLength();++e<c;){n=t.getLine(e);var l=n.search(/\S/);if(l!==-1){if(i>l)break;var u=this.getFoldWidgetRange(t,"all",e);if(u){if(u.start.row<=o)break;if(u.isMultiLine())e=u.end.row;else if(i==l)break}a=e}}return new r(o,s,a,t.getLine(a).length)},this.getCommentRegionBlock=function(t,e,n){for(var i=e.search(/\s*$/),o=t.getLength(),s=n,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,c=1;++n<o;){e=t.getLine(n);var l=a.exec(e);if(l&&(l[1]?c--:c++,!c))break}var u=n;if(u>s)return new r(s,i,u,e.length)}}.call(s.prototype)}),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],function(t,e,i){"use strict";var r=t("../lib/oop"),o=t("./text").Mode,s=t("./json_highlight_rules").JsonHighlightRules,a=t("./matching_brace_outdent").MatchingBraceOutdent,c=t("./behaviour/cstyle").CstyleBehaviour,l=t("./folding/cstyle").FoldMode,u=t("../worker/worker_client").WorkerClient,h=function(){this.HighlightRules=s,this.$outdent=new a,this.$behaviour=new c,this.foldingRules=new l};r.inherits(h,o),function(){this.getNextLineIndent=function(t,e,n){var i=this.$getIndent(e);if("start"==t){var r=e.match(/^.*[\{\(\[]\s*$/);r&&(i+=n)}return i},this.checkOutdent=function(t,e,n){return this.$outdent.checkOutdent(e,n)},this.autoOutdent=function(t,e,n){this.$outdent.autoOutdent(e,n)},this.createWorker=function(t){var e=new u(["ace"],n(610),"JsonWorker");return e.attachToDocument(t.getDocument()),e.on("annotate",function(e){t.setAnnotations(e.data)}),e.on("terminate",function(){t.clearAnnotations()}),e},this.$id="ace/mode/json"}.call(h.prototype),e.Mode=h})},function(t,e){t.exports.id="ace/mode/json_worker",t.exports.src='"no use strict";(function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}})(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}var cons=obj.constructor;if(cons===RegExp)return obj;copy=cons();for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/</g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\x0B\\f\\r   ᠎             　\\u2028\\u2029\ufeff";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});';
},function(t,e){"use strict";angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(t){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");var e=function(t,e,n){if(angular.isDefined(n.workerPath)){var i=window.ace.require("ace/config");i.set("workerPath",n.workerPath)}angular.isDefined(n.require)&&n.require.forEach(function(t){window.ace.require(t)}),angular.isDefined(n.showGutter)&&t.renderer.setShowGutter(n.showGutter),angular.isDefined(n.useWrapMode)&&e.setUseWrapMode(n.useWrapMode),angular.isDefined(n.showInvisibles)&&t.renderer.setShowInvisibles(n.showInvisibles),angular.isDefined(n.showIndentGuides)&&t.renderer.setDisplayIndentGuides(n.showIndentGuides),angular.isDefined(n.useSoftTabs)&&e.setUseSoftTabs(n.useSoftTabs),angular.isDefined(n.showPrintMargin)&&t.setShowPrintMargin(n.showPrintMargin),angular.isDefined(n.disableSearch)&&n.disableSearch&&t.commands.addCommands([{name:"unfind",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(){return!1},readOnly:!0}]),angular.isString(n.theme)&&t.setTheme("ace/theme/"+n.theme),angular.isString(n.mode)&&e.setMode("ace/mode/"+n.mode),angular.isDefined(n.firstLineNumber)&&(angular.isNumber(n.firstLineNumber)?e.setOption("firstLineNumber",n.firstLineNumber):angular.isFunction(n.firstLineNumber)&&e.setOption("firstLineNumber",n.firstLineNumber()));var r,o;if(angular.isDefined(n.advanced))for(r in n.advanced)o={name:r,value:n.advanced[r]},t.setOption(o.name,o.value);if(angular.isDefined(n.rendererOptions))for(r in n.rendererOptions)o={name:r,value:n.rendererOptions[r]},t.renderer.setOption(o.name,o.value);angular.forEach(n.callbacks,function(e){angular.isFunction(e)&&e(t)})};return{restrict:"EA",require:"?ngModel",link:function(n,i,r,o){var s,a,c=t.ace||{},l=angular.extend({},c,n.$eval(r.uiAce)),u=window.ace.edit(i[0]),h=u.getSession(),f=function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);angular.isDefined(t)&&n.$evalAsync(function(){if(!angular.isFunction(t))throw new Error("ui-ace use a function as callback.");t(e)})},d={onChange:function(t){return function(e){var i=h.getValue();!o||i===o.$viewValue||n.$$phase||n.$root.$$phase||n.$evalAsync(function(){o.$setViewValue(i)}),f(t,e,u)}},onBlur:function(t){return function(){f(t,u)}}};r.$observe("readonly",function(t){u.setReadOnly(!!t||""===t)}),o&&(o.$formatters.push(function(t){if(angular.isUndefined(t)||null===t)return"";if(angular.isObject(t)||angular.isArray(t))throw new Error("ui-ace cannot use an object or an array as a model");return t}),o.$render=function(){h.setValue(o.$viewValue)});var p=function(t,i){t!==i&&(l=angular.extend({},c,n.$eval(r.uiAce)),l.callbacks=[l.onLoad],l.onLoad!==c.onLoad&&l.callbacks.unshift(c.onLoad),h.removeListener("change",s),s=d.onChange(l.onChange),h.on("change",s),u.removeListener("blur",a),a=d.onBlur(l.onBlur),u.on("blur",a),e(u,h,l))};n.$watch(r.uiAce,p,!0),p(c),i.on("$destroy",function(){u.session.$stopWorker(),u.destroy()}),n.$watch(function(){return[i[0].offsetWidth,i[0].offsetHeight]},function(){u.resize(),u.renderer.updateFull()},!0)}}}])},function(t,e,n){n(613),t.exports="ngFileUpload"},function(t,e){/**!
	 * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,
	 * progress, resize, thumbnail, preview, validation and CORS
	 * FileAPI Flash shim for old browsers not supporting FormData
	 * @author  Danial  <danial.farid@gmail.com>
	 * @version 12.0.4
	 */
!function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n){try{Object.defineProperty(t,e,{get:n})}catch(i){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(t){if(!t.__listeners){t.upload||(t.upload={}),t.__listeners=[];var e=t.upload.addEventListener;t.upload.addEventListener=function(n,i){t.__listeners[n]=i,e&&e.apply(this,arguments)}}};t("open",function(t){return function(e,i,r){n(this),this.__url=i;try{t.apply(this,[e,i,r])}catch(o){o.message.indexOf("Access is denied")>-1&&(this.__origError=o,t.apply(this,[e,"_fix_for_ie_crossdomain__",r]))}}}),t("getResponseHeader",function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}}),t("getAllResponseHeaders",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==t?null:t.apply(this)}}),t("abort",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==t?null:t.apply(this)}}),t("setRequestHeader",function(t){return function(e,i){if("__setXHR_"===e){n(this);var r=i(this);r instanceof Function&&r(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=i,t.apply(this,arguments)}}),t("send",function(t){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var i=arguments[0],r={url:n.__url,jsonp:!1,cache:!0,complete:function(t,i){t&&angular.isString(t)&&t.indexOf("#2174")!==-1&&(t=null),n.__completed=!0,!t&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!t&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===t&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==i.status&&e(n,"status",function(){return 0===i.status&&t&&"abort"!==t?500:i.status}),void 0!==i.statusText&&e(n,"statusText",function(){return i.statusText}),e(n,"readyState",function(){return 4}),void 0!==i.response&&e(n,"response",function(){return i.response});var r=i.responseText||(t&&0===i.status&&"abort"!==t?t:void 0);e(n,"responseText",function(){return r}),e(n,"response",function(){return r}),t&&e(n,"err",function(){return t}),n.__fileApiXHR=i,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(t){if(t.target=n,n.__listeners.progress&&n.__listeners.progress(t),n.__total=t.total,n.__loaded=t.loaded,t.total===t.loaded){var e=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},e.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};r.data={},r.files={};for(var o=0;o<i.data.length;o++){var s=i.data[o];null!=s.val&&null!=s.val.name&&null!=s.val.size&&null!=s.val.type?r.files[s.key]=s.val:r.data[s.key]=s.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(r)},1)}else{if(this.__origError)throw this.__origError;t.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(t,e,n){e.__isFileAPIBlobShim&&(e=e.data[0]),this.data.push({key:t,val:e,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(t){return{data:t,__isFileAPIBlobShim:!0}}}}(),function(){function t(t){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}function e(){try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(t)return!0}catch(e){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function n(t){var e=0,n=0;if(window.jQuery)return jQuery(t).offset();if(t.offsetParent)do e+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop-t.scrollTop,t=t.offsetParent;while(t);return{left:e,top:n}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=e(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var i,r,o,s,a,c=document.createElement("script"),l=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)i=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)r=window.FileAPI.jsPath;else for(o=0;o<l.length;o++)if(a=l[o].src,s=a.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),s>-1){r=a.substring(0,s+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=r),c.setAttribute("src",i||r+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(c)}FileAPI.ngfFixIE=function(i,r,o){if(!e())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var s=function(){var e=r.parent();i.attr("disabled")?e&&e.removeClass("js-fileapi-wrapper"):(r.attr("__ngf_flash_")||(r.unbind("change"),r.unbind("click"),r.bind("change",function(t){a.apply(this,[t]),o.apply(this,[t])}),r.attr("__ngf_flash_","true")),e.addClass("js-fileapi-wrapper"),t(i)||(e.css("position","absolute").css("top",n(i[0]).top+"px").css("left",n(i[0]).left+"px").css("width",i[0].offsetWidth+"px").css("height",i[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",i.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),r.css("width",i[0].offsetWidth+"px").css("height",i[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))};i.bind("mouseenter",s);var a=function(t){for(var e=FileAPI.getFiles(t),n=0;n<e.length;n++)void 0===e[n].size&&(e[n].size=0),void 0===e[n].name&&(e[n].name="file"),void 0===e[n].type&&(e[n].type="undefined");t.target||(t.target={}),t.target.files=e,t.target.files!==e&&(t.__files_=e),(t.__files_||t.target.files).item=function(e){return(t.__files_||t.target.files)[e]||null}}},FileAPI.disableFileInput=function(t,e){e?t.removeClass("js-fileapi-wrapper"):t.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var t=this,e=!1;this.listeners={},this.addEventListener=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},this.removeEventListener=function(e,n){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(n),1)},this.dispatchEvent=function(e){var n=t.listeners[e.type];if(n)for(var i=0;i<n.length;i++)n[i].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(e,n){var i={type:e,target:t,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(i.target.result=n.result),i},i=function(i){e||(e=!0,t.onloadstart&&t.onloadstart(n("loadstart",i)));var r;"load"===i.type?(t.onloadend&&t.onloadend(n("loadend",i)),r=n("load",i),t.onload&&t.onload(r),t.dispatchEvent(r)):"progress"===i.type?(r=n("progress",i),t.onprogress&&t.onprogress(r),t.dispatchEvent(r)):(r=n("error",i),t.onerror&&t.onerror(r),t.dispatchEvent(r))};this.readAsDataURL=function(t){FileAPI.readAsDataURL(t,i)},this.readAsText=function(t){FileAPI.readAsText(t,i)}}),/**!
	 * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,
	 * progress, resize, thumbnail, preview, validation and CORS
	 * @author  Danial  <danial.farid@gmail.com>
	 * @version 12.0.4
	 */
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(t){return function(e,n){if("__setXHR_"===e){var i=n(this);i instanceof Function&&i(this)}else t.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var n=angular.module("ngFileUpload",[]);n.version="12.0.4",n.service("UploadBase",["$http","$q","$timeout",function(t,e,i){function r(n){function r(t){l.notify&&l.notify(t),u.progressFunc&&i(function(){u.progressFunc(t)})}function o(t){return null!=n._start&&a?{loaded:t.loaded+n._start,total:n._file&&n._file.size||t.total,type:t.type,config:n,lengthComputable:!0,target:t.target}:t}function c(){t(n).then(function(t){a&&n._chunkSize&&!n._finished&&n._file?(r({loaded:n._end,total:n._file&&n._file.size,config:n,type:"progress"}),s.upload(n,!0)):(n._finished&&delete n._finished,l.resolve(t))},function(t){l.reject(t)},function(t){l.notify(t)})}n.method=n.method||"POST",n.headers=n.headers||{};var l=n._deferred=n._deferred||e.defer(),u=l.promise;return n.disableProgress||(n.headers.__setXHR_=function(){return function(t){t&&t.upload&&t.upload.addEventListener&&(n.__XHR=t,n.xhrFn&&n.xhrFn(t),t.upload.addEventListener("progress",function(t){t.config=n,r(o(t))},!1),t.upload.addEventListener("load",function(t){t.lengthComputable&&(t.config=n,r(o(t)))},!1))}}),a?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,c()):n.resumeSizeUrl?t.get(n.resumeSizeUrl).then(function(t){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(t.data):n._start=parseInt((null==t.data.size?t.data:t.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),c()},function(t){throw t}):n.resumeSize?n.resumeSize().then(function(t){n._start=t,c()},function(t){throw t}):(n._chunkSize&&(n._start=0,n._end=n._start+n._chunkSize),c()):c(),u.success=function(t){return u.then(function(e){t(e.data,e.status,e.headers,n)}),u},u.error=function(t){return u.then(null,function(e){t(e.data,e.status,e.headers,n)}),u},u.progress=function(t){return u.progressFunc=t,u.then(null,null,function(e){t(e)}),u},u.abort=u.pause=function(){return n.__XHR&&i(function(){n.__XHR.abort()}),u},u.xhr=function(t){return n.xhrFn=function(e){return function(){e&&e.apply(u,arguments),t.apply(u,arguments)}}(n.xhrFn),u},s.promisesCount++,u["finally"](function(){s.promisesCount--}),u}function o(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var s=this;s.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var a=this.isResumeSupported();this.isUploadInProgress=function(){return s.promisesCount>0},this.rename=function(t,e){return t.ngfName=e,t},this.jsonBlob=function(t){null==t||angular.isString(t)||(t=JSON.stringify(t));var e=new window.Blob([t],{type:"application/json"});return e._ngfBlob=!0,e},this.json=function(t){return angular.toJson(t)},this.isFile=function(t){return null!=t&&(t instanceof window.Blob||t.flashId&&t.name&&t.size)},this.upload=function(t,e){function n(e,n){if(e._ngfBlob)return e;if(t._file=t._file||e,null!=t._start&&a){t._end&&t._end>=e.size&&(t._finished=!0,t._end=e.size);var i=e.slice(t._start,t._end||e.size);return i.name=e.name,i.ngfName=e.ngfName,t._chunkSize&&(n.append("_chunkSize",t._chunkSize),n.append("_currentChunkSize",t._end-t._start),n.append("_chunkNumber",Math.floor(t._start/t._chunkSize)),n.append("_totalSize",t._file.size)),i}return e}function i(e,r,o){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))e.append(o,r);else if(s.isFile(r)){var a=n(r,e),c=o.split(",");c[1]&&(a.ngfName=c[1].replace(/^\s+|\s+$/g,""),o=c[0]),t._fileKey=t._fileKey||o,e.append(o,a,a.ngfName||a.name)}else if(angular.isObject(r)){if(r.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+o;r.$$ngfCircularDetection=!0;try{for(var l in r)if(r.hasOwnProperty(l)&&"$$ngfCircularDetection"!==l){var u=null==t.objectKey?"[i]":t.objectKey;r.length&&parseInt(l)>-1&&(u=null==t.arrayKey?u:t.arrayKey),i(e,r[l],o+u.replace(/[ik]/g,l))}}finally{delete r.$$ngfCircularDetection}}else e.append(o,r)}function c(){t._chunkSize=s.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest?angular.isArray(t.transformRequest)?t.transformRequest:[t.transformRequest]:[],t.transformRequest.push(function(e){var n,r=new window.FormData;e=e||t.fields||{},t.file&&(e.file=t.file);for(n in e)if(e.hasOwnProperty(n)){var o=e[n];t.formDataAppender?t.formDataAppender(r,n,o):i(r,o,n)}return r})}return e||(t=o(t)),t._isDigested||(t._isDigested=!0,c()),r(t)},this.http=function(e){return e=o(e),e.transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:t.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=s.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,r(e)},this.translateScalars=function(t){if(angular.isString(t)){if(t.search(/kb/i)===t.length-2)return parseFloat(1024*t.substring(0,t.length-2));if(t.search(/mb/i)===t.length-2)return parseFloat(1048576*t.substring(0,t.length-2));if(t.search(/gb/i)===t.length-2)return parseFloat(1073741824*t.substring(0,t.length-2));if(t.search(/b/i)===t.length-1)return parseFloat(t.substring(0,t.length-1));if(t.search(/s/i)===t.length-1)return parseFloat(t.substring(0,t.length-1));if(t.search(/m/i)===t.length-1)return parseFloat(60*t.substring(0,t.length-1));if(t.search(/h/i)===t.length-1)return parseFloat(3600*t.substring(0,t.length-1))}return t},this.urlToBlob=function(n){var i=e.defer();return t({url:n,method:"get",responseType:"arraybuffer"}).then(function(t){var e=new Uint8Array(t.data),n=t.headers("content-type")||"image/WebP",r=new window.Blob([e],{type:n});i.resolve(r)},function(t){i.reject(t)}),i.promise},this.setDefaults=function(t){this.defaults=t||{}},this.defaults={},this.version=n.version}]),n.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(t,e,n,i,r){function o(t,e,n){var r=[c.emptyPromise()];return angular.forEach(t,function(i,o){0===i.type.indexOf("image/jpeg")&&c.attrGetter("ngfFixOrientation",e,n,{$file:i})&&r.push(c.happyPromise(c.applyExifRotation(i),i).then(function(e){t.splice(o,1,e)}))}),i.all(r)}function s(t,e,n){var r=c.attrGetter("ngfResize",e,n);if(!r||!c.isResizeSupported()||!t.length)return c.emptyPromise();if(!(r instanceof Function))return a(r,t,e,n);var o=i.defer();r(t).then(function(i){a(i,t,e,n).then(function(t){o.resolve(t)},function(t){o.reject(t)})},function(t){o.reject(t)})}function a(t,e,n,r){function o(i,o){if(0===i.type.indexOf("image")){if(t.pattern&&!c.validatePattern(i,t.pattern))return;var a=c.resize(i,t.width,t.height,t.quality,t.type,t.ratio,t.centerCrop,function(t,e){return c.attrGetter("ngfResizeIf",n,r,{$width:t,$height:e,$file:i})},t.restoreExif!==!1);s.push(a),a.then(function(t){e.splice(o,1,t)},function(t){i.$error="resize",i.$errorParam=(t?(t.message?t.message:t)+": ":"")+(i&&i.name)})}}for(var s=[c.emptyPromise()],a=0;a<e.length;a++)o(e[a],a);return i.all(s)}var c=r;return c.getAttrWithDefaults=function(t,e){if(null!=t[e])return t[e];var n=c.defaults[e];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},c.attrGetter=function(e,n,i,r){var o=this.getAttrWithDefaults(n,e);if(!i)return o;try{return r?t(o)(i,r):t(o)(i)}catch(s){if(e.search(/min|max|pattern/i))return o;throw s}},c.shouldUpdateOn=function(t,e,n){var i=c.attrGetter("ngModelOptions",e,n);return!i||!i.updateOn||i.updateOn.split(" ").indexOf(t)>-1},c.emptyPromise=function(){var t=i.defer(),n=arguments;return e(function(){t.resolve.apply(t,n)}),t.promise},c.rejectPromise=function(){var t=i.defer(),n=arguments;return e(function(){t.reject.apply(t,n)}),t.promise},c.happyPromise=function(t,n){var r=i.defer();return t.then(function(t){r.resolve(t)},function(t){e(function(){throw t}),r.resolve(n)}),r.promise},c.updateModel=function(n,i,r,a,l,u,h){function f(o,s,l,h,f){i.$$ngfPrevValidFiles=o,i.$$ngfPrevInvalidFiles=s;var d=o&&o.length?o[0]:null,p=s&&s.length?s[0]:null;n&&(c.applyModelValidation(n,o),n.$setViewValue(f?d:o)),a&&t(a)(r,{$files:o,$file:d,$newFiles:l,$duplicateFiles:h,$invalidFiles:s,$invalidFile:p,$event:u});var g=c.attrGetter("ngfModelInvalid",i);g&&e(function(){t(g).assign(r,f?p:s)}),e(function(){})}function d(){function t(t,e){return t.name===e.name&&(t.$ngfOrigSize||t.size)===(e.$ngfOrigSize||e.size)&&t.type===e.type}function e(e){var n;for(n=0;n<y.length;n++)if(t(e,y[n]))return!0;for(n=0;n<w.length;n++)if(t(e,w[n]))return!0;return!1}if(l){v=[],b=[];for(var n=0;n<l.length;n++)e(l[n])?b.push(l[n]):v.push(l[n])}}function p(t){return angular.isArray(t)?t:[t]}function g(){A=[],x=[],angular.forEach(v,function(t){t.$error?x.push(t):A.push(t)})}function m(){function t(){e(function(){f(E?y.concat(A):A,E?w.concat(x):x,l,b,_)},C&&C.debounce?C.debounce.change||C.debounce:0)}s(S?v:A,i,r).then(function(){S?c.validate(v,y.length,n,i,r).then(function(){g(),t()}):t()},function(t){throw"Could not resize files "+t})}var v,y,w,b=[],x=[],A=[];y=i.$$ngfPrevValidFiles||[],w=i.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(y=p(n.$modelValue));var E=c.attrGetter("ngfKeep",i,r);v=(l||[]).slice(0),"distinct"!==E&&c.attrGetter("ngfKeepDistinct",i,r)!==!0||d(i,r);var _=!E&&!c.attrGetter("ngfMultiple",i,r)&&!c.attrGetter("multiple",i);if(!E||v.length){c.attrGetter("ngfBeforeModelChange",i,r,{$files:l,$file:l&&l.length?l[0]:null,$newFiles:v,$duplicateFiles:b,$event:u});var S=c.attrGetter("ngfValidateAfterResize",i,r),C=c.attrGetter("ngModelOptions",i,r);c.validate(v,y.length,n,i,r).then(function(){h?f(v,[],l,b,_):(C&&C.allowInvalid||S?A=v:g(),c.attrGetter("ngfFixOrientation",i,r)&&c.isExifSupported()?o(A,i,r).then(function(){m()}):m())})}},c}]),n.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(t,e,n,i){function r(t){var e=t.match(/Android[^\d]*(\d+)\.(\d+)/);if(e&&e.length>2){var n=i.defaults.androidFixMinorVersion||4;return parseInt(e[1])<4||parseInt(e[1])===n&&parseInt(e[2])<n}return t.indexOf("Chrome")===-1&&/.*Windows.*Safari.*/.test(t)}function o(t,e,n,i,o,a,c,l){function u(){return"input"===e[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function h(){return w("ngfChange")||w("ngfSelect")}function f(e){if(l.shouldUpdateOn("change",n,t)){for(var r=e.__files_||e.target&&e.target.files,o=[],s=0;s<r.length;s++)o.push(r[s]);l.updateModel(i,n,t,h(),o.length?o:null,e)}}function d(t){if(e!==t)for(var n=0;n<e[0].attributes.length;n++){var i=e[0].attributes[n];"type"!==i.name&&"class"!==i.name&&"style"!==i.name&&(null!=i.value&&""!==i.value||("required"===i.name&&(i.value="required"),"multiple"===i.name&&(i.value="multiple")),t.attr(i.name,"id"===i.name?"ngf-"+i.value:i.value))}}function p(){if(u())return e;var t=angular.element('<input type="file">');d(t);var n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),s.push({el:e,ref:n}),document.body.appendChild(n.append(t)[0]),t}function g(n){if(e.attr("disabled"))return!1;if(!w("ngfSelectDisabled",t)){var i=m(n);if(null!=i)return i;v(n);try{u()||document.body.contains(A[0])||(s.push({el:e,ref:A.parent()}),document.body.appendChild(A.parent()[0]),A.bind("change",f))}catch(o){}return r(navigator.userAgent)?setTimeout(function(){A[0].click()},0):A[0].click(),!1}}function m(t){var e=t.changedTouches||t.originalEvent&&t.originalEvent.changedTouches;if("touchstart"===t.type)return x=e?e[0].clientY:0,!0;if(t.stopPropagation(),t.preventDefault(),"touchend"===t.type){var n=e?e[0].clientY:0;if(Math.abs(n-x)>20)return!1}}function v(e){l.shouldUpdateOn("click",n,t)&&A.val()&&(A.val(null),l.updateModel(i,n,t,h(),null,e,!0))}function y(t){if(A&&!A.attr("__ngf_ie10_Fix_")){if(!A[0].parentNode)return void(A=null);t.preventDefault(),t.stopPropagation(),A.unbind("click");var e=A.clone();return A.replaceWith(e),A=e,A.attr("__ngf_ie10_Fix_","true"),A.bind("change",f),A.bind("click",y),A[0].click(),!1}A.removeAttr("__ngf_ie10_Fix_")}var w=function(t,e){return l.attrGetter(t,n,e)};l.registerModelChangeValidator(i,n,t);var b=[];b.push(t.$watch(w("ngfMultiple"),function(){A.attr("multiple",w("ngfMultiple",t))})),b.push(t.$watch(w("ngfCapture"),function(){A.attr("capture",w("ngfCapture",t))})),b.push(t.$watch(w("ngfAccept"),function(){A.attr("accept",w("ngfAccept",t))})),n.$observe("accept",function(){A.attr("accept",w("accept"))}),b.push(function(){n.$$observers&&delete n.$$observers.accept});var x=0,A=e;u()||(A=p()),A.bind("change",f),u()?e.bind("click",v):e.bind("click touchstart touchend",g),navigator.appVersion.indexOf("MSIE 10")!==-1&&A.bind("click",y),i&&i.$formatters.push(function(t){return null!=t&&0!==t.length||A.val()&&A.val(null),t}),t.$on("$destroy",function(){u()||A.parent().remove(),angular.forEach(b,function(t){t()})}),a(function(){for(var t=0;t<s.length;t++){var e=s[t];document.body.contains(e.el[0])||(s.splice(t,1),e.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(e,A,f)}var s=[];return{restrict:"AEC",require:"?ngModel",link:function(r,s,a,c){o(r,s,a,c,t,e,n,i)}}}]),function(){function t(t){return"img"===t.tagName.toLowerCase()?"image":"audio"===t.tagName.toLowerCase()?"audio":"video"===t.tagName.toLowerCase()?"video":/./}function e(e,n,i,r,o,s,a,c){function l(t){var s=e.attrGetter("ngfNoObjectUrl",o,i);e.dataUrl(t,s)["finally"](function(){n(function(){var e=(s?t.$ngfDataUrl:t.$ngfBlobUrl)||t.$ngfDataUrl;c?r.css("background-image","url('"+(e||"")+"')"):r.attr("src",e),e?r.removeClass("ng-hide"):r.addClass("ng-hide")})})}n(function(){var n=i.$watch(o[s],function(n){var i=a;if("ngfThumbnail"===s&&(i||(i={width:r[0].clientWidth,height:r[0].clientHeight}),0===i.width&&window.getComputedStyle)){var o=getComputedStyle(r[0]);i={width:parseInt(o.width.slice(0,-2)),height:parseInt(o.height.slice(0,-2))}}return angular.isString(n)?(r.removeClass("ng-hide"),c?r.css("background-image","url('"+n+"')"):r.attr("src",n)):void(!n||!n.type||0!==n.type.search(t(r[0]))||c&&0!==n.type.indexOf("image")?r.addClass("ng-hide"):i&&e.isResizeSupported()?e.resize(n,i.width,i.height,i.quality).then(function(t){l(t)},function(t){throw t}):l(n))});i.$on("$destroy",function(){n()})})}n.service("UploadDataUrl",["UploadBase","$timeout","$q",function(t,e,n){var i=t;return i.base64DataUrl=function(t){if(angular.isArray(t)){var e=n.defer(),r=0;return angular.forEach(t,function(n){i.dataUrl(n,!0)["finally"](function(){if(r++,r===t.length){var n=[];angular.forEach(t,function(t){n.push(t.$ngfDataUrl)}),e.resolve(n,t)}})}),e.promise}return i.dataUrl(t,!0)},i.dataUrl=function(t,r){if(!t)return i.emptyPromise(t,t);if(r&&null!=t.$ngfDataUrl||!r&&null!=t.$ngfBlobUrl)return i.emptyPromise(r?t.$ngfDataUrl:t.$ngfBlobUrl,t);var o=r?t.$$ngfDataUrlPromise:t.$$ngfBlobUrlPromise;if(o)return o;var s=n.defer();return e(function(){if(window.FileReader&&t&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 8")===-1||t.size<2e4)&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 9")===-1||t.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!r){var o;try{o=n.createObjectURL(t)}catch(a){return void e(function(){t.$ngfBlobUrl="",s.reject()})}e(function(){if(t.$ngfBlobUrl=o,o){s.resolve(o,t),i.blobUrls=i.blobUrls||[],i.blobUrlsTotalSize=i.blobUrlsTotalSize||0,i.blobUrls.push({url:o,size:t.size}),i.blobUrlsTotalSize+=t.size||0;for(var e=i.defaults.blobUrlsMaxMemory||268435456,r=i.defaults.blobUrlsMaxQueueSize||200;(i.blobUrlsTotalSize>e||i.blobUrls.length>r)&&i.blobUrls.length>1;){var a=i.blobUrls.splice(0,1)[0];n.revokeObjectURL(a.url),i.blobUrlsTotalSize-=a.size}}})}else{var c=new FileReader;c.onload=function(n){e(function(){t.$ngfDataUrl=n.target.result,s.resolve(n.target.result,t),e(function(){delete t.$ngfDataUrl},1e3)})},c.onerror=function(){e(function(){t.$ngfDataUrl="",s.reject()})},c.readAsDataURL(t)}}else e(function(){t[r?"$ngfDataUrl":"$ngfBlobUrl"]="",s.reject()})}),o=r?t.$$ngfDataUrlPromise=s.promise:t.$$ngfBlobUrlPromise=s.promise,o["finally"](function(){delete t[r?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),o},i}]),n.directive("ngfSrc",["Upload","$timeout",function(t,n){return{restrict:"AE",link:function(i,r,o){e(t,n,i,r,o,"ngfSrc",t.attrGetter("ngfResize",o,i),!1)}}}]),n.directive("ngfBackground",["Upload","$timeout",function(t,n){return{restrict:"AE",link:function(i,r,o){e(t,n,i,r,o,"ngfBackground",t.attrGetter("ngfResize",o,i),!0)}}}]),n.directive("ngfThumbnail",["Upload","$timeout",function(t,n){return{restrict:"AE",link:function(i,r,o){var s=t.attrGetter("ngfSize",o,i);e(t,n,i,r,o,"ngfThumbnail",s,t.attrGetter("ngfAsBackground",o,i))}}}]),n.config(["$compileProvider",function(t){t.imgSrcSanitizationWhitelist&&t.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),t.aHrefSanitizationWhitelist&&t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),n.filter("ngfDataUrl",["UploadDataUrl","$sce",function(t,e){return function(n,i,r){if(angular.isString(n))return e.trustAsResourceUrl(n);var o=n&&((i?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!o?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,t.dataUrl(n,i)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&o?r?e.trustAsResourceUrl(o):o:n)||"")}}])}(),n.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(t,e,n){function i(t){var e="",n=[];if(t.length>2&&"/"===t[0]&&"/"===t[t.length-1])e=t.substring(1,t.length-1);else{var r=t.split(",");if(r.length>1)for(var o=0;o<r.length;o++){var s=i(r[o]);s.regexp?(e+="("+s.regexp+")",o<r.length-1&&(e+="|")):n=n.concat(s.excludes)}else 0===t.indexOf("!")?n.push("^((?!"+i(t.substring(1)).regexp+").)*$"):(0===t.indexOf(".")&&(t="*"+t),e="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",e=e.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:e,excludes:n}}function r(t,e){null==e||t.$dirty||(t.$setDirty?t.$setDirty():t.$dirty=!0)}var o=t;return o.validatePattern=function(t,e){if(!e)return!0;var n=i(e),r=!0;if(n.regexp&&n.regexp.length){var o=new RegExp(n.regexp,"i");r=null!=t.type&&o.test(t.type)||null!=t.name&&o.test(t.name)}for(var s=n.excludes.length;s--;){var a=new RegExp(n.excludes[s],"i");r=r&&(null==t.type||a.test(t.type))&&(null==t.name||a.test(t.name))}return r},o.ratioToFloat=function(t){var e=t.toString(),n=e.search(/[x:]/i);return e=n>-1?parseFloat(e.substring(0,n))/parseFloat(e.substring(n+1)):parseFloat(e)},o.registerModelChangeValidator=function(t,e,n){t&&t.$formatters.push(function(i){t.$dirty&&(i&&!angular.isArray(i)&&(i=[i]),o.validate(i,0,t,e,n).then(function(){o.applyModelValidation(t,i)}))})},o.applyModelValidation=function(t,e){r(t,e),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},o.getValidationAttr=function(t,e,n,i,r){var s="ngf"+n[0].toUpperCase()+n.substr(1),a=o.attrGetter(s,t,e,{$file:r});if(null==a&&(a=o.attrGetter("ngfValidate",t,e,{$file:r}))){var c=(i||n).split(".");a=a[c[0]],c.length>1&&(a=a&&a[c[1]])}return a},o.validate=function(t,n,i,r,s){function a(e,n,a){if(t){for(var c=t.length,l=null;c--;){var u=t[c];if(u){var h=o.getValidationAttr(r,s,e,n,u);null!=h&&(a(u,h,c)||(u.$error=e,(u.$errorMessages=u.$errorMessages||{})[e]=!0,u.$errorParam=h,t.splice(c,1),l=!1))}}null!==l&&i.$ngfValidations.push({name:e,valid:l})}}function c(n,a,c,u,h){function f(t,e,i){null!=i?u(e,i).then(function(r){h(r,i)?t.resolve():(e.$error=n,(e.$errorMessages=e.$errorMessages||{})[n]=!0,e.$errorParam=i,t.reject())},function(){l("ngfValidateForce",{$file:e})?(e.$error=n,(e.$errorMessages=e.$errorMessages||{})[n]=!0,e.$errorParam=i,t.reject()):t.resolve()}):t.resolve()}var d=[o.emptyPromise()];if(t)return t=void 0===t.length?[t]:t,angular.forEach(t,function(t){var i=e.defer();return d.push(i.promise),!c||null!=t.type&&0===t.type.search(c)?void("dimensions"===n&&null!=o.attrGetter("ngfDimensions",r)?o.imageDimensions(t).then(function(e){f(i,t,l("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){i.reject()}):"duration"===n&&null!=o.attrGetter("ngfDuration",r)?o.mediaDuration(t).then(function(e){f(i,t,l("ngfDuration",{$file:t,$duration:e}))},function(){i.reject()}):f(i,t,o.getValidationAttr(r,s,n,a,t))):void i.resolve()}),e.all(d).then(function(){i.$ngfValidations.push({name:n,valid:!0})},function(){i.$ngfValidations.push({name:n,valid:!1})})}i=i||{},i.$ngfValidations=i.$ngfValidations||[],angular.forEach(i.$ngfValidations,function(t){t.valid=!0});var l=function(t,e){return o.attrGetter(t,r,s,e)};if(null==t||0===t.length)return o.emptyPromise(i);t=void 0===t.length?[t]:t.slice(0),a("maxFiles",null,function(t,e,i){return n+i<e}),a("pattern",null,o.validatePattern),a("minSize","size.min",function(t,e){return t.size+.1>=o.translateScalars(e)}),a("maxSize","size.max",function(t,e){return t.size-.1<=o.translateScalars(e)});var u=0;if(a("maxTotalSize",null,function(e,n){return u+=e.size,!(u>o.translateScalars(n))||(t.splice(0,t.length),!1)}),a("validateFn",null,function(t,e){return e===!0||null===e||""===e}),!t.length)return o.emptyPromise(i,i.$ngfValidations);var h=e.defer(),f=[];return f.push(o.happyPromise(c("maxHeight","height.max",/image/,this.imageDimensions,function(t,e){return t.height<=e}))),f.push(o.happyPromise(c("minHeight","height.min",/image/,this.imageDimensions,function(t,e){return t.height>=e}))),f.push(o.happyPromise(c("maxWidth","width.max",/image/,this.imageDimensions,function(t,e){return t.width<=e}))),f.push(o.happyPromise(c("minWidth","width.min",/image/,this.imageDimensions,function(t,e){return t.width>=e}))),f.push(o.happyPromise(c("dimensions",null,/image/,function(t,e){return o.emptyPromise(e)},function(t){return t}))),f.push(o.happyPromise(c("ratio",null,/image/,this.imageDimensions,function(t,e){for(var n=e.toString().split(","),i=!1,r=0;r<n.length;r++)Math.abs(t.width/t.height-o.ratioToFloat(n[r]))<1e-4&&(i=!0);return i}))),f.push(o.happyPromise(c("maxRatio","ratio.max",/image/,this.imageDimensions,function(t,e){return t.width/t.height-o.ratioToFloat(e)<1e-4}))),f.push(o.happyPromise(c("minRatio","ratio.min",/image/,this.imageDimensions,function(t,e){return t.width/t.height-o.ratioToFloat(e)>-1e-4}))),f.push(o.happyPromise(c("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(t,e){return t<=o.translateScalars(e)}))),f.push(o.happyPromise(c("minDuration","duration.min",/audio|video/,this.mediaDuration,function(t,e){return t>=o.translateScalars(e)}))),f.push(o.happyPromise(c("duration",null,/audio|video/,function(t,e){return o.emptyPromise(e)},function(t){return t}))),f.push(o.happyPromise(c("validateAsyncFn",null,null,function(t,e){return e},function(t){return t===!0||null===t||""===t}))),e.all(f).then(function(){h.resolve(i,i.$ngfValidations)})},o.imageDimensions=function(t){if(t.$ngfWidth&&t.$ngfHeight){var i=e.defer();return n(function(){i.resolve({width:t.$ngfWidth,height:t.$ngfHeight})}),i.promise}if(t.$ngfDimensionPromise)return t.$ngfDimensionPromise;var r=e.defer();return n(function(){return 0!==t.type.indexOf("image")?void r.reject("not image"):void o.dataUrl(t).then(function(e){function i(){var e=a[0].clientWidth,n=a[0].clientHeight;a.remove(),t.$ngfWidth=e,t.$ngfHeight=n,r.resolve({width:e,height:n})}function o(){a.remove(),r.reject("load error")}function s(){n(function(){a[0].parentNode&&(a[0].clientWidth?i():c>10?o():s())},1e3)}var a=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");a.on("load",i),a.on("error",o);var c=0;s(),angular.element(document.getElementsByTagName("body")[0]).append(a)},function(){r.reject("load error")})}),t.$ngfDimensionPromise=r.promise,t.$ngfDimensionPromise["finally"](function(){delete t.$ngfDimensionPromise}),t.$ngfDimensionPromise},o.mediaDuration=function(t){if(t.$ngfDuration){var i=e.defer();return n(function(){i.resolve(t.$ngfDuration)}),i.promise}if(t.$ngfDurationPromise)return t.$ngfDurationPromise;var r=e.defer();return n(function(){return 0!==t.type.indexOf("audio")&&0!==t.type.indexOf("video")?void r.reject("not media"):void o.dataUrl(t).then(function(e){function i(){var e=a[0].duration;t.$ngfDuration=e,a.remove(),r.resolve(e)}function o(){a.remove(),r.reject("load error")}function s(){n(function(){a[0].parentNode&&(a[0].duration?i():c>10?o():s())},1e3)}var a=angular.element(0===t.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");a.on("loadedmetadata",i),a.on("error",o);var c=0;s(),angular.element(document.body).append(a)},function(){r.reject("load error")})}),t.$ngfDurationPromise=r.promise,t.$ngfDurationPromise["finally"](function(){delete t.$ngfDurationPromise}),t.$ngfDurationPromise},o}]),n.service("UploadResize",["UploadValidate","$q",function(t,e){var n=t,i=function(t,e,n,i,r){var o=r?Math.max(n/t,i/e):Math.min(n/t,i/e);return{width:t*o,height:e*o,marginX:t*o-n,marginY:e*o-i}},r=function(t,r,o,s,a,c,l,u){var h=e.defer(),f=document.createElement("canvas"),d=document.createElement("img");return d.onload=function(){if(null!=u&&u(d.width,d.height)===!1)return void h.reject("resizeIf");try{if(c){var t=n.ratioToFloat(c),e=d.width/d.height;e<t?(r=d.width,o=r/t):(o=d.height,r=o*t)}r||(r=d.width),o||(o=d.height);var p=i(d.width,d.height,r,o,l);f.width=Math.min(p.width,r),f.height=Math.min(p.height,o);var g=f.getContext("2d");g.drawImage(d,Math.min(0,-p.marginX/2),Math.min(0,-p.marginY/2),p.width,p.height),h.resolve(f.toDataURL(a||"image/WebP",s||.934))}catch(m){h.reject(m)}},d.onerror=function(){h.reject()},d.src=t,h.promise};return n.dataUrltoBlob=function(t,e,n){for(var i=t.split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,a=new Uint8Array(s);s--;)a[s]=o.charCodeAt(s);var c=new window.Blob([a],{type:r});return c.name=e,c.$ngfOrigSize=n,c},n.isResizeSupported=function(){var t=document.createElement("canvas");return window.atob&&t.getContext&&t.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(t){this.$ngfName=t},configurable:!0}),n.resize=function(t,i,o,s,a,c,l,u,h){if(0!==t.type.indexOf("image"))return n.emptyPromise(t);var f=e.defer();return n.dataUrl(t,!0).then(function(e){r(e,i,o,s,a||t.type,c,l,u).then(function(i){if("image/jpeg"===t.type&&h)try{i=n.restoreExif(e,i)}catch(r){setTimeout(function(){throw r},1)}try{var o=n.dataUrltoBlob(i,t.name,t.size);f.resolve(o)}catch(r){f.reject(r)}},function(e){"resizeIf"===e&&f.resolve(t),f.reject(e)})},function(t){f.reject(t)}),f.promise},n}]),function(){function t(t,n,i,r,o,s,a,c,l,u){function h(){return n.attr("disabled")||v("ngfDropDisabled",t)}function f(e,n){c.updateModel(r,i,t,v("ngfChange")||v("ngfDrop"),e,n)}function d(e,n){if(!c.shouldUpdateOn(e,i,t)||!n)return c.rejectPromise([]);var r=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(t,e,n){r.push(n)});var o=[],s=[];if(r.length){angular.forEach(r,function(t){o.push(c.urlToBlob(t).then(function(t){s.push(t)}))});var a=u.defer();return u.all(o).then(function(){a.resolve(s)},function(t){a.reject(t)}),a.promise}return c.emptyPromise()}function p(t,e,n,i){var r=v("ngfDragOverClass",t,{$event:n}),o="dragover";if(angular.isString(r))o=r;else if(r&&(r.delay&&(x=r.delay),r.accept||r.reject)){var s=n.dataTransfer.items;if(null!=s&&s.length)for(var a=r.pattern||v("ngfPattern",t,{$event:n}),l=s.length;l--;){if(!c.validatePattern(s[l],a)){o=r.reject;break}o=r.accept}else o=r.accept}i(o)}function g(e,n,r,o){function s(t,e){var n=u.defer();if(null!=t)if(t.isDirectory){var i=[c.emptyPromise()];if(f){var r={type:"directory"};r.name=r.path=(e||"")+t.name+t.name,d.push(r)}var o=t.createReader(),a=[],g=function(){o.readEntries(function(r){try{r.length?(a=a.concat(Array.prototype.slice.call(r||[],0)),g()):(angular.forEach(a.slice(0),function(n){d.length<=l&&p<=h&&i.push(s(n,(e?e:"")+t.name+"/"))}),u.all(i).then(function(){n.resolve()},function(t){n.reject(t)}))}catch(o){n.reject(o)}},function(t){n.reject(t)})};g()}else t.file(function(t){try{t.path=(e?e:"")+t.name,f&&(t=c.rename(t,t.path)),d.push(t),p+=t.size,n.resolve()}catch(i){n.reject(i)}},function(t){n.reject(t)});return n.promise}var l=c.getValidationAttr(i,t,"maxFiles")||Number.MAX_VALUE,h=c.getValidationAttr(i,t,"maxTotalSize")||Number.MAX_VALUE,f=v("ngfIncludeDir",t),d=[],p=0,g=[c.emptyPromise()];if(e&&e.length>0&&"file"!==a.protocol())for(var m=0;m<e.length;m++){if(e[m].webkitGetAsEntry&&e[m].webkitGetAsEntry()&&e[m].webkitGetAsEntry().isDirectory){var y=e[m].webkitGetAsEntry();if(y.isDirectory&&!r)continue;null!=y&&g.push(s(y))}else{var w=e[m].getAsFile();null!=w&&(d.push(w),p+=w.size)}if(d.length>l||p>h||!o&&d.length>0)break}else if(null!=n)for(var b=0;b<n.length;b++){var x=n.item(b);if((x.type||x.size>0)&&(d.push(x),p+=x.size),d.length>l||p>h||!o&&d.length>0)break}var A=u.defer();return u.all(g).then(function(){if(o||f||!d.length)A.resolve(d);else{for(var t=0;d[t]&&"directory"===d[t].type;)t++;A.resolve([d[t]])}},function(t){A.reject(t)}),A.promise}var m=e(),v=function(t,e,n){return c.attrGetter(t,i,e,n)};if(v("dropAvailable")&&s(function(){t[v("dropAvailable")]?t[v("dropAvailable")].value=m:t[v("dropAvailable")]=m}),!m)return void(v("ngfHideOnDropNotAvailable",t)===!0&&n.css("display","none"));null==v("ngfSelect")&&c.registerModelChangeValidator(r,i,t);var y,w=null,b=o(v("ngfStopPropagation")),x=1;n[0].addEventListener("dragover",function(e){if(!h()&&c.shouldUpdateOn("drop",i,t)){if(e.preventDefault(),b(t)&&e.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var r=e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy"}s.cancel(w),y||(y="C",p(t,i,e,function(i){y=i,n.addClass(y),v("ngfDrag",t,{$isDragging:!0,$class:y,$event:e})}))}},!1),n[0].addEventListener("dragenter",function(e){!h()&&c.shouldUpdateOn("drop",i,t)&&(e.preventDefault(),b(t)&&e.stopPropagation())},!1),n[0].addEventListener("dragleave",function(e){!h()&&c.shouldUpdateOn("drop",i,t)&&(e.preventDefault(),b(t)&&e.stopPropagation(),w=s(function(){y&&n.removeClass(y),y=null,v("ngfDrag",t,{$isDragging:!1,$event:e})},x||100))},!1),n[0].addEventListener("drop",function(e){if(!h()&&c.shouldUpdateOn("drop",i,t)){e.preventDefault(),b(t)&&e.stopPropagation(),y&&n.removeClass(y),y=null;var r,o=e.dataTransfer.items;try{r=e.dataTransfer&&e.dataTransfer.getData&&e.dataTransfer.getData("text/html")}catch(s){}g(o,e.dataTransfer.files,v("ngfAllowDir",t)!==!1,v("multiple")||v("ngfMultiple",t)).then(function(t){t.length?f(t,e):d("dropUrl",r).then(function(t){f(t,e)})})}},!1),n[0].addEventListener("paste",function(e){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&v("ngfEnableFirefoxPaste",t)&&e.preventDefault(),!h()&&c.shouldUpdateOn("paste",i,t)){var n=[],r=e.clipboardData||e.originalEvent.clipboardData;if(r&&r.items)for(var o=0;o<r.items.length;o++)r.items[o].type.indexOf("image")!==-1&&n.push(r.items[o].getAsFile());n.length?f(n,e):d("pasteUrl",r).then(function(t){f(t,e)})}},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&v("ngfEnableFirefoxPaste",t)&&(n.attr("contenteditable",!0),n.on("keypress",function(t){t.metaKey||t.ctrlKey||t.preventDefault()}))}function e(){var t=document.createElement("div");return"draggable"in t&&"ondrop"in t&&!/Edge\/12./i.test(navigator.userAgent)}n.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(e,n,i,r,o,s){return{restrict:"AEC",require:"?ngModel",link:function(a,c,l,u){t(a,c,l,u,e,n,i,r,o,s)}}}]),n.directive("ngfNoFileDrop",function(){return function(t,n){
e()&&n.css("display","none")}}),n.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(t,n,i){return function(r,o,s){if(e()){var a=t(i.attrGetter("ngfDropAvailable",s));n(function(){a(r),a.assign&&a.assign(r,!0)})}}}])}(),n.service("UploadExif",["UploadResize","$q",function(t,e){function n(t,e,n,i){switch(e){case 2:return t.transform(-1,0,0,1,n,0);case 3:return t.transform(-1,0,0,-1,n,i);case 4:return t.transform(1,0,0,-1,0,i);case 5:return t.transform(0,1,1,0,0,0);case 6:return t.transform(0,1,-1,0,i,0);case 7:return t.transform(0,-1,-1,0,i,n);case 8:return t.transform(0,-1,1,0,0,n)}}function i(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,r=0;r<i;r++)e+=String.fromCharCode(n[r]);return window.btoa(e)}var r=t;return r.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&r.isResizeSupported()},r.readOrientation=function(t){var n=e.defer(),i=new FileReader,r=t.slice?t.slice(0,65536):t;return i.readAsArrayBuffer(r),i.onerror=function(t){return n.reject(t)},i.onload=function(t){var e={orientation:1},i=new DataView(this.result);if(65496!==i.getUint16(0,!1))return n.resolve(e);for(var r=i.byteLength,o=2;o<r;){var s=i.getUint16(o,!1);if(o+=2,65505===s){if(1165519206!==i.getUint32(o+=2,!1))return n.resolve(e);var a=18761===i.getUint16(o+=6,!1);o+=i.getUint32(o+4,a);var c=i.getUint16(o,a);o+=2;for(var l=0;l<c;l++)if(274===i.getUint16(o+12*l,a)){var u=i.getUint16(o+12*l+8,a);return u>=2&&u<=8&&(i.setUint16(o+12*l+8,1,a),e.fixedArrayBuffer=t.target.result),e.orientation=u,n.resolve(e)}}else{if(65280!==(65280&s))break;o+=i.getUint16(o,!1)}}return n.resolve(e)},n.promise},r.applyExifRotation=function(t){if(0!==t.type.indexOf("image/jpeg"))return r.emptyPromise(t);var o=e.defer();return r.readOrientation(t).then(function(e){return e.orientation<2||e.orientation>8?o.resolve(t):void r.dataUrl(t,!0).then(function(s){var a=document.createElement("canvas"),c=document.createElement("img");c.onload=function(){try{a.width=e.orientation>4?c.height:c.width,a.height=e.orientation>4?c.width:c.height;var s=a.getContext("2d");n(s,e.orientation,c.width,c.height),s.drawImage(c,0,0);var l=a.toDataURL(t.type||"image/WebP",.934);l=r.restoreExif(i(e.fixedArrayBuffer),l);var u=r.dataUrltoBlob(l,t.name);o.resolve(u)}catch(h){return o.reject(h)}},c.onerror=function(){o.reject()},c.src=s},function(t){o.reject(t)})},function(t){o.reject(t)}),o.promise},r.restoreExif=function(t,e){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(t){var e,n,i,r,o,s="",a="",c="",l=0;do e=t[l++],n=t[l++],a=t[l++],i=e>>2,r=(3&e)<<4|n>>4,o=(15&n)<<2|a>>6,c=63&a,isNaN(n)?o=c=64:isNaN(a)&&(c=64),s=s+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(c),e=n=a="",i=r=o=c="";while(l<t.length);return s},n.restore=function(t,e){t.match("data:image/jpeg;base64,")&&(t=t.replace("data:image/jpeg;base64,",""));var n=this.decode64(t),i=this.slice2Segments(n),r=this.exifManipulation(e,i);return"data:image/jpeg;base64,"+this.encode64(r)},n.exifManipulation=function(t,e){var n=this.getExifArray(e),i=this.insertExif(t,n);return new Uint8Array(i)},n.getExifArray=function(t){for(var e,n=0;n<t.length;n++)if(e=t[n],255===e[0]&225===e[1])return e;return[]},n.insertExif=function(t,e){var n=t.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),s=i.slice(r),a=o;return a=a.concat(e),a=a.concat(s)},n.slice2Segments=function(t){for(var e=0,n=[];;){if(255===t[e]&218===t[e+1])break;if(255===t[e]&216===t[e+1])e+=2;else{var i=256*t[e+2]+t[e+3],r=e+i+2,o=t.slice(e,r);n.push(o),e=r}if(e>t.length)break}return n},n.decode64=function(t){var e,n,i,r,o,s="",a="",c=0,l=[],u=/[^A-Za-z0-9\+\/\=]/g;u.exec(t)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=this.KEY_STR.indexOf(t.charAt(c++)),r=this.KEY_STR.indexOf(t.charAt(c++)),o=this.KEY_STR.indexOf(t.charAt(c++)),a=this.KEY_STR.indexOf(t.charAt(c++)),e=i<<2|r>>4,n=(15&r)<<4|o>>2,s=(3&o)<<6|a,l.push(e),64!==o&&l.push(n),64!==a&&l.push(s),e=n=s="",i=r=o=a="";while(c<t.length);return l},n.restore(t,e)},r}])},function(t,e,n){"use strict";var i=n(615);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(569),o=n(560),s=n(310),a=n(616),c=n(634),l=n(635),u=n(646),h=n(655),f=i.module("simulator.devies",[r,o,s,a,u,l]).config(c).component("simulator",h);t.exports=f},function(t,e,n){"use strict";var i=n(617);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(560),o=n(310),s=n(618),a=n(623),c=n(627),l=n(630),u=n(633),h=i.module("simulator.devices.mobile",[r,o]).component("devicePanel",s).component("timeseriesChart",a).component("share",c).component("mobile",l).config(u);t.exports=h},function(t,e,n){"use strict";var i=n(348);n(619);var r=n(622),o={template:'\n    <modal name="share" width="355px" height="455px">\n      <share link="devicePanel.link"></share>\n    </modal>\n    <div class="control-panel content">\n      <div class="section">\n        <h1 class="type">{{ ::devicePanel.device.template.name }}</h1>\n        <p class="name">{{ ::devicePanel.device.serialNumber }}</p>\n        <p class="username">{{ ::devicePanel.endUser.name }}</p>\n        <p class="email">{{ ::devicePanel.config.account.emailAddress }}</p>\n        <div class="share-icon" ng-click="devicePanel.openShareModal()">'+r+'</div>\n      </div>\n      <div class="section" bind-html-compile="devicePanel.widgets()">\n      </div>\n    </div>\n    <div class="status-panel">\n      <div class="content">\n        <h2>Right now</h2>\n        <div class="sensor-panels">\n          <div class="panel" ng-repeat="(name, sensor) in devicePanel.device.sensors">\n            <p class="name">{{ ::name }}</p>\n            <p class="value">\n              {{ sensor.numericValue }}\n              <span>{{ ::devicePanel.deviceConfig.sensors[name].unit }}</span>\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div class="content device-info">\n        <h2 ng-click="devicePanel.toggleInfoPanel()">\n          Device info\n          <span class="pull-right chevron" ng-class="{rotate: devicePanel.infoPanelOpen}"></span>\n        </h2>\n        <div collapse is-open="devicePanel.infoPanelOpen" class="device-fields">\n          <div class="device-panel-content">\n            <div class="device-info-fields">\n              <div class="row" ng-repeat="(key, value) in devicePanel.device" ng-if="devicePanel.device.excludedInfoFields.indexOf(key.toLowerCase()) === -1">\n                <div class="field-name">{{ ::key }}</div>\n                <div class="field-value">\n                  <span ng-if="!devicePanel.editingInfoFields">{{ value }}</span>\n                  <input type="text" ng-if="devicePanel.editingInfoFields" ng-model="devicePanel.device[key]" />\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <button type="button" class="button primary" ng-if="!devicePanel.editingInfoFields" ng-click="devicePanel.editInfoFields()">\n                Edit\n              </button>\n              <button type="button" class="button secondary" ng-if="devicePanel.editingInfoFields" ng-click="devicePanel.updateInfoFields()">\n                Save\n              </button>\n              <button type="button" class="button delete" ng-if="devicePanel.editingInfoFields" ng-click="devicePanel.cancelInfoFieldsEditing()">\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="content">\n        <select\n          ng-model="devicePanel.timeseries.selectedOption"\n          ng-options="channel.channelTemplateName for channel in devicePanel.timeseries.availableOptions track by channel.channelTemplateId">\n        </select>\n        <timeseries-chart device="devicePanel.device" channel="devicePanel.timeseries.selectedOption"></timeseries-chart>\n      </div>\n    </div>\n  ',bindings:{device:"="},controllerAs:"devicePanel",controller:["$log","$scope","socketService","blueprintService","modalService","CONFIG","DEVICES_CONFIG",function(t,e,n,r,o,s,a){var c=this;this.config=s,this.link="http://localhost:5000/#/devices/c3a5435e-87ba-41fa-b2bf-984accda9b95/mobile",this.openShareModal=function(){o.open("share")};var l=["excludedInfoFields","simulate","subscribe","template","update","sensors","ok","channels"];this.device.excludedInfoFields=l.concat(a.general.excludedDeviceInfoFields,this.config.excludedDeviceInfoFields).filter(Boolean).map(function(t){return t.toLowerCase()});var u=a[this.device.template.name]||{};this.deviceConfig=u,r.getV1("end-users",{organizationId:this.device.organizationId}).then(function(t){if(t.data){var e=t.data.endUsers.results;c.endUser=e[0]}}),this.widgets=function(){if(u&&u.widgets)return u.widgets.map(function(t){return"<"+t+' device="devicePanel.device"></'+t+">"}).join("")},this.infoPanelOpen=!1,this.toggleInfoPanel=function(){c.infoPanelOpen=!c.infoPanelOpen};var h=this.device.channels.filter(function(t){return"timeSeries"===t.persistenceType}),f=u.defaultSensor?i.find(h,{channelTemplateName:u.defaultSensor}):h[0];this.timeseries={availableOptions:h,selectedOption:f};var d=void 0;this.editInfoFields=function(){c.editingInfoFields=!0,d=i.cloneDeep(c.device)},this.cancelInfoFieldsEditing=function(){c.editingInfoFields=!1,Object.assign(c.device,d)},this.updateInfoFields=function(){var t=i.reduce(c.device,function(t,e,n){return c.device.excludedInfoFields.includes(n.toLowerCase())||(t[n]=e),t},{});r.updateDevice(c.device.id,t).then(function(){c.editingInfoFields=!1})}}]};t.exports=o},function(t,e){},,,function(t,e){t.exports='<svg id="Capa_1" style="enable-background:new 0 0 80 90;" version="1.1" viewBox="0 0 80 90" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M65,60c-3.436,0-6.592,1.168-9.121,3.112L29.783,47.455C29.914,46.654,30,45.837,30,45c0-0.839-0.086-1.654-0.217-2.456 l26.096-15.657C58.408,28.833,61.564,30,65,30c8.283,0,15-6.717,15-15S73.283,0,65,0S50,6.717,50,15 c0,0.837,0.086,1.654,0.219,2.455L24.123,33.112C21.594,31.168,18.438,30,15,30C6.717,30,0,36.717,0,45s6.717,15,15,15 c3.438,0,6.594-1.167,9.123-3.113l26.096,15.657C50.086,73.346,50,74.161,50,75c0,8.283,6.717,15,15,15s15-6.717,15-15 S73.283,60,65,60z"></path></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>'},function(t,e,n){"use strict";var i=n(348),r=n(624);n(625);var o={template:'\n    <canvas class="chart chart-line">\n    </canvas>\n  ',bindings:{device:"<",channel:"<"},controllerAs:"chart",controller:["$log","$element","$scope","devicesService",function(t,e,n,o){var s=this,a=100,c=void 0,l=void 0;n.$watch(function(){return s.channel},function(t,u){if(t&&t.channel){c&&(c.destroy(),l());var h=function(t){var o=t?t.map(function(t){return t.numericValue}).slice(-a):[""],u={labels:Array(o.length).fill(""),datasets:[{label:f,data:o,strokeColor:"#17bae3",fillColor:"#f5f5f5"}]},h=e[0],d=h.firstElementChild.getContext("2d");c=new r(d).Line(u,{responsive:!0,maintainAspectRatio:!1,showTooltips:!1,pointDot:!1,datasetStrokeWidth:4}),l=n.$watch(function(){return s.device.sensors[f]},function(t,e){i.isNumber(t.numericValue)&&(c.addData([t.numericValue],""),c.datasets[0].points.length>a&&c.removeData())})},f=t.channelTemplateName;o.getTimeSeries(t.channel).then(h)["catch"](function(){return h()})}})}]};t.exports=o},function(t,e,n){var i,r;/*!
	 * Chart.js
	 * http://chartjs.org/
	 * Version: 1.1.1
	 *
	 * Copyright 2015 Nick Downie
	 * Released under the MIT license
	 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
	 */
(function(){"use strict";var o=this,s=o.Chart,a=function(t){this.canvas=t.canvas,this.ctx=t;var e=function(t,e){return t["offset"+e]?t["offset"+e]:document.defaultView.getComputedStyle(t).getPropertyValue(e)};this.width=e(t.canvas,"Width")||t.canvas.width,this.height=e(t.canvas,"Height")||t.canvas.height;return this.aspectRatio=this.width/this.height,c.retinaScale(this),this};a.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipTitleTemplate:"<%= label%>",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= datasetLabel %>: <%= value %>",multiTooltipKeyBackground:"#fff",segmentColorDefault:["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A","#B4B482","#B15928"],segmentHighlightColorDefaults:["#CEF6FF","#47A0DC","#DAFFB2","#5BC854","#FFC2C1","#FF4244","#FFE797","#FFA728","#F2DAFE","#9265C2","#DCDCAA","#D98150"],onAnimationProgress:function(){},onAnimationComplete:function(){}}},a.types={};var c=a.helpers={},l=c.each=function(t,e,n){var i=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var r;for(r=0;r<t.length;r++)e.apply(n,[t[r],r].concat(i))}else for(var o in t)e.apply(n,[t[o],o].concat(i))},u=c.clone=function(t){var e={};return l(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)}),e},h=c.extend=function(t){return l(Array.prototype.slice.call(arguments,1),function(e){l(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)})}),t},f=c.merge=function(t,e){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),h.apply(null,n)},d=c.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},p=(c.where=function(t,e){var n=[];return c.each(t,function(t){e(t)&&n.push(t)}),n},c.findNextWhere=function(t,e,n){n||(n=-1);for(var i=n+1;i<t.length;i++){var r=t[i];if(e(r))return r}},c.findPreviousWhere=function(t,e,n){n||(n=t.length);for(var i=n-1;i>=0;i--){var r=t[i];if(e(r))return r}},c.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=p,t&&h(n.prototype,t),n.__super__=e.prototype,n}),g=c.noop=function(){},m=c.uid=function(){var t=0;return function(){return"chart-"+t++}}(),v=c.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},y=c.amd=n(512),w=c.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},b=c.max=function(t){return Math.max.apply(Math,t)},x=c.min=function(t){return Math.min.apply(Math,t)},A=(c.cap=function(t,e,n){if(w(e)){if(t>e)return e}else if(w(n)&&t<n)return n;return t},c.getDecimalPlaces=function(t){if(t%1!==0&&w(t)){var e=t.toString();if(e.indexOf("e-")<0)return e.split(".")[1].length;if(e.indexOf(".")<0)return parseInt(e.split("e-")[1]);var n=e.split(".")[1].split("e-");return n[0].length+parseInt(n[1])}return 0}),E=c.radians=function(t){return t*(Math.PI/180)},_=(c.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i),o=2*Math.PI+Math.atan2(i,n);return n<0&&i<0&&(o+=2*Math.PI),{angle:o,distance:r}},c.aliasPixel=function(t){return t%2===0?0:.5}),S=(c.splineCurve=function(t,e,n,i){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),s=i*r/(r+o),a=i*o/(r+o);return{inner:{x:e.x-s*(n.x-t.x),y:e.y-s*(n.y-t.y)},outer:{x:e.x+a*(n.x-t.x),y:e.y+a*(n.y-t.y)}}},c.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),C=(c.calculateScaleRange=function(t,e,n,i,r){var o=2,s=Math.floor(e/(1.5*n)),a=o>=s,c=[];l(t,function(t){null==t||c.push(t)});var u=x(c),h=b(c);h===u&&(h+=.5,u>=.5&&!i?u-=.5:h+=.5);for(var f=Math.abs(h-u),d=S(f),p=Math.ceil(h/(1*Math.pow(10,d)))*Math.pow(10,d),g=i?0:Math.floor(u/(1*Math.pow(10,d)))*Math.pow(10,d),m=p-g,v=Math.pow(10,d),y=Math.round(m/v);(y>s||2*y<s)&&!a;)if(y>s)v*=2,y=Math.round(m/v),y%1!==0&&(a=!0);else if(r&&d>=0){if(v/2%1!==0)break;v/=2,y=Math.round(m/v)}else v/=2,y=Math.round(m/v);return a&&(y=o,v=m/y),{steps:y,stepValue:v,min:g,max:g+y*v}},c.template=function(t,e){function n(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t];return e?n(e):n}if(t instanceof Function)return t(e);var i={};return n(t,e)}),M=(c.generateLabels=function(t,e,n,i){var r=new Array(e);return t&&l(r,function(e,o){r[o]=C(t,{value:n+i*(o+1)})}),r},c.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=1*(.3*1.5)),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-M.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*M.easeInBounce(2*t):.5*M.easeOutBounce(2*t-1)+.5}}),$=c.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),F=(c.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),c.animationLoop=function(t,e,n,i,r,o){var s=0,a=M[n]||M.linear,c=function(){s++;var n=s/e,l=a(n);t.call(o,l,n,s),i.call(o,l,n),s<e?o.animationFrame=$(c):r.apply(o)};$(c)},c.getRelativePosition=function(t){var e,n,i=t.originalEvent||t,r=t.currentTarget||t.srcElement,o=r.getBoundingClientRect();return i.touches?(e=i.touches[0].clientX-o.left,n=i.touches[0].clientY-o.top):(e=i.clientX-o.left,n=i.clientY-o.top),{x:e,y:n}},c.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),T=c.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=g},L=(c.bindEvents=function(t,e,n){t.events||(t.events={}),l(e,function(e){t.events[e]=function(){n.apply(t,arguments)},F(t.chart.canvas,e,t.events[e])})},c.unbindEvents=function(t,e){l(e,function(e,n){T(t.chart.canvas,n,e)})}),k=c.getMaximumWidth=function(t){var e=t.parentNode,n=parseInt(D(e,"padding-left"))+parseInt(D(e,"padding-right"));return e?e.clientWidth-n:0},R=c.getMaximumHeight=function(t){var e=t.parentNode,n=parseInt(D(e,"padding-bottom"))+parseInt(D(e,"padding-top"));return e?e.clientHeight-n:0},D=c.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},B=(c.getMaximumSize=c.getMaximumWidth,c.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,i=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=i+"px",e.canvas.height=i*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),P=c.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},O=c.fontString=function(t,e,n){return e+" "+t+"px "+n},I=c.longestText=function(t,e,n){t.font=e;var i=0;return l(n,function(e){var n=t.measureText(e).width;i=n>i?n:i}),i},N=c.drawRoundedRectangle=function(t,e,n,i,r,o){t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.quadraticCurveTo(e+i,n,e+i,n+o),t.lineTo(e+i,n+r-o),t.quadraticCurveTo(e+i,n+r,e+i-o,n+r),t.lineTo(e+o,n+r),t.quadraticCurveTo(e,n+r,e,n+r-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath()};a.instances={},a.Type=function(t,e,n){this.options=e,this.chart=n,this.id=m(),a.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},h(a.Type.prototype,{initialize:function(){return this},clear:function(){return P(this.chart),this},stop:function(){return a.animationService.cancelAnimation(this),this},resize:function(t){this.stop();var e=this.chart.canvas,n=k(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:R(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=i,B(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:g,render:function(t){if(t&&this.reflow(),this.options.animation&&!t){var e=new a.Animation;e.numSteps=this.options.animationSteps,e.easing=this.options.animationEasing,e.render=function(t,e){var n=c.easingEffects[e.easing],i=e.currentStep/e.numSteps,r=n(i);t.draw(r,i,e.currentStep)},e.onAnimationProgress=this.options.onAnimationProgress,e.onAnimationComplete=this.options.onAnimationComplete,a.animationService.addAnimation(this,e)}else this.draw(),this.options.onAnimationComplete.call(this);return this},generateLegend:function(){return c.template(this.options.legendTemplate,this)},destroy:function(){this.stop(),this.clear(),L(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete a.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var n=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(l(t,function(t,n){t!==this.activeElements[n]&&(e=!0)},this),e)}.call(this,t);if(n||e){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var i,r,o=this.datasets.length-1;o>=0&&(i=this.datasets[o].points||this.datasets[o].bars||this.datasets[o].segments,r=d(i,t[0]),r===-1);o--);var s=[],u=[],h=function(t){var e,n,i,o,a,l=[],h=[],f=[];return c.each(this.datasets,function(t){e=t.points||t.bars||t.segments,e[r]&&e[r].hasValue()&&l.push(e[r])}),c.each(l,function(t){h.push(t.x),f.push(t.y),s.push(c.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),a=x(f),i=b(f),o=x(h),n=b(h),{x:o>this.chart.width/2?o:n,y:(a+i)/2}}.call(this,r);new a.MultiTooltip({x:h.x,y:h.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:s,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:C(this.options.tooltipTitleTemplate,t[0]),chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else l(t,function(t){var e=t.tooltipPosition();new a.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:C(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),a.Type.extend=function(t){var e=this,n=function(){return e.apply(this,arguments)};if(n.prototype=u(e.prototype),h(n.prototype,t),n.extend=a.Type.extend,t.name||e.prototype.name){var i=t.name||e.prototype.name,r=a.defaults[e.prototype.name]?u(a.defaults[e.prototype.name]):{};a.defaults[i]=h(r,t.defaults),a.types[i]=n,a.prototype[i]=function(t,e){var r=f(a.defaults.global,a.defaults[i],e||{});return new n(t,r,this)}}else v("Name not provided for this chart, so it hasn't been registered");return e},a.Element=function(t){h(this,t),this.initialize.apply(this,arguments),this.save()},h(a.Element.prototype,{initialize:function(){},restore:function(t){return t?l(t,function(t){this[t]=this._saved[t]},this):h(this,this._saved),this},save:function(){return this._saved=u(this),delete this._saved._saved,this},update:function(t){return l(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return l(t,function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return w(this.value)}}),a.Element.extend=p,a.Point=a.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),a.Arc=a.Element.extend({inRange:function(t,e){var n=c.getAngleFromPoint(this,{x:t,y:e}),i=n.angle%(2*Math.PI),r=(2*Math.PI+this.startAngle)%(2*Math.PI),o=(2*Math.PI+this.endAngle)%(2*Math.PI)||360,s=o<r?i<=o||i>=r:i>=r&&i<=o,a=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return s&&a},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius<0?0:this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius<0?0:this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),a.Rectangle=a.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,i=this.x+e,r=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(n+=o,i-=o,r+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,r),t.lineTo(i,r),t.lineTo(i,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),a.Animation=a.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),a.Tooltip=a.Element.extend({draw:function(){var t=this.chart.ctx;t.font=O(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=this.caretPadding=2,n=t.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,r=i+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-r<0&&(this.yAlign="below");var o=this.x-n/2,s=this.y-r;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":s=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}N(t,o,s,n,i,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+n/2,s+i/2)}}}),a.MultiTooltip=a.Element.extend({initialize:function(){this.font=O(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=O(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.titleHeight=this.title?1.5*this.titleFontSize:0,this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+this.titleHeight,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=I(this.ctx,this.font,this.labels)+this.fontSize+3,n=b([e,t]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleHeight/3:e+(1.5*this.fontSize*n+this.fontSize/2)+this.titleHeight},draw:function(){if(this.custom)this.custom(this);else{N(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,c.each(this.labels,function(e,n){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[n].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),a.Scale=a.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=A(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(C(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?I(this.ctx,this.font,this.yLabels)+10:0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint,n=this.endPoint-this.startPoint;for(this.calculateYRange(n),this.buildYLabels(),this.calculateXLabelRotation();n>this.endPoint-this.startPoint;)n=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(n),this.buildYLabels(),t<this.yLabelWidth&&(this.endPoint=e,this.calculateXLabelRotation())},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,n=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth?n/2:this.yLabelWidth,this.xLabelRotation=0,this.display){var r,o=I(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var s=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>s&&0===this.xLabelRotation||this.xLabelWidth>s&&this.xLabelRotation<=90&&this.xLabelRotation>0;)r=Math.cos(E(this.xLabelRotation)),t=r*n,e=r*i,t+this.fontSize/2>this.yLabelWidth&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=r*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(E(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:g,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),n=e/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),i=n*t+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=n/2),Math.round(i)},update:function(t){c.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,l(this.yLabels,function(i,r){var o=this.endPoint-e*r,s=Math.round(o),a=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(i,n-10,o),0!==r||a||(a=!0),a&&t.beginPath(),r>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),s+=c.aliasPixel(t.lineWidth),a&&(t.moveTo(n,s),t.lineTo(this.width,s),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,s),t.lineTo(n,s),t.stroke(),t.closePath()},this),l(this.xLabels,function(e,n){var i=this.calculateX(n)+_(this.lineWidth),r=this.calculateX(n-(this.offsetGridLines?.5:0))+_(this.lineWidth),o=this.xLabelRotation>0,s=this.showVerticalLines;0!==n||s||(s=!0),s&&t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),s&&(t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(i,o?this.endPoint+12:this.endPoint+8),t.rotate(E(this.xLabelRotation)*-1),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),a.RadialScale=a.Element.extend({initialize:function(){this.size=x([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=A(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(C(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,i,r,o,s,a,c,l,u,h,f=x([this.height/2-this.pointLabelFontSize-5,this.width/2]),d=this.width,p=0;for(this.ctx.font=O(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,f),n=this.ctx.measureText(C(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(i=n/2,t.x+i>d&&(d=t.x+i,r=e),t.x-i<p&&(p=t.x-i,s=e)):e<this.valuesCount/2?t.x+n>d&&(d=t.x+n,r=e):e>this.valuesCount/2&&t.x-n<p&&(p=t.x-n,s=e);c=p,l=Math.ceil(d-this.width),o=this.getIndexAngle(r),a=this.getIndexAngle(s),u=l/Math.sin(o+Math.PI/2),h=c/Math.sin(a+Math.PI/2),u=w(u)?u:0,h=w(h)?h:0,this.drawingArea=f-(h+u)/2,this.setCenterPoint(h,u)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,i=t+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(l(this.yLabels,function(e,n){if(n>0){var i,r=n*(this.drawingArea/this.steps),o=this.yCenter-r;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,r,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var s=0;s<this.valuesCount;s++)i=this.getPointPosition(s,this.calculateCenterOffset(this.min+n*this.stepValue)),0===s?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=O(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var a=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-a/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,a+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){var n=null,i=null;if(this.angleLineWidth>0&&e%this.angleLineInterval===0&&(n=this.calculateCenterOffset(this.max),i=this.getPointPosition(e,n),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(i.x,i.y),t.stroke(),t.closePath()),this.backgroundColors&&this.backgroundColors.length==this.valuesCount){null==n&&(n=this.calculateCenterOffset(this.max)),null==i&&(i=this.getPointPosition(e,n));var r=this.getPointPosition(0===e?this.valuesCount-1:e-1,n),o=this.getPointPosition(e===this.valuesCount-1?0:e+1,n),s={x:(r.x+i.x)/2,y:(r.y+i.y)/2},a={x:(i.x+o.x)/2,y:(i.y+o.y)/2};t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(s.x,s.y),t.lineTo(i.x,i.y),t.lineTo(a.x,a.y),t.fillStyle=this.backgroundColors[e],t.fill(),t.closePath()}var c=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=O(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var u=this.labels.length,h=this.labels.length/2,f=h/2,d=e<f||e>u-f,p=e===f||e===u-f;0===e?t.textAlign="center":e===h?t.textAlign="center":e<h?t.textAlign="left":t.textAlign="right",p?t.textBaseline="middle":d?t.textBaseline="bottom":t.textBaseline="top",t.fillText(this.labels[e],c.x,c.y)}}}}}),a.animationService={frameDuration:17,animations:[],dropFrames:0,addAnimation:function(t,e){for(var n=0;n<this.animations.length;++n)if(this.animations[n].chartInstance===t)return void(this.animations[n].animationObject=e);this.animations.push({chartInstance:t,animationObject:e}),1==this.animations.length&&c.requestAnimFrame.call(window,this.digestWrapper)},cancelAnimation:function(t){var e=c.findNextWhere(this.animations,function(e){return e.chartInstance===t});e&&this.animations.splice(e,1)},digestWrapper:function(){a.animationService.startDigest.call(a.animationService)},startDigest:function(){var t=Date.now(),e=0;this.dropFrames>1&&(e=Math.floor(this.dropFrames),this.dropFrames-=e);for(var n=0;n<this.animations.length;n++)null===this.animations[n].animationObject.currentStep&&(this.animations[n].animationObject.currentStep=0),this.animations[n].animationObject.currentStep+=1+e,this.animations[n].animationObject.currentStep>this.animations[n].animationObject.numSteps&&(this.animations[n].animationObject.currentStep=this.animations[n].animationObject.numSteps),this.animations[n].animationObject.render(this.animations[n].chartInstance,this.animations[n].animationObject),this.animations[n].animationObject.currentStep==this.animations[n].animationObject.numSteps&&(this.animations[n].animationObject.onAnimationComplete.call(this.animations[n].chartInstance),this.animations.splice(n,1),n--);var i=Date.now(),r=i-t-this.frameDuration,o=r/this.frameDuration;o>1&&(this.dropFrames+=o),this.animations.length>0&&c.requestAnimFrame.call(window,this.digestWrapper)}},c.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){l(a.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),y?(i=[],r=function(){return a}.apply(e,i),!(void 0!==r&&(t.exports=r))):"object"==typeof t&&t.exports&&(t.exports=a),o.Chart=a,a.noConflict=function(){return o.Chart=s,a}}).call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span class="<%=name.toLowerCase()%>-legend-icon" style="background-color:<%=datasets[i].fillColor%>"></span><span class="<%=name.toLowerCase()%>-legend-text"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:i,initialize:function(t){var i=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var r=this.calculateBaseWidth(),o=this.calculateX(n)-r/2,s=this.calculateBarWidth(t);return o+s*e+e*i.barDatasetSpacing+s/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*i.barValueSpacing;
},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*i.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t&&(t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke)}),this.showTooltip(e)}),this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(t.datasets,function(e,i){var r={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(r),n.each(e.data,function(n,i){r.bars.push(new this.BarClass({value:n,label:t.labels[i],datasetLabel:e.label,strokeColor:"object"==typeof e.strokeColor?e.strokeColor[i]:e.strokeColor,fillColor:"object"==typeof e.fillColor?e.fillColor[i]:e.fillColor,highlightFill:e.highlightFill?"object"==typeof e.highlightFill?e.highlightFill[i]:e.highlightFill:"object"==typeof e.fillColor?e.fillColor[i]:e.fillColor,highlightStroke:e.highlightStroke?"object"==typeof e.highlightStroke?e.highlightStroke[i]:e.highlightStroke:"object"==typeof e.strokeColor?e.strokeColor[i]:e.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,i){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(e,i){n.each(e.bars,t,this,i)},this)},getBarsAtEvent:function(t){for(var e,i=[],r=n.getRelativePosition(t),o=function(t){i.push(t.bars[e])},s=0;s<this.datasets.length;s++)for(e=0;e<this.datasets[s].bars.length;e++)if(this.datasets[s].bars[e].inRange(r.x,r.y))return n.each(this.datasets,o),i;return i},buildScale:function(t){var e=this,i=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(r)},addData:function(t,e){n.each(t,function(t,n){this.datasets[n].bars.push(new this.BarClass({value:t,label:e,datasetLabel:this.datasets[n].label,x:this.scale.calculateBarX(this.datasets.length,n,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[n].strokeColor,fillColor:this.datasets[n].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();this.chart.ctx;this.scale.draw(e),n.each(this.datasets,function(t,i){n.each(t.bars,function(t,n){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,i,n),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span class="<%=name.toLowerCase()%>-legend-icon" style="background-color:<%=segments[i].fillColor%>"></span><span class="<%=name.toLowerCase()%>-legend-text"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:i,initialize:function(t){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),n.each(t,function(e,n){e.color||(e.color="hsl("+360*n/t.length+", 100%, 50%)"),this.addData(e,n,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,n,i){var r=void 0!==n?n:this.segments.length;"undefined"==typeof t.color&&(t.color=e.defaults.global.segmentColorDefault[r%e.defaults.global.segmentColorDefault.length],t.highlight=e.defaults.global.segmentHighlightColorDefaults[r%e.defaults.global.segmentHighlightColorDefaults.length]),this.segments.splice(r,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),i||(this.reflow(),this.update())},calculateCircumference:function(t){return this.total>0?2*Math.PI*(t/this.total):0},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(t){t.restore(["fillColor"])}),n.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span class="<%=name.toLowerCase()%>-legend-icon" style="background-color:<%=datasets[i].strokeColor%>"></span><span class="<%=name.toLowerCase()%>-legend-text"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>',offsetGridLines:!1};e.Type.extend({name:"Line",defaults:i,initialize:function(t){this.PointClass=e.Point.extend({offsetGridLines:this.options.offsetGridLines,strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(n,r){i.points.push(new this.PointClass({value:n,label:t.labels[r],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){n.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(t){t.inRange(i.x,i.y)&&e.push(t)})},this),e},buildScale:function(t){var i=this,r=function(){var t=[];return i.eachPoints(function(e){t.push(e.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,offsetGridLines:this.options.offsetGridLines,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(r(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(o,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(o)},addData:function(t,e){n.each(t,function(t,n){this.datasets[n].points.push(new this.PointClass({value:t,label:e,datasetLabel:this.datasets[n].label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var i=this.chart.ctx,r=function(t){return null!==t.value},o=function(t,e,i){return n.findNextWhere(e,r,i)||t},s=function(t,e,i){return n.findPreviousWhere(e,r,i)||t};this.scale&&(this.scale.draw(e),n.each(this.datasets,function(t){var a=n.where(t.points,r);n.each(t.points,function(t,n){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(n)},e)},this),this.options.bezierCurve&&n.each(a,function(t,e){var i=e>0&&e<a.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(s(t,a,e),t,o(t,a,e),i),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(a,function(t,e){if(0===e)i.moveTo(t.x,t.y);else if(this.options.bezierCurve){var n=s(t,a,e);i.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else i.lineTo(t.x,t.y)},this),this.options.datasetStroke&&i.stroke(),this.options.datasetFill&&a.length>0&&(i.lineTo(a[a.length-1].x,this.scale.endPoint),i.lineTo(a[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill()),n.each(a,function(t){t.draw()})},this))}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span class="<%=name.toLowerCase()%>-legend-icon" style="background-color:<%=segments[i].fillColor%>"></span><span class="<%=name.toLowerCase()%>-legend-text"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:i,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];n.each(t,function(t){e.push(t.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(t){t.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,angleLineInterval:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span class="<%=name.toLowerCase()%>-legend-icon" style="background-color:<%=datasets[i].strokeColor%>"></span><span class="<%=name.toLowerCase()%>-legend-text"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(n,r){var o;this.scale.animation||(o=this.scale.getPointPosition(r,this.scale.calculateCenterOffset(n))),i.points.push(new this.PointClass({value:n,label:t.labels[r],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=n.getRelativePosition(t),i=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),r=2*Math.PI/this.scale.valuesCount,o=Math.round((i.angle-1.5*Math.PI)/r),s=[];return(o>=this.scale.valuesCount||o<0)&&(o=0),i.distance<=this.scale.drawingArea&&n.each(this.datasets,function(t){s.push(t.points[o])}),s},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backgroundColors:this.options.scaleBackgroundColors,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,angleLineInterval:this.options.angleLineInterval?this.options.angleLineInterval:1,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return n.each(t,function(t){t.data?e=e.concat(t.data):n.each(t.points,function(t){e.push(t.value)})}),e}(),i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i)},addData:function(t,e){this.scale.valuesCount++,n.each(t,function(t,n){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[n].points.push(new this.PointClass({value:t,label:e,datasetLabel:this.datasets[n].label,x:i.x,y:i.y,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,i=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(t){n.each(t.points,function(t,n){t.hasValue()&&t.transition(this.scale.getPointPosition(n,this.scale.calculateCenterOffset(t.value)),e)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(t.points,function(t,e){0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)},this),i.closePath(),i.stroke(),i.fillStyle=t.fillColor,this.options.datasetFill&&i.fill(),n.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this)},function(t,e){},,function(t,e,n){"use strict";n(628);var i={template:'\n    <p class="header">Share the link</p>\n    <qrcode href="share.link"></qrcode>\n    <div class="copy-link">\n      <input type="text" copy-link ng-model="share.link" readonly>\n      <span class="copy-button" copy="share.link">copy</span>\n    </div>\n    <div class="send-link">\n      <input type="text" placeholder="Phone Number" ng-model="share.phone">\n      <span class="send-button" ng-click="share.send()">text</span>\n    </div>\n  ',bindings:{link:"<"},controllerAs:"share",controller:["$log","$rootScope","$timeout","$document","smsService","modalService","EVENTS",function(t,e,n,i,r,o,s){var a=this;this.send=function(){a.sending=!0,r.send(a.phone,a.link).then(function(n){if(a.sending=!1,t.debug("share#send:",n),n.status<0||n.status>=400)throw new Error("Couldn't send SMS to phone number: "+a.phone);e.$broadcast(s.NOTIFICATION,{type:"success",text:"The SMS has been sent to: "+a.phone})})["catch"](function(n){a.sending=!1,e.$broadcast(s.NOTIFICATION,{type:"error",text:n&&n.message}),t.error("share#send:",n)})}}]};t.exports=i},function(t,e){},,function(t,e,n){"use strict";n(631);var i={template:'\n    <header-bar></header-bar>\n    <notification></notification>\n    <div class="scrollbar">\n      <device-panel device="mobile.device"></device-panel>\n    </div>\n    <boldchat></boldchat>\n  ',bindings:{device:"="},controllerAs:"mobile",controller:function(){}};t.exports=i},function(t,e){},,function(t,e){"use strict";function n(t){t.state("mobile",{url:"/devices/:id/mobile",template:'\n      <mobile device="mobile.device"></mobile>\n    ',resolve:{device:["$q","$stateParams","devicesService","blueprintService",function(t,e,n,r){var o=e.id;return t.all([n.getDevice(o),r.getDeviceTemplates()]).then(function(t){var e=i(t,2),n=e[0],r=e[1];return n.template=r[n.deviceTemplateId],n})}]},controllerAs:"mobile",controller:["$log","$scope","device","socketService",function(t,e,n,i){var r=this;this.device=n,i.connect(this.device,function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.simulate,o=void 0!==i&&i;e&&t.error(e),r.device.simulate=o,r.device.ok=!0});var o=this.device.subscribe();e.$on("$stateChangeStart",function(){i.disconnect(r.device),o()})}]})}n.$inject=["$stateProvider"];var i=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(c){r=!0,o=c}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.exports=n},function(t,e){"use strict";function n(t){t.state("simulator",{url:"/devices/:id",template:'\n      <simulator\n        templates="simulator.templates"\n        device="simulator.device"\n        devices="simulator.devices">\n      </simulator>\n    ',resolve:{templates:["blueprintService",function(t){return t.getDeviceTemplates()}],device:["$stateParams","$state","devicesService",function(t,e,n){return n.getDevice(t.id)["catch"](function(){return e.go("deviceList")})}],devices:["devicesService",function(t){return t.getDevices()}]},controllerAs:"simulator",controller:["templates","device","devices",function(t,e,n){this.templates=t,this.device=e,this.devices=n}]})}n.$inject=["$stateProvider"],t.exports=n},function(t,e,n){"use strict";var i=n(636);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(637),o=i.module("simulator.navigation",[]).component("navigation",r);t.exports=o},function(t,e,n){"use strict";var i=n(638),r=n(639),o=n(640),s=n(641),a=n(642),c=n(643);n(644);var l={template:'\n    <div class="navigation-container">\n      <div class="logo">\n        <img src="'+s+'"></img>\n      </div>\n      <div class="navigation-items">\n        <div class="navigation-item" ng-click="navigation.toggleSimulation()">\n          <span class="navigation-item-icon" ng-hide="navigation.device.simulate">'+a+'</span>\n          <span class="navigation-item-icon pause-button" ng-show="navigation.device.simulate">'+c+'</span>\n          <span class="navigation-item-text">{{ navigation.device.simulate ? \'&nbsp;Stop&nbsp;\' : \'Start\' }} simulation</span>\n        </div>\n        <div class="navigation-item" ng-click="navigation.openModal(\'settings\')">\n          <span class="navigation-item-icon">'+r+'</span>\n          <span class="navigation-item-text">Settings</span>\n        </div>\n        <div class="navigation-item" ng-click="navigation.openModal(\'rules\')">\n          <span class="navigation-item-icon">'+i+'</span>\n          <span class="navigation-item-text">Rules</span>\n        </div>\n        <a class="navigation-item logo" href="{{ navigation.cpmLink }}" target="_blank">\n          <span class="navigation-item-icon">'+o+'</span>\n          <span class="navigation-item-text">CPM</span>\n        </a>\n      </div>\n    </div>\n  ',controllerAs:"navigation",bindings:{device:"="},controller:["$scope","$window","modalService","socketService","CONFIG",function(t,e,n,i,r){var o=this;this.cpmLink="https://"+r.account.idmHost.replace("id.","app.")+"/login?accountId="+r.account.accountId,this.openModal=function(t){return"rules"===t&&r.habanero.embedded?e.open("/goto-orchestrator","_blank"):void n.open(t)},this.toggleSimulation=function(){o.device.simulate=!o.device.simulate,o.device.simulate?i.startSimulation(o.device):i.stopSimulation(o.device)},t.$on("stopSimulation",function(){o.device.simulate=!1})}]};t.exports=l},function(t,e){t.exports='<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 235 180"><path class="st0" d="M212.8 67.9c-1.5-1.5-4-1.5-5.6 0-1.5 1.5-1.5 4 0 5.6l12.6 12.6H149.1V60.5c.3.1.6.2.9.2 1 0 2.1-.4 2.8-1.2 1.5-1.5 1.5-4 0-5.6-1.5-1.5-4-1.5-5.6 0-.6.6-1 1.5-1.1 2.3h-14.3c-2.2 0-3.9 1.8-3.9 3.9 0 2.2 1.8 3.9 3.9 3.9h9.3v49.1h-9.3c-2.2 0-3.9 1.8-3.9 3.9s1.8 3.9 3.9 3.9h10.3l13.9 13.9c.8.8 1.8 1.2 2.8 1.2 1 0 2-.4 2.8-1.2 1.5-1.5 1.5-4 0-5.6l-12.5-12.5V93.9h70.6c.1 0 .3-.1.4-.1l-12.9 12.9c-1.5 1.5-1.5 4 0 5.6.8.8 1.8 1.2 2.8 1.2s2-.4 2.8-1.2L235 90.1l-22.2-22.2zm10.8 22l.2.2-.3.3c.1-.2.1-.3.1-.5zM169 14.3h23.5v23.6c0 2.2 1.8 3.9 3.9 3.9 2.2 0 3.9-1.8 3.9-3.9V6.5h-31.4c-2.2 0-3.9 1.8-3.9 3.9s1.8 3.9 4 3.9zM196.3 138.3c-2.2 0-3.9 1.8-3.9 3.9v17.7l-19.5-19.5c-1.5-1.5-4-1.5-5.6 0-1.5 1.5-1.5 4 0 5.6l19.5 19.5c.1.1.2.1.3.2h-18.2c-2.2 0-3.9 1.8-3.9 3.9s1.8 3.9 3.9 3.9h31.4v-31.4c0-2-1.8-3.8-4-3.8zm-4.3 27.5c.1-.1.2-.1.3-.2v-.1.3h-.3zM42.5 33.3c3.5 0 6.8-1.1 9.5-3l7.8 7.8c.8.8 1.8 1.2 2.8 1.2 1 0 2-.4 2.8-1.2 1.5-1.5 1.5-4 0-5.6l-8.1-8.1c1.2-2.3 2-4.9 2-7.7C59.3 7.5 51.8 0 42.6 0S25.9 7.5 25.9 16.7c-.1 9.1 7.4 16.6 16.6 16.6zm0-25.5c4.9 0 8.8 3.9 8.8 8.8s-3.9 8.8-8.8 8.8-8.8-3.9-8.8-8.8c0-4.8 4-8.8 8.8-8.8zM42.5 146.6c-9.2 0-16.7 7.5-16.7 16.7S33.3 180 42.5 180s16.7-7.5 16.7-16.7-7.5-16.7-16.7-16.7zm0 25.5c-4.9 0-8.8-3.9-8.8-8.8s3.9-8.8 8.8-8.8 8.8 3.9 8.8 8.8-3.9 8.8-8.8 8.8zM158.4 52.3c1 0 2.1-.4 2.8-1.1 1.5-1.6 1.5-4.1 0-5.6s-4-1.5-5.6 0c-1.5 1.5-1.5 4 0 5.6.8.7 1.8 1.1 2.8 1.1z"></path><path class="st0" d="M180.7 20.4c-1.5 1.5-1.5 4 0 5.6.8.8 1.8 1.1 2.8 1.1s2-.4 2.8-1.1c1.5-1.5 1.5-4 0-5.6-1.5-1.5-4.1-1.5-5.6 0zM166.8 43.9c1 0 2-.4 2.8-1.2 1.5-1.5 1.5-4 0-5.6-1.5-1.5-4-1.5-5.6 0-1.5 1.5-1.5 4 0 5.6.7.8 1.8 1.2 2.8 1.2zM172.3 28.8c-1.5 1.5-1.5 4 0 5.6.8.8 1.8 1.1 2.8 1.1s2-.4 2.8-1.1c1.5-1.5 1.5-4 0-5.6-1.5-1.6-4-1.6-5.6 0zM101.6 113.1h-9.3V64h9.3c2.2 0 3.9-1.8 3.9-3.9 0-2.2-1.8-3.9-3.9-3.9H89L76.5 43.7c-1.5-1.5-4-1.5-5.6 0s-1.5 4 0 5.6l13.4 13.4v21.9H32.4C30.2 78 24 73.2 16.7 73.2 7.5 73.2 0 80.7 0 89.9s7.5 16.7 16.7 16.7c8.3 0 15.2-6.1 16.4-14.1h51.2v26.2c-1.5-.9-3.5-.8-4.8.5-1.5 1.6-1.5 4.1 0 5.6.8.8 1.8 1.1 2.8 1.1s2-.4 2.8-1.1c1.1-1 1.4-2.5 1-3.9h15.5c2.2 0 3.9-1.8 3.9-3.9s-1.7-3.9-3.9-3.9zM16.8 98.8C11.9 98.8 8 94.9 8 90s3.9-8.8 8.8-8.8 8.8 3.9 8.8 8.8c0 4.8-4 8.8-8.8 8.8z"></path><path class="st0" d="M100 105.4h33.6V71.8H100v33.6zm7.9-25.7h17.8v17.8h-17.8V79.7zM62.8 136c-1.5 1.5-1.5 4 0 5.6.7.8 1.8 1.2 2.8 1.2 1 0 2-.4 2.8-1.2 1.5-1.5 1.5-4 0-5.6-1.5-1.5-4-1.5-5.6 0zM54.5 144.4c-1.5 1.5-1.5 4 0 5.6.7.8 1.8 1.2 2.8 1.2 1 0 2.1-.4 2.8-1.2 1.5-1.5 1.5-4 0-5.6-1.5-1.6-4.1-1.5-5.6 0zM71.2 127.7c-1.5 1.5-1.5 4 0 5.6.7.8 1.8 1.1 2.8 1.1 1 0 2-.4 2.8-1.1 1.5-1.5 1.5-4 0-5.6-1.6-1.6-4-1.6-5.6 0z"></path></svg>';
},function(t,e){t.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 34.6 34.6" enable-background="new 0 0 34.6 34.6" xml:space="preserve"><g id="XMLID_249_" opacity="0.75"><g id="XMLID_264_"><path id="XMLID_2016_" d="M17.3,24.3c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S21.2,24.3,17.3,24.3z M17.3,11.3 c-3.3,0-6,2.7-6,6c0,3.3,2.7,6,6,6s6-2.7,6-6C23.3,14,20.6,11.3,17.3,11.3z"></path><path id="XMLID_2013_" d="M19.6,34.6H15c-0.2,0-0.4-0.2-0.5-0.4l-0.9-3.7c-1.1-0.3-2.1-0.7-3.1-1.3l-3.3,2 c-0.2,0.1-0.5,0.1-0.6-0.1L3.5,28c-0.2-0.2-0.2-0.4-0.1-0.6l2-3.3c-0.6-1-1-2-1.3-3.1l-3.7-0.9C0.2,20,0,19.8,0,19.6V15 c0-0.2,0.2-0.4,0.4-0.5l3.7-0.9c0.3-1.1,0.7-2.1,1.3-3.1l-2-3.3C3.3,7.1,3.3,6.9,3.5,6.7l3.2-3.2c0.2-0.2,0.4-0.2,0.6-0.1l3.3,2 c1-0.6,2-1,3.1-1.3l0.9-3.7C14.6,0.2,14.8,0,15,0h4.6c0.2,0,0.4,0.2,0.5,0.4L21,4.1c1.1,0.3,2.1,0.7,3.1,1.3l3.3-2 c0.2-0.1,0.5-0.1,0.6,0.1l3.2,3.2c0.2,0.2,0.2,0.4,0.1,0.6l-2,3.3c0.6,1,1,2,1.3,3.1l3.7,0.9c0.2,0.1,0.4,0.3,0.4,0.5v4.6 c0,0.2-0.2,0.4-0.4,0.5L30.5,21c-0.3,1.1-0.7,2.1-1.3,3.1l2,3.3c0.1,0.2,0.1,0.5-0.1,0.6L28,31.2c-0.2,0.2-0.4,0.2-0.6,0.1l-3.3-2 c-1,0.6-2,1-3.1,1.3l-0.9,3.7C20,34.5,19.8,34.6,19.6,34.6z M15.4,33.6h3.8L20,30c0-0.2,0.2-0.3,0.4-0.4c1.2-0.3,2.3-0.8,3.4-1.4 c0.2-0.1,0.4-0.1,0.5,0l3.2,2l2.7-2.7l-2-3.2c-0.1-0.2-0.1-0.4,0-0.5c0.6-1.1,1.1-2.2,1.4-3.4c0-0.2,0.2-0.3,0.4-0.4l3.7-0.8v-3.8 L30,14.6c-0.2,0-0.3-0.2-0.4-0.4c-0.3-1.2-0.8-2.3-1.4-3.4c-0.1-0.2-0.1-0.4,0-0.5l2-3.2l-2.7-2.7l-3.2,2c-0.2,0.1-0.4,0.1-0.5,0 c-1.1-0.6-2.2-1.1-3.4-1.4c-0.2,0-0.3-0.2-0.4-0.4L19.2,1h-3.8l-0.8,3.6c0,0.2-0.2,0.3-0.4,0.4c-1.2,0.3-2.3,0.8-3.4,1.4 c-0.2,0.1-0.4,0.1-0.5,0l-3.2-2L4.5,7.1l2,3.2c0.1,0.2,0.1,0.4,0,0.5C5.8,11.9,5.3,13,5,14.2c0,0.2-0.2,0.3-0.4,0.4L1,15.4v3.8 L4.7,20c0.2,0,0.3,0.2,0.4,0.4c0.3,1.2,0.8,2.3,1.4,3.4c0.1,0.2,0.1,0.4,0,0.5l-2,3.2l2.7,2.7l3.2-2c0.2-0.1,0.4-0.1,0.5,0 c1.1,0.6,2.2,1.1,3.4,1.4c0.2,0,0.3,0.2,0.4,0.4L15.4,33.6z"></path></g></g></svg>'},function(t,e){t.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 248 248" style="enable-background:new 0 0 248 248;" xml:space="preserve"><g><g><polygon points="136.1,230.2 102,179.7 67.7,230.2 24,230.2 77,153.4 27.1,80.6 71.1,80.6 102,126.8 132.7,80.6 176.7,80.6 126.5,153.4 180.1,230.2 "></polygon><path d="M181,230.2V80.6h39.3v149.6H181L181,230.2z M176.9,41c0-13,10.8-23.2,23.5-23.2c13,0,23.5,10.2,23.5,23.2 s-10.5,23.5-23.5,23.5C187.8,64.5,176.9,54,176.9,41L176.9,41z"></path></g></g></svg>'},function(t,e,n){t.exports=n.p+"73cd541d7f27c9450001784d882593df.png"},function(t,e){t.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 512 512"><g><g><path d="m354.2,247.4l-135.1-92.4c-4.2-3.1-15.4-3.1-16.3,8.6v184.8c1,11.7 12.4,11.9 16.3,8.6l135.1-92.4c3.5-2.1 8.3-10.7 0-17.2zm-130.5,81.3v-145.4l106.1,72.7-106.1,72.7z"></path><path d="M256,11C120.9,11,11,120.9,11,256s109.9,245,245,245s245-109.9,245-245S391.1,11,256,11z M256,480.1 C132.4,480.1,31.9,379.6,31.9,256S132.4,31.9,256,31.9S480.1,132.4,480.1,256S379.6,480.1,256,480.1z"></path></g></g></svg>'},function(t,e){t.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 129 129"><animate attributeType="XML" attributeName="fill" values="#f5be3c;#f5f6f8;#f5be3c;" dur="1s" repeatCount="indefinite"></animate><g><g><path d="m64.5,122.6c32.1,0 58.1-26.1 58.1-58.1s-26-58.1-58.1-58.1-58.1,26-58.1,58.1 26,58.1 58.1,58.1zm0-108.1c27.5,0 50,22.4 50,50s-22.4,50-50,50-50-22.4-50-50 22.5-50 50-50z"></path><path d="m53.8,94.7c2.3,0 4.1-1.8 4.1-4.1v-53.1c0-2.3-1.8-4.1-4.1-4.1-2.3,0-4.1,1.8-4.1,4.1v53.1c7.10543e-15,2.3 1.8,4.1 4.1,4.1z"></path><path d="m75.2,94.7c2.3,0 4.1-1.8 4.1-4.1v-53.1c0-2.3-1.8-4.1-4.1-4.1-2.3,0-4.1,1.8-4.1,4.1v53.1c-1.42109e-14,2.3 1.8,4.1 4.1,4.1z"></path></g></g></svg>'},function(t,e){},,function(t,e,n){"use strict";var i=n(647);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(648),o=n(652),s=i.module("simulator.virtualDevice",[]).component("virtualDevice",r).component("tooltip",o);t.exports=s},function(t,e,n){"use strict";var i=n(348);n(649);var r={template:'\n    <div class="device-header">\n      <div class="device-serial">\n        {{ ::virtualDevice.device.serialNumber }}\n      </div>\n       <div class="navigation-dropdown">\n        <select\n          ng-model="virtualDevice.selectedTemplate"\n          ng-change="virtualDevice.selectedTemplate.navigate()"\n          ng-options="templateOption.name for templateOption in virtualDevice.templateOptions track by templateOption.name">\n        </select>\n      </div>\n    </div>\n\n    <div class="device-container" style="width: {{ ::virtualDevice.config.width }}px" ng-if="virtualDevice.config.image">\n      <div ng-repeat="(name, sensor) in ::virtualDevice.config.sensors">\n        <tooltip ng-if="sensor.tooltip"\n          options="sensor"\n          label="name"\n          value="virtualDevice.device.sensors[name].numericValue"\n          update="virtualDevice.update(name, value)"\n          device="virtualDevice.device">\n        </tooltip>\n        <div ng-if="sensor.widget" bind-html-compile="virtualDevice.getHtml(sensor.widget)"></div>\n      </div>\n      <img class="device-image" style="max-height: {{ ::virtualDevice.config.height }}px" src="{{ virtualDevice.config.image }}" />\n    </div>\n    <div class="no-image" ng-if="!virtualDevice.config.image">\n      <h2>No image available</h2>\n    </div>\n\n    <div class="device-control-sliders" ng-if="virtualDevice.sensorsNotConfigured.length">\n      <div class="header row">\n        <div class="channel-name">Channel name</div>\n        <div class="control">Control</div>\n        <div class="value">Value</div>\n      </div>\n      <div class="row" ng-repeat="(name, sensor) in virtualDevice.device.sensors" ng-if="virtualDevice.sensorsNotConfigured.indexOf(name) > -1">\n        <div class="channel-name">{{ name }}</div>\n        <div class="control">\n          <input type="range" min="0" max="100" ng-model="virtualDevice.sensors[name]" ng-change="virtualDevice.update(name, virtualDevice.sensors[name])" ng-disabled="!virtualDevice.device.ok">\n        </div>\n        <div class="value">\n          {{ virtualDevice.sensors[name] }}\n        </div>\n      </div>\n    </div>\n  ',controllerAs:"virtualDevice",bindings:{device:"=",templateOptions:"="},controller:["$scope","DEVICES_CONFIG",function(t,e){var n=this;this.config=i.cloneDeep(e[this.device.template.name]||{}),this.selectedTemplate=i.find(this.templateOptions,{name:this.device.template.name}),delete this.device.sensors._log,delete this.device.sensors.io,delete this.device.sensors.motion,delete this.device.sensors.environment,this.sensorsNotConfigured=i.pullAll(Object.keys(this.device.sensors),Object.keys(this.config.sensors||{})),this.sensors=this.sensorsNotConfigured.reduce(function(t,e){return t[e]=50,t},{}),t.$watch(function(){return n.device.sensors},function(t){i.forEach(t,function(t,e){n.sensors[e]=t.numericValue})},!0),this.update=i.debounce(this.device.update,100),this.getHtml=function(t){var e=t.name,n=t.position;return"<"+e+' device="virtualDevice.device" options="sensor.widget.options" style="position: absolute; top: '+n.top+"px; left: "+n.left+'px"></'+e+">"}}]};t.exports=r},function(t,e){},,,function(t,e,n){"use strict";var i=n(348);n(653);var r={template:'\n    <div ng-show="tooltip.open">\n      <div class="tooltip-box" style="{{ ::tooltip.getBoxStyle() }}">\n        <div ng-if="tooltip.showInput()">\n          <div class="tooltip-value">\n            <span>{{ tooltip.newValue }}</span>\n            <span>{{ ::tooltip.options.unit }}</span>\n          </div>\n          <input class="tooltip-range-input"\n                 type="range"\n                 min="{{ ::tooltip.options.min }}"\n                 max="{{ ::tooltip.options.max }}"\n                 value="{{ ::tooltip.options.min }}"\n                 ng-model="tooltip.newValue" ng-change="tooltip.update({value: tooltip.newValue })"\n                 ng-disabled="!tooltip.device.ok"/>\n          <div class="tooltip-range">\n            <span class="tooltip-range-min">{{ ::tooltip.options.min }}</span>\n            <span class="tooltip-range-max">{{ ::tooltip.options.max }}</span>\n          </div>\n        </div>\n        <div class="action-buttons">\n          <button class="action-button"\n                  ng-repeat="action in tooltip.options.actions"\n                  ng-click="tooltip.sendUpdate(action)"\n                  ng-disabled="!tooltip.device.ok">\n                  {{ action.label }}\n          </button>\n        </div>\n      </div>\n      <svg class="tooltip-line"\n        style="{{ tooltip.getLineStyle() }}"\n        ng-attr-width="{{ ::tooltip.options.distance }}"\n        height="3"\n        viewPort="0 0 3 3">\n        <line x1="0" y1="2" ng-attr-x2="{{ ::tooltip.options.distance }}" y2="2" />\n      </svg>\n    </div>\n\n    <div ng-click="tooltip.toggle()" ng-class="{ active: tooltip.open }">\n      <div class="tooltip-button"></div>\n      <div class="tooltip-label" style="left: {{ ::tooltip.options.labelPosition.left }}px; top: {{ ::tooltip.options.labelPosition.top }}px;">\n          {{ ::tooltip.label }}\n      </div>\n    </div>\n  ',bindings:{options:"<",label:"<",value:"<",update:"&",device:"="},controllerAs:"tooltip",controller:["$element","$rootScope","$scope","socketService","EVENTS",function(t,e,n,r,o){var s=this;Object.assign(this.options,this.options.tooltip),n.$watch(function(){return s.value},i.debounce(function(t){n.$applyAsync(function(){s.newValue=t})},100)),t.css({top:this.options.position.top+"px",left:this.options.position.left+"px"}),this.open=!1,this.toggle=function(t){s.open=!s.open},this.getBoxStyle=function(){var t=s.options,e=t.direction,n=t.distance,i="right"===e||"bottom"===e?"":"-",r="left"===e||"right"===e?""+i+n+"px, 0":"0, "+i+n+"px";return"\n        -webkit-transform: translate("+r+");\n        -moz-transform: translate("+r+");\n        transform: translate("+r+");\n      "},this.getLineStyle=function(){var t=s.options.direction,e={right:0,bottom:90,left:180,top:270}[t];return"\n        -webkit-transform: rotate("+e+"deg);\n        -moz-transform: rotate("+e+"deg);\n        transform: rotate("+e+"deg);\n        -webkit-transform-origin: left;\n        -moz-transform-origin: left;\n        transform-origin: left;\n      "},this.showInput=function(){return(!s.options.actions||s.options.actions&&s.options.input)&&i.isNumber(s.options.min)&&i.isNumber(s.options.max)},this.sendUpdate=function(t){var n=t.name,a=t.value,c=t.device,l=void 0===c?{}:c,u=t.socket,h=void 0!==u&&u,f=t.notification,d={value:a};n&&(d.name=n),h?r.sendMessage(s.device,n,a):s.update(d),i.merge(s.device,l),f&&e.$broadcast(o.NOTIFICATION,f)}}]};t.exports=r},function(t,e){},,function(t,e,n){"use strict";var i=n(348),r=n(656),o=n(657);n(658);var s={template:'\n    <div class="simulator">\n      <modal name="rules">\n        <rules></rules>\n      </modal>\n\n      <modal name="settings">\n        <settings></settings>\n      </modal>\n\n      <div class="left-side" ng-show="simulator.showMobile">\n        <div class="chevron-left" ng-click="simulator.toggleMobileView()" ng-show="simulator.showMobile"> '+r+' </div>\n        <iphone-frame>\n          <mobile device="simulator.device"></mobile>\n        </iphone-frame>\n      </div>\n\n      <div class="right-side">\n        <div class="chevron-right" ng-click="simulator.toggleMobileView()" ng-show="!simulator.showMobile"> '+o+' </div>\n        <navigation device="simulator.device"></navigation>\n        <virtual-device device="simulator.device" template-options="simulator.templateOptions"></virtual-device>\n      </div>\n    </div>\n  ',controllerAs:"simulator",bindings:{device:"=",devices:"=",templates:"="},controller:["$rootScope","$scope","$state","$log","socketService","EVENTS",function(t,e,n,r,o,s){var a=this;this.device.template=this.templates[this.device.deviceTemplateId],e.$watch(function(){return a.device.ok},function(e,n){e?!n&&e&&t.$broadcast(s.NOTIFICATION,{type:"success",text:"The device has been fixed."}):t.$broadcast(s.NOTIFICATION,{type:"error",text:"Your device reported a mailfunction. Please stand by, our agents are already aware of the issue and will have a look at it very soon.",sticky:!0})}),this.templateOptions=i.map(this.templates,function(t,e){return{name:t.name,device:i.find(a.devices,{deviceTemplateId:e}),navigate:function(){n.go("simulator",{id:this.device.id})}}}).filter(function(t){return t.device}),o.connect(this.device,function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.simulate,i=void 0!==n&&n;t&&r.error(t),a.device.simulate=i,a.device.ok=!0});var c=this.device.subscribe();e.$on("$stateChangeStart",function(){o.disconnect(a.device),c()}),this.showMobile=!0,this.toggleMobileView=function(){a.showMobile=!a.showMobile}}]};t.exports=s},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 284.9 284.9"><path d="M165.3 142.5L277.5 30.3c1.9-1.9 2.8-4.1 2.8-6.6 0-2.5-1-4.7-2.8-6.6L263.2 2.9C261.3 1 259.1 0 256.7 0c-2.5 0-4.7 1-6.6 2.9L117.1 135.9c-1.9 1.9-2.9 4.1-2.9 6.6 0 2.5 1 4.7 2.9 6.6l133 133c1.9 1.9 4.1 2.9 6.6 2.9 2.5 0 4.7-0.9 6.6-2.9l14.3-14.3c1.9-1.9 2.9-4.1 2.9-6.6 0-2.5-0.9-4.7-2.9-6.6L165.3 142.5z"></path><path d="M55.7 142.5L167.9 30.3c1.9-1.9 2.9-4.1 2.9-6.6 0-2.5-0.9-4.7-2.9-6.6L153.6 2.9C151.7 1 149.5 0 147 0c-2.5 0-4.7 1-6.6 2.9L7.4 135.9c-1.9 1.9-2.9 4.1-2.9 6.6 0 2.5 1 4.7 2.9 6.6l133 133c1.9 1.9 4.1 2.9 6.6 2.9 2.5 0 4.7-0.9 6.6-2.9l14.3-14.3c1.9-1.9 2.9-4.1 2.9-6.6 0-2.5-0.9-4.7-2.9-6.6L55.7 142.5z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 284.9 284.9"><path d="M277.5 135.9L144.5 2.9C142.6 1 140.4 0 137.9 0c-2.5 0-4.7 1-6.6 2.9l-14.3 14.3c-1.9 1.9-2.9 4.1-2.9 6.6 0 2.5 1 4.7 2.9 6.6l112.2 112.2L117.1 254.7c-1.9 1.9-2.9 4.1-2.9 6.6 0 2.5 1 4.7 2.9 6.6l14.3 14.3c1.9 1.9 4.1 2.9 6.6 2.9 2.5 0 4.7-1 6.6-2.9l133.1-133c1.9-1.9 2.9-4.1 2.9-6.6S279.4 137.8 277.5 135.9z"></path><path d="M170.7 142.5c0-2.5-0.9-4.7-2.9-6.6L34.8 2.9C32.9 1 30.7 0 28.3 0s-4.7 1-6.6 2.9L7.4 17.1C5.5 19 4.6 21.2 4.6 23.7c0 2.5 1 4.7 2.9 6.6L119.6 142.5 7.4 254.7c-1.9 1.9-2.9 4.1-2.9 6.6 0 2.5 1 4.7 2.9 6.6l14.3 14.3c1.9 1.9 4.1 2.9 6.6 2.9s4.7-1 6.6-2.9l133-133C169.8 147.1 170.7 144.9 170.7 142.5z"></path></svg>'},function(t,e){},,function(t,e){"use strict";function n(t,e,n,i,r){var o=!1;r.meta&&(o="production"===r.meta.env),t.debugInfoEnabled(o),e.debugEnabled(!o),i.otherwise(function(t){var e=t.get("blueprintService"),n=t.get("$state");e.getV1("devices",{pageSize:2}).then(function(t){var e=t.data.devices.results[1].id;n.transitionTo("simulator",{id:e})})})}n.$inject=["$compileProvider","$logProvider","$provide","$urlRouterProvider","CONFIG"],t.exports=n},function(t,e,n){"use strict";var i=n(662);t.exports=i.name},function(t,e,n){"use strict";var i=n(308),r=n(310),o=n(663),s=n(667),a=n(671),c=n(675),l=n(680),u=n(685),h=i.module("concaria.widgets",[r]).component("filter",o).component("fanControl",s).component("fanStateControl",a).component("hvacDisplay",c).component("badgeButton",l).component("thunderboard",u);t.exports=h},function(t,e,n){"use strict";var i=n(664);t.exports=i},function(t,e,n){"use strict";n(665);var i={template:'\n    <div class="filter">\n      <p>The filter should be replaced in:</p>\n      <div class="filter-status">\n        <svg viewBox="-10 -10 220 220">\n          <path class="progress-indicator" d="M 0,100 A 100,100 0 1,1 0,100.01" ng-attr-stroke-dashoffset="{{ filter.dashOffset }}" stroke-dasharray="630"></path>\n        </svg>\n        <div class="filter-status-days">\n          <span>{{ filter.lifeLeft }}</span>\n          <div class="label">{{ filter.measure }}</div>\n        </div>\n      </div>\n    </div>\n  ',replace:!0,bindings:{device:"="},controllerAs:"filter",controller:["$scope","$interval",function(t,e){var n=this,i=630;this.dashOffset=i;var r=1e3;this.value=0,this.lifeLeft=Math.round(this.value/24);var o=function(t){n.value=t,n.dashOffset=Math.min(i,(r-t/r*r)*(i/r)),t>48?(n.lifeLeft=Math.round(t/24),n.measure="days"):(n.lifeLeft=t,n.measure="hours")},s=void 0;t.$watch(function(){return n.device.sensors.filter},function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.cancel(s);var i=parseInt(t.numericValue,10);Number.isNaN(i)||(n.value>i?!function(){var t=function(){return Math.min(50,n.value-i)};o(n.value-t()),s=e(function(){return n.value<=i?e.cancel(s):void o(n.value-t())},100)}():o(i))})}]};t.exports=i},function(t,e){},,function(t,e,n){"use strict";var i=n(668);t.exports=i},function(t,e,n){"use strict";var i=n(348);n(669);var r={template:'\n    <div class="fan-control" ng-click="!fanControl.device.ok || fanControl.changeState()">\n      <div class="purifier-device-switch">\n      <div class="fan-speed-indicator" ng-class="\'speed-\' + fanControl.device.sensors.fan.numericValue"></div>\n      <ul>\n        <li>High</li>\n        <li>Low</li>\n        <li>Off</li>\n      </ul>\n      </div>\n    </div>\n  ',replace:!0,bindings:{device:"="},controllerAs:"fanControl",controller:function(){var t=this;this.changeState=function(){i.isNumber(t.device.sensors.fan.numericValue)||(t.device.sensors.fan.numericValue=0),t.device.sensors.fan.numericValue=(t.device.sensors.fan.numericValue+1)%3,t.device.update("speed",JSON.stringify({command:"speed",option:["off","low","high"][t.device.sensors.fan.numericValue]}))}}};t.exports=r},function(t,e){},,function(t,e,n){"use strict";var i=n(672);t.exports=i},function(t,e,n){"use strict";n(673);var i={template:'\n    <div class="fan-state-control">\n      <button ng-repeat="button in ::fanStateControl.buttons"\n              ng-click="fanStateControl.changeState($index)"\n              ng-class="{selected: fanStateControl.selected === $index}"\n              ng-disabled="!fanStateControl.device.ok">\n              {{ button }}\n      </button>\n    </div>\n  ',replace:!0,bindings:{device:"="},controllerAs:"fanStateControl",controller:["$scope",function(t){var e=this;this.buttons=["Off","Low","High"],t.$watch(function(){return e.device.sensors.fan.numericValue},function(t){e.selected=t}),this.changeState=function(t){e.device.update("speed",JSON.stringify({command:"speed",option:e.buttons[t].toLowerCase()})),e.selected=t}}]};t.exports=i},function(t,e){},,function(t,e,n){"use strict";var i=n(676);t.exports=i},function(t,e,n){"use strict";n(677);var i={template:'\n    <div class="display" ng-class="{ malfunction: !display.device.ok }">\n    </div>\n  ',bindings:{device:"="},controllerAs:"display"};t.exports=i},function(t,e){},,,function(t,e,n){"use strict";var i=n(681);t.exports=i},function(t,e,n){"use strict";n(682);var i=n(684),r={template:'\n    <div class="badge-button" ng-click="badgeControl.toggleButton()">\n      <span ng-class="{ \'{{badgeControl.options.toggleColor}}\': badgeControl.buttonActive}">'+i+'</span>\n      <span class="label">{{ badgeControl.options.label }}</span>\n    </div>\n  ',replace:!0,bindings:{device:"=",options:"="},controllerAs:"badgeControl",controller:["$timeout",function(t){var e=this;this.buttonActive=!1,this.toggleButton=function(){e.buttonActive||(e.buttonActive=!0,t(function(){e.device.sensors[e.options.sensorName]=0,e.buttonActive=!1},3e3),e.device.update(e.options.sensorName,1))}}]};t.exports=r},function(t,e){},,function(t,e){t.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 40.7 40.6" style="enable-background:new 0 0 40.7 40.6;" xml:space="preserve"><path class="st0" fill="none" d="M19.8,4.1c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.1-7.3,16.1-16.2S28.8,4.1,19.8,4.1z"></path><path class="st0" fill="none" d="M19.8,4.1c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.1-7.3,16.1-16.2S28.8,4.1,19.8,4.1z M19.8,28.5 c-4.5,0-8.2-3.7-8.2-8.2s3.7-8.2,8.2-8.2s8.2,3.7,8.2,8.2C27.9,24.8,24.3,28.5,19.8,28.5z"></path><path class="st1" stroke="#000000" stroke-miterlimit="10" d="M20.3,0.7C9.4,0.7,0.7,9.5,0.7,20.3s8.7,19.6,19.6,19.6s19.6-8.7,19.6-19.6S31.1,0.7,20.3,0.7z M20.3,36 c-8.6,0-15.7-7.1-15.7-15.7s7-15.7,15.7-15.7s15.6,7.1,15.6,15.7S28.9,36,20.3,36z"></path><path class="st2" fill="#FFFFFF" d="M20.4,4.8c-8.6,0-15.5,7-15.5,15.5s6.9,15.5,15.5,15.5s15.5-6.9,15.5-15.5S28.9,4.8,20.4,4.8z M20.4,32.8 c-6.8,0-12.5-5.6-12.5-12.5c0-6.8,5.5-12.5,12.5-12.5s12.4,5.6,12.4,12.5C32.7,27.1,27.2,32.8,20.4,32.8z"></path><radialGradient id="SVGID_1_" cx="-3.0263" cy="72.3569" r="11.2681" gradientTransform="matrix(1.1019 0 0 -1.1032 23.6964 100.0537)" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#FFFFFF"></stop><stop offset="5.833185e-02" style="stop-color:#E5E5E5"></stop><stop offset="0.2069" style="stop-color:#A9A9A9"></stop><stop offset="0.355" style="stop-color:#767676"></stop><stop offset="0.4989" style="stop-color:#4B4B4B"></stop><stop offset="0.6379" style="stop-color:#2B2B2B"></stop><stop offset="0.7704" style="stop-color:#131313"></stop><stop offset="0.8941" style="stop-color:#050505"></stop><stop offset="1" style="stop-color:#000000"></stop></radialGradient><ellipse class="st3" fill="url(#SVGID_1_)" cx="20.3" cy="20.2" rx="12.4" ry="12.4"></ellipse></svg>'},function(t,e,n){"use strict";var i=n(686);t.exports=i},function(t,e,n){"use strict";function i(){var t=new c.MTLLoader.MTLLoader;t.setPath("obj/thunderboard/"),t.load("Thunderboard.mtl",function(t){t.preload();for(var e in t.materials)null!=t.materials[e].map&&(t.materials[e].color.r=1,t.materials[e].color.g=1,t.materials[e].color.b=1);var n=new c.OBJLoader.OBJLoader;n.setPath("obj/thunderboard/"),n.setMaterials(t),n.load("Thunderboard.obj",function(t){f=t,t.position.x=3,u.add(t)})})}function r(t){if(t&&!d){u=new c.Scene,l=new c.PerspectiveCamera(75,g/p,.1,1e3),l.position.z=0,l.position.x=8;var e=new c.AmbientLight(4473924);u.add(e);var n=new c.DirectionalLight(16772829);n.position.set(8,0,1).normalize(),u.add(n),i(),h=new c.WebGLRenderer({alpha:!0}),h.setSize(g,p),t.appendChild(h.domElement),d=!0,s()}}function o(){requestAnimationFrame(o),s()}function s(){l.lookAt(u.position),h.render(u,l)}n(687);var a=n(684),c=n(689);c.MTLLoader=n(690),c.OBJLoader=n(691);var l,u,h,f,d,p=300,g=400,m=Math.PI/180,v={template:'\n    <div class="thunderboard">\n      <img class="thunderboard-qr" />\n\n      <div class="io-controls">\n        <div id="ledb" class="toggle-button" ng-click="tbControl.toggleLed(\'ledg\')">\n          <span ng-class="{ \'green\': tbControl.device.sensors.io.ledg == 1}">'+a+'</span>\n          <span class="label">Green LED</span>\n        </div>\n        <div id="ledg" class="toggle-button" ng-click="tbControl.toggleLed(\'ledb\')">\n          <span ng-class="{ \'blue\': tbControl.device.sensors.io.ledb == 1}">'+a+'</span>\n          <span class="label">Blue LED</span>\n        </div>\n        <div id="sw1" class="toggle-button">\n          <span ng-class="{ \'red\': tbControl.device.sensors.io.sw1 == 1}">'+a+'</span>\n          <span class="label">Switch B</span>\n        </div>\n        <div id="sw0" class="toggle-button">\n          <span ng-class="{ \'red\': tbControl.device.sensors.io.sw0 == 1}">'+a+'</span>\n          <span class="label">Switch A</span>\n        </div>\n      </div>\n\n      <div class="env-controls">\n        <div id="temp" class="env-control">\n          <span class="value">{{ tbControl.device.sensors.environment.temperature }}</span><br/>\n          <span class="label">Temp</span>\n        </div>\n        <div id="humidity" class="env-control" >\n          <span class="value">{{ tbControl.device.sensors.environment.humidity }}</span><br/>\n          <span class="label">Humidity</span>\n        </div>\n        <div id="ambientLight" class="env-control">\n          <span class="value">{{ tbControl.device.sensors.environment.ambientLight }}</span><br/>\n          <span class="label">Ambient Light</span>\n        </div>\n        <div id="uvIndex" class="env-control">\n          <span class="value">{{ tbControl.device.sensors.environment.uvIndex }}</span><br/>\n          <span class="label">UV Index</span>\n        </div>\n      </div>\n    </div>\n  ',replace:!0,bindings:{device:"="},controllerAs:"tbControl",controller:["$scope",function(t){function e(){r(document.getElementsByClassName("thunderboard")[1]),t.box=f,t.$watch(function(){return i.device.sensors.motion},function(t){f&&f.rotation.set(-1*t.ox*m,t.oz*m,t.oy*m,"XZY")}),t.$watch(function(){return i.device.sensors.environment},function(t){}),t.$watch(function(){return i.device.sensors.io},function(t){}),o()}var n=this,i=this;i.loaded=!1,setTimeout(e,2e3),this.toggleLed=function(t){0===n.device.sensors.io[t]?n.device.sensors.io[t]=1:n.device.sensors.io[t]=0,n.device.update("io",JSON.stringify({channel:"io",message:JSON.stringify({io:n.device.sensors.io})}))}}]};t.exports=v},function(t,e){},,function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(){}function n(t,e){this.x=t||0,this.y=e||0}function i(e,o,s,a,c,l,u,h,f,d){Object.defineProperty(this,"id",{value:r()}),this.uuid=t.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:i.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==o?o:i.DEFAULT_MAPPING,this.wrapS=void 0!==s?s:Eo,this.wrapT=void 0!==a?a:Eo,this.magFilter=void 0!==c?c:Fo,this.minFilter=void 0!==l?l:Lo,this.anisotropy=void 0!==f?f:1,this.format=void 0!==u?u:qo,this.type=void 0!==h?h:Ro,this.offset=new n(0,0),this.repeat=new n(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:bs,this.version=0,this.onUpdate=null}function r(){return Ts++}function o(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function s(e,n,r){this.uuid=t.Math.generateUUID(),this.width=e,this.height=n,this.scissor=new o(0,0,e,n),this.scissorTest=!1,this.viewport=new o(0,0,e,n),r=r||{},void 0===r.minFilter&&(r.minFilter=Fo),this.texture=new i((void 0),(void 0),r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function a(t,e,n){s.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function c(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function l(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function u(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(t,e,n,r,o,s,a,c,l,u){t=void 0!==t?t:[],e=void 0!==e?e:po,i.call(this,t,e,n,r,o,s,a,c,l,u),this.flipY=!1}function f(){this.seq=[],this.map={}}function d(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,o=Rs[r];if(void 0===o&&(o=new Float32Array(r),Rs[r]=o),0!==e){i.toArray(o,0);for(var s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function p(t,e){var n=Ds[e];void 0===n&&(n=new Int32Array(e),Ds[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocTextureUnit();return n}function g(t,e){t.uniform1f(this.addr,e)}function m(t,e){t.uniform1i(this.addr,e)}function v(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function y(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function w(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function b(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function x(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function A(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function E(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTexture2D(e||Ls,i)}function _(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTextureCube(e||ks,i)}function S(t,e){t.uniform2iv(this.addr,e)}function C(t,e){t.uniform3iv(this.addr,e)}function M(t,e){t.uniform4iv(this.addr,e)}function $(t){switch(t){case 5126:return g;case 35664:return v;case 35665:return y;case 35666:return w;case 35674:return b;case 35675:return x;case 35676:return A;case 35678:return E;case 35680:return _;case 5124:case 35670:return m;case 35667:case 35671:return S;case 35668:case 35672:return C;case 35669:case 35673:return M}}function F(t,e){t.uniform1fv(this.addr,e)}function T(t,e){t.uniform1iv(this.addr,e)}function L(t,e){t.uniform2fv(this.addr,d(e,this.size,2))}function k(t,e){t.uniform3fv(this.addr,d(e,this.size,3))}function R(t,e){t.uniform4fv(this.addr,d(e,this.size,4))}function D(t,e){t.uniformMatrix2fv(this.addr,!1,d(e,this.size,4))}function B(t,e){t.uniformMatrix3fv(this.addr,!1,d(e,this.size,9))}function P(t,e){t.uniformMatrix4fv(this.addr,!1,d(e,this.size,16))}function O(t,e,n){var i=e.length,r=p(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture2D(e[o]||Ls,r[o])}function I(t,e,n){var i=e.length,r=p(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTextureCube(e[o]||ks,r[o])}function N(t){switch(t){case 5126:return F;case 35664:return L;case 35665:return k;case 35666:return R;case 35674:return D;case 35675:return B;case 35676:return P;case 35678:return O;case 35680:return I;case 5124:case 35670:return T;case 35667:case 35671:return S;case 35668:case 35672:return C;case 35669:case 35673:return M}}function U(t,e,n){this.id=t,this.addr=n,this.setValue=$(e.type)}function j(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=N(e.type)}function z(t){this.id=t,f.call(this)}function H(t,e){t.seq.push(e),t.map[e.id]=e}function W(t,e,n){var i=t.name,r=i.length;for(Bs.lastIndex=0;;){var o=Bs.exec(i),s=Bs.lastIndex,a=o[1],c="]"===o[2],l=o[3];if(c&&(a=0|a),void 0===l||"["===l&&s+2===r){H(n,void 0===l?new U(a,t,e):new j(a,t,e));break}var u=n.map,h=u[a];void 0===h&&(h=new z(a),H(n,h)),n=h}}function V(t,e,n){f.call(this),this.renderer=n;for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r!==i;++r){var o=t.getActiveUniform(e,r),s=o.name,a=t.getUniformLocation(e,s);W(o,a,this)}}function G(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function q(t,e){this.min=void 0!==t?t:new n((+(1/0)),(+(1/0))),this.max=void 0!==e?e:new n((-(1/0)),(-(1/0)))}function X(t,e){function i(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=p.createBuffer(),s=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,o),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),f=p.createTexture(),d=p.createTexture(),g.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),g.bindTexture(p.TEXTURE_2D,d),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),a={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),
fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},c=r(a),u={vertex:p.getAttribLocation(c,"position"),uv:p.getAttribLocation(c,"uv")},h={renderType:p.getUniformLocation(c,"renderType"),map:p.getUniformLocation(c,"map"),occlusionMap:p.getUniformLocation(c,"occlusionMap"),opacity:p.getUniformLocation(c,"opacity"),color:p.getUniformLocation(c,"color"),scale:p.getUniformLocation(c,"scale"),rotation:p.getUniformLocation(c,"rotation"),screenPosition:p.getUniformLocation(c,"screenPosition")}}function r(e){var n=p.createProgram(),i=p.createShader(p.FRAGMENT_SHADER),r=p.createShader(p.VERTEX_SHADER),o="precision "+t.getPrecision()+" float;\n";return p.shaderSource(i,o+e.fragmentShader),p.shaderSource(r,o+e.vertexShader),p.compileShader(i),p.compileShader(r),p.attachShader(n,i),p.attachShader(n,r),p.linkProgram(n),n}var o,s,a,c,u,h,f,d,p=t.context,g=t.state;this.render=function(r,a,m){if(0!==e.length){var v=new l,y=m.w/m.z,w=.5*m.z,b=.5*m.w,x=16/m.w,A=new n(x*y,x),E=new l(1,1,0),_=new n(1,1),S=new q;S.min.set(0,0),S.max.set(m.z-16,m.w-16),void 0===c&&i(),p.useProgram(c),g.initAttributes(),g.enableAttribute(u.vertex),g.enableAttribute(u.uv),g.disableUnusedAttributes(),p.uniform1i(h.occlusionMap,0),p.uniform1i(h.map,1),p.bindBuffer(p.ARRAY_BUFFER,o),p.vertexAttribPointer(u.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(u.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),g.disable(p.CULL_FACE),g.setDepthWrite(!1);for(var C=0,M=e.length;C<M;C++){x=16/m.w,A.set(x*y,x);var $=e[C];if(v.set($.matrixWorld.elements[12],$.matrixWorld.elements[13],$.matrixWorld.elements[14]),v.applyMatrix4(a.matrixWorldInverse),v.applyProjection(a.projectionMatrix),E.copy(v),_.x=m.x+E.x*w+w-8,_.y=m.y+E.y*b+b-8,S.containsPoint(_)===!0){g.activeTexture(p.TEXTURE0),g.bindTexture(p.TEXTURE_2D,null),g.activeTexture(p.TEXTURE1),g.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,_.x,_.y,16,16,0),p.uniform1i(h.renderType,0),p.uniform2f(h.scale,A.x,A.y),p.uniform3f(h.screenPosition,E.x,E.y,E.z),g.disable(p.BLEND),g.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),g.activeTexture(p.TEXTURE0),g.bindTexture(p.TEXTURE_2D,d),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,_.x,_.y,16,16,0),p.uniform1i(h.renderType,1),g.disable(p.DEPTH_TEST),g.activeTexture(p.TEXTURE1),g.bindTexture(p.TEXTURE_2D,f),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),$.positionScreen.copy(E),$.customUpdateCallback?$.customUpdateCallback($):$.updateLensFlares(),p.uniform1i(h.renderType,2),g.enable(p.BLEND);for(var F=0,T=$.lensFlares.length;F<T;F++){var L=$.lensFlares[F];L.opacity>.001&&L.scale>.001&&(E.x=L.x,E.y=L.y,E.z=L.z,x=L.size*L.scale/m.w,A.x=x*y,A.y=x,p.uniform3f(h.screenPosition,E.x,E.y,E.z),p.uniform2f(h.scale,A.x,A.y),p.uniform1f(h.rotation,L.rotation),p.uniform1f(h.opacity,L.opacity),p.uniform3f(h.color,L.color.r,L.color.g,L.color.b),g.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),t.setTexture2D(L.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}g.enable(p.CULL_FACE),g.enable(p.DEPTH_TEST),g.setDepthWrite(!0),t.resetGLState()}}}function Y(t,e){function n(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);s=p.createBuffer(),a=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,s),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),u=r(),h={position:p.getAttribLocation(u,"position"),uv:p.getAttribLocation(u,"uv")},f={uvOffset:p.getUniformLocation(u,"uvOffset"),uvScale:p.getUniformLocation(u,"uvScale"),rotation:p.getUniformLocation(u,"rotation"),scale:p.getUniformLocation(u,"scale"),color:p.getUniformLocation(u,"color"),map:p.getUniformLocation(u,"map"),opacity:p.getUniformLocation(u,"opacity"),modelViewMatrix:p.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(u,"projectionMatrix"),fogType:p.getUniformLocation(u,"fogType"),fogDensity:p.getUniformLocation(u,"fogDensity"),fogNear:p.getUniformLocation(u,"fogNear"),fogFar:p.getUniformLocation(u,"fogFar"),fogColor:p.getUniformLocation(u,"fogColor"),alphaTest:p.getUniformLocation(u,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var o=n.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),d=new i(n),d.needsUpdate=!0}function r(){var e=p.createProgram(),n=p.createShader(p.VERTEX_SHADER),i=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(i,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(n),p.compileShader(i),p.attachShader(e,n),p.attachShader(e,i),p.linkProgram(e),e}function o(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var s,a,u,h,f,d,p=t.context,g=t.state,m=new l,v=new c,y=new l;this.render=function(i,r){if(0!==e.length){void 0===u&&n(),p.useProgram(u),g.initAttributes(),g.enableAttribute(h.position),g.enableAttribute(h.uv),g.disableUnusedAttributes(),g.disable(p.CULL_FACE),g.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,s),p.vertexAttribPointer(h.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(h.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),p.uniformMatrix4fv(f.projectionMatrix,!1,r.projectionMatrix.elements),g.activeTexture(p.TEXTURE0),p.uniform1i(f.map,0);var c=0,l=0,w=i.fog;w?(p.uniform3f(f.fogColor,w.color.r,w.color.g,w.color.b),w&&w.isFog?(p.uniform1f(f.fogNear,w.near),p.uniform1f(f.fogFar,w.far),p.uniform1i(f.fogType,1),c=1,l=1):w&&w.isFogExp2&&(p.uniform1f(f.fogDensity,w.density),p.uniform1i(f.fogType,2),c=2,l=2)):(p.uniform1i(f.fogType,0),c=0,l=0);for(var b=0,x=e.length;b<x;b++){var A=e[b];A.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,A.matrixWorld),A.z=-A.modelViewMatrix.elements[14]}e.sort(o);for(var E=[],b=0,x=e.length;b<x;b++){var A=e[b],_=A.material;if(_.visible!==!1){p.uniform1f(f.alphaTest,_.alphaTest),p.uniformMatrix4fv(f.modelViewMatrix,!1,A.modelViewMatrix.elements),A.matrixWorld.decompose(m,v,y),E[0]=y.x,E[1]=y.y;var S=0;i.fog&&_.fog&&(S=l),c!==S&&(p.uniform1i(f.fogType,S),c=S),null!==_.map?(p.uniform2f(f.uvOffset,_.map.offset.x,_.map.offset.y),p.uniform2f(f.uvScale,_.map.repeat.x,_.map.repeat.y)):(p.uniform2f(f.uvOffset,0,0),p.uniform2f(f.uvScale,1,1)),p.uniform1f(f.opacity,_.opacity),p.uniform3f(f.color,_.color.r,_.color.g,_.color.b),p.uniform1f(f.rotation,_.rotation),p.uniform2fv(f.scale,E),g.setBlending(_.blending,_.blendEquation,_.blendSrc,_.blendDst),g.setDepthTest(_.depthTest),g.setDepthWrite(_.depthWrite),_.map?t.setTexture2D(_.map,0):t.setTexture2D(d,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}}g.enable(p.CULL_FACE),t.resetGLState()}}}function K(){Object.defineProperty(this,"id",{value:Z()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=$r,this.side=wr,this.shading=Er,this.vertexColors=_r,this.opacity=1,this.transparent=!1,this.blendSrc=Hr,this.blendDst=Wr,this.blendEquation=Dr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Jr,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Z(){return Pc++}function Q(t){K.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function J(t){K.call(this),this.type="MeshDepthMaterial",this.depthPacking=$s,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function tt(t,e){this.min=void 0!==t?t:new l((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==e?e:new l((-(1/0)),(-(1/0)),(-(1/0)))}function et(t,e){this.center=void 0!==t?t:new l,this.radius=void 0!==e?e:0}function nt(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function it(t,e){this.normal=void 0!==t?t:new l(1,0,0),this.constant=void 0!==e?e:0}function rt(t,e,n,i,r,o){this.planes=[void 0!==t?t:new it,void 0!==e?e:new it,void 0!==n?n:new it,void 0!==i?i:new it,void 0!==r?r:new it,void 0!==o?o:new it]}function ot(e,i,r,a){function c(t,n,i,r){var o=t.geometry,s=null,a=S,c=t.customDepthMaterial;if(i&&(a=C,c=t.customDistanceMaterial),c)s=c;else{var l=!1;n.morphTargets&&(o&&o.isBufferGeometry?l=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(l=o.morphTargets&&o.morphTargets.length>0));var u=t.isSkinnedMesh&&n.skinning,h=0;l&&(h|=A),u&&(h|=E),s=a[h]}if(e.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var f=s.uuid,d=n.uuid,p=M[f];void 0===p&&(p={},M[f]=p);var g=p[d];void 0===g&&(g=s.clone(),p[d]=g),s=g}s.visible=n.visible,s.wireframe=n.wireframe;var m=n.side;return N.renderSingleSided&&m==xr&&(m=wr),N.renderReverseSided&&(m===wr?m=br:m===br&&(m=wr)),s.side=m,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,i&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(r),s}function h(t,e,n){if(t.visible!==!1){var i=0!==(t.layers.mask&e.layers.mask);if(i&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(t.frustumCulled===!1||p.intersectsObject(t)===!0)){var r=t.material;r.visible===!0&&(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),x.push(t))}for(var o=t.children,s=0,a=o.length;s<a;s++)h(o[s],e,n)}}var f=e.context,d=e.state,p=new rt,g=new u,m=i.shadows,v=new n,y=new n(a.maxTextureSize,a.maxTextureSize),w=new l,b=new l,x=[],A=1,E=2,_=(A|E)+1,S=new Array(_),C=new Array(_),M={},$=[new l(1,0,0),new l((-1),0,0),new l(0,0,1),new l(0,0,(-1)),new l(0,1,0),new l(0,(-1),0)],F=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,(-1))],T=[new o,new o,new o,new o,new o,new o],L=new J;L.depthPacking=Fs,L.clipping=!0;for(var k=Bc.distanceRGBA,R=t.UniformsUtils.clone(k.uniforms),D=0;D!==_;++D){var B=0!==(D&A),P=0!==(D&E),O=L.clone();O.morphTargets=B,O.skinning=P,S[D]=O;var I=new Q({defines:{USE_SHADOWMAP:""},uniforms:R,vertexShader:k.vertexShader,fragmentShader:k.fragmentShader,morphTargets:B,skinning:P,clipping:!0});C[D]=I}var N=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vr,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n){if(N.enabled!==!1&&(N.autoUpdate!==!1||N.needsUpdate!==!1)&&0!==m.length){d.clearColor(1,1,1,1),d.disable(f.BLEND),d.setDepthTest(!0),d.setScissorTest(!1);for(var i,o,a=0,l=m.length;a<l;a++){var u=m[a],A=u.shadow;if(void 0!==A){var E=A.camera;if(v.copy(A.mapSize),v.min(y),u&&u.isPointLight){i=6,o=!0;var _=v.x,S=v.y;T[0].set(2*_,S,_,S),T[1].set(0,S,_,S),T[2].set(3*_,S,_,S),T[3].set(_,S,_,S),T[4].set(3*_,0,_,S),T[5].set(_,0,_,S),v.x*=4,v.y*=2}else i=1,o=!1;if(null===A.map){var C={minFilter:Co,magFilter:Co,format:qo};A.map=new s(v.x,v.y,C),E.updateProjectionMatrix()}A&&A.isSpotLightShadow&&A.update(u);var M=A.map,L=A.matrix;b.setFromMatrixPosition(u.matrixWorld),E.position.copy(b),e.setRenderTarget(M),e.clear();for(var k=0;k<i;k++){if(o){w.copy(E.position),w.add($[k]),E.up.copy(F[k]),E.lookAt(w);var R=T[k];d.viewport(R)}else w.setFromMatrixPosition(u.target.matrixWorld),E.lookAt(w);E.updateMatrixWorld(),E.matrixWorldInverse.getInverse(E.matrixWorld),L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),L.multiply(E.projectionMatrix),L.multiply(E.matrixWorldInverse),g.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),p.setFromMatrix(g),x.length=0,h(t,n,E);for(var D=0,B=x.length;D<B;D++){var P=x[D],O=r.update(P),I=P.material;if(I&&I.isMultiMaterial)for(var U=O.groups,j=I.materials,z=0,H=U.length;z<H;z++){var W=U[z],V=j[W.materialIndex];if(V.visible===!0){var G=c(P,V,o,b);e.renderBufferDirect(E,null,O,G,P,W)}}else{var G=c(P,I,o,b);e.renderBufferDirect(E,null,O,G,P,null)}}}}else console.warn("THREE.WebGLShadowMap:",u,"has no shadow.")}var q=e.getClearColor(),X=e.getClearAlpha();e.setClearColor(q,X),N.needsUpdate=!1}}}function st(t,e){this.origin=void 0!==t?t:new l,this.direction=void 0!==e?e:new l}function at(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||at.DefaultOrder}function ct(){this.mask=1}function lt(){function e(){o.setFromEuler(r,!1)}function n(){r.setFromQuaternion(o,void 0,!1)}Object.defineProperty(this,"id",{value:ut()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=lt.DefaultUp.clone();var i=new l,r=new at,o=new c,s=new l(1,1,1);r.onChange(e),o.onChange(n),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:o},scale:{enumerable:!0,value:s},modelViewMatrix:{value:new u},normalMatrix:{value:new nt}}),this.matrix=new u,this.matrixWorld=new u,this.matrixAutoUpdate=lt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ct,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=null}function ut(){return Oc++}function ht(t,e){this.start=void 0!==t?t:new l,this.end=void 0!==e?e:new l}function ft(t,e,n){this.a=void 0!==t?t:new l,this.b=void 0!==e?e:new l,this.c=void 0!==n?n:new l}function dt(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new l,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new G,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function pt(t){K.call(this),this.type="MeshBasicMaterial",this.color=new G(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function gt(e,n,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=t.Math.generateUUID(),this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=i===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function mt(t,e){return new gt(new Int8Array(t),e)}function vt(t,e){return new gt(new Uint8Array(t),e)}function yt(t,e){return new gt(new Uint8ClampedArray(t),e)}function wt(t,e){return new gt(new Int16Array(t),e)}function bt(t,e){return new gt(new Uint16Array(t),e)}function xt(t,e){return new gt(new Int32Array(t),e)}function At(t,e){return new gt(new Uint32Array(t),e)}function Et(t,e){return new gt(new Float32Array(t),e)}function _t(t,e){return new gt(new Float64Array(t),e)}function St(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new gt(t,e).setDynamic(!0)}function Ct(){Object.defineProperty(this,"id",{value:Mt()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Mt(){return Ic++}function $t(){Object.defineProperty(this,"id",{value:Mt()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ft(){Object.defineProperty(this,"id",{value:Mt()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Tt(t,e){lt.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Ft,this.material=void 0!==e?e:new pt({color:16777215*Math.random()}),this.drawMode=vs,this.updateMorphTargets()}function Lt(t,e,n,i,r,o){function s(t,e,n){var i=0;return i+=(t+1)*(e+1)*2,i+=(t+1)*(n+1)*2,i+=(n+1)*(e+1)*2}function a(t,e,n){var i=0;return i+=t*e*2,i+=t*n*2,i+=n*e*2,6*i}function c(t,e,n,i,r,o,s,a,c,h,f){for(var A=o/c,E=s/h,_=o/2,S=s/2,C=a/2,M=c+1,$=h+1,F=0,T=0,L=new l,k=0;k<$;k++)for(var R=k*E-S,D=0;D<M;D++){var B=D*A-_;L[t]=B*i,L[e]=R*r,L[n]=C,p[v]=L.x,p[v+1]=L.y,p[v+2]=L.z,L[t]=0,L[e]=0,L[n]=a>0?1:-1,g[v]=L.x,g[v+1]=L.y,g[v+2]=L.z,m[y]=D/c,m[y+1]=1-k/h,v+=3,y+=2,F+=1}for(k=0;k<h;k++)for(D=0;D<c;D++){var P=b+D+M*k,O=b+D+M*(k+1),I=b+(D+1)+M*(k+1),N=b+(D+1)+M*k;d[w]=P,d[w+1]=O,d[w+2]=N,d[w+3]=O,d[w+4]=I,d[w+5]=N,w+=6,T+=6}u.addGroup(x,T,f),x+=T,b+=F}Ft.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var u=this;i=Math.floor(i)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var h=s(i,r,o),f=a(i,r,o),d=new(f>65535?Uint32Array:Uint16Array)(f),p=new Float32Array(3*h),g=new Float32Array(3*h),m=new Float32Array(2*h),v=0,y=0,w=0,b=0,x=0;c("z","y","x",-1,-1,n,e,t,o,r,0),c("z","y","x",1,-1,n,e,-t,o,r,1),c("x","z","y",1,1,t,n,e,i,o,2),c("x","z","y",1,-1,t,n,-e,i,o,3),c("x","y","z",1,-1,t,e,n,i,r,4),c("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(new gt(d,1)),this.addAttribute("position",new gt(p,3)),this.addAttribute("normal",new gt(g,3)),this.addAttribute("uv",new gt(m,2))}function kt(t,e,n,i){Ft.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};for(var r=t/2,o=e/2,s=Math.floor(n)||1,a=Math.floor(i)||1,c=s+1,l=a+1,u=t/s,h=e/a,f=new Float32Array(c*l*3),d=new Float32Array(c*l*3),p=new Float32Array(c*l*2),g=0,m=0,v=0;v<l;v++)for(var y=v*h-o,w=0;w<c;w++){var b=w*u-r;f[g]=b,f[g+1]=-y,d[g+2]=1,p[m]=w/s,p[m+1]=1-v/a,g+=3,m+=2}g=0;for(var x=new(f.length/3>65535?Uint32Array:Uint16Array)(s*a*6),v=0;v<a;v++)for(var w=0;w<s;w++){var A=w+c*v,E=w+c*(v+1),_=w+1+c*(v+1),S=w+1+c*v;x[g]=A,x[g+1]=E,x[g+2]=S,x[g+3]=E,x[g+4]=_,x[g+5]=S,g+=6}this.setIndex(new gt(x,1)),this.addAttribute("position",new gt(f,3)),this.addAttribute("normal",new gt(d,3)),this.addAttribute("uv",new gt(p,2))}function Rt(){lt.call(this),this.type="Camera",this.matrixWorldInverse=new u,this.projectionMatrix=new u}function Dt(t,e,n,i){Rt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Bt(t,e,n,i,r,o){Rt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Pt(t,e,n){function i(t){a=t}function r(n){n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(c=t.UNSIGNED_INT,l=4):(c=t.UNSIGNED_SHORT,l=2)}function o(e,i){t.drawElements(a,i,c,e*l),n.calls++,n.vertices+=i,a===t.TRIANGLES&&(n.faces+=i/3)}function s(i,r,o){var s=e.get("ANGLE_instanced_arrays");return null===s?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(s.drawElementsInstancedANGLE(a,o,c,r*l,i.maxInstancedCount),n.calls++,n.vertices+=o*i.maxInstancedCount,void(a===t.TRIANGLES&&(n.faces+=i.maxInstancedCount*o/3)))}var a,c,l;return{setMode:i,setIndex:r,render:o,renderInstances:s}}function Ot(t,e,n){function i(t){s=t}function r(e,i){t.drawArrays(s,e,i),n.calls++,n.vertices+=i,s===t.TRIANGLES&&(n.faces+=i/3)}function o(i){var r=e.get("ANGLE_instanced_arrays");if(null===r)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var o=i.attributes.position,a=0;o&&o.isInterleavedBufferAttribute?(a=o.data.count,r.drawArraysInstancedANGLE(s,0,a,i.maxInstancedCount)):(a=o.count,r.drawArraysInstancedANGLE(s,0,a,i.maxInstancedCount)),n.calls++,n.vertices+=a*i.maxInstancedCount,s===t.TRIANGLES&&(n.faces+=i.maxInstancedCount*a/3)}var s;return{setMode:i,render:r,renderInstances:o}}function It(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":i={direction:new l,color:new G,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":i={position:new l,direction:new l,color:new G,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":i={position:new l,color:new G,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"HemisphereLight":i={direction:new l,skyColor:new G,groundColor:new G}}return t[e.id]=i,i}}}function Nt(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function Ut(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),Nt(n)),i}function jt(t){switch(t){case bs:return["Linear","( value )"];case xs:return["sRGB","( value )"];case Es:return["RGBE","( value )"];case Ss:return["RGBM","( value, 7.0 )"];case Cs:return["RGBM","( value, 16.0 )"];case Ms:return["RGBD","( value, 256.0 )"];case As:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function zt(t,e){var n=jt(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ht(t,e){var n=jt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Wt(t,e){var n;switch(e){case co:n="Linear";break;case lo:n="Reinhard";break;case uo:n="Uncharted2";break;case ho:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Vt(t,e,n){t=t||{};var i=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return i.filter(Xt).join("\n")}function Gt(t){var e=[];for(var n in t){var i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join("\n")}function qt(t,e,n){for(var i={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var s=t.getActiveAttrib(e,o),a=s.name;i[a]=t.getAttribLocation(e,a)}return i}function Xt(t){return""!==t}function Yt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Kt(t){function e(t,e){var n=Rc[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Kt(n)}var n=/#include +<([\w\d.]+)>/g;return t.replace(n,e)}function Zt(t){function e(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}function Qt(t,e,n,i){var r=t.context,o=n.extensions,s=n.defines,a=n.__webglShader.vertexShader,c=n.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";i.shadowMapType===vr?l="SHADOWMAP_TYPE_PCF":i.shadowMapType===yr&&(l="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(n.envMap.mapping){case po:case go:u="ENVMAP_TYPE_CUBE";break;case wo:case bo:u="ENVMAP_TYPE_CUBE_UV";break;case mo:case vo:u="ENVMAP_TYPE_EQUIREC";break;case yo:u="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case go:case vo:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case ro:f="ENVMAP_BLENDING_MULTIPLY";break;case oo:f="ENVMAP_BLENDING_MIX";break;case so:f="ENVMAP_BLENDING_ADD"}}var d,p,g=t.gammaFactor>0?t.gammaFactor:1,m=Vt(o,i,t.extensions),v=Gt(s),y=r.createProgram();n.isRawShaderMaterial?(d=[v,"\n"].filter(Xt).join("\n"),p=[m,v,"\n"].filter(Xt).join("\n")):(d=["precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,v,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+i.maxBones,i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Xt).join("\n"),p=[m,"precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,v,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"","#define GAMMA_FACTOR "+g,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.envMap?"#define "+h:"",i.envMap?"#define "+f:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",i.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",i.toneMapping!==ao?"#define TONE_MAPPING":"",i.toneMapping!==ao?Rc.tonemapping_pars_fragment:"",i.toneMapping!==ao?Wt("toneMapping",i.toneMapping):"",i.outputEncoding||i.mapEncoding||i.envMapEncoding||i.emissiveMapEncoding?Rc.encodings_pars_fragment:"",i.mapEncoding?zt("mapTexelToLinear",i.mapEncoding):"",i.envMapEncoding?zt("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMapEncoding?zt("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.outputEncoding?Ht("linearToOutputTexel",i.outputEncoding):"",i.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Xt).join("\n")),
a=Kt(a,i),a=Yt(a,i),c=Kt(c,i),c=Yt(c,i),n.isShaderMaterial||(a=Zt(a),c=Zt(c));var w=d+a,b=p+c,x=Ut(r,r.VERTEX_SHADER,w),A=Ut(r,r.FRAGMENT_SHADER,b);r.attachShader(y,x),r.attachShader(y,A),void 0!==n.index0AttributeName?r.bindAttribLocation(y,0,n.index0AttributeName):i.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);var E=r.getProgramInfoLog(y),_=r.getShaderInfoLog(x),S=r.getShaderInfoLog(A),C=!0,M=!0;r.getProgramParameter(y,r.LINK_STATUS)===!1?(C=!1,console.error("THREE.WebGLProgram: shader error: ",r.getError(),"gl.VALIDATE_STATUS",r.getProgramParameter(y,r.VALIDATE_STATUS),"gl.getProgramInfoLog",E,_,S)):""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==_&&""!==S||(M=!1),M&&(this.diagnostics={runnable:C,material:n,programLog:E,vertexShader:{log:_,prefix:d},fragmentShader:{log:S,prefix:p}}),r.deleteShader(x),r.deleteShader(A);var $;this.getUniforms=function(){return void 0===$&&($=new V(r,y,t)),$};var F;return this.getAttributes=function(){return void 0===F&&(F=qt(r,y)),F},this.destroy=function(){r.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Nc++,this.code=e,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=A,this}function Jt(t,e){function n(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var n=e.maxVertexUniforms,i=Math.floor((n-20)/4),r=i;return void 0!==t&&t&&t.isSkinnedMesh&&(r=Math.min(t.skeleton.bones.length,r),r<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function i(t,e){var n;return t?t&&t.isTexture?n=t.encoding:t&&t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=bs,n===bs&&e&&(n=As),n}var r=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","depthPacking"];this.getParameters=function(r,s,a,c,l){var u=o[r.type],h=n(l),f=t.getPrecision();null!==r.precision&&(f=e.getMaxPrecision(r.precision),f!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",f,"instead."));var d=t.getCurrentRenderTarget(),p={shaderID:u,precision:f,supportsVertexTextures:e.vertexTextures,outputEncoding:i(d?d.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:i(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:i(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===wo||r.envMap.mapping===bo),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:i(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!a,useFog:r.fog,fogExp:a&&a.isFogExp2,flatShading:r.shading===Ar,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning,maxBones:h,useVertexTexture:e.floatVertexTextures&&l&&l.skeleton&&l.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numHemiLights:s.hemi.length,numClippingPlanes:c,shadowMapEnabled:t.shadowMap.enabled&&l.receiveShadow&&s.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===xr,flipSided:r.side===br,depthPacking:void 0!==r.depthPacking&&r.depthPacking};return p},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(var r=0;r<s.length;r++)n.push(e[s[r]]);return n.join()},this.acquireProgram=function(e,n,i){for(var o,s=0,a=r.length;s<a;s++){var c=r[s];if(c.code===i){o=c,++o.usedTimes;break}}return void 0===o&&(o=new Qt(t,i,e,n),r.push(o)),o},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function te(t,e,n){function i(t){var r=t.target,a=c[r.id];null!==a.index&&o(a.index),s(a.attributes),r.removeEventListener("dispose",i),delete c[r.id];var l=e.get(r);l.wireframe&&o(l.wireframe),e["delete"](r);var u=e.get(a);u.wireframe&&o(u.wireframe),e["delete"](a),n.memory.geometries--}function r(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function o(e){var n=r(e);void 0!==n&&(t.deleteBuffer(n),a(e))}function s(t){for(var e in t)o(t[e])}function a(t){t.isInterleavedBufferAttribute?e["delete"](t.data):e["delete"](t)}var c={};return{get:function(t){var e=t.geometry;if(void 0!==c[e.id])return c[e.id];e.addEventListener("dispose",i);var r;return e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Ft).setFromObject(t)),r=e._bufferGeometry),c[e.id]=r,n.memory.geometries++,r}}}function ee(t,e,n){function i(e){var n=l.get(e);e.geometry.isGeometry&&n.updateFromObject(e);var i=n.index,o=n.attributes;null!==i&&r(i,t.ELEMENT_ARRAY_BUFFER);for(var s in o)r(o[s],t.ARRAY_BUFFER);var a=n.morphAttributes;for(var s in a)for(var c=a[s],u=0,h=c.length;u<h;u++)r(c[u],t.ARRAY_BUFFER);return n}function r(t,n){var i=t.isInterleavedBufferAttribute?t.data:t,r=e.get(i);void 0===r.__webglBuffer?o(r,i,n):r.version!==i.version&&s(r,i,n)}function o(e,n,i){e.__webglBuffer=t.createBuffer(),t.bindBuffer(i,e.__webglBuffer);var r=n.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(i,n.array,r),e.version=n.version}function s(e,n,i){t.bindBuffer(i,e.__webglBuffer),n.dynamic===!1||n.updateRange.count===-1?t.bufferSubData(i,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),e.version=n.version}function a(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function c(n){var i=e.get(n);if(void 0!==i.wireframe)return i.wireframe;var o=[],s=n.index,a=n.attributes,c=a.position;if(null!==s)for(var l=s.array,u=0,h=l.length;u<h;u+=3){var f=l[u+0],d=l[u+1],p=l[u+2];o.push(f,d,d,p,p,f)}else for(var l=a.position.array,u=0,h=l.length/3-1;u<h;u+=3){var f=u+0,d=u+1,p=u+2;o.push(f,d,d,p,p,f)}var g=c.count>65535?Uint32Array:Uint16Array,m=new gt(new g(o),1);return r(m,t.ELEMENT_ARRAY_BUFFER),i.wireframe=m,m}var l=new te(t,e,n);return{getAttributeBuffer:a,getWireframeAttribute:c,update:i}}function ne(e,n,i,r,o,s,a){function c(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(t.width*n),i.height=Math.floor(t.height*n);var r=i.getContext("2d");return r.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function l(e){return t.Math.isPowerOfTwo(e.width)&&t.Math.isPowerOfTwo(e.height)}function u(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=t.Math.nearestPowerOfTwo(e.width),n.height=t.Math.nearestPowerOfTwo(e.height);var i=n.getContext("2d");return i.drawImage(e,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e),n}return e}function h(t){return t.wrapS!==Eo||t.wrapT!==Eo||t.minFilter!==Co&&t.minFilter!==Fo}function f(t){return t===Co||t===Mo||t===$o?e.NEAREST:e.LINEAR}function d(t){var e=t.target;e.removeEventListener("dispose",d),g(e),$.textures--}function p(t){var e=t.target;e.removeEventListener("dispose",p),m(e),$.textures--}function g(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r["delete"](t)}function m(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t&&t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r["delete"](t.texture),r["delete"](t)}}function v(t,n){var o=r.get(t);if(t.version>0&&o.__version!==t.version){var s=t.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(s.complete!==!1)return void x(o,t,n);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}i.activeTexture(e.TEXTURE0+n),i.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function y(t,n){var a=r.get(t);if(6===t.image.length)if(t.version>0&&a.__version!==t.version){a.__image__webglTextureCube||(t.addEventListener("dispose",d),a.__image__webglTextureCube=e.createTexture(),$.textures++),i.activeTexture(e.TEXTURE0+n),i.bindTexture(e.TEXTURE_CUBE_MAP,a.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var u=t&&t.isCompressedTexture,h=t.image[0]&&t.image[0].isDataTexture,f=[],p=0;p<6;p++)u||h?f[p]=h?t.image[p].image:t.image[p]:f[p]=c(t.image[p],o.maxCubemapSize);var g=f[0],m=l(g),v=s(t.format),y=s(t.type);b(e.TEXTURE_CUBE_MAP,t,m);for(var p=0;p<6;p++)if(u)for(var w,x=f[p].mipmaps,A=0,E=x.length;A<E;A++)w=x[A],t.format!==qo&&t.format!==Go?i.getCompressedTextureFormats().indexOf(v)>-1?i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,A,v,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,A,v,w.width,w.height,0,v,y,w.data);else h?i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,f[p].width,f[p].height,0,v,y,f[p].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,v,y,f[p]);t.generateMipmaps&&m&&e.generateMipmap(e.TEXTURE_CUBE_MAP),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else i.activeTexture(e.TEXTURE0+n),i.bindTexture(e.TEXTURE_CUBE_MAP,a.__image__webglTextureCube)}function w(t,n){i.activeTexture(e.TEXTURE0+n),i.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function b(t,i,a){var c;if(a?(e.texParameteri(t,e.TEXTURE_WRAP_S,s(i.wrapS)),e.texParameteri(t,e.TEXTURE_WRAP_T,s(i.wrapT)),e.texParameteri(t,e.TEXTURE_MAG_FILTER,s(i.magFilter)),e.texParameteri(t,e.TEXTURE_MIN_FILTER,s(i.minFilter))):(e.texParameteri(t,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(t,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i.wrapS===Eo&&i.wrapT===Eo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",i),e.texParameteri(t,e.TEXTURE_MAG_FILTER,f(i.magFilter)),e.texParameteri(t,e.TEXTURE_MIN_FILTER,f(i.minFilter)),i.minFilter!==Co&&i.minFilter!==Fo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",i)),c=n.get("EXT_texture_filter_anisotropic")){if(i.type===No&&null===n.get("OES_texture_float_linear"))return;if(i.type===Uo&&null===n.get("OES_texture_half_float_linear"))return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(e.texParameterf(t,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,o.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function x(t,n,r){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",d),t.__webglTexture=e.createTexture(),$.textures++),i.activeTexture(e.TEXTURE0+r),i.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var a=c(n.image,o.maxTextureSize);h(n)&&l(a)===!1&&(a=u(a));var f=l(a),p=s(n.format),g=s(n.type);b(e.TEXTURE_2D,n,f);var m,v=n.mipmaps;if(n&&n.isDepthTexture){var y=e.DEPTH_COMPONENT;if(n.type===No){if(!F)throw new Error("Float Depth Texture only supported in WebGL2.0");y=e.DEPTH_COMPONENT32F}else F&&(y=e.DEPTH_COMPONENT16);n.format===Qo&&(y=e.DEPTH_STENCIL),i.texImage2D(e.TEXTURE_2D,0,y,a.width,a.height,0,p,g,null)}else if(n&&n.isDataTexture)if(v.length>0&&f){for(var w=0,x=v.length;w<x;w++)m=v[w],i.texImage2D(e.TEXTURE_2D,w,p,m.width,m.height,0,p,g,m.data);n.generateMipmaps=!1}else i.texImage2D(e.TEXTURE_2D,0,p,a.width,a.height,0,p,g,a.data);else if(n&&n.isCompressedTexture)for(var w=0,x=v.length;w<x;w++)m=v[w],n.format!==qo&&n.format!==Go?i.getCompressedTextureFormats().indexOf(p)>-1?i.compressedTexImage2D(e.TEXTURE_2D,w,p,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(e.TEXTURE_2D,w,p,m.width,m.height,0,p,g,m.data);else if(v.length>0&&f){for(var w=0,x=v.length;w<x;w++)m=v[w],i.texImage2D(e.TEXTURE_2D,w,p,p,g,m);n.generateMipmaps=!1}else i.texImage2D(e.TEXTURE_2D,0,p,p,g,a);n.generateMipmaps&&f&&e.generateMipmap(e.TEXTURE_2D),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function A(t,n,o,a){var c=s(n.texture.format),l=s(n.texture.type);i.texImage2D(a,0,c,n.width,n.height,0,c,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,a,r.get(n.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function E(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function _(t,n){var i=n&&n.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Zo)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(n.depthTexture.format!==Qo)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}function S(t){var n=r.get(t),i=t&&t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");_(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),E(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),E(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function C(t){var n=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",p),o.__webglTexture=e.createTexture(),$.textures++;var s=t&&t.isWebGLRenderTargetCube,a=l(t);if(s){n.__webglFramebuffer=[];for(var c=0;c<6;c++)n.__webglFramebuffer[c]=e.createFramebuffer()}else n.__webglFramebuffer=e.createFramebuffer();if(s){i.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),b(e.TEXTURE_CUBE_MAP,t.texture,a);for(var c=0;c<6;c++)A(n.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);t.texture.generateMipmaps&&a&&e.generateMipmap(e.TEXTURE_CUBE_MAP),i.bindTexture(e.TEXTURE_CUBE_MAP,null)}else i.bindTexture(e.TEXTURE_2D,o.__webglTexture),b(e.TEXTURE_2D,t.texture,a),A(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&a&&e.generateMipmap(e.TEXTURE_2D),i.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&S(t)}function M(t){var n=t.texture;if(n.generateMipmaps&&l(t)&&n.minFilter!==Co&&n.minFilter!==Fo){var o=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=r.get(n).__webglTexture;i.bindTexture(o,s),e.generateMipmap(o),i.bindTexture(o,null)}}var $=a.memory,F="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=y,this.setTextureCubeDynamic=w,this.setupRenderTarget=C,this.updateRenderTargetMipmap=M}function ie(){var t={};return{get:function(e){var n=e.uuid,i=t[n];return void 0===i&&(i={},t[n]=i),i},"delete":function(e){delete t[e.uuid]},clear:function(){t={}}}}function re(t,e,n){function i(){var e=!1,n=new o,i=null,r=new o;return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,s){n.set(e,i,o,s),r.equals(n)===!1&&(t.clearColor(e,i,o,s),r.copy(n))},reset:function(){e=!1,i=null,r.set(0,0,0,1)}}}function r(){var e=!1,n=null,i=null,r=null;return{setTest:function(e){e?d(t.DEPTH_TEST):p(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Kr:t.depthFunc(t.NEVER);break;case Zr:t.depthFunc(t.ALWAYS);break;case Qr:t.depthFunc(t.LESS);break;case Jr:t.depthFunc(t.LEQUAL);break;case to:t.depthFunc(t.EQUAL);break;case eo:t.depthFunc(t.GEQUAL);break;case no:t.depthFunc(t.GREATER);break;case io:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}}function s(){var e=!1,n=null,i=null,r=null,o=null,s=null,a=null,c=null,l=null;return{setTest:function(e){e?d(t.STENCIL_TEST):p(t.STENCIL_TEST)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,s){i===e&&r===n&&o===s||(t.stencilFunc(e,n,s),i=e,r=n,o=s)},setOp:function(e,n,i){s===e&&a===n&&c===i||(t.stencilOp(e,n,i),s=e,a=n,c=i)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,s=null,a=null,c=null,l=null}}}function a(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var s=0;s<i;s++)t.texImage2D(n+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return o}function c(){B(0,0,0,1),P(1),O(0),d(t.DEPTH_TEST),b(Jr),S(!1),C(hr),d(t.CULL_FACE),d(t.BLEND),m($r)}function l(){for(var t=0,e=V.length;t<e;t++)V[t]=0}function u(n){if(V[n]=1,0===G[n]&&(t.enableVertexAttribArray(n),G[n]=1),0!==q[n]){var i=e.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(n,0),q[n]=0}}function h(e,n,i){V[e]=1,0===G[e]&&(t.enableVertexAttribArray(e),G[e]=1),q[e]!==n&&(i.vertexAttribDivisorANGLE(e,n),q[e]=n)}function f(){for(var e=0,n=G.length;e!==n;++e)G[e]!==V[e]&&(t.disableVertexAttribArray(e),G[e]=0)}function d(e){X[e]!==!0&&(t.enable(e),X[e]=!0)}function p(e){X[e]!==!1&&(t.disable(e),X[e]=!1)}function g(){if(null===Y&&(Y=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)Y.push(n[i]);return Y}function m(e,i,r,o,s,a,c,l){return e===Mr?(p(t.BLEND),void(K=e)):(d(t.BLEND),e===K&&l===it||(e===Fr?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===Tr?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===Lr?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),K=e,it=l),void(e===kr?(s=s||i,a=a||r,c=c||o,i===Z&&s===tt||(t.blendEquationSeparate(n(i),n(s)),Z=i,tt=s),r===Q&&o===J&&a===et&&c===nt||(t.blendFuncSeparate(n(r),n(o),n(a),n(c)),Q=r,J=o,et=a,nt=c)):(Z=null,Q=null,J=null,tt=null,et=null,nt=null)))}function v(t){j.setMask(t)}function y(t){z.setTest(t)}function w(t){z.setMask(t)}function b(t){z.setFunc(t)}function x(t){H.setTest(t)}function A(t){H.setMask(t)}function E(t,e,n){H.setFunc(t,e,n)}function _(t,e,n){H.setOp(t,e,n)}function S(e){rt!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),rt=e)}function C(e){e!==ur?(d(t.CULL_FACE),e!==ot&&(e===hr?t.cullFace(t.BACK):e===fr?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):p(t.CULL_FACE),ot=e}function M(e){e!==st&&(t.lineWidth(e),st=e)}function $(e,n,i){e?(d(t.POLYGON_OFFSET_FILL),at===n&&ct===i||(t.polygonOffset(n,i),at=n,ct=i)):p(t.POLYGON_OFFSET_FILL)}function F(){return lt}function T(e){lt=e,e?d(t.SCISSOR_TEST):p(t.SCISSOR_TEST)}function L(e){void 0===e&&(e=t.TEXTURE0+ut-1),ht!==e&&(t.activeTexture(e),ht=e)}function k(e,n){null===ht&&L();var i=ft[ht];void 0===i&&(i={type:void 0,texture:void 0},ft[ht]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||gt[e]),i.type=e,i.texture=n)}function R(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error(e)}}function D(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error(e)}}function B(t,e,n,i){j.setClear(t,e,n,i)}function P(t){z.setClear(t)}function O(t){H.setClear(t)}function I(e){dt.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),dt.copy(e))}function N(e){pt.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),pt.copy(e))}function U(){for(var e=0;e<G.length;e++)1===G[e]&&(t.disableVertexAttribArray(e),G[e]=0);X={},Y=null,ht=null,ft={},K=null,rt=null,ot=null,j.reset(),z.reset(),H.reset()}var j=new i,z=new r,H=new s,W=t.getParameter(t.MAX_VERTEX_ATTRIBS),V=new Uint8Array(W),G=new Uint8Array(W),q=new Uint8Array(W),X={},Y=null,K=null,Z=null,Q=null,J=null,tt=null,et=null,nt=null,it=!1,rt=null,ot=null,st=null,at=null,ct=null,lt=null,ut=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ht=null,ft={},dt=new o,pt=new o,gt={};return gt[t.TEXTURE_2D]=a(t.TEXTURE_2D,t.TEXTURE_2D,1),gt[t.TEXTURE_CUBE_MAP]=a(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:j,depth:z,stencil:H},init:c,initAttributes:l,enableAttribute:u,enableAttributeAndDivisor:h,disableUnusedAttributes:f,enable:d,disable:p,getCompressedTextureFormats:g,setBlending:m,setColorWrite:v,setDepthTest:y,setDepthWrite:w,setDepthFunc:b,setStencilTest:x,setStencilWrite:A,setStencilFunc:E,setStencilOp:_,setFlipSided:S,setCullFace:C,setLineWidth:M,setPolygonOffset:$,getScissorTest:F,setScissorTest:T,activeTexture:L,bindTexture:k,compressedTexImage2D:R,texImage2D:D,clearColor:B,clearDepth:P,clearStencil:O,scissor:I,viewport:N,reset:U}}function oe(t,e,n){function i(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,s=void 0!==n.precision?n.precision:"highp",a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var c=n.logarithmicDepthBuffer===!0&&!!e.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,y=!!e.get("OES_texture_float"),w=v&&y;return{getMaxAnisotropy:i,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:w}}function se(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=t.getExtension("WEBGL_compressed_texture_etc1");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function ae(){function t(){l.value!==i&&(l.value=i,l.needsUpdate=r>0),n.numPlanes=r}function e(t,e,i,r){var o=null!==t?t.length:0,s=null;if(0!==o){if(s=l.value,r!==!0||null===s){var u=i+4*o,h=e.matrixWorldInverse;c.getNormalMatrix(h),(null===s||s.length<u)&&(s=new Float32Array(u));for(var f=0,d=i;f!==o;++f,d+=4)a.copy(t[f]).applyMatrix4(h,c),a.normal.toArray(s,d),s[d+3]=a.constant}l.value=s,l.needsUpdate=!0}return n.numPlanes=o,s}var n=this,i=null,r=0,o=!1,s=!1,a=new it,c=new nt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.init=function(t,n,s){var a=0!==t.length||n||0!==r||o;return o=n,i=e(t,s,0),r=t.length,a},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,a,c,u,h){if(!o||null===n||0===n.length||s&&!a)s?e(null):t();else{var f=s?0:r,d=4*f,p=u.clippingState||null;l.value=p,p=e(n,c,d,h);for(var g=0;g!==d;++g)p[g]=i[g];u.clippingState=p,this.numPlanes+=f}}}function ce(e){function n(){return null===ft?Ct:1}function i(t,e,n,i){K===!0&&(t*=i,e*=i,n*=i),te.clearColor(t,e,n,i)}function r(){te.init(),te.scissor(yt.copy(Mt).multiplyScalar(Ct)),te.viewport(bt.copy(Rt).multiplyScalar(Ct)),i(At.r,At.g,At.b,Et)}function s(){ht=null,vt=null,mt="",gt=-1,te.reset()}function a(t){t.preventDefault(),s(),r(),ce.clear()}function c(t){var e=t.target;e.removeEventListener("dispose",c),h(e)}function h(t){f(t),ce["delete"](t)}function f(t){var e=ce.get(t).program;t.program=void 0,void 0!==e&&he.releaseProgram(e)}function d(t,e,n,i){var r;if(n&&n.isInstancedBufferGeometry&&(r=Zt.get("ANGLE_instanced_arrays"),null===r))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),te.initAttributes();var o=n.attributes,s=e.getAttributes(),a=t.defaultAttributeValues;for(var c in s){var l=s[c];if(l>=0){var u=o[c];if(void 0!==u){var h=Xt.FLOAT,f=u.array,d=u.normalized;f instanceof Float32Array?h=Xt.FLOAT:f instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):f instanceof Uint16Array?h=Xt.UNSIGNED_SHORT:f instanceof Int16Array?h=Xt.SHORT:f instanceof Uint32Array?h=Xt.UNSIGNED_INT:f instanceof Int32Array?h=Xt.INT:f instanceof Int8Array?h=Xt.BYTE:f instanceof Uint8Array&&(h=Xt.UNSIGNED_BYTE);var p=u.itemSize,g=ue.getAttributeBuffer(u);if(u&&u.isInterleavedBufferAttribute){var m=u.data,v=m.stride,y=u.offset;m&&m.isInstancedInterleavedBuffer?(te.enableAttributeAndDivisor(l,m.meshPerAttribute,r),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):te.enableAttribute(l),Xt.bindBuffer(Xt.ARRAY_BUFFER,g),Xt.vertexAttribPointer(l,p,h,d,v*m.array.BYTES_PER_ELEMENT,(i*v+y)*m.array.BYTES_PER_ELEMENT)}else u&&u.isInstancedBufferAttribute?(te.enableAttributeAndDivisor(l,u.meshPerAttribute,r),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):te.enableAttribute(l),Xt.bindBuffer(Xt.ARRAY_BUFFER,g),Xt.vertexAttribPointer(l,p,h,d,0,i*p*u.array.BYTES_PER_ELEMENT)}else if(void 0!==a){var w=a[c];if(void 0!==w)switch(w.length){case 2:Xt.vertexAttrib2fv(l,w);break;case 3:Xt.vertexAttrib3fv(l,w);break;case 4:Xt.vertexAttrib4fv(l,w);break;default:Xt.vertexAttrib1fv(l,w)}}}}te.disableUnusedAttributes()}function p(t,e){return Math.abs(e[0])-Math.abs(t[0])}function g(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function m(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function v(t,e,n,i,r){var o,s;n.transparent?(o=it,s=++st):(o=tt,s=++nt);var a=o[s];void 0!==a?(a.id=t.id,a.object=t,a.geometry=e,a.material=n,a.z=Vt.z,a.group=r):(a={id:t.id,object:t,geometry:e,material:n,z:Vt.z,group:r},o.push(a))}function y(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ht.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),b(Ht)}function w(t){return Ht.center.set(0,0,0),Ht.radius=.7071067811865476,Ht.applyMatrix4(t.matrixWorld),b(Ht)}function b(t){if(!Nt.intersectsSphere(t))return!1;var e=Ut.numPlanes;if(0===e)return!0;var n=ut.clippingPlanes,i=t.center,r=-t.radius,o=0;do if(n[o].distanceToPoint(i)<r)return!1;while(++o!==e);return!0}function x(t,e){if(t.visible!==!1){var n=0!==(t.layers.mask&e.layers.mask);if(n)if(t.isLight)J.push(t);else if(t.isSprite)t.frustumCulled!==!1&&w(t)!==!0||ct.push(t);else if(t.isLensFlare)lt.push(t);else if(t.isImmediateRenderObject)ut.sortObjects===!0&&(Vt.setFromMatrixPosition(t.matrixWorld),
Vt.applyProjection(Wt)),v(t,null,t.material,Vt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),t.frustumCulled===!1||y(t)===!0)){var i=t.material;if(i.visible===!0){ut.sortObjects===!0&&(Vt.setFromMatrixPosition(t.matrixWorld),Vt.applyProjection(Wt));var r=ue.update(t);if(i.isMultiMaterial)for(var o=r.groups,s=i.materials,a=0,c=o.length;a<c;a++){var l=o[a],u=s[l.materialIndex];u.visible===!0&&v(t,r,u,Vt.z,l)}else v(t,r,i,Vt.z,null)}}for(var h=t.children,a=0,c=h.length;a<c;a++)x(h[a],e)}}function A(t,e,n,i){for(var r=0,o=t.length;r<o;r++){var s=t[r],a=s.object,c=s.geometry,l=void 0===i?s.material:i,u=s.group;if(a.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,a.matrixWorld),a.normalMatrix.getNormalMatrix(a.modelViewMatrix),a.isImmediateRenderObject){_(l);var h=S(e,n,l,a);mt="",a.render(function(t){ut.renderBufferImmediate(t,h,l)})}else null!==a.onBeforeRender&&a.onBeforeRender(),ut.renderBufferDirect(e,n,c,l,a,u)}}function E(e,n,i){var r=ce.get(e),o=he.getParameters(e,Gt,n,Ut.numPlanes,i),s=he.getProgramCode(e,o),a=r.program,l=!0;if(void 0===a)e.addEventListener("dispose",c);else if(a.code!==s)f(e);else{if(void 0!==o.shaderID)return;l=!1}if(l){if(o.shaderID){var u=Bc[o.shaderID];r.__webglShader={name:e.type,uniforms:t.UniformsUtils.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,a=he.acquireProgram(e,o,s),r.program=a,e.program=a}var h=a.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<ut.maxMorphTargets;d++)h["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var d=0;d<ut.maxMorphNormals;d++)h["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var p=r.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&e.clipping!==!0||(r.numClippingPlanes=Ut.numPlanes,p.clippingPlanes=Ut.uniform),r.fog=n,r.lightsHash=Gt.hash,e.lights&&(p.ambientLightColor.value=Gt.ambient,p.directionalLights.value=Gt.directional,p.spotLights.value=Gt.spot,p.pointLights.value=Gt.point,p.hemisphereLights.value=Gt.hemi,p.directionalShadowMap.value=Gt.directionalShadowMap,p.directionalShadowMatrix.value=Gt.directionalShadowMatrix,p.spotShadowMap.value=Gt.spotShadowMap,p.spotShadowMatrix.value=Gt.spotShadowMatrix,p.pointShadowMap.value=Gt.pointShadowMap,p.pointShadowMatrix.value=Gt.pointShadowMatrix);var g=r.program.getUniforms(),m=V.seqWithValue(g.seq,p);r.uniformsList=m,r.dynamicUniforms=V.splitDynamic(m,p)}function _(t){t.side===xr?te.disable(Xt.CULL_FACE):te.enable(Xt.CULL_FACE),te.setFlipSided(t.side===br),t.transparent===!0?te.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):te.setBlending(Mr),te.setDepthFunc(t.depthFunc),te.setDepthTest(t.depthTest),te.setDepthWrite(t.depthWrite),te.setColorWrite(t.colorWrite),te.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function S(t,e,n,i){xt=0;var r=ce.get(n);if(jt&&(zt||t!==vt)){var o=t===vt&&n.id===gt;Ut.setState(n.clippingPlanes,n.clipShadows,t,r,o)}n.needsUpdate===!1&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsHash!==Gt.hash?n.needsUpdate=!0:void 0!==r.numClippingPlanes&&r.numClippingPlanes!==Ut.numPlanes&&(n.needsUpdate=!0)),n.needsUpdate&&(E(n,e,i),n.needsUpdate=!1);var s=!1,a=!1,c=!1,l=r.program,u=l.getUniforms(),h=r.__webglShader.uniforms;if(l.id!==ht&&(Xt.useProgram(l.program),ht=l.id,s=!0,a=!0,c=!0),n.id!==gt&&(gt=n.id,a=!0),s||t!==vt){if(u.set(Xt,t,"projectionMatrix"),Qt.logarithmicDepthBuffer&&u.setValue(Xt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==vt&&(vt=t,a=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var f=u.map.cameraPosition;void 0!==f&&f.setValue(Xt,Vt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&u.setValue(Xt,"viewMatrix",t.matrixWorldInverse),u.set(Xt,ut,"toneMappingExposure"),u.set(Xt,ut,"toneMappingWhitePoint")}if(n.skinning){u.setOptional(Xt,i,"bindMatrix"),u.setOptional(Xt,i,"bindMatrixInverse");var d=i.skeleton;d&&(Qt.floatVertexTextures&&d.useVertexTexture?(u.set(Xt,d,"boneTexture"),u.set(Xt,d,"boneTextureWidth"),u.set(Xt,d,"boneTextureHeight")):u.setOptional(Xt,d,"boneMatrices"))}a&&(n.lights&&B(h,c),e&&n.fog&&T(h,e),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshDepthMaterial)&&C(h,n),n.isLineBasicMaterial?M(h,n):n.isLineDashedMaterial?(M(h,n),$(h,n)):n.isPointsMaterial?F(h,n):n.isMeshLambertMaterial?L(h,n):n.isMeshPhongMaterial?k(h,n):n.isMeshPhysicalMaterial?D(h,n):n.isMeshStandardMaterial?R(h,n):n.isMeshDepthMaterial?n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&(h.opacity.value=n.opacity),V.upload(Xt,r.uniformsList,h,ut)),u.set(Xt,i,"modelViewMatrix"),u.set(Xt,i,"normalMatrix"),u.setValue(Xt,"modelMatrix",i.matrixWorld);var p=r.dynamicUniforms;return null!==p&&(V.evalDynamic(p,h,i,n,t),V.upload(Xt,p,h,ut)),l}function C(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;if(e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var i=n.offset,r=n.repeat;t.offsetRepeat.value.set(i.x,i.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function M(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function $(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function F(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*Ct,t.scale.value=.5*U.clientHeight,t.map.value=e.map,null!==e.map){var n=e.map.offset,i=e.map.repeat;t.offsetRepeat.value.set(n.x,n.y,i.x,i.y)}}function T(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function L(t,e){e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function k(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function R(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function D(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,R(t,e)}function B(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function P(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];r.castShadow&&(Gt.shadows[e++]=r)}Gt.shadows.length=e}function O(t,e){var n,i,r,o,s,a,c,l=0,h=0,f=0,d=e.matrixWorldInverse,p=0,g=0,m=0,v=0;for(n=0,i=t.length;n<i;n++)if(r=t[n],o=r.color,s=r.intensity,a=r.distance,c=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)l+=o.r*s,h+=o.g*s,f+=o.b*s;else if(r.isDirectionalLight){var y=fe.get(r);y.color.copy(r.color).multiplyScalar(r.intensity),y.direction.setFromMatrixPosition(r.matrixWorld),Vt.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub(Vt),y.direction.transformDirection(d),y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),Gt.directionalShadowMap[p]=c,Gt.directionalShadowMatrix[p]=r.shadow.matrix,Gt.directional[p++]=y}else if(r.isSpotLight){var y=fe.get(r);y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(d),y.color.copy(o).multiplyScalar(s),y.distance=a,y.direction.setFromMatrixPosition(r.matrixWorld),Vt.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub(Vt),y.direction.transformDirection(d),y.coneCos=Math.cos(r.angle),y.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),Gt.spotShadowMap[m]=c,Gt.spotShadowMatrix[m]=r.shadow.matrix,Gt.spot[m++]=y}else if(r.isPointLight){var y=fe.get(r);y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(d),y.color.copy(r.color).multiplyScalar(r.intensity),y.distance=r.distance,y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),Gt.pointShadowMap[g]=c,void 0===Gt.pointShadowMatrix[g]&&(Gt.pointShadowMatrix[g]=new u),Vt.setFromMatrixPosition(r.matrixWorld).negate(),Gt.pointShadowMatrix[g].identity().setPosition(Vt),Gt.point[g++]=y}else if(r.isHemisphereLight){var y=fe.get(r);y.direction.setFromMatrixPosition(r.matrixWorld),y.direction.transformDirection(d),y.direction.normalize(),y.skyColor.copy(r.color).multiplyScalar(s),y.groundColor.copy(r.groundColor).multiplyScalar(s),Gt.hemi[v++]=y}Gt.ambient[0]=l,Gt.ambient[1]=h,Gt.ambient[2]=f,Gt.directional.length=p,Gt.spot.length=m,Gt.point.length=g,Gt.hemi.length=v,Gt.hash=p+","+g+","+m+","+v+","+Gt.shadows.length}function I(){var t=xt;return t>=Qt.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Qt.maxTextures),xt+=1,t}function N(t){var e;if(t===Ao)return Xt.REPEAT;if(t===Eo)return Xt.CLAMP_TO_EDGE;if(t===_o)return Xt.MIRRORED_REPEAT;if(t===Co)return Xt.NEAREST;if(t===Mo)return Xt.NEAREST_MIPMAP_NEAREST;if(t===$o)return Xt.NEAREST_MIPMAP_LINEAR;if(t===Fo)return Xt.LINEAR;if(t===To)return Xt.LINEAR_MIPMAP_NEAREST;if(t===Lo)return Xt.LINEAR_MIPMAP_LINEAR;if(t===Ro)return Xt.UNSIGNED_BYTE;if(t===jo)return Xt.UNSIGNED_SHORT_4_4_4_4;if(t===zo)return Xt.UNSIGNED_SHORT_5_5_5_1;if(t===Ho)return Xt.UNSIGNED_SHORT_5_6_5;if(t===Do)return Xt.BYTE;if(t===Bo)return Xt.SHORT;if(t===Po)return Xt.UNSIGNED_SHORT;if(t===Oo)return Xt.INT;if(t===Io)return Xt.UNSIGNED_INT;if(t===No)return Xt.FLOAT;if(e=Zt.get("OES_texture_half_float"),null!==e&&t===Uo)return e.HALF_FLOAT_OES;if(t===Vo)return Xt.ALPHA;if(t===Go)return Xt.RGB;if(t===qo)return Xt.RGBA;if(t===Xo)return Xt.LUMINANCE;if(t===Yo)return Xt.LUMINANCE_ALPHA;if(t===Zo)return Xt.DEPTH_COMPONENT;if(t===Qo)return Xt.DEPTH_STENCIL;if(t===Dr)return Xt.FUNC_ADD;if(t===Br)return Xt.FUNC_SUBTRACT;if(t===Pr)return Xt.FUNC_REVERSE_SUBTRACT;if(t===Nr)return Xt.ZERO;if(t===Ur)return Xt.ONE;if(t===jr)return Xt.SRC_COLOR;if(t===zr)return Xt.ONE_MINUS_SRC_COLOR;if(t===Hr)return Xt.SRC_ALPHA;if(t===Wr)return Xt.ONE_MINUS_SRC_ALPHA;if(t===Vr)return Xt.DST_ALPHA;if(t===Gr)return Xt.ONE_MINUS_DST_ALPHA;if(t===qr)return Xt.DST_COLOR;if(t===Xr)return Xt.ONE_MINUS_DST_COLOR;if(t===Yr)return Xt.SRC_ALPHA_SATURATE;if(e=Zt.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===Jo)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===ts)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===es)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===ns)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=Zt.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===is)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===rs)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===os)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ss)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=Zt.get("WEBGL_compressed_texture_etc1"),null!==e&&t===as)return e.COMPRESSED_RGB_ETC1_WEBGL;if(e=Zt.get("EXT_blend_minmax"),null!==e){if(t===Or)return e.MIN_EXT;if(t===Ir)return e.MAX_EXT}return e=Zt.get("WEBGL_depth_texture"),null!==e&&t===Wo?e.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",cr),e=e||{};var U=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),j=void 0!==e.context?e.context:null,z=void 0!==e.alpha&&e.alpha,H=void 0===e.depth||e.depth,W=void 0===e.stencil||e.stencil,q=void 0!==e.antialias&&e.antialias,K=void 0===e.premultipliedAlpha||e.premultipliedAlpha,Z=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,J=[],tt=[],nt=-1,it=[],st=-1,at=new Float32Array(8),ct=[],lt=[];this.domElement=U,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=co,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ut=this,ht=null,ft=null,dt=null,gt=-1,mt="",vt=null,yt=new o,wt=null,bt=new o,xt=0,At=new G(0),Et=0,_t=U.width,St=U.height,Ct=1,Mt=new o(0,0,_t,St),$t=!1,Rt=new o(0,0,_t,St),Nt=new rt,Ut=new ae,jt=!1,zt=!1,Ht=new et,Wt=new u,Vt=new l,Gt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},qt={calls:0,vertices:0,faces:0,points:0};this.info={render:qt,memory:{geometries:0,textures:0},programs:null};var Xt;try{var Yt={alpha:z,depth:H,stencil:W,antialias:q,premultipliedAlpha:K,preserveDrawingBuffer:Z};if(Xt=j||U.getContext("webgl",Yt)||U.getContext("experimental-webgl",Yt),null===Xt)throw null!==U.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Xt.getShaderPrecisionFormat&&(Xt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),U.addEventListener("webglcontextlost",a,!1)}catch(Kt){console.error("THREE.WebGLRenderer: "+Kt)}var Zt=new se(Xt);Zt.get("WEBGL_depth_texture"),Zt.get("OES_texture_float"),Zt.get("OES_texture_float_linear"),Zt.get("OES_texture_half_float"),Zt.get("OES_texture_half_float_linear"),Zt.get("OES_standard_derivatives"),Zt.get("ANGLE_instanced_arrays"),Zt.get("OES_element_index_uint")&&(Ft.MaxIndex=4294967296);var Qt=new oe(Xt,Zt,e),te=new re(Xt,Zt,N),ce=new ie,le=new ne(Xt,Zt,te,ce,Qt,N,this.info),ue=new ee(Xt,ce,this.info),he=new Jt(this,Qt),fe=new It;this.info.programs=he.programs;var de=new Ot(Xt,Zt,qt),pe=new Pt(Xt,Zt,qt),ge=new Bt((-1),1,1,(-1),0,1),me=new Dt,ve=new Tt(new kt(2,2),new pt({depthTest:!1,depthWrite:!1,fog:!1})),ye=Bc.cube,we=new Tt(new Lt(5,5,5),new Q({uniforms:ye.uniforms,vertexShader:ye.vertexShader,fragmentShader:ye.fragmentShader,side:br,depthTest:!1,depthWrite:!1,fog:!1}));r(),this.context=Xt,this.capabilities=Qt,this.extensions=Zt,this.properties=ce,this.state=te;var be=new ot(this,Gt,ue,Qt);this.shadowMap=be;var xe=new Y(this,ct),Ae=new X(this,lt);this.getContext=function(){return Xt},this.getContextAttributes=function(){return Xt.getContextAttributes()},this.forceContextLoss=function(){Zt.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Qt.getMaxAnisotropy()},this.getPrecision=function(){return Qt.precision},this.getPixelRatio=function(){return Ct},this.setPixelRatio=function(t){void 0!==t&&(Ct=t,this.setSize(Rt.z,Rt.w,!1))},this.getSize=function(){return{width:_t,height:St}},this.setSize=function(t,e,n){_t=t,St=e,U.width=t*Ct,U.height=e*Ct,n!==!1&&(U.style.width=t+"px",U.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,i){te.viewport(Rt.set(t,e,n,i))},this.setScissor=function(t,e,n,i){te.scissor(Mt.set(t,e,n,i))},this.setScissorTest=function(t){te.setScissorTest($t=t)},this.getClearColor=function(){return At},this.setClearColor=function(t,e){At.set(t),Et=void 0!==e?e:1,i(At.r,At.g,At.b,Et)},this.getClearAlpha=function(){return Et},this.setClearAlpha=function(t){Et=t,i(At.r,At.g,At.b,Et)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=Xt.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=Xt.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=Xt.STENCIL_BUFFER_BIT),Xt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},this.resetGLState=s,this.dispose=function(){it=[],st=-1,tt=[],nt=-1,U.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(t,e,n){te.initAttributes();var i=ce.get(t);t.hasPositions&&!i.position&&(i.position=Xt.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=Xt.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=Xt.createBuffer()),t.hasColors&&!i.color&&(i.color=Xt.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(Xt.bindBuffer(Xt.ARRAY_BUFFER,i.position),Xt.bufferData(Xt.ARRAY_BUFFER,t.positionArray,Xt.DYNAMIC_DRAW),te.enableAttribute(r.position),Xt.vertexAttribPointer(r.position,3,Xt.FLOAT,!1,0,0)),t.hasNormals){if(Xt.bindBuffer(Xt.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&n.shading===Ar)for(var o=0,s=3*t.count;o<s;o+=9){var a=t.normalArray,c=(a[o+0]+a[o+3]+a[o+6])/3,l=(a[o+1]+a[o+4]+a[o+7])/3,u=(a[o+2]+a[o+5]+a[o+8])/3;a[o+0]=c,a[o+1]=l,a[o+2]=u,a[o+3]=c,a[o+4]=l,a[o+5]=u,a[o+6]=c,a[o+7]=l,a[o+8]=u}Xt.bufferData(Xt.ARRAY_BUFFER,t.normalArray,Xt.DYNAMIC_DRAW),te.enableAttribute(r.normal),Xt.vertexAttribPointer(r.normal,3,Xt.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(Xt.bindBuffer(Xt.ARRAY_BUFFER,i.uv),Xt.bufferData(Xt.ARRAY_BUFFER,t.uvArray,Xt.DYNAMIC_DRAW),te.enableAttribute(r.uv),Xt.vertexAttribPointer(r.uv,2,Xt.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==_r&&(Xt.bindBuffer(Xt.ARRAY_BUFFER,i.color),Xt.bufferData(Xt.ARRAY_BUFFER,t.colorArray,Xt.DYNAMIC_DRAW),te.enableAttribute(r.color),Xt.vertexAttribPointer(r.color,3,Xt.FLOAT,!1,0,0)),te.disableUnusedAttributes(),Xt.drawArrays(Xt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,r,o,s){_(r);var a=S(t,e,r,o),c=!1,l=i.id+"_"+a.id+"_"+r.wireframe;l!==mt&&(mt=l,c=!0);var u=o.morphTargetInfluences;if(void 0!==u){for(var h=[],f=0,g=u.length;f<g;f++){var m=u[f];h.push([m,f])}h.sort(p),h.length>8&&(h.length=8);for(var v=i.morphAttributes,f=0,g=h.length;f<g;f++){var m=h[f];if(at[f]=m[0],0!==m[0]){var y=m[1];r.morphTargets===!0&&v.position&&i.addAttribute("morphTarget"+f,v.position[y]),r.morphNormals===!0&&v.normal&&i.addAttribute("morphNormal"+f,v.normal[y])}else r.morphTargets===!0&&i.removeAttribute("morphTarget"+f),r.morphNormals===!0&&i.removeAttribute("morphNormal"+f)}for(var f=h.length,w=at.length;f<w;f++)at[f]=0;a.getUniforms().setValue(Xt,"morphTargetInfluences",at),c=!0}var y=i.index,b=i.attributes.position,x=1;r.wireframe===!0&&(y=ue.getWireframeAttribute(i),x=2);var A;null!==y?(A=pe,A.setIndex(y)):A=de,c&&(d(r,a,i),null!==y&&Xt.bindBuffer(Xt.ELEMENT_ARRAY_BUFFER,ue.getAttributeBuffer(y)));var E=0;null!==y?E=y.count:void 0!==b&&(E=b.count);var C=i.drawRange.start*x,M=i.drawRange.count*x,$=null!==s?s.start*x:0,F=null!==s?s.count*x:1/0,T=Math.max(C,$),L=Math.min(E,C+M,$+F)-1,k=Math.max(0,L-T+1);if(0!==k){if(o.isMesh)if(r.wireframe===!0)te.setLineWidth(r.wireframeLinewidth*n()),A.setMode(Xt.LINES);else switch(o.drawMode){case vs:A.setMode(Xt.TRIANGLES);break;case ys:A.setMode(Xt.TRIANGLE_STRIP);break;case ws:A.setMode(Xt.TRIANGLE_FAN)}else if(o.isLine){var R=r.linewidth;void 0===R&&(R=1),te.setLineWidth(R*n()),o.isLineSegments?A.setMode(Xt.LINES):A.setMode(Xt.LINE_STRIP)}else o.isPoints&&A.setMode(Xt.POINTS);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&A.renderInstances(i,T,k):A.render(T,k)}},this.render=function(t,e,n,r){if(void 0!==e&&e.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var o=t.fog;mt="",gt=-1,vt=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),Wt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Nt.setFromMatrix(Wt),J.length=0,nt=-1,st=-1,ct.length=0,lt.length=0,zt=this.localClippingEnabled,jt=Ut.init(this.clippingPlanes,zt,e),x(t,e),tt.length=nt+1,it.length=st+1,ut.sortObjects===!0&&(tt.sort(g),it.sort(m)),jt&&Ut.beginShadows(),P(J),be.render(t,e),O(J,e),jt&&Ut.endShadows(),qt.calls=0,qt.vertices=0,qt.faces=0,qt.points=0,void 0===n&&(n=null),this.setRenderTarget(n);var s=t.background;if(null===s?i(At.r,At.g,At.b,Et):s&&s.isColor&&(i(s.r,s.g,s.b,1),r=!0),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),s&&s.isCubeTexture?(me.projectionMatrix.copy(e.projectionMatrix),me.matrixWorld.extractRotation(e.matrixWorld),me.matrixWorldInverse.getInverse(me.matrixWorld),we.material.uniforms.tCube.value=s,we.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,we.matrixWorld),ue.update(we),ut.renderBufferDirect(me,null,we.geometry,we.material,we,null)):s&&s.isTexture&&(ve.material.map=s,ue.update(ve),ut.renderBufferDirect(ge,null,ve.geometry,ve.material,ve,null)),t.overrideMaterial){var a=t.overrideMaterial;A(tt,e,o,a),A(it,e,o,a)}else te.setBlending(Mr),A(tt,e,o),A(it,e,o);xe.render(t,e),Ae.render(t,e,bt),n&&le.updateRenderTargetMipmap(n),te.setDepthTest(!0),te.setDepthWrite(!0),te.setColorWrite(!0)},this.setFaceCulling=function(t,e){te.setCullFace(t),te.setFlipSided(e===pr)},this.allocTextureUnit=I,this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),le.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),le.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?le.setTextureCube(e,n):le.setTextureCubeDynamic(e,n)}}(),this.getCurrentRenderTarget=function(){return ft},this.setRenderTarget=function(t){ft=t,t&&void 0===ce.get(t).__webglFramebuffer&&le.setupRenderTarget(t);var e,n=t&&t.isWebGLRenderTargetCube;if(t){var i=ce.get(t);e=n?i.__webglFramebuffer[t.activeCubeFace]:i.__webglFramebuffer,yt.copy(t.scissor),wt=t.scissorTest,bt.copy(t.viewport)}else e=null,yt.copy(Mt).multiplyScalar(Ct),wt=$t,bt.copy(Rt).multiplyScalar(Ct);if(dt!==e&&(Xt.bindFramebuffer(Xt.FRAMEBUFFER,e),dt=e),te.scissor(yt),te.setScissorTest(wt),te.viewport(bt),n){var r=ce.get(t.texture);Xt.framebufferTexture2D(Xt.FRAMEBUFFER,Xt.COLOR_ATTACHMENT0,Xt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,i,r,o){if((t&&t.isWebGLRenderTarget)===!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=ce.get(t).__webglFramebuffer;if(s){var a=!1;s!==dt&&(Xt.bindFramebuffer(Xt.FRAMEBUFFER,s),a=!0);try{var c=t.texture,l=c.format,u=c.type;if(l!==qo&&N(l)!==Xt.getParameter(Xt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Ro||N(u)===Xt.getParameter(Xt.IMPLEMENTATION_COLOR_READ_TYPE)||u===No&&(Zt.get("OES_texture_float")||Zt.get("WEBGL_color_buffer_float"))||u===Uo&&Zt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Xt.checkFramebufferStatus(Xt.FRAMEBUFFER)===Xt.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&Xt.readPixels(e,n,i,r,N(l),N(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&Xt.bindFramebuffer(Xt.FRAMEBUFFER,dt)}}}}function le(t,e){this.name="",this.color=new G(t),this.density=void 0!==e?e:25e-5}function ue(t,e,n){this.name="",this.color=new G(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function he(){lt.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function fe(t,e,n,i,r){lt.call(this),this.lensFlares=[],this.positionScreen=new l,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,n,i,r)}function de(t){K.call(this),this.type="SpriteMaterial",this.color=new G(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function pe(t){lt.call(this),this.type="Sprite",this.material=void 0!==t?t:new de}function ge(){lt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function me(t,e,n,r,o,s,a,c,l,u,h,f){i.call(this,null,s,a,c,l,u,r,o,h,f),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:Co,this.minFilter=void 0!==u?u:Co,this.flipY=!1,this.generateMipmaps=!1}function ve(e,n,i){if(this.useVertexTexture=void 0===i||i,this.identityMatrix=new u,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=t.Math.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new me(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,qo,No)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===n)this.calculateInverses();else if(this.bones.length===n.length)this.boneInverses=n.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var o=0,s=this.bones.length;o<s;o++)this.boneInverses.push(new u)}}function ye(t){lt.call(this),this.type="Bone",this.skin=t}function we(t,e,n){Tt.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new u,this.bindMatrixInverse=new u;var i=[];if(this.geometry&&void 0!==this.geometry.bones){for(var r,o,s=0,a=this.geometry.bones.length;s<a;++s)o=this.geometry.bones[s],r=new ye(this),i.push(r),r.name=o.name,r.position.fromArray(o.pos),r.quaternion.fromArray(o.rotq),void 0!==o.scl&&r.scale.fromArray(o.scl);for(var s=0,a=this.geometry.bones.length;s<a;++s)o=this.geometry.bones[s],o.parent!==-1&&null!==o.parent&&void 0!==i[o.parent]?i[o.parent].add(i[s]):this.add(i[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ve(i,(void 0),n),this.matrixWorld)}function be(t){K.call(this),this.type="LineBasicMaterial",this.color=new G(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function xe(t,e,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ae(t,e)):(lt.call(this),this.type="Line",this.geometry=void 0!==t?t:new Ft,void(this.material=void 0!==e?e:new be({color:16777215*Math.random()})))}function Ae(t,e){xe.call(this,t,e),this.type="LineSegments"}function Ee(t){K.call(this),this.type="PointsMaterial",this.color=new G(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function _e(t,e){lt.call(this),this.type="Points",this.geometry=void 0!==t?t:new Ft,this.material=void 0!==e?e:new Ee({color:16777215*Math.random()})}function Se(){lt.call(this),this.type="Group"}function Ce(t,e,n,r,o,s,a,c,l){function u(){requestAnimationFrame(u),t.readyState>=t.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}i.call(this,t,e,n,r,o,s,a,c,l),this.generateMipmaps=!1;var h=this;u()}function Me(t,e,n,r,o,s,a,c,l,u,h,f){i.call(this,null,s,a,c,l,u,r,o,h,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function $e(t,e,n,r,o,s,a,c,l){i.call(this,t,e,n,r,o,s,a,c,l),this.needsUpdate=!0}function Fe(t,e,n,r,o,s,a,c,l,u){if(u=void 0!==u?u:Zo,u!==Zo&&u!==Qo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i.call(this,null,r,o,s,a,c,u,n,l),this.image={width:t,height:e},this.type=void 0!==n?n:Po,this.magFilter=void 0!==a?a:Co,this.minFilter=void 0!==c?c:Co,this.flipY=!1,this.generateMipmaps=!1}function Te(t){function e(t,e){return t-e}Ft.call(this);var n=[0,0],i={},r=["a","b","c"];if(t&&t.isGeometry){for(var o=t.vertices,s=t.faces,a=0,c=new Uint32Array(6*s.length),l=0,u=s.length;l<u;l++)for(var h=s[l],f=0;f<3;f++){n[0]=h[r[f]],n[1]=h[r[(f+1)%3]],n.sort(e);var d=n.toString();void 0===i[d]&&(c[2*a]=n[0],c[2*a+1]=n[1],i[d]=!0,a++)}for(var p=new Float32Array(2*a*3),l=0,u=a;l<u;l++)for(var f=0;f<2;f++){var g=o[c[2*l+f]],m=6*l+3*f;p[m+0]=g.x,p[m+1]=g.y,p[m+2]=g.z}this.addAttribute("position",new gt(p,3))}else if(t&&t.isBufferGeometry)if(null!==t.index){var v=t.index.array,o=t.attributes.position,y=t.groups,a=0;0===y.length&&t.addGroup(0,v.length);for(var c=new Uint32Array(2*v.length),w=0,b=y.length;w<b;++w)for(var x=y[w],A=x.start,E=x.count,l=A,_=A+E;l<_;l+=3)for(var f=0;f<3;f++){n[0]=v[l+f],n[1]=v[l+(f+1)%3],n.sort(e);var d=n.toString();void 0===i[d]&&(c[2*a]=n[0],c[2*a+1]=n[1],i[d]=!0,a++)}for(var p=new Float32Array(2*a*3),l=0,u=a;l<u;l++)for(var f=0;f<2;f++){var m=6*l+3*f,S=c[2*l+f];p[m+0]=o.getX(S),p[m+1]=o.getY(S),p[m+2]=o.getZ(S)}this.addAttribute("position",new gt(p,3))}else{for(var o=t.attributes.position.array,a=o.length/3,C=a/3,p=new Float32Array(2*a*3),l=0,u=C;l<u;l++)for(var f=0;f<3;f++){var m=18*l+6*f,M=9*l+3*f;p[m+0]=o[M],p[m+1]=o[M+1],p[m+2]=o[M+2];var S=9*l+3*((f+1)%3);p[m+3]=o[S],p[m+4]=o[S+1],p[m+5]=o[S+2]}this.addAttribute("position",new gt(p,3))}}function Le(t,e,i){Ct.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i};var r,o,s,a,c,l=this.vertices,u=this.faces,h=this.faceVertexUvs[0],f=e+1;for(r=0;r<=i;r++)for(c=r/i,o=0;o<=e;o++)a=o/e,s=t(a,c),l.push(s);var d,p,g,m,v,y,w,b;for(r=0;r<i;r++)for(o=0;o<e;o++)d=r*f+o,p=r*f+o+1,g=(r+1)*f+o+1,m=(r+1)*f+o,v=new n(o/e,r/i),y=new n((o+1)/e,r/i),w=new n((o+1)/e,(r+1)/i),b=new n(o/e,(r+1)/i),u.push(new dt(d,p,m)),h.push([v,y,b]),u.push(new dt(p,g,m)),h.push([y.clone(),w,b.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}function ke(t,e,i,r){function o(t){var e=t.normalize().clone();e.index=f.vertices.push(e)-1;var i=c(t)/2/Math.PI+.5,r=u(t)/Math.PI+.5;return e.uv=new n(i,1-r),e}function s(t,e,n){var i=new dt(t.index,e.index,n.index,[t.clone(),e.clone(),n.clone()]);f.faces.push(i),x.copy(t).add(e).add(n).divideScalar(3);var r=c(x);f.faceVertexUvs[0].push([h(t.uv,t,r),h(e.uv,e,r),h(n.uv,n,r)])}function a(t,e){for(var n=Math.pow(2,e),i=o(f.vertices[t.a]),r=o(f.vertices[t.b]),a=o(f.vertices[t.c]),c=[],l=0;l<=n;l++){
c[l]=[];for(var u=o(i.clone().lerp(a,l/n)),h=o(r.clone().lerp(a,l/n)),d=n-l,p=0;p<=d;p++)0===p&&l===n?c[l][p]=u:c[l][p]=o(u.clone().lerp(h,p/d))}for(var l=0;l<n;l++)for(var p=0;p<2*(n-l)-1;p++){var g=Math.floor(p/2);p%2===0?s(c[l][g+1],c[l+1][g],c[l][g]):s(c[l][g+1],c[l+1][g+1],c[l+1][g])}}function c(t){return Math.atan2(t.z,-t.x)}function u(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}function h(t,e,i){return i<0&&1===t.x&&(t=new n(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new n(i/2/Math.PI+.5,t.y)),t.clone()}Ct.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r},i=i||1,r=r||0;for(var f=this,d=0,p=t.length;d<p;d+=3)o(new l(t[d],t[d+1],t[d+2]));for(var g=this.vertices,m=[],d=0,v=0,p=e.length;d<p;d+=3,v++){var y=g[e[d]],w=g[e[d+1]],b=g[e[d+2]];m[v]=new dt(y.index,w.index,b.index,[y.clone(),w.clone(),b.clone()])}for(var x=new l,d=0,p=m.length;d<p;d++)a(m[d],r);for(var d=0,p=this.faceVertexUvs[0].length;d<p;d++){var A=this.faceVertexUvs[0][d],E=A[0].x,_=A[1].x,S=A[2].x,C=Math.max(E,_,S),M=Math.min(E,_,S);C>.9&&M<.1&&(E<.2&&(A[0].x+=1),_<.2&&(A[1].x+=1),S<.2&&(A[2].x+=1))}for(var d=0,p=this.vertices.length;d<p;d++)this.vertices[d].multiplyScalar(i);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new et(new l,i)}function Re(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];ke.call(this,n,i,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}function De(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];ke.call(this,n,i,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}function Be(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];ke.call(this,i,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}function Pe(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];ke.call(this,r,o,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}function Oe(t,e,i,r,o,s){function a(t,e,n){return L.vertices.push(new l(t,e,n))-1}Ct.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:i,radialSegments:r,closed:o,taper:s},e=e||64,i=i||1,r=r||8,o=o||!1,s=s||Oe.NoTaper;var c,u,h,f,d,p,g,m,v,y,w,b,x,A,E,_,S,C,M,$,F,T=[],L=this,k=e+1,R=new l,D=new Oe.FrenetFrames(t,e,o),B=D.tangents,P=D.normals,O=D.binormals;for(this.tangents=B,this.normals=P,this.binormals=O,y=0;y<k;y++)for(T[y]=[],f=y/(k-1),v=t.getPointAt(f),c=B[y],u=P[y],h=O[y],p=i*s(f),w=0;w<r;w++)d=w/r*2*Math.PI,g=-p*Math.cos(d),m=p*Math.sin(d),R.copy(v),R.x+=g*u.x+m*h.x,R.y+=g*u.y+m*h.y,R.z+=g*u.z+m*h.z,T[y][w]=a(R.x,R.y,R.z);for(y=0;y<e;y++)for(w=0;w<r;w++)b=o?(y+1)%e:y+1,x=(w+1)%r,A=T[y][w],E=T[b][w],_=T[b][x],S=T[y][x],C=new n(y/e,w/r),M=new n((y+1)/e,w/r),$=new n((y+1)/e,(w+1)/r),F=new n(y/e,(w+1)/r),this.faces.push(new dt(A,E,S)),this.faceVertexUvs[0].push([C,M,F]),this.faces.push(new dt(E,_,S)),this.faceVertexUvs[0].push([M.clone(),$,F.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}function Ie(t,e,i,r,o,s){function a(t,e,n,i,r){var o=Math.cos(t),s=Math.sin(t),a=n/e*t,c=Math.cos(a);r.x=i*(2+c)*.5*o,r.y=i*(2+c)*s*.5,r.z=i*Math.sin(a)*.5}Ft.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:r,p:o,q:s},t=t||100,e=e||40,i=Math.floor(i)||64,r=Math.floor(r)||8,o=o||2,s=s||3;var c,u,h=(r+1)*(i+1),f=r*i*2*3,d=new gt(new(f>65535?Uint32Array:Uint16Array)(f),1),p=new gt(new Float32Array(3*h),3),g=new gt(new Float32Array(3*h),3),m=new gt(new Float32Array(2*h),2),v=0,y=0,w=new l,b=new l,x=new n,A=new l,E=new l,_=new l,S=new l,C=new l;for(c=0;c<=i;++c){var M=c/i*o*Math.PI*2;for(a(M,o,s,t,A),a(M+.01,o,s,t,E),S.subVectors(E,A),C.addVectors(E,A),_.crossVectors(S,C),C.crossVectors(_,S),_.normalize(),C.normalize(),u=0;u<=r;++u){var $=u/r*Math.PI*2,F=-e*Math.cos($),T=e*Math.sin($);w.x=A.x+(F*C.x+T*_.x),w.y=A.y+(F*C.y+T*_.y),w.z=A.z+(F*C.z+T*_.z),p.setXYZ(v,w.x,w.y,w.z),b.subVectors(w,A).normalize(),g.setXYZ(v,b.x,b.y,b.z),x.x=c/i,x.y=u/r,m.setXY(v,x.x,x.y),v++}}for(u=1;u<=i;u++)for(c=1;c<=r;c++){var L=(r+1)*(u-1)+(c-1),k=(r+1)*u+(c-1),R=(r+1)*u+c,D=(r+1)*(u-1)+c;d.setX(y,L),y++,d.setX(y,k),y++,d.setX(y,D),y++,d.setX(y,k),y++,d.setX(y,R),y++,d.setX(y,D),y++}this.setIndex(d),this.addAttribute("position",p),this.addAttribute("normal",g),this.addAttribute("uv",m)}function Ne(t,e,n,i,r,o,s){Ct.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ie(t,e,n,i,r,o)),this.mergeVertices()}function Ue(t,e,n,i,r){Ft.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||100,e=e||40,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,s,a=(n+1)*(i+1),c=n*i*2*3,u=new(c>65535?Uint32Array:Uint16Array)(c),h=new Float32Array(3*a),f=new Float32Array(3*a),d=new Float32Array(2*a),p=0,g=0,m=0,v=new l,y=new l,w=new l;for(o=0;o<=n;o++)for(s=0;s<=i;s++){var b=s/i*r,x=o/n*Math.PI*2;y.x=(t+e*Math.cos(x))*Math.cos(b),y.y=(t+e*Math.cos(x))*Math.sin(b),y.z=e*Math.sin(x),h[p]=y.x,h[p+1]=y.y,h[p+2]=y.z,v.x=t*Math.cos(b),v.y=t*Math.sin(b),w.subVectors(y,v).normalize(),f[p]=w.x,f[p+1]=w.y,f[p+2]=w.z,d[g]=s/i,d[g+1]=o/n,p+=3,g+=2}for(o=1;o<=n;o++)for(s=1;s<=i;s++){var A=(i+1)*o+s-1,E=(i+1)*(o-1)+s-1,_=(i+1)*(o-1)+s,S=(i+1)*o+s;u[m]=A,u[m+1]=E,u[m+2]=S,u[m+3]=E,u[m+4]=_,u[m+5]=S,m+=6}this.setIndex(new gt(u,1)),this.addAttribute("position",new gt(h,3)),this.addAttribute("normal",new gt(f,3)),this.addAttribute("uv",new gt(d,2))}function je(t,e,n,i,r){Ct.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Ue(t,e,n,i,r))}function ze(t,e){return"undefined"==typeof t?void(t=[]):(Ct.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())}function He(t,e){e=e||{};var n=e.font;if((n&&n.isFont)===!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ct;var i=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),ze.call(this,i,e),this.type="TextGeometry"}function We(t,e,n,i,r,o,s){Ft.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;for(var a=o+s,c=(e+1)*(n+1),u=new gt(new Float32Array(3*c),3),h=new gt(new Float32Array(3*c),3),f=new gt(new Float32Array(2*c),2),d=0,p=[],g=new l,m=0;m<=n;m++){for(var v=[],y=m/n,w=0;w<=e;w++){var b=w/e,x=-t*Math.cos(i+b*r)*Math.sin(o+y*s),A=t*Math.cos(o+y*s),E=t*Math.sin(i+b*r)*Math.sin(o+y*s);g.set(x,A,E).normalize(),u.setXYZ(d,x,A,E),h.setXYZ(d,g.x,g.y,g.z),f.setXY(d,b,1-y),v.push(d),d++}p.push(v)}for(var _=[],m=0;m<n;m++)for(var w=0;w<e;w++){var S=p[m][w+1],C=p[m][w],M=p[m+1][w],$=p[m+1][w+1];(0!==m||o>0)&&_.push(S,C,$),(m!==n-1||a<Math.PI)&&_.push(C,M,$)}this.setIndex(new(u.count>65535?At:bt)(_,1)),this.addAttribute("position",u),this.addAttribute("normal",h),this.addAttribute("uv",f),this.boundingSphere=new et(new l,t)}function Ve(t,e,n,i,r,o,s){Ct.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new We(t,e,n,i,r,o,s))}function Ge(t,e,i,r,o,s){Ft.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},t=t||20,e=e||50,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,i=void 0!==i?Math.max(3,i):8,r=void 0!==r?Math.max(1,r):1;var a,c,u,h=(i+1)*(r+1),f=i*r*2*3,d=new gt(new(f>65535?Uint32Array:Uint16Array)(f),1),p=new gt(new Float32Array(3*h),3),g=new gt(new Float32Array(3*h),3),m=new gt(new Float32Array(2*h),2),v=0,y=0,w=t,b=(e-t)/r,x=new l,A=new n;for(c=0;c<=r;c++){for(u=0;u<=i;u++)a=o+u/i*s,x.x=w*Math.cos(a),x.y=w*Math.sin(a),p.setXYZ(v,x.x,x.y,x.z),g.setXYZ(v,0,0,1),A.x=(x.x/e+1)/2,A.y=(x.y/e+1)/2,m.setXY(v,A.x,A.y),v++;w+=b}for(c=0;c<r;c++){var E=c*(i+1);for(u=0;u<i;u++){a=u+E;var _=a,S=a+i+1,C=a+i+2,M=a+1;d.setX(y,_),y++,d.setX(y,S),y++,d.setX(y,C),y++,d.setX(y,_),y++,d.setX(y,C),y++,d.setX(y,M),y++}}this.setIndex(d),this.addAttribute("position",p),this.addAttribute("normal",g),this.addAttribute("uv",m)}function qe(t,e,n,i,r,o){Ct.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Ge(t,e,n,i,r,o))}function Xe(t,e,n,i){Ct.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new kt(t,e,n,i))}function Ye(e,i,r,o){Ft.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:i,phiStart:r,phiLength:o},i=Math.floor(i)||12,r=r||0,o=o||2*Math.PI,o=t.Math.clamp(o,0,2*Math.PI);var s,a,c,u=(i+1)*e.length,h=i*e.length*2*3,f=new gt(new(h>65535?Uint32Array:Uint16Array)(h),1),d=new gt(new Float32Array(3*u),3),p=new gt(new Float32Array(2*u),2),g=0,m=0,v=1/i,y=new l,w=new n;for(a=0;a<=i;a++){var b=r+a*v*o,x=Math.sin(b),A=Math.cos(b);for(c=0;c<=e.length-1;c++)y.x=e[c].x*x,y.y=e[c].y,y.z=e[c].x*A,d.setXYZ(g,y.x,y.y,y.z),w.x=a/i,w.y=c/(e.length-1),p.setXY(g,w.x,w.y),g++}for(a=0;a<i;a++)for(c=0;c<e.length-1;c++){s=c+a*e.length;var E=s,_=s+e.length,S=s+e.length+1,C=s+1;f.setX(m,E),m++,f.setX(m,_),m++,f.setX(m,C),m++,f.setX(m,_),m++,f.setX(m,S),m++,f.setX(m,C),m++}if(this.setIndex(f),this.addAttribute("position",d),this.addAttribute("uv",p),this.computeVertexNormals(),o===2*Math.PI){var M=this.attributes.normal.array,$=new l,F=new l,T=new l;for(s=i*e.length*3,a=0,c=0;a<e.length;a++,c+=3)$.x=M[c+0],$.y=M[c+1],$.z=M[c+2],F.x=M[s+c+0],F.y=M[s+c+1],F.z=M[s+c+2],T.addVectors($,F).normalize(),M[c+0]=M[s+c+0]=T.x,M[c+1]=M[s+c+1]=T.y,M[c+2]=M[s+c+2]=T.z}}function Ke(t,e,n,i){Ct.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Ye(t,e,n,i)),this.mergeVertices()}function Ze(t,e){Ct.call(this),this.type="ShapeGeometry",Array.isArray(t)===!1&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()}function Qe(e,n){function i(t,e){return t-e}Ft.call(this),n=void 0!==n?n:1;var r,o=Math.cos(t.Math.DEG2RAD*n),s=[0,0],a={},c=["a","b","c"];e&&e.isBufferGeometry?(r=new Ct,r.fromBufferGeometry(e)):r=e.clone(),r.mergeVertices(),r.computeFaceNormals();for(var l=r.vertices,u=r.faces,h=0,f=u.length;h<f;h++)for(var d=u[h],p=0;p<3;p++){s[0]=d[c[p]],s[1]=d[c[(p+1)%3]],s.sort(i);var g=s.toString();void 0===a[g]?a[g]={vert1:s[0],vert2:s[1],face1:h,face2:void 0}:a[g].face2=h}var m=[];for(var g in a){var v=a[g];if(void 0===v.face2||u[v.face1].normal.dot(u[v.face2].normal)<=o){var y=l[v.vert1];m.push(y.x),m.push(y.y),m.push(y.z),y=l[v.vert2],m.push(y.x),m.push(y.y),m.push(y.z)}}this.addAttribute("position",new gt(new Float32Array(m),3))}function Je(t,e,i,r,o,s,a,c){function u(){var t=(r+1)*(o+1);return s===!1&&(t+=(r+1)*g+r*g),t}function h(){var t=r*o*2*3;return s===!1&&(t+=r*g*3),t}function f(){var n,s,u=new l,h=new l,f=0,d=(e-t)/i;for(s=0;s<=o;s++){var g=[],m=s/o,v=m*(e-t)+t;for(n=0;n<=r;n++){var M=n/r,$=M*c+a,F=Math.sin($),T=Math.cos($);h.x=v*F,h.y=-m*i+S,h.z=v*T,w.setXYZ(A,h.x,h.y,h.z),u.set(F,d,T).normalize(),b.setXYZ(A,u.x,u.y,u.z),x.setXY(A,M,1-m),g.push(A),A++}_.push(g)}for(n=0;n<r;n++)for(s=0;s<o;s++){var L=_[s][n],k=_[s+1][n],R=_[s+1][n+1],D=_[s][n+1];y.setX(E,L),E++,y.setX(E,k),E++,y.setX(E,D),E++,y.setX(E,k),E++,y.setX(E,R),E++,y.setX(E,D),E++,f+=6}p.addGroup(C,f,0),C+=f}function d(i){var o,s,u,h=new n,f=new l,d=0,g=i===!0?t:e,m=i===!0?1:-1;for(s=A,o=1;o<=r;o++)w.setXYZ(A,0,S*m,0),b.setXYZ(A,0,m,0),h.x=.5,h.y=.5,x.setXY(A,h.x,h.y),A++;for(u=A,o=0;o<=r;o++){var v=o/r,_=v*c+a,M=Math.cos(_),$=Math.sin(_);f.x=g*$,f.y=S*m,f.z=g*M,w.setXYZ(A,f.x,f.y,f.z),b.setXYZ(A,0,m,0),h.x=.5*M+.5,h.y=.5*$*m+.5,x.setXY(A,h.x,h.y),A++}for(o=0;o<r;o++){var F=s+o,T=u+o;i===!0?(y.setX(E,T),E++,y.setX(E,T+1),E++,y.setX(E,F),E++):(y.setX(E,T+1),E++,y.setX(E,T),E++,y.setX(E,F),E++),d+=3}p.addGroup(C,d,i===!0?1:2),C+=d}Ft.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:c};var p=this;t=void 0!==t?t:20,e=void 0!==e?e:20,i=void 0!==i?i:100,r=Math.floor(r)||8,o=Math.floor(o)||1,s=void 0!==s&&s,a=void 0!==a?a:0,c=void 0!==c?c:2*Math.PI;var g=0;s===!1&&(t>0&&g++,e>0&&g++);var m=u(),v=h(),y=new gt(new(v>65535?Uint32Array:Uint16Array)(v),1),w=new gt(new Float32Array(3*m),3),b=new gt(new Float32Array(3*m),3),x=new gt(new Float32Array(2*m),2),A=0,E=0,_=[],S=i/2,C=0;f(),s===!1&&(t>0&&d(!0),e>0&&d(!1)),this.setIndex(y),this.addAttribute("position",w),this.addAttribute("normal",b),this.addAttribute("uv",x)}function tn(t,e,n,i,r,o,s,a){Ct.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new Je(t,e,n,i,r,o,s,a)),this.mergeVertices()}function en(t,e,n,i,r,o,s){tn.call(this,0,t,e,n,i,r,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}function nn(t,e,n,i,r,o,s){Je.call(this,0,t,e,n,i,r,o,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,thetaStart:o,thetaLength:s}}function rn(t,e,n,i){Ft.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r=e+2,o=new Float32Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r);s[2]=1,a[0]=.5,a[1]=.5;for(var c=0,u=3,h=2;c<=e;c++,u+=3,h+=2){var f=n+c/e*i;o[u]=t*Math.cos(f),o[u+1]=t*Math.sin(f),s[u+2]=1,a[h]=(o[u]/t+1)/2,a[h+1]=(o[u+1]/t+1)/2}for(var d=[],u=1;u<=e;u++)d.push(u,u+1,0);this.setIndex(new gt(new Uint16Array(d),1)),this.addAttribute("position",new gt(o,3)),this.addAttribute("normal",new gt(s,3)),this.addAttribute("uv",new gt(a,2)),this.boundingSphere=new et(new l,t)}function on(t,e,n,i){Ct.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new rn(t,e,n,i))}function sn(t,e,n,i,r,o){Ct.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Lt(t,e,n,i,r,o)),this.mergeVertices()}function an(){Q.call(this,{uniforms:t.UniformsUtils.merge([Dc.lights,{opacity:{value:1}}]),vertexShader:Rc.shadow_vert,fragmentShader:Rc.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})}function cn(t){Q.call(this,t),this.type="RawShaderMaterial"}function ln(e){this.uuid=t.Math.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0}function un(t){K.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new G(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new G(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function hn(t){un.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function fn(t){K.call(this),this.type="MeshPhongMaterial",this.color=new G(16777215),this.specular=new G(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new G(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function dn(t){K.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(t)}function pn(t){K.call(this),this.type="MeshLambertMaterial",this.color=new G(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new G(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function gn(t){K.call(this),this.type="LineDashedMaterial",this.color=new G(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function mn(t,e,n){var i=this,r=!1,o=0,s=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,r===!1&&void 0!==i.onStart&&i.onStart(t,o,s),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,s),o===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)}}function vn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function yn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager,this._parser=null}function wn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager,this._parser=null}function bn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function xn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function An(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function En(t,e){lt.call(this),this.type="Light",this.color=new G(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function _n(t,e,n){En.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(lt.DefaultUp),this.updateMatrix(),this.groundColor=new G(e)}function Sn(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new u}function Cn(){Sn.call(this,new Dt(50,1,.5,500))}function Mn(t,e,n,i,r,o){En.call(this,t,e),this.type="SpotLight",this.position.copy(lt.DefaultUp),this.updateMatrix(),this.target=new lt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Cn}function $n(t,e,n,i){En.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Sn(new Dt(90,1,.5,500))}function Fn(t){Sn.call(this,new Bt((-5),5,5,(-5),.5,500))}function Tn(t,e){En.call(this,t,e),this.type="DirectionalLight",this.position.copy(lt.DefaultUp),this.updateMatrix(),this.target=new lt,this.shadow=new Fn}function Ln(t,e){En.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function kn(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Rn(t,e,n,i){kn.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Dn(t,e,n,i){kn.call(this,t,e,n,i)}function Bn(t,e,n,i){kn.call(this,t,e,n,i)}function Pn(e,n,i,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===n||0===n.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=t.AnimationUtils.convertArray(n,this.TimeBufferType),this.values=t.AnimationUtils.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function On(t,e,n,i){Pn.call(this,t,e,n,i)}function In(t,e,n,i){kn.call(this,t,e,n,i)}function Nn(t,e,n,i){Pn.call(this,t,e,n,i)}function Un(t,e,n,i){Pn.call(this,t,e,n,i)}function jn(t,e,n,i){Pn.call(this,t,e,n,i)}function zn(t,e,n){Pn.call(this,t,e,n)}function Hn(t,e,n,i){Pn.call(this,t,e,n,i)}function Wn(t,e,n,i){Pn.apply(this,arguments)}function Vn(e,n,i){this.name=e,this.tracks=i,this.duration=void 0!==n?n:-1,this.uuid=t.Math.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Gn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager,this.textures={}}function qn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function Xn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Yn(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:t.DefaultLoadingManager,this.withCredentials=!1}function Kn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager,this.texturePath=""}function Zn(){}function Qn(t,e){this.v1=t,this.v2=e}function Jn(){this.curves=[],this.autoClose=!1}function ti(t,e,n,i,r,o,s,a){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a||0}function ei(t){this.points=void 0===t?[]:t}function ni(t,e,n,i){this.v0=t,this.v1=e,this.v2=n,this.v3=i}function ii(t,e,n){this.v0=t,this.v1=e,this.v2=n}function ri(){oi.apply(this,arguments),this.holes=[]}function oi(t){Jn.call(this),this.currentPoint=new n,t&&this.fromPoints(t)}function si(){this.subPaths=[],this.currentPath=null}function ai(t){this.data=t}function ci(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function li(){return void 0===Vc&&(Vc=new(window.AudioContext||window.webkitAudioContext)),Vc}function ui(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function hi(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Dt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Dt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function fi(t,e,n){lt.call(this),this.type="CubeCamera";var i=90,r=1,o=new Dt(i,r,t,e);o.up.set(0,-1,0),o.lookAt(new l(1,0,0)),this.add(o);var s=new Dt(i,r,t,e);s.up.set(0,-1,0),s.lookAt(new l((-1),0,0)),this.add(s);var c=new Dt(i,r,t,e);c.up.set(0,0,1),c.lookAt(new l(0,1,0)),this.add(c);var u=new Dt(i,r,t,e);u.up.set(0,0,-1),u.lookAt(new l(0,(-1),0)),this.add(u);var h=new Dt(i,r,t,e);h.up.set(0,-1,0),h.lookAt(new l(0,0,1)),this.add(h);var f=new Dt(i,r,t,e);f.up.set(0,-1,0),f.lookAt(new l(0,0,(-1))),this.add(f);var d={format:Go,magFilter:Fo,minFilter:Fo};this.renderTarget=new a(n,n,d),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,o,n),n.activeCubeFace=1,t.render(e,s,n),n.activeCubeFace=2,t.render(e,c,n),n.activeCubeFace=3,t.render(e,u,n),n.activeCubeFace=4,t.render(e,h,n),n.texture.generateMipmaps=i,n.activeCubeFace=5,t.render(e,f,n),t.setRenderTarget(null)}}function di(){lt.call(this),this.type="AudioListener",this.context=li(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function pi(t){lt.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function gi(t){pi.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function mi(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function vi(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function yi(t,e,n){this.path=e,this.parsedPath=n||yi.parseTrackName(e),this.node=yi.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function wi(e){this.uuid=t.Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var n={};this._indicesByUUID=n;for(var i=0,r=arguments.length;i!==r;++i)n[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}function bi(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,o=new Array(r),s={endingStart:ps,endingEnd:ps},a=0;a!==r;++a){var c=i[a].createInterpolant(null);o[a]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ls,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function xi(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ai(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t,this.dynamic=!1}function Ei(){Ft.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function _i(e,n,i,r){this.uuid=t.Math.generateUUID(),this.data=e,this.itemSize=n,this.offset=i,this.normalized=r===!0}function Si(e,n){this.uuid=t.Math.generateUUID(),this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Ci(t,e,n){Si.call(this,t,e),this.meshPerAttribute=n||1}function Mi(t,e,n){gt.call(this,t,e),this.meshPerAttribute=n||1}function $i(t,e,n,i){this.ray=new st(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Fi(t,e){return t.distance-e.distance}function Ti(t,e,n,i){if(t.visible!==!1&&(t.raycast(e,n),i===!0))for(var r=t.children,o=0,s=r.length;o<s;o++)Ti(r[o],e,n,!0)}function Li(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function ki(t){function e(t,e,n,i,r,o,s){var a=.5*(n-t),c=.5*(i-e);return(2*(e-n)+a+c)*s+(-3*(e-n)-2*a-c)*o+a*r+e}this.points=t;var n,i,r,o,s,a,c,u,h,f=[],d={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return n=(this.points.length-1)*t,i=Math.floor(n),r=n-i,f[0]=0===i?i:i-1,f[1]=i,f[2]=i>this.points.length-2?this.points.length-1:i+1,f[3]=i>this.points.length-3?this.points.length-1:i+2,a=this.points[f[0]],c=this.points[f[1]],u=this.points[f[2]],h=this.points[f[3]],o=r*r,s=r*o,d.x=e(a.x,c.x,u.x,h.x,r,o,s),d.y=e(a.y,c.y,u.y,h.y,r,o,s),d.z=e(a.z,c.z,u.z,h.z,r,o,s),d},this.getControlPointsArray=function(){var t,e,n=this.points.length,i=[];for(t=0;t<n;t++)e=this.points[t],i[t]=[e.x,e.y,e.z];return i},this.getLength=function(t){var e,n,i,r,o=0,s=0,a=0,c=new l,u=new l,h=[],f=0;for(h[0]=0,t||(t=100),i=this.points.length*t,c.copy(this.points[0]),e=1;e<i;e++)n=e/i,r=this.getPoint(n),u.copy(r),f+=u.distanceTo(c),c.copy(r),o=(this.points.length-1)*n,s=Math.floor(o),s!==a&&(h[s]=f,a=s);return h[h.length]=f,{chunks:h,total:f}},this.reparametrizeByArcLength=function(t){var e,n,i,r,o,s,a,c,u=[],h=new l,f=this.getLength();for(u.push(h.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(s=f.chunks[e]-f.chunks[e-1],a=Math.ceil(t*s/f.total),r=(e-1)/(this.points.length-1),o=e/(this.points.length-1),n=1;n<a-1;n++)i=r+n*(1/a)*(o-r),c=this.getPoint(i),u.push(h.copy(c).clone());u.push(h.copy(this.points[e]).clone())}this.points=u}}function Ri(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Di(t,e){Tt.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,i="__default",r=0,o=n-1,s=n/1;this.createAnimation(i,r,o,s),this.setAnimationWeight(i,1)}function Bi(t){lt.call(this),this.material=t,this.render=function(t){}}function Pi(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=3*a.faces.length:a&&a.isBufferGeometry&&(s=a.attributes.normal.count);var c=new Ft,l=new Et(2*s*3,3);c.addAttribute("position",l),Ae.call(this,c,new be({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Oi(t){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new Ft,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,r=1,o=32;i<o;i++,r++){var s=i/o*Math.PI*2,a=r/o*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(a),Math.sin(a),1)}e.addAttribute("position",new Et(n,3));var c=new be({fog:!1});this.cone=new Ae(e,c),this.add(this.cone),this.update()}function Ii(t){this.bones=this.getBoneList(t);for(var e=new Ct,n=0;n<this.bones.length;n++){var i=this.bones[n];i.parent&&i.parent.isBone&&(e.vertices.push(new l),e.vertices.push(new l),e.colors.push(new G(0,0,1)),e.colors.push(new G(0,1,0)))}e.dynamic=!0;var r=new be({vertexColors:Cr,depthTest:!1,depthWrite:!1,transparent:!0});Ae.call(this,e,r),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ni(t,e){this.light=t,this.light.updateMatrixWorld();var n=new We(e,4,2),i=new pt({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),
Tt.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Ui(t,e){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new G,new G];var n=new Ve(e,4,2);n.rotateX(-Math.PI/2);for(var i=0,r=8;i<r;i++)n.faces[i].color=this.colors[i<4?0:1];var o=new pt({vertexColors:Sr,wireframe:!0});this.lightSphere=new Tt(n,o),this.add(this.lightSphere),this.update()}function ji(t,e,n,i){e=e||1,n=new G(void 0!==n?n:4473924),i=new G(void 0!==i?i:8947848);for(var r=e/2,o=2*t/e,s=[],a=[],c=0,l=0,u=-t;c<=e;c++,u+=o){s.push(-t,0,u,t,0,u),s.push(u,0,-t,u,0,t);var h=c===r?n:i;h.toArray(a,l),l+=3,h.toArray(a,l),l+=3,h.toArray(a,l),l+=3,h.toArray(a,l),l+=3}var f=new Ft;f.addAttribute("position",new Et(s,3)),f.addAttribute("color",new Et(a,3));var d=new be({vertexColors:Cr});Ae.call(this,f,d)}function zi(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Ft,l=new Et(2*s*3,3);c.addAttribute("position",l),Ae.call(this,c,new be({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Hi(t,e){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var n=new Ft;n.addAttribute("position",new Et([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new be({fog:!1});this.add(new xe(n,i)),n=new Ft,n.addAttribute("position",new Et([0,0,0,0,0,1],3)),this.add(new xe(n,i)),this.update()}function Wi(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){i.vertices.push(new l),i.colors.push(new G(e)),void 0===o[t]&&(o[t]=[]),o[t].push(i.vertices.length-1)}var i=new Ct,r=new be({color:16777215,vertexColors:Sr}),o={},s=16755200,a=16711680,c=43775,u=16777215,h=3355443;e("n1","n2",s),e("n2","n4",s),e("n4","n3",s),e("n3","n1",s),e("f1","f2",s),e("f2","f4",s),e("f4","f3",s),e("f3","f1",s),e("n1","f1",s),e("n2","f2",s),e("n3","f3",s),e("n4","f4",s),e("p","n1",a),e("p","n2",a),e("p","n3",a),e("p","n4",a),e("u1","u2",c),e("u2","u3",c),e("u3","u1",c),e("c","t",u),e("p","c",h),e("cn1","cn2",h),e("cn3","cn4",h),e("cf1","cf2",h),e("cf3","cf4",h),Ae.call(this,i,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Vi(t,e){var n=void 0!==e?e:8947848;this.object=t,this.box=new tt,Tt.call(this,new sn(1,1,1),new pt({color:n,wireframe:!0}))}function Gi(t,e){void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Ft;r.setIndex(new gt(n,1)),r.addAttribute("position",new gt(i,3)),Ae.call(this,r,new be({color:e})),void 0!==t&&this.update(t)}function qi(t,e,n,i,r,o){lt.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),this.position.copy(e),this.line=new xe(Gc,new be({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Tt(qc,new pt({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}function Xi(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),i=new Ft;i.addAttribute("position",new gt(e,3)),i.addAttribute("color",new gt(n,3));var r=new be({vertexColors:Cr});Ae.call(this,i,r)}function Yi(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),t.CatmullRomCurve3.call(this,e),this.type="catmullrom",this.closed=!0}function Ki(t,e,n,i,r,o){ti.call(this,t,e,n,n,i,r,o)}function Zi(t,e,n,i,r,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new dt(t,e,n,r,o,s)}function Qi(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new _e(t,e)}function Ji(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new _e(t,e)}function tr(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function er(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function nr(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function ir(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new l(t,e,n)}function rr(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ae(new Qe(t.geometry),new be({color:void 0!==e?e:16777215}))}function or(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ae(new Te(t.geometry),new be({color:void 0!==e?e:16777215}))}function sr(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function ar(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}}(),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,i=n[t];if(void 0!==i){var r=i.indexOf(e);r!==-1&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;var i=[],r=0,o=n.length;for(r=0;r<o;r++)i[r]=n[r];for(r=0;r<o;r++)i[r].call(this,t)}}}});var cr="81",lr={LEFT:0,MIDDLE:1,RIGHT:2},ur=0,hr=1,fr=2,dr=3,pr=0,gr=1,mr=0,vr=1,yr=2,wr=0,br=1,xr=2,Ar=1,Er=2,_r=0,Sr=1,Cr=2,Mr=0,$r=1,Fr=2,Tr=3,Lr=4,kr=5,Rr={NoBlending:Mr,NormalBlending:$r,AdditiveBlending:Fr,SubtractiveBlending:Tr,MultiplyBlending:Lr,CustomBlending:kr},Dr=100,Br=101,Pr=102,Or=103,Ir=104,Nr=200,Ur=201,jr=202,zr=203,Hr=204,Wr=205,Vr=206,Gr=207,qr=208,Xr=209,Yr=210,Kr=0,Zr=1,Qr=2,Jr=3,to=4,eo=5,no=6,io=7,ro=0,oo=1,so=2,ao=0,co=1,lo=2,uo=3,ho=4,fo=300,po=301,go=302,mo=303,vo=304,yo=305,wo=306,bo=307,xo={UVMapping:fo,CubeReflectionMapping:po,CubeRefractionMapping:go,EquirectangularReflectionMapping:mo,EquirectangularRefractionMapping:vo,SphericalReflectionMapping:yo,CubeUVReflectionMapping:wo,CubeUVRefractionMapping:bo},Ao=1e3,Eo=1001,_o=1002,So={RepeatWrapping:Ao,ClampToEdgeWrapping:Eo,MirroredRepeatWrapping:_o},Co=1003,Mo=1004,$o=1005,Fo=1006,To=1007,Lo=1008,ko={NearestFilter:Co,NearestMipMapNearestFilter:Mo,NearestMipMapLinearFilter:$o,LinearFilter:Fo,LinearMipMapNearestFilter:To,LinearMipMapLinearFilter:Lo},Ro=1009,Do=1010,Bo=1011,Po=1012,Oo=1013,Io=1014,No=1015,Uo=1016,jo=1017,zo=1018,Ho=1019,Wo=1020,Vo=1021,Go=1022,qo=1023,Xo=1024,Yo=1025,Ko=qo,Zo=1026,Qo=1027,Jo=2001,ts=2002,es=2003,ns=2004,is=2100,rs=2101,os=2102,ss=2103,as=2151,cs=2200,ls=2201,us=2202,hs=2300,fs=2301,ds=2302,ps=2400,gs=2401,ms=2402,vs=0,ys=1,ws=2,bs=3e3,xs=3001,As=3007,Es=3002,_s=3003,Ss=3004,Cs=3005,Ms=3006,$s=3200,Fs=3201;t.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),i=0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,n[r]=e[19===r?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(e){return e*t.Math.DEG2RAD},radToDeg:function(e){return e*t.Math.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},n.prototype={constructor:n,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new n,e=new n),t.set(i,i),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}},i.DEFAULT_IMAGE=void 0,i.DEFAULT_MAPPING=fo,i.prototype={constructor:i,isTexture:!0,set needsUpdate(t){t===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(e){function n(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var i={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=t.Math.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:n(r)}),i.image=r.uuid}return e.textures[this.uuid]=i,i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===fo){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case Ao:t.x=t.x-Math.floor(t.x);break;case Eo:t.x=t.x<0?0:1;break;case _o:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ao:t.y=t.y-Math.floor(t.y);break;case Eo:t.y=t.y<0?0:1;break;case _o:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(i.prototype,e.prototype);var Ts=0;o.prototype={constructor:o,isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,o=.01,s=.1,a=t.elements,c=a[0],l=a[4],u=a[8],h=a[1],f=a[5],d=a[9],p=a[2],g=a[6],m=a[10];if(Math.abs(l-h)<o&&Math.abs(u-p)<o&&Math.abs(d-g)<o){if(Math.abs(l+h)<s&&Math.abs(u+p)<s&&Math.abs(d+g)<s&&Math.abs(c+f+m-3)<s)return this.set(1,0,0,0),this;e=Math.PI;var v=(c+1)/2,y=(f+1)/2,w=(m+1)/2,b=(l+h)/4,x=(u+p)/4,A=(d+g)/4;return v>y&&v>w?v<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(v),i=b/n,r=x/n):y>w?y<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(y),n=b/i,r=A/i):w<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(w),n=x/r,i=A/r),this.set(n,i,r,e),this}var E=Math.sqrt((g-d)*(g-d)+(u-p)*(u-p)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(g-d)/E,this.y=(u-p)/E,this.z=(h-l)/E,this.w=Math.acos((c+f+m-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new o,e=new o),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}},Object.assign(s.prototype,e.prototype,{isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.isWebGLRenderTargetCube=!0,c.prototype={constructor:c,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if((t&&t.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),i=Math.cos(t._y/2),r=Math.cos(t._z/2),o=Math.sin(t._x/2),s=Math.sin(t._y/2),a=Math.sin(t._z/2),c=t.order;return"XYZ"===c?(this._x=o*i*r+n*s*a,this._y=n*s*r-o*i*a,this._z=n*i*a+o*s*r,this._w=n*i*r-o*s*a):"YXZ"===c?(this._x=o*i*r+n*s*a,this._y=n*s*r-o*i*a,this._z=n*i*a-o*s*r,this._w=n*i*r+o*s*a):"ZXY"===c?(this._x=o*i*r-n*s*a,this._y=n*s*r+o*i*a,this._z=n*i*a+o*s*r,this._w=n*i*r-o*s*a):"ZYX"===c?(this._x=o*i*r-n*s*a,this._y=n*s*r+o*i*a,this._z=n*i*a-o*s*r,this._w=n*i*r+o*s*a):"YZX"===c?(this._x=o*i*r+n*s*a,this._y=n*s*r+o*i*a,this._z=n*i*a-o*s*r,this._w=n*i*r-o*s*a):"XZY"===c&&(this._x=o*i*r-n*s*a,this._y=n*s*r-o*i*a,this._z=n*i*a+o*s*r,this._w=n*i*r+o*s*a),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],s=n[1],a=n[5],c=n[9],l=n[2],u=n[6],h=n[10],f=i+a+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(u-c)*e,this._y=(o-l)*e,this._z=(s-r)*e):i>a&&i>h?(e=2*Math.sqrt(1+i-a-h),this._w=(u-c)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(o+l)/e):a>h?(e=2*Math.sqrt(1+a-i-h),this._w=(o-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(c+u)/e):(e=2*Math.sqrt(1+h-i-a),this._w=(s-r)/e,this._x=(o+l)/e,this._y=(c+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,n=1e-6;return function(i,r){return void 0===t&&(t=new l),e=i.dot(r)+1,e<n?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,s=e._x,a=e._y,c=e._z,l=e._w;return this._x=n*l+o*s+i*c-r*a,this._y=i*l+o*a+r*s-n*c,this._z=r*l+o*c+n*a-i*s,this._w=o*l-n*s-i*a-r*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,s=o*t._w+n*t._x+i*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(a,s),l=Math.sin((1-e)*c)/a,u=Math.sin(e*c)/a;return this._w=o*l+this._w*u,this._x=n*l+this._x*u,this._y=i*l+this._y*u,this._z=r*l+this._z*u,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(c,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,o,s){var a=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3],h=r[o+0],f=r[o+1],d=r[o+2],p=r[o+3];if(u!==p||a!==h||c!==f||l!==d){var g=1-s,m=a*h+c*f+l*d+u*p,v=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var w=Math.sqrt(y),b=Math.atan2(w,m*v);g=Math.sin(g*b)/w,s=Math.sin(s*b)/w}var x=s*v;if(a=a*g+h*x,c=c*g+f*x,l=l*g+d*x,u=u*g+p*x,g===1-s){var A=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=A,c*=A,l*=A,u*=A}}t[e]=a,t[e+1]=c,t[e+2]=l,t[e+3]=u}}),l.prototype={constructor:l,isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return(e&&e.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new c),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new c),this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i+r[12],this.y=r[1]*e+r[5]*n+r[9]*i+r[13],this.z=r[2]*e+r[6]*n+r[10]*i+r[14],this},applyProjection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,s=t.z,a=t.w,c=a*e+o*i-s*n,l=a*n+s*e-r*i,u=a*i+r*n-o*e,h=-r*e-o*n-s*i;return this.x=c*a+h*-r+l*-s-u*-o,this.y=l*a+h*-o+u*-r-c*-s,this.z=u*a+h*-s+c*-o-l*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new u),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new u),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new l,e=new l),t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),
this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,i=this.y,r=this.z;return this.x=i*t.z-r*t.y,this.y=r*t.x-n*t.z,this.z=n*t.y-i*t.x,this},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new l),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new l),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(e){var n=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(t.Math.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=t;t=e,e=n}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}},u.prototype={constructor:u,isMatrix4:!0,set:function(t,e,n,i,r,o,s,a,c,l,u,h,f,d,p,g){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=o,m[9]=s,m[13]=a,m[2]=c,m[6]=l,m[10]=u,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new l);var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,this}}(),makeRotationFromEuler:function(t){(t&&t.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var h=o*l,f=o*u,d=s*l,p=s*u;e[0]=a*l,e[4]=-a*u,e[8]=c,e[1]=f+d*c,e[5]=h-p*c,e[9]=-s*a,e[2]=p-h*c,e[6]=d+f*c,e[10]=o*a}else if("YXZ"===t.order){var g=a*l,m=a*u,v=c*l,y=c*u;e[0]=g+y*s,e[4]=v*s-m,e[8]=o*c,e[1]=o*u,e[5]=o*l,e[9]=-s,e[2]=m*s-v,e[6]=y+g*s,e[10]=o*a}else if("ZXY"===t.order){var g=a*l,m=a*u,v=c*l,y=c*u;e[0]=g-y*s,e[4]=-o*u,e[8]=v+m*s,e[1]=m+v*s,e[5]=o*l,e[9]=y-g*s,e[2]=-o*c,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){var h=o*l,f=o*u,d=s*l,p=s*u;e[0]=a*l,e[4]=d*c-f,e[8]=h*c+p,e[1]=a*u,e[5]=p*c+h,e[9]=f*c-d,e[2]=-c,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var w=o*a,b=o*c,x=s*a,A=s*c;e[0]=a*l,e[4]=A-w*u,e[8]=x*u+b,e[1]=u,e[5]=o*l,e[9]=-s*l,e[2]=-c*l,e[6]=b*u+x,e[10]=w-A*u}else if("XZY"===t.order){var w=o*a,b=o*c,x=s*a,A=s*c;e[0]=a*l,e[4]=-u,e[8]=c*l,e[1]=w*u+A,e[5]=o*l,e[9]=b*u-x,e[2]=x*u-b,e[6]=s*l,e[10]=A*u+w}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z,o=t.w,s=n+n,a=i+i,c=r+r,l=n*s,u=n*a,h=n*c,f=i*a,d=i*c,p=r*c,g=o*s,m=o*a,v=o*c;return e[0]=1-(f+p),e[4]=u-v,e[8]=h+m,e[1]=u+v,e[5]=1-(l+p),e[9]=d-g,e[2]=h-m,e[6]=d+g,e[10]=1-(l+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,n;return function(i,r,o){void 0===t&&(t=new l,e=new l,n=new l);var s=this.elements;return n.subVectors(i,r).normalize(),0===n.lengthSq()&&(n.z=1),t.crossVectors(o,n).normalize(),0===t.lengthSq()&&(n.z+=1e-4,t.crossVectors(o,n).normalize()),e.crossVectors(n,t),s[0]=t.x,s[4]=e.x,s[8]=n.x,s[1]=t.y,s[5]=e.y,s[9]=n.y,s[2]=t.z,s[6]=e.z,s[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],s=n[4],a=n[8],c=n[12],l=n[1],u=n[5],h=n[9],f=n[13],d=n[2],p=n[6],g=n[10],m=n[14],v=n[3],y=n[7],w=n[11],b=n[15],x=i[0],A=i[4],E=i[8],_=i[12],S=i[1],C=i[5],M=i[9],$=i[13],F=i[2],T=i[6],L=i[10],k=i[14],R=i[3],D=i[7],B=i[11],P=i[15];return r[0]=o*x+s*S+a*F+c*R,r[4]=o*A+s*C+a*T+c*D,r[8]=o*E+s*M+a*L+c*B,r[12]=o*_+s*$+a*k+c*P,r[1]=l*x+u*S+h*F+f*R,r[5]=l*A+u*C+h*T+f*D,r[9]=l*E+u*M+h*L+f*B,r[13]=l*_+u*$+h*k+f*P,r[2]=d*x+p*S+g*F+m*R,r[6]=d*A+p*C+g*T+m*D,r[10]=d*E+p*M+g*L+m*B,r[14]=d*_+p*$+g*k+m*P,r[3]=v*x+y*S+w*F+b*R,r[7]=v*A+y*C+w*T+b*D,r[11]=v*E+y*M+w*L+b*B,r[15]=v*_+y*$+w*k+b*P,this},multiplyToArray:function(t,e,n){var i=this.elements;return this.multiplyMatrices(t,e),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(){var t;return function(e,n,i){void 0===t&&(t=new l),void 0===n&&(n=0),void 0===i&&(i=e.length);for(var r=0,o=n;r<i;r+=3,o+=3)t.fromArray(e,o),t.applyMatrix4(this),t.toArray(e,o);return e}}(),applyToBuffer:function(){var t;return function(e,n,i){void 0===t&&(t=new l),void 0===n&&(n=0),void 0===i&&(i=e.length/e.itemSize);for(var r=0,o=n;r<i;r++,o++)t.x=e.getX(o),t.y=e.getY(o),t.z=e.getZ(o),t.applyMatrix4(this),e.setXYZ(t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],s=t[5],a=t[9],c=t[13],l=t[2],u=t[6],h=t[10],f=t[14],d=t[3],p=t[7],g=t[11],m=t[15];return d*(+r*a*u-i*c*u-r*s*h+n*c*h+i*s*f-n*a*f)+p*(+e*a*f-e*c*h+r*o*h-i*o*f+i*c*l-r*a*l)+g*(+e*c*u-e*s*f-r*o*u+n*o*f+r*s*l-n*c*l)+m*(-i*s*l-e*a*u+e*s*h+i*o*u-n*o*h+n*a*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new l),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],s=i[2],a=i[3],c=i[4],l=i[5],u=i[6],h=i[7],f=i[8],d=i[9],p=i[10],g=i[11],m=i[12],v=i[13],y=i[14],w=i[15],b=d*y*h-v*p*h+v*u*g-l*y*g-d*u*w+l*p*w,x=m*p*h-f*y*h-m*u*g+c*y*g+f*u*w-c*p*w,A=f*v*h-m*d*h+m*l*g-c*v*g-f*l*w+c*d*w,E=m*d*u-f*v*u-m*l*p+c*v*p+f*l*y-c*d*y,_=r*b+o*x+s*A+a*E;if(0===_){var S="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e===!0)throw new Error(S);return console.warn(S),this.identity()}var C=1/_;return n[0]=b*C,n[1]=(v*p*a-d*y*a-v*s*g+o*y*g+d*s*w-o*p*w)*C,n[2]=(l*y*a-v*u*a+v*s*h-o*y*h-l*s*w+o*u*w)*C,n[3]=(d*u*a-l*p*a-d*s*h+o*p*h+l*s*g-o*u*g)*C,n[4]=x*C,n[5]=(f*y*a-m*p*a+m*s*g-r*y*g-f*s*w+r*p*w)*C,n[6]=(m*u*a-c*y*a-m*s*h+r*y*h+c*s*w-r*u*w)*C,n[7]=(c*p*a-f*u*a+f*s*h-r*p*h-c*s*g+r*u*g)*C,n[8]=A*C,n[9]=(m*d*a-f*v*a-m*o*g+r*v*g+f*o*w-r*d*w)*C,n[10]=(c*v*a-m*l*a+m*o*h-r*v*h-c*o*w+r*l*w)*C,n[11]=(f*l*a-c*d*a-f*o*h+r*d*h+c*o*g-r*l*g)*C,n[12]=E*C,n[13]=(f*v*s-m*d*s+m*o*p-r*v*p-f*o*y+r*d*y)*C,n[14]=(m*l*s-c*v*s-m*o*u+r*v*u+c*o*y-r*l*y)*C,n[15]=(c*d*s-f*l*s+f*o*u-r*d*u-c*o*p+r*l*p)*C,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,s=t.y,a=t.z,c=r*o,l=r*s;return this.set(c*o+n,c*s-i*a,c*a+i*s,0,c*s+i*a,l*s+n,l*a-i*o,0,c*a-i*s,l*a+i*o,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t,e;return function(n,i,r){void 0===t&&(t=new l,e=new u);var o=this.elements,s=t.set(o[0],o[1],o[2]).length(),a=t.set(o[4],o[5],o[6]).length(),c=t.set(o[8],o[9],o[10]).length(),h=this.determinant();h<0&&(s=-s),n.x=o[12],n.y=o[13],n.z=o[14],e.elements.set(this.elements);var f=1/s,d=1/a,p=1/c;return e.elements[0]*=f,e.elements[1]*=f,e.elements[2]*=f,e.elements[4]*=d,e.elements[5]*=d,e.elements[6]*=d,e.elements[8]*=p,e.elements[9]*=p,e.elements[10]*=p,i.setFromRotationMatrix(e),r.x=s,r.y=a,r.z=c,this}}(),makeFrustum:function(t,e,n,i,r,o){var s=this.elements,a=2*r/(e-t),c=2*r/(i-n),l=(e+t)/(e-t),u=(i+n)/(i-n),h=-(o+r)/(o-r),f=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=c,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makePerspective:function(e,n,i,r){var o=i*Math.tan(t.Math.DEG2RAD*e*.5),s=-o,a=s*n,c=o*n;return this.makeFrustum(a,c,s,o,i,r)},makeOrthographic:function(t,e,n,i,r,o){var s=this.elements,a=1/(e-t),c=1/(n-i),l=1/(o-r),u=(e+t)*a,h=(n+i)*c,f=(o+r)*l;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*l,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},h.prototype=Object.create(i.prototype),h.prototype.constructor=h,h.prototype.isCubeTexture=!0,Object.defineProperty(h.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Ls=new i,ks=new h,Rs=[],Ds=[];z.prototype.setValue=function(t,e){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var o=n[i];o.setValue(t,e[o.id])}};var Bs=/([\w\d_]+)(\])?(\[|\.)?/g;V.prototype.setValue=function(t,e,n){var i=this.map[e];void 0!==i&&i.setValue(t,n,this.renderer)},V.prototype.set=function(t,e,n){var i=this.map[n];void 0!==i&&i.setValue(t,e[n],this.renderer)},V.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},V.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var s=e[r],a=n[s.id];a.needsUpdate!==!1&&s.setValue(t,a.value,i)}},V.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o)}return n},V.splitDynamic=function(t,e){for(var n=null,i=t.length,r=0,o=0;o!==i;++o){var s=t[o],a=e[s.id];a&&a.dynamic===!0?(null===n&&(n=[]),n.push(s)):(r<o&&(t[r]=s),++r)}return r<i&&(t.length=r),n},V.evalDynamic=function(t,e,n,i,r){for(var o=0,s=t.length;o!==s;++o){var a=e[t[o].id],c=a.onUpdateCallback;void 0!==c&&c.call(a,n,i,r)}},t.UniformsUtils={merge:function(t){for(var e={},n=0;n<t.length;n++){var i=this.clone(t[n]);for(var r in i)e[r]=i[r]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var i in t[n]){var r=t[n][i];r&&r.isColor||r&&r.isVector2||r&&r.isVector3||r&&r.isVector4||r&&r.isMatrix3||r&&r.isMatrix4||r&&r.isTexture?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}};var Ps="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",Os="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",Is="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",Ns="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",Us="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",js="\nvec3 transformed = vec3( position );\n",zs="\nvec3 objectNormal = vec3( normal );\n",Hs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",Ws="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",Vs="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n",Gs="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",qs="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",Xs="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",Ys="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Ks="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",Zs="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Qs="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",Js="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",ta="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",ea="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",na="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",ia="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",ra="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",oa="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",sa="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",aa="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",ca="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",la="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",ua="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",ha="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fa="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",da="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",pa="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",ga="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",ma="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",va="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",ya="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",wa="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",ba="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",xa="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",Aa="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",Ea="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",_a="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",Sa="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",Ca="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",Ma="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",$a="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",Fa="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",Ta="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",La="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",ka="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ra="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",Da="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Ba="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",Pa="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",Oa="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",Ia="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",Na="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",Ua="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",ja="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",za="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",Ha="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Wa="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",Va="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",Ga="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",qa="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",Xa="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Ya="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",Ka="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",Za="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",Qa="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Ja="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tc="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",ec="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",nc="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",ic="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",rc="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",oc="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",sc="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",ac="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",cc="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",lc="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",uc="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",hc="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",fc="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",dc="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",pc="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",gc="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",mc="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",vc="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",yc="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",wc="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",bc="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",xc="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Ac="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",Ec="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",_c="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",Sc="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Cc="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Mc="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",$c="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",Fc="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Tc="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Lc="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",kc="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Rc={
alphamap_fragment:Ps,alphamap_pars_fragment:Os,alphatest_fragment:Is,aomap_fragment:Ns,aomap_pars_fragment:Us,begin_vertex:js,beginnormal_vertex:zs,bsdfs:Hs,bumpmap_pars_fragment:Ws,clipping_planes_fragment:Vs,clipping_planes_pars_fragment:Gs,clipping_planes_pars_vertex:qs,clipping_planes_vertex:Xs,color_fragment:Ys,color_pars_fragment:Ks,color_pars_vertex:Zs,color_vertex:Qs,common:Js,cube_uv_reflection_fragment:ta,defaultnormal_vertex:ea,displacementmap_pars_vertex:na,displacementmap_vertex:ia,emissivemap_fragment:ra,emissivemap_pars_fragment:oa,encodings_fragment:sa,encodings_pars_fragment:aa,envmap_fragment:ca,envmap_pars_fragment:la,envmap_pars_vertex:ua,envmap_vertex:ha,fog_fragment:fa,fog_pars_fragment:da,lightmap_fragment:pa,lightmap_pars_fragment:ga,lights_lambert_vertex:ma,lights_pars:va,lights_phong_fragment:ya,lights_phong_pars_fragment:wa,lights_physical_fragment:ba,lights_physical_pars_fragment:xa,lights_template:Aa,logdepthbuf_fragment:Ea,logdepthbuf_pars_fragment:_a,logdepthbuf_pars_vertex:Sa,logdepthbuf_vertex:Ca,map_fragment:Ma,map_pars_fragment:$a,map_particle_fragment:Fa,map_particle_pars_fragment:Ta,metalnessmap_fragment:La,metalnessmap_pars_fragment:ka,morphnormal_vertex:Ra,morphtarget_pars_vertex:Da,morphtarget_vertex:Ba,normal_flip:Pa,normal_fragment:Oa,normalmap_pars_fragment:Ia,packing:Na,premultiplied_alpha_fragment:Ua,project_vertex:ja,roughnessmap_fragment:za,roughnessmap_pars_fragment:Ha,shadowmap_pars_fragment:Wa,shadowmap_pars_vertex:Va,shadowmap_vertex:Ga,shadowmask_pars_fragment:qa,skinbase_vertex:Xa,skinning_pars_vertex:Ya,skinning_vertex:Ka,skinnormal_vertex:Za,specularmap_fragment:Qa,specularmap_pars_fragment:Ja,tonemapping_fragment:tc,tonemapping_pars_fragment:ec,uv_pars_fragment:nc,uv_pars_vertex:ic,uv_vertex:rc,uv2_pars_fragment:oc,uv2_pars_vertex:sc,uv2_vertex:ac,worldpos_vertex:cc,cube_frag:lc,cube_vert:uc,depth_frag:hc,depth_vert:fc,distanceRGBA_frag:dc,distanceRGBA_vert:pc,equirect_frag:gc,equirect_vert:mc,linedashed_frag:vc,linedashed_vert:yc,meshbasic_frag:wc,meshbasic_vert:bc,meshlambert_frag:xc,meshlambert_vert:Ac,meshphong_frag:Ec,meshphong_vert:_c,meshphysical_frag:Sc,meshphysical_vert:Cc,normal_frag:Mc,normal_vert:$c,points_frag:Fc,points_vert:Tc,shadow_frag:Lc,shadow_vert:kc};G.prototype={constructor:G,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){this.r=t,this.g=t,this.b=t},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function e(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(n,i,r){if(n=t.Math.euclideanModulo(n,1),i=t.Math.clamp(i,0,1),r=t.Math.clamp(r,0,1),0===i)this.r=this.g=this.b=r;else{var o=r<=.5?r*(1+i):r+i-r*i,s=2*r-o;this.r=e(s,o,n+1/3),this.g=e(s,o,n),this.b=e(s,o,n-1/3)}return this}}(),setStyle:function(e){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,o=i[1],s=i[2];switch(o){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,n(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,n(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var a=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return n(r[5]),this.setHSL(a,c,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=i[1],h=u.length;if(3===h)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=t.ColorKeywords[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,i=t||{h:0,s:0,l:0},r=this.r,o=this.g,s=this.b,a=Math.max(r,o,s),c=Math.min(r,o,s),l=(c+a)/2;if(c===a)e=0,n=0;else{var u=a-c;switch(n=l<=.5?u/(a+c):u/(2-a-c),a){case r:e=(o-s)/u+(o<s?6:0);break;case o:e=(s-r)/u+2;break;case s:e=(r-o)/u+4}e/=6}return i.h=e,i.s=n,i.l=l,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var i=this.getHSL();return i.h+=t,i.s+=e,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}},t.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};var Dc={common:{diffuse:{value:new G(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new o(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new G(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new G(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new o(0,0,1,1)}}},Bc={basic:{uniforms:t.UniformsUtils.merge([Dc.common,Dc.aomap,Dc.fog]),vertexShader:Rc.meshbasic_vert,fragmentShader:Rc.meshbasic_frag},lambert:{uniforms:t.UniformsUtils.merge([Dc.common,Dc.aomap,Dc.lightmap,Dc.emissivemap,Dc.fog,Dc.lights,{emissive:{value:new G(0)}}]),vertexShader:Rc.meshlambert_vert,fragmentShader:Rc.meshlambert_frag},phong:{uniforms:t.UniformsUtils.merge([Dc.common,Dc.aomap,Dc.lightmap,Dc.emissivemap,Dc.bumpmap,Dc.normalmap,Dc.displacementmap,Dc.fog,Dc.lights,{emissive:{value:new G(0)},specular:{value:new G(1118481)},shininess:{value:30}}]),vertexShader:Rc.meshphong_vert,fragmentShader:Rc.meshphong_frag},standard:{uniforms:t.UniformsUtils.merge([Dc.common,Dc.aomap,Dc.lightmap,Dc.emissivemap,Dc.bumpmap,Dc.normalmap,Dc.displacementmap,Dc.roughnessmap,Dc.metalnessmap,Dc.fog,Dc.lights,{emissive:{value:new G(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rc.meshphysical_vert,fragmentShader:Rc.meshphysical_frag},points:{uniforms:t.UniformsUtils.merge([Dc.points,Dc.fog]),vertexShader:Rc.points_vert,fragmentShader:Rc.points_frag},dashed:{uniforms:t.UniformsUtils.merge([Dc.common,Dc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rc.linedashed_vert,fragmentShader:Rc.linedashed_frag},depth:{uniforms:t.UniformsUtils.merge([Dc.common,Dc.displacementmap]),vertexShader:Rc.depth_vert,fragmentShader:Rc.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:Rc.normal_vert,fragmentShader:Rc.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rc.cube_vert,fragmentShader:Rc.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Rc.equirect_vert,fragmentShader:Rc.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new l}},vertexShader:Rc.distanceRGBA_vert,fragmentShader:Rc.distanceRGBA_frag}};Bc.physical={uniforms:t.UniformsUtils.merge([Bc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Rc.meshphysical_vert,fragmentShader:Rc.meshphysical_frag},q.prototype={constructor:q,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new n;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new n;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new n;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var i=e||new n;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){var i=e||new n;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new n;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},K.prototype={constructor:K,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):"overdraw"===e?this[e]=Number(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var n=void 0===t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==$r&&(i.blending=this.blending),this.shading!==Er&&(i.shading=this.shading),this.side!==wr&&(i.side=this.side),this.vertexColors!==_r&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),i.skinning=this.skinning,i.morphTargets=this.morphTargets,n){var r=e(t.textures),o=e(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(K.prototype,e.prototype);var Pc=0;Q.prototype=Object.create(K.prototype),Q.prototype.constructor=Q,Q.prototype.isShaderMaterial=!0,Q.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=t.UniformsUtils.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Q.prototype.toJSON=function(t){var e=K.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},J.prototype=Object.create(K.prototype),J.prototype.constructor=J,J.prototype.isMeshDepthMaterial=!0,J.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},tt.prototype={constructor:tt,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=+(1/0),n=+(1/0),i=+(1/0),r=-(1/0),o=-(1/0),s=-(1/0),a=0,c=t.length;a<c;a+=3){var l=t[a],u=t[a+1],h=t[a+2];l<e&&(e=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>o&&(o=u),h>s&&(s=h)}this.min.set(e,n,i),this.max.set(r,o,s)},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new l;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(){var t=new l;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var i=e.geometry;if(void 0!==i)if(i&&i.isGeometry)for(var r=i.vertices,o=0,s=r.length;o<s;o++)t.copy(r[o]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t);else if(i&&i.isBufferGeometry){var a=i.attributes.position;if(void 0!==a){var c,l,u;a&&a.isInterleavedBufferAttribute?(c=a.data.array,l=a.offset,u=a.data.stride):(c=a.array,l=0,u=3);for(var o=l,s=c.length;o<s;o+=u)t.fromArray(c,o),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new l;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new l;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var n=e||new l;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new l),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){var n=e||new l;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new l;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),getBoundingSphere:function(){var t=new l;return function(e){var n=e||new et;return this.getCenter(n.center),n.radius=.5*this.size(t).length(),n}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new l,new l,new l,new l,new l,new l,new l,new l];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},et.prototype={constructor:et,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new tt;return function(e,n){var i=this.center;void 0!==n?i.copy(n):t.setFromPoints(e).getCenter(i);for(var r=0,o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),i=e||new l;return i.copy(t),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(t){var e=t||new tt;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},nt.prototype={constructor:nt,isMatrix3:!0,set:function(t,e,n,i,r,o,s,a,c){var l=this.elements;return l[0]=t,l[1]=i,l[2]=s,l[3]=e,l[4]=r,l[5]=a,l[6]=n,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToVector3Array:function(){var t;return function(e,n,i){void 0===t&&(t=new l),void 0===n&&(n=0),void 0===i&&(i=e.length);for(var r=0,o=n;r<i;r+=3,o+=3)t.fromArray(e,o),t.applyMatrix3(this),t.toArray(e,o);return e}}(),applyToBuffer:function(){var t;return function(e,n,i){void 0===t&&(t=new l),void 0===n&&(n=0),void 0===i&&(i=e.length/e.itemSize);for(var r=0,o=n;r<i;r++,o++)t.x=e.getX(o),t.y=e.getY(o),t.z=e.getZ(o),t.applyMatrix3(this),e.setXYZ(t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8];return e*o*l-e*s*c-n*r*l+n*s*a+i*r*c-i*o*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],o=n[1],s=n[2],a=n[3],c=n[4],l=n[5],u=n[6],h=n[7],f=n[8],d=f*c-l*h,p=l*u-f*a,g=h*a-c*u,m=r*d+o*p+s*g;if(0===m){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e===!0)throw new Error(v);return console.warn(v),this.identity()}var y=1/m;return i[0]=d*y,i[1]=(s*h-f*o)*y,i[2]=(l*o-s*c)*y,i[3]=p*y,i[4]=(f*r-s*u)*y,i[5]=(s*a-l*r)*y,i[6]=g*y,i[7]=(o*u-h*r)*y,i[8]=(c*r-o*a)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},it.prototype={constructor:it,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new l,e=new l;return function(n,i,r){var o=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t),i=e||new l;return i.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var t=new l;return function(e,n){var i=n||new l,r=e.delta(t),o=this.normal.dot(r);if(0!==o){var s=-(e.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return i.copy(r).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return i.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var e=t||new l;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new l,e=new nt;return function(n,i){var r=this.coplanarPoint(t).applyMatrix4(n),o=i||e.getNormalMatrix(n),s=this.normal.applyMatrix3(o).normalize();return this.constant=-r.dot(s),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},rt.prototype={constructor:rt,set:function(t,e,n,i,r,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this);
},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],c=n[5],l=n[6],u=n[7],h=n[8],f=n[9],d=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15];return e[0].setComponents(s-i,u-a,p-h,y-g).normalize(),e[1].setComponents(s+i,u+a,p+h,y+g).normalize(),e[2].setComponents(s+r,u+c,p+f,y+m).normalize(),e[3].setComponents(s-r,u-c,p-f,y-m).normalize(),e[4].setComponents(s-o,u-l,p-d,y-v).normalize(),e[5].setComponents(s+o,u+l,p+d,y+v).normalize(),this},intersectsObject:function(){var t=new et;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new et;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){var o=e[r].distanceToPoint(n);if(o<i)return!1}return!0},intersectsBox:function(){var t=new l,e=new l;return function(n){for(var i=this.planes,r=0;r<6;r++){var o=i[r];t.x=o.normal.x>0?n.min.x:n.max.x,e.x=o.normal.x>0?n.max.x:n.min.x,t.y=o.normal.y>0?n.min.y:n.max.y,e.y=o.normal.y>0?n.max.y:n.min.y,t.z=o.normal.z>0?n.min.z:n.max.z,e.z=o.normal.z>0?n.max.z:n.min.z;var s=o.distanceToPoint(t),a=o.distanceToPoint(e);if(s<0&&a<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},st.prototype={constructor:st,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var n=e||new l;return n.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new l;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var n=e||new l;n.subVectors(t,this.origin);var i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new l;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new l,e=new l,n=new l;return function(i,r,o,s){t.copy(i).add(r).multiplyScalar(.5),e.copy(r).sub(i).normalize(),n.copy(this.origin).sub(t);var a,c,l,u,h=.5*i.distanceTo(r),f=-this.direction.dot(e),d=n.dot(this.direction),p=-n.dot(e),g=n.lengthSq(),m=Math.abs(1-f*f);if(m>0)if(a=f*p-d,c=f*d-p,u=h*m,a>=0)if(c>=-u)if(c<=u){var v=1/m;a*=v,c*=v,l=a*(a+f*c+2*d)+c*(f*a+c+2*p)+g}else c=h,a=Math.max(0,-(f*c+d)),l=-a*a+c*(c+2*p)+g;else c=-h,a=Math.max(0,-(f*c+d)),l=-a*a+c*(c+2*p)+g;else c<=-u?(a=Math.max(0,-(-f*h+d)),c=a>0?-h:Math.min(Math.max(-h,-p),h),l=-a*a+c*(c+2*p)+g):c<=u?(a=0,c=Math.min(Math.max(-h,-p),h),l=c*(c+2*p)+g):(a=Math.max(0,-(f*h+d)),c=a>0?h:Math.min(Math.max(-h,-p),h),l=-a*a+c*(c+2*p)+g);else c=f>0?-h:h,a=Math.max(0,-(f*c+d)),l=-a*a+c*(c+2*p)+g;return o&&o.copy(this.direction).multiplyScalar(a).add(this.origin),s&&s.copy(e).multiplyScalar(c).add(t),l}}(),intersectSphere:function(){var t=new l;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,o=e.radius*e.radius;if(r>o)return null;var s=Math.sqrt(o-r),a=i-s,c=i+s;return a<0&&c<0?null:a<0?this.at(c,n):this.at(a,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,i,r,o,s,a,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,i=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,i=(t.min.x-h.x)*c),l>=0?(r=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(r=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),u>=0?(s=(t.min.z-h.z)*u,a=(t.max.z-h.z)*u):(s=(t.max.z-h.z)*u,a=(t.min.z-h.z)*u),n>a||s>i?null:((s>n||n!==n)&&(n=s),(a<i||i!==i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(){var t=new l;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new l,e=new l,n=new l,i=new l;return function(r,o,s,a,c){e.subVectors(o,r),n.subVectors(s,r),i.crossVectors(e,n);var l,u=this.direction.dot(i);if(u>0){if(a)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}t.subVectors(this.origin,r);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>u)return null;var d=-l*t.dot(i);return d<0?null:this.at(d/u,c)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},at.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],at.DefaultOrder="XYZ",at.prototype={constructor:at,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,n,i){var r=t.Math.clamp,o=e.elements,s=o[0],a=o[4],c=o[8],l=o[1],u=o[5],h=o[9],f=o[2],d=o[6],p=o[10];return n=n||this._order,"XYZ"===n?(this._y=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===n?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0)):"ZXY"===n?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s))):"ZYX"===n?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===n?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(c,p))):"XZY"===n?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+n),this._order=n,i!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new c;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},ct.prototype={constructor:ct,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!==(this.mask&t.mask)}},lt.DefaultUp=new l(0,1,0),lt.DefaultMatrixAutoUpdate=!0,Object.assign(lt.prototype,e.prototype,{isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new c;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new l(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new l(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new l(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new l;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new l(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new l(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new l(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new u;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new u;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);n!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],o=r.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){var e=t||new l;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new l,e=new l;return function(n){var i=n||new c;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,i,e),i}}(),getWorldRotation:function(){var t=new c;return function(e){var n=e||new at;return this.getWorldQuaternion(t),n.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new l,e=new c;return function(n){var i=n||new l;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,i),i}}(),getWorldDirection:function(){var t=new c;return function(e){var n=e||new l;return this.getWorldQuaternion(t),n.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&t!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var n=void 0===t||""===t,i={};n&&(t={geometries:{},materials:{},textures:{},images:{}},i.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(t).object)}if(n){var s=e(t.geometries),a=e(t.materials),c=e(t.textures),l=e(t.images);s.length>0&&(i.geometries=s),a.length>0&&(i.materials=a),c.length>0&&(i.textures=c),l.length>0&&(i.images=l)}return i.object=r,i},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}});var Oc=0;ht.prototype={constructor:ht,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){var e=t||new l;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new l;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new l;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var e=new l,n=new l;return function(i,r){e.subVectors(i,this.start),n.subVectors(this.end,this.start);var o=n.dot(n),s=n.dot(e),a=s/o;return r&&(a=t.Math.clamp(a,0,1)),a}}(),closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e),r=n||new l;return this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},ft.normal=function(){var t=new l;return function(e,n,i,r){var o=r||new l;o.subVectors(i,n),t.subVectors(e,n),o.cross(t);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),ft.barycoordFromPoint=function(){var t=new l,e=new l,n=new l;return function(i,r,o,s,a){t.subVectors(s,r),e.subVectors(o,r),n.subVectors(i,r);var c=t.dot(t),u=t.dot(e),h=t.dot(n),f=e.dot(e),d=e.dot(n),p=c*f-u*u,g=a||new l;if(0===p)return g.set(-2,-1,-1);var m=1/p,v=(f*h-u*d)*m,y=(c*d-u*h)*m;return g.set(1-v-y,y,v)}}(),ft.containsPoint=function(){var t=new l;return function(e,n,i,r){var o=ft.barycoordFromPoint(e,n,i,r,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),ft.prototype={constructor:ft,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new l,e=new l;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new l;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ft.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new it;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ft.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ft.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,n,i;return function(r,o){void 0===t&&(t=new it,e=[new ht,new ht,new ht],n=new l,i=new l);var s=o||new l,a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,n),this.containsPoint(n)===!0)s.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var c=0;c<e.length;c++){e[c].closestPointToPoint(n,!0,i);var u=n.distanceToSquared(i);u<a&&(a=u,s.copy(i))}}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},dt.prototype={constructor:dt,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},pt.prototype=Object.create(K.prototype),pt.prototype.constructor=pt,pt.prototype.isMeshBasicMaterial=!0,pt.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},gt.prototype={constructor:gt,isBufferAttribute:!0,set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new G),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];e[n++]=o.a,e[n++]=o.b,e[n++]=o.c}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,o=t.length;r<o;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new n),e[i++]=s.x,e[i++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new l),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new o),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},clone:function(){return(new this.constructor).copy(this)}},Object.assign(Ct.prototype,e.prototype,{isGeometry:!0,applyMatrix:function(t){for(var e=(new nt).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){var r=this.vertices[n];r.applyMatrix4(t)}for(var n=0,i=this.faces.length;n<i;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var s=0,a=o.vertexNormals.length;s<a;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new lt),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,n,r){var o=void 0!==a?[f[t].clone(),f[e].clone(),f[n].clone()]:[],s=void 0!==c?[i.colors[t].clone(),i.colors[e].clone(),i.colors[n].clone()]:[],l=new dt(t,e,n,o,s,r);i.faces.push(l),void 0!==u&&i.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[n].clone()]),void 0!==h&&i.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[n].clone()])}var i=this,r=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,a=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,u=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],g=0,m=0;g<s.length;g+=3,m+=2)i.vertices.push(new l(s[g],s[g+1],s[g+2])),void 0!==a&&f.push(new l(a[g],a[g+1],a[g+2])),void 0!==c&&i.colors.push(new G(c[g],c[g+1],c[g+2])),void 0!==u&&d.push(new n(u[m],u[m+1])),void 0!==h&&p.push(new n(h[m],h[m+1]));if(void 0!==r){var v=t.groups;if(v.length>0)for(var g=0;g<v.length;g++)for(var y=v[g],w=y.start,b=y.count,m=w,x=w+b;m<x;m+=3)e(r[m],r[m+1],r[m+2],y.materialIndex);else for(var g=0;g<r.length;g+=3)e(r[g],r[g+1],r[g+2])}else for(var g=0;g<s.length/3;g+=3)e(g,g+1,g+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new u;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new l,e=new l,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],s=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,s),e.subVectors(o,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,i,r,o,s;for(s=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)s[e]=new l;if(t){var a,c,u,h=new l,f=new l;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],a=this.vertices[o.a],c=this.vertices[o.b],u=this.vertices[o.c],h.subVectors(u,c),f.subVectors(a,c),h.cross(f),s[o.a].add(h),s[o.b].add(h),s[o.c].add(h)}else for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)s[e].normalize();for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i];var d=o.vertexNormals;3===d.length?(d[0].copy(s[o.a]),d[1].copy(s[o.b]),d[2].copy(s[o.c])):(d[0]=s[o.a].clone(),d[1]=s[o.b].clone(),d[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new Ct;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,a,c=this.morphNormals[t].faceNormals,u=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)s=new l,a={a:new l,b:new l,c:new l},c.push(s),u.push(a)}var h=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,a;for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],s=h.faceNormals[n],a=h.vertexNormals[n],s.copy(r.normal),a.a.copy(r.vertexNormals[0]),a.b.copy(r.vertexNormals[1]),a.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,i=e.length;n<i;n++)n>0&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new et),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if((t&&t.isGeometry)===!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var i,r=this.vertices.length,o=this.vertices,s=t.vertices,a=this.faces,c=t.faces,l=this.faceVertexUvs[0],u=t.faceVertexUvs[0],h=this.colors,f=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new nt).getNormalMatrix(e));for(var d=0,p=s.length;d<p;d++){var g=s[d],m=g.clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(var d=0,p=f.length;d<p;d++)h.push(f[d].clone());for(d=0,p=c.length;d<p;d++){var v,y,w,b=c[d],x=b.vertexNormals,A=b.vertexColors;v=new dt(b.a+r,b.b+r,b.c+r),v.normal.copy(b.normal),void 0!==i&&v.normal.applyMatrix3(i).normalize();for(var E=0,_=x.length;E<_;E++)y=x[E].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),v.vertexNormals.push(y);v.color.copy(b.color);for(var E=0,_=A.length;E<_;E++)w=A[E],v.vertexColors.push(w.clone());v.materialIndex=b.materialIndex+n,a.push(v)}for(d=0,p=u.length;d<p;d++){var S=u[d],C=[];if(void 0!==S){for(var E=0,_=S.length;E<_;E++)C.push(S[E].clone());l.push(C)}}},mergeMesh:function(t){return(t&&t.isMesh)===!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),void this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,i,r,o,s,a,c={},l=[],u=[],h=4,f=Math.pow(10,h);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],e=Math.round(t.x*f)+"_"+Math.round(t.y*f)+"_"+Math.round(t.z*f),void 0===c[e]?(c[e]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[e]];var d=[];for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],r.a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];for(var p=-1,g=0;g<3;g++)if(o[g]===o[(g+1)%3]){p=g,d.push(n);break}}for(n=d.length-1;n>=0;n--){var m=d[n];for(this.faces.splice(m,1),s=0,a=this.faceVertexUvs.length;s<a;s++)this.faceVertexUvs[s].splice(m,1)}var v=this.vertices.length-l.length;return this.vertices=l,v},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,i=0;i<n;i++)e[i]._id=i;e.sort(t);var r,o,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===n&&(r=[]),a&&a.length===n&&(o=[]);for(var i=0;i<n;i++){var c=e[i]._id;r&&r.push(s[c]),o&&o.push(a[c])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=d.length,d.push(t.getHex()),p[e])}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==m[e]?m[e]:(m[e]=g.length/2,g.push(t.x,t.y),m[e])}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(r[s]=o[s]);return r}for(var a=[],c=0;c<this.vertices.length;c++){var l=this.vertices[c];a.push(l.x,l.y,l.z)}for(var u=[],h=[],f={},d=[],p={},g=[],m={},c=0;c<this.faces.length;c++){var v=this.faces[c],y=!0,w=!1,b=void 0!==this.faceVertexUvs[0][c],x=v.normal.length()>0,A=v.vertexNormals.length>0,E=1!==v.color.r||1!==v.color.g||1!==v.color.b,_=v.vertexColors.length>0,S=0;if(S=t(S,0,0),S=t(S,1,y),S=t(S,2,w),S=t(S,3,b),S=t(S,4,x),S=t(S,5,A),S=t(S,6,E),S=t(S,7,_),u.push(S),u.push(v.a,v.b,v.c),u.push(v.materialIndex),b){var C=this.faceVertexUvs[0][c];u.push(i(C[0]),i(C[1]),i(C[2]))}if(x&&u.push(e(v.normal)),A){var M=v.vertexNormals;u.push(e(M[0]),e(M[1]),e(M[2]))}if(E&&u.push(n(v.color)),_){var $=v.vertexColors;u.push(n($[0]),n($[1]),n($[2]))}}return r.data={},r.data.vertices=a,r.data.normals=h,d.length>0&&(r.data.colors=d),g.length>0&&(r.data.uvs=[g]),r.data.faces=u,r},clone:function(){return(new Ct).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var e=t.vertices,n=0,i=e.length;n<i;n++)this.vertices.push(e[n].clone());for(var r=t.colors,n=0,i=r.length;n<i;n++)this.colors.push(r[n].clone());for(var o=t.faces,n=0,i=o.length;n<i;n++)this.faces.push(o[n].clone());for(var n=0,i=t.faceVertexUvs.length;n<i;n++){var s=t.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var a=0,c=s.length;a<c;a++){for(var l=s[a],u=[],h=0,f=l.length;h<f;h++){var d=l[h];u.push(d.clone())}this.faceVertexUvs[n].push(u)}}return this},dispose:function(){this.dispatchEvent({
type:"dispose"})}});var Ic=0;Object.assign($t.prototype,e.prototype,{computeBoundingBox:Ct.prototype.computeBoundingBox,computeBoundingSphere:Ct.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(t){for(var e,n,i=[],r=t.faces,o=0;o<r.length;o++){var s=r[o];s.materialIndex!==n&&(n=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,materialIndex:n})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,i=t.faces,r=t.vertices,o=t.faceVertexUvs,s=o[0]&&o[0].length>0,a=o[1]&&o[1].length>0,c=t.morphTargets,l=c.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]=[];this.morphTargets.position=e}var h,f=t.morphNormals,d=f.length;if(d>0){h=[];for(var u=0;u<d;u++)h[u]=[];this.morphTargets.normal=h}for(var p=t.skinIndices,g=t.skinWeights,m=p.length===r.length,v=g.length===r.length,u=0;u<i.length;u++){var y=i[u];this.vertices.push(r[y.a],r[y.b],r[y.c]);var w=y.vertexNormals;if(3===w.length)this.normals.push(w[0],w[1],w[2]);else{var b=y.normal;this.normals.push(b,b,b)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var A=y.color;this.colors.push(A,A,A)}if(s===!0){var E=o[0][u];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new n,new n,new n))}if(a===!0){var E=o[1][u];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new n,new n,new n))}for(var _=0;_<l;_++){var S=c[_].vertices;e[_].push(S[y.a],S[y.b],S[y.c])}for(var _=0;_<d;_++){var C=f[_].vertexNormals[u];h[_].push(C.a,C.b,C.c)}m&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(g[y.a],g[y.b],g[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Ft.prototype,e.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){return(e&&e.isBufferAttribute)===!1&&(e&&e.isInterleavedBufferAttribute)===!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new gt(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new nt).getNormalMatrix(t);i.applyToVector3Array(n.array),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new lt),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t&&t.isPoints||t&&t.isLine){var n=new Et(3*e.vertices.length,3),i=new Et(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Et(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t&&t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t&&t.isMesh){var n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}var i;return e.verticesNeedUpdate===!0&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new $t).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new gt(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new gt(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new gt(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new gt(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new gt(o,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var s=t.vertices.length>65535?Uint32Array:Uint16Array,a=new s(3*t.indices.length);this.setIndex(new gt(a,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var c in t.morphTargets){for(var l=[],u=t.morphTargets[c],h=0,f=u.length;h<f;h++){var d=u[h],p=new Et(3*d.length,3);l.push(p.copyVector3sArray(d))}this.morphAttributes[c]=l}if(t.skinIndices.length>0){var g=new Et(4*t.skinIndices.length,4);this.addAttribute("skinIndex",g.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new Et(4*t.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tt);var t=this.attributes.position.array;void 0!==t?this.boundingBox.setFromArray(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new tt,e=new l;return function(){null===this.boundingSphere&&(this.boundingSphere=new et);var n=this.attributes.position;if(n){var i=n.array,r=this.boundingSphere.center;t.setFromArray(i),t.getCenter(r);for(var o=0,s=0,a=i.length;s<a;s+=3)e.fromArray(i,s),o=Math.max(o,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new gt(new Float32Array(i.length),3));else for(var r=e.normal.array,o=0,s=r.length;o<s;o++)r[o]=0;var a,c,u,h=e.normal.array,f=new l,d=new l,p=new l,g=new l,m=new l;if(t){var v=t.array;0===n.length&&this.addGroup(0,v.length);for(var y=0,w=n.length;y<w;++y)for(var b=n[y],x=b.start,A=b.count,o=x,s=x+A;o<s;o+=3)a=3*v[o+0],c=3*v[o+1],u=3*v[o+2],f.fromArray(i,a),d.fromArray(i,c),p.fromArray(i,u),g.subVectors(p,d),m.subVectors(f,d),g.cross(m),h[a]+=g.x,h[a+1]+=g.y,h[a+2]+=g.z,h[c]+=g.x,h[c+1]+=g.y,h[c+2]+=g.z,h[u]+=g.x,h[u+1]+=g.y,h[u+2]+=g.z}else for(var o=0,s=i.length;o<s;o+=9)f.fromArray(i,o),d.fromArray(i,o+3),p.fromArray(i,o+6),g.subVectors(p,d),m.subVectors(f,d),g.cross(m),h[o]=g.x,h[o+1]=g.y,h[o+2]=g.z,h[o+3]=g.x,h[o+4]=g.y,h[o+5]=g.z,h[o+6]=g.x,h[o+7]=g.y,h[o+8]=g.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if((t&&t.isBufferGeometry)===!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i],o=r.array,s=t.attributes[i],a=s.array,c=s.itemSize,l=0,u=c*e;l<a.length;l++,u++)o[u]=a[l];return this},normalizeNormals:function(){for(var t,e,n,i,r=this.attributes.normal.array,o=0,s=r.length;o<s;o+=3)t=r[o],e=r[o+1],n=r[o+2],i=1/Math.sqrt(t*t+e*e+n*n),r[o]*=i,r[o+1]*=i,r[o+2]*=i},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Ft,e=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,s=r.itemSize,a=new o.constructor(e.length*s),c=0,l=0,u=0,h=e.length;u<h;u++){c=e[u]*s;for(var f=0;f<s;f++)a[l++]=o[c++]}t.addAttribute(i,new gt(a,s))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);t.data.index={type:i.array.constructor.name,array:r}}var o=this.attributes;for(var n in o){var s=o[n],r=Array.prototype.slice.call(s.array);t.data.attributes[n]={itemSize:s.itemSize,type:s.array.constructor.name,array:r,normalized:s.normalized}}var a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new Ft).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var i in n){var r=n[i];this.addAttribute(i,r.clone())}for(var o=t.groups,s=0,a=o.length;s<a;s++){var c=o[s];this.addGroup(c.start,c.count,c.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ft.MaxIndex=65535,Tt.prototype=Object.assign(Object.create(lt.prototype),{constructor:Tt,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return lt.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&t.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,n=t.length;e<n;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,n,i,r,o,s){return ft.barycoordFromPoint(t,e,n,i,y),r.multiplyScalar(y.x),o.multiplyScalar(y.y),s.multiplyScalar(y.z),r.add(o).add(s),r.clone()}function e(t,e,n,i,r,o,s){var a,c=t.material;if(a=c.side===br?n.intersectTriangle(o,r,i,!0,s):n.intersectTriangle(i,r,o,c.side!==xr,s),null===a)return null;b.copy(s),b.applyMatrix4(t.matrixWorld);var l=e.ray.origin.distanceTo(b);return l<e.near||l>e.far?null:{distance:l,point:b.clone(),object:t}}function i(n,i,r,o,s,l,u,f){a.fromArray(o,3*l),c.fromArray(o,3*u),h.fromArray(o,3*f);var d=e(n,i,r,a,c,h,w);return d&&(s&&(g.fromArray(s,2*l),m.fromArray(s,2*u),v.fromArray(s,2*f),d.uv=t(w,a,c,h,g,m,v)),d.face=new dt(l,u,f,ft.normal(a,c,h)),d.faceIndex=l),d}var r=new u,o=new st,s=new et,a=new l,c=new l,h=new l,f=new l,d=new l,p=new l,g=new n,m=new n,v=new n,y=new l,w=new l,b=new l;return function(n,l){var u=this.geometry,y=this.material,b=this.matrixWorld;if(void 0!==y&&(null===u.boundingSphere&&u.computeBoundingSphere(),s.copy(u.boundingSphere),s.applyMatrix4(b),n.ray.intersectsSphere(s)!==!1&&(r.getInverse(b),o.copy(n.ray).applyMatrix4(r),null===u.boundingBox||o.intersectsBox(u.boundingBox)!==!1))){var x,A;if(u&&u.isBufferGeometry){var E,_,S,C=u.index,M=u.attributes,$=M.position.array;if(void 0!==M.uv&&(x=M.uv.array),null!==C)for(var F=C.array,T=0,L=F.length;T<L;T+=3)E=F[T],_=F[T+1],S=F[T+2],A=i(this,n,o,$,x,E,_,S),A&&(A.faceIndex=Math.floor(T/3),l.push(A));else for(var T=0,L=$.length;T<L;T+=9)E=T/3,_=E+1,S=E+2,A=i(this,n,o,$,x,E,_,S),A&&(A.index=E,l.push(A))}else if(u&&u.isGeometry){var k,R,D,B=y&&y.isMultiMaterial,P=B===!0?y.materials:null,O=u.vertices,I=u.faces,N=u.faceVertexUvs[0];N.length>0&&(x=N);for(var U=0,j=I.length;U<j;U++){var z=I[U],H=B===!0?P[z.materialIndex]:y;if(void 0!==H){if(k=O[z.a],R=O[z.b],D=O[z.c],H.morphTargets===!0){var W=u.morphTargets,V=this.morphTargetInfluences;a.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var G=0,q=W.length;G<q;G++){var X=V[G];if(0!==X){var Y=W[G].vertices;a.addScaledVector(f.subVectors(Y[z.a],k),X),c.addScaledVector(d.subVectors(Y[z.b],R),X),h.addScaledVector(p.subVectors(Y[z.c],D),X)}}a.add(k),c.add(R),h.add(D),k=a,R=c,D=h}if(A=e(this,n,o,k,R,D,w)){if(x){var K=x[U];g.copy(K[0]),m.copy(K[1]),v.copy(K[2]),A.uv=t(w,k,R,D,g,m,v)}A.face=z,A.faceIndex=U,l.push(A)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Lt.prototype=Object.create(Ft.prototype),Lt.prototype.constructor=Lt,kt.prototype=Object.create(Ft.prototype),kt.prototype.constructor=kt,Rt.prototype=Object.create(lt.prototype),Rt.prototype.constructor=Rt,Rt.prototype.isCamera=!0,Rt.prototype.getWorldDirection=function(){var t=new c;return function(e){var n=e||new l;return this.getWorldQuaternion(t),n.set(0,0,-1).applyQuaternion(t)}}(),Rt.prototype.lookAt=function(){var t=new u;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Rt.prototype.clone=function(){return(new this.constructor).copy(this)},Rt.prototype.copy=function(t){return lt.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},Dt.prototype=Object.assign(Object.create(Rt.prototype),{constructor:Dt,isPerspectiveCamera:!0,copy:function(t){return Rt.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(e){var n=.5*this.getFilmHeight()/e;this.fov=2*t.Math.RAD2DEG*Math.atan(n),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*t.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*t.Math.RAD2DEG*Math.atan(Math.tan(.5*t.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,o){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,n=e*Math.tan(.5*t.Math.DEG2RAD*this.fov)/this.zoom,i=2*n,r=this.aspect*i,o=-.5*r,s=this.view;if(null!==s){var a=s.fullWidth,c=s.fullHeight;o+=s.offsetX*r/a,n-=s.offsetY*i/c,r*=s.width/a,i*=s.height/c}var l=this.filmOffset;0!==l&&(o+=e*l/this.getFilmWidth()),this.projectionMatrix.makeFrustum(o,o+r,n-i,n,e,this.far)},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Bt.prototype=Object.assign(Object.create(Rt.prototype),{constructor:Bt,isOrthographicCamera:!0,copy:function(t){return Rt.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,o){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,s=i+e,a=i-e;if(null!==this.view){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;r+=u*(this.view.offsetX/c),o=r+u*(this.view.width/c),s-=h*(this.view.offsetY/l),a=s-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far)},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});var Nc=0;le.prototype.isFogExp2=!0,le.prototype.clone=function(){return new le(this.color.getHex(),this.density)},le.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ue.prototype.isFog=!0,ue.prototype.clone=function(){return new ue(this.color.getHex(),this.near,this.far)},ue.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},he.prototype=Object.create(lt.prototype),he.prototype.constructor=he,he.prototype.copy=function(t,e){return lt.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},he.prototype.toJSON=function(t){var e=lt.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},fe.prototype=Object.assign(Object.create(lt.prototype),{constructor:fe,isLensFlare:!0,copy:function(t){lt.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,n,i,r,o){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===r&&(r=new G(16777215)),void 0===i&&(i=$r),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:r,blending:i})},updateLensFlares:function(){var t,e,n=this.lensFlares.length,i=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;t<n;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+i*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),de.prototype=Object.create(K.prototype),de.prototype.constructor=de,de.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},pe.prototype=Object.assign(Object.create(lt.prototype),{constructor:pe,isSprite:!0,raycast:function(){var t=new l;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.distanceSqToPoint(t),r=this.scale.x*this.scale.y/4;i>r||n.push({distance:Math.sqrt(i),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),ge.prototype=Object.assign(Object.create(lt.prototype),{constructor:ge,copy:function(t){lt.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);n.splice(i,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new l;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(e,n)}}(),update:function(){var t=new l,e=new l;return function(n){var i=this.levels;if(i.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);i[0].object.visible=!0;for(var o=1,s=i.length;o<s&&r>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<s;o++)i[o].object.visible=!1}}}(),toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),me.prototype=Object.create(i.prototype),me.prototype.constructor=me,me.prototype.isDataTexture=!0,Object.assign(ve.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new u;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t,e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new u;return function(){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(i,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ve(this.bones,this.boneInverses,this.useVertexTexture)}}),ye.prototype=Object.assign(Object.create(lt.prototype),{constructor:ye,isBone:!0,copy:function(t){return lt.prototype.copy.call(this,t),this.skin=t.skin,this}}),we.prototype=Object.assign(Object.create(Tt.prototype),{constructor:we,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],n=1/e.lengthManhattan();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var i=new o,r=this.geometry.attributes.skinWeight,t=0;t<r.count;t++){i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t);var n=1/i.lengthManhattan();n!==1/0?i.multiplyScalar(n):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(t){Tt.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),be.prototype=Object.create(K.prototype),be.prototype.constructor=be,be.prototype.isLineBasicMaterial=!0,be.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},xe.prototype=Object.assign(Object.create(lt.prototype),{constructor:xe,isLine:!0,raycast:function(){var t=new u,e=new st,n=new et;return function(i,r){var o=i.linePrecision,s=o*o,a=this.geometry,c=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(c),i.ray.intersectsSphere(n)!==!1){t.getInverse(c),e.copy(i.ray).applyMatrix4(t);var u=new l,h=new l,f=new l,d=new l,p=this&&this.isLineSegments?2:1;if(a&&a.isBufferGeometry){var g=a.index,m=a.attributes,v=m.position.array;if(null!==g)for(var y=g.array,w=0,b=y.length-1;w<b;w+=p){var x=y[w],A=y[w+1];u.fromArray(v,3*x),h.fromArray(v,3*A);var E=e.distanceSqToSegment(u,h,d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var _=i.ray.origin.distanceTo(d);_<i.near||_>i.far||r.push({distance:_,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else for(var w=0,b=v.length/3-1;w<b;w+=p){u.fromArray(v,3*w),h.fromArray(v,3*w+3);var E=e.distanceSqToSegment(u,h,d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var _=i.ray.origin.distanceTo(d);_<i.near||_>i.far||r.push({distance:_,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}else if(a&&a.isGeometry)for(var S=a.vertices,C=S.length,w=0;w<C-1;w+=p){var E=e.distanceSqToSegment(S[w],S[w+1],d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var _=i.ray.origin.distanceTo(d);_<i.near||_>i.far||r.push({distance:_,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ae.prototype=Object.assign(Object.create(xe.prototype),{constructor:Ae,isLineSegments:!0}),Ee.prototype=Object.create(K.prototype),Ee.prototype.constructor=Ee,Ee.prototype.isPointsMaterial=!0,Ee.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},_e.prototype=Object.assign(Object.create(lt.prototype),{constructor:_e,isPoints:!0,raycast:function(){var t=new u,e=new st,n=new et;return function(i,r){function o(t,n){var o=e.distanceSqToPoint(t);if(o<f){var a=e.closestPointToPoint(t);a.applyMatrix4(c);var l=i.ray.origin.distanceTo(a);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(o),point:a.clone(),index:n,face:null,object:s})}}var s=this,a=this.geometry,c=this.matrixWorld,u=i.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(c),i.ray.intersectsSphere(n)!==!1){t.getInverse(c),e.copy(i.ray).applyMatrix4(t);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=new l;if(a&&a.isBufferGeometry){var p=a.index,g=a.attributes,m=g.position.array;if(null!==p)for(var v=p.array,y=0,w=v.length;y<w;y++){var b=v[y];d.fromArray(m,3*b),o(d,b)}else for(var y=0,x=m.length/3;y<x;y++)d.fromArray(m,3*y),o(d,y)}else for(var A=a.vertices,y=0,x=A.length;y<x;y++)o(A[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Se.prototype=Object.assign(Object.create(lt.prototype),{constructor:Se}),Ce.prototype=Object.create(i.prototype),Ce.prototype.constructor=Ce,Me.prototype=Object.create(i.prototype),Me.prototype.constructor=Me,Me.prototype.isCompressedTexture=!0,$e.prototype=Object.create(i.prototype),$e.prototype.constructor=$e,Fe.prototype=Object.create(i.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isDepthTexture=!0,Te.prototype=Object.create(Ft.prototype),Te.prototype.constructor=Te,Le.prototype=Object.create(Ct.prototype),Le.prototype.constructor=Le,ke.prototype=Object.create(Ct.prototype),ke.prototype.constructor=ke,Re.prototype=Object.create(ke.prototype),Re.prototype.constructor=Re,De.prototype=Object.create(ke.prototype),De.prototype.constructor=De,Be.prototype=Object.create(ke.prototype),Be.prototype.constructor=Be,Pe.prototype=Object.create(ke.prototype),Pe.prototype.constructor=Pe,Oe.prototype=Object.create(Ct.prototype),Oe.prototype.constructor=Oe,Oe.NoTaper=function(t){return 1},Oe.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},Oe.FrenetFrames=function(e,n,i){function r(){m[0]=new l,v[0]=new l,s=Number.MAX_VALUE,a=Math.abs(g[0].x),c=Math.abs(g[0].y),h=Math.abs(g[0].z),a<=s&&(s=a,p.set(1,0,0)),c<=s&&(s=c,p.set(0,1,0)),h<=s&&p.set(0,0,1),y.crossVectors(g[0],p).normalize(),m[0].crossVectors(g[0],y),v[0].crossVectors(g[0],m[0])}var o,s,a,c,h,f,d,p=new l,g=[],m=[],v=[],y=new l,w=new u,b=n+1;for(this.tangents=g,this.normals=m,this.binormals=v,f=0;f<b;f++)d=f/(b-1),g[f]=e.getTangentAt(d),g[f].normalize();for(r(),f=1;f<b;f++)m[f]=m[f-1].clone(),v[f]=v[f-1].clone(),y.crossVectors(g[f-1],g[f]),y.length()>Number.EPSILON&&(y.normalize(),o=Math.acos(t.Math.clamp(g[f-1].dot(g[f]),-1,1)),m[f].applyMatrix4(w.makeRotationAxis(y,o))),v[f].crossVectors(g[f],m[f]);if(i)for(o=Math.acos(t.Math.clamp(m[0].dot(m[b-1]),-1,1)),o/=b-1,g[0].dot(y.crossVectors(m[0],m[b-1]))>0&&(o=-o),f=1;f<b;f++)m[f].applyMatrix4(w.makeRotationAxis(g[f],o*f)),v[f].crossVectors(g[f],m[f])},Ie.prototype=Object.create(Ft.prototype),Ie.prototype.constructor=Ie,Ne.prototype=Object.create(Ct.prototype),Ne.prototype.constructor=Ne,Ue.prototype=Object.create(Ft.prototype),Ue.prototype.constructor=Ue,je.prototype=Object.create(Ct.prototype),je.prototype.constructor=je,t.ShapeUtils={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},triangulate:function(){function e(t,e,n,i,r,o){var s,a,c,l,u,h,f,d,p;if(a=t[o[e]].x,c=t[o[e]].y,l=t[o[n]].x,u=t[o[n]].y,h=t[o[i]].x,f=t[o[i]].y,Number.EPSILON>(l-a)*(f-c)-(u-c)*(h-a))return!1;var g,m,v,y,w,b,x,A,E,_,S,C,M,$,F;for(g=h-l,m=f-u,v=a-h,y=c-f,w=l-a,b=u-c,s=0;s<r;s++)if(d=t[o[s]].x,p=t[o[s]].y,!(d===a&&p===c||d===l&&p===u||d===h&&p===f)&&(x=d-a,A=p-c,E=d-l,_=p-u,S=d-h,C=p-f,F=g*_-m*E,M=w*A-b*x,$=v*C-y*S,F>=-Number.EPSILON&&$>=-Number.EPSILON&&M>=-Number.EPSILON))return!1;return!0}return function(n,i){var r=n.length;if(r<3)return null;var o,s,a,c=[],l=[],u=[];if(t.ShapeUtils.area(n)>0)for(s=0;s<r;s++)l[s]=s;else for(s=0;s<r;s++)l[s]=r-1-s;var h=r,f=2*h;for(s=h-1;h>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),i?u:c;if(o=s,h<=o&&(o=0),s=o+1,h<=s&&(s=0),a=s+1,h<=a&&(a=0),e(n,o,s,a,h,l)){var d,p,g,m,v;for(d=l[o],p=l[s],g=l[a],c.push([n[d],n[p],n[g]]),u.push([l[o],l[s],l[a]]),m=s,v=s+1;v<h;m++,v++)l[m]=l[v];h--,f=2*h}}return i?u:c}}(),triangulateShape:function(e,n){function i(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop();
}function r(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function o(t,e,n,i,o){var s=e.x-t.x,a=e.y-t.y,c=i.x-n.x,l=i.y-n.y,u=t.x-n.x,h=t.y-n.y,f=a*c-s*l,d=a*u-s*h;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];if(p=l*u-c*h,p<0||p>f)return[]}else{if(d>0||d<f)return[];if(p=l*u-c*h,p>0||p<f)return[]}if(0===p)return!o||0!==d&&d!==f?[t]:[];if(p===f)return!o||0!==d&&d!==f?[e]:[];if(0===d)return[n];if(d===f)return[i];var g=p/f;return[{x:t.x+g*s,y:t.y+g*a}]}if(0!==d||l*u!==c*h)return[];var m=0===s&&0===a,v=0===c&&0===l;if(m&&v)return t.x!==n.x||t.y!==n.y?[]:[t];if(m)return r(n,i,t)?[t]:[];if(v)return r(t,e,n)?[n]:[];var y,w,b,x,A,E,_,S;return 0!==s?(t.x<e.x?(y=t,b=t.x,w=e,x=e.x):(y=e,b=e.x,w=t,x=t.x),n.x<i.x?(A=n,_=n.x,E=i,S=i.x):(A=i,_=i.x,E=n,S=n.x)):(t.y<e.y?(y=t,b=t.y,w=e,x=e.y):(y=e,b=e.y,w=t,x=t.y),n.y<i.y?(A=n,_=n.y,E=i,S=i.y):(A=i,_=i.y,E=n,S=n.y)),b<=_?x<_?[]:x===_?o?[]:[A]:x<=S?[A,w]:[A,E]:b>S?[]:b===S?o?[]:[y]:x<=S?[y,w]:[y,E]}function s(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=n.x-t.x,a=n.y-t.y,c=i.x-t.x,l=i.y-t.y,u=r*a-o*s,h=r*l-o*c;if(Math.abs(u)>Number.EPSILON){var f=c*a-l*s;return u>0?h>=0&&f>=0:h>=0||f>=0}return h>0}function a(t,e){function n(t,e){var n=y.length-1,i=t-1;i<0&&(i=n);var r=t+1;r>n&&(r=0);var o=s(y[t],y[i],y[r],a[e]);if(!o)return!1;var c=a.length-1,l=e-1;l<0&&(l=c);var u=e+1;return u>c&&(u=0),o=s(a[e],a[l],a[u],y[t]),!!o}function i(t,e){var n,i,r;for(n=0;n<y.length;n++)if(i=n+1,i%=y.length,r=o(t,e,y[n],y[i],!0),r.length>0)return!0;return!1}function r(t,n){var i,r,s,a,c;for(i=0;i<w.length;i++)for(r=e[w[i]],s=0;s<r.length;s++)if(a=s+1,a%=r.length,c=o(t,n,r[s],r[a],!0),c.length>0)return!0;return!1}for(var a,c,l,u,h,f,d,p,g,m,v,y=t.concat(),w=[],b=[],x=0,A=e.length;x<A;x++)w.push(x);for(var E=0,_=2*w.length;w.length>0;){if(_--,_<0){console.log("Infinite Loop! Holes left:"+w.length+", Probably Hole outside Shape!");break}for(l=E;l<y.length;l++){u=y[l],c=-1;for(var x=0;x<w.length;x++)if(f=w[x],d=u.x+":"+u.y+":"+f,void 0===b[d]){a=e[f];for(var S=0;S<a.length;S++)if(h=a[S],n(l,S)&&!i(u,h)&&!r(u,h)){c=S,w.splice(x,1),p=y.slice(0,l+1),g=y.slice(l),m=a.slice(c),v=a.slice(0,c+1),y=p.concat(m).concat(v).concat(g),E=l;break}if(c>=0)break;b[d]=!0}if(c>=0)break}}return y}i(e),n.forEach(i);for(var c,l,u,h,f,d,p={},g=e.concat(),m=0,v=n.length;m<v;m++)Array.prototype.push.apply(g,n[m]);for(c=0,l=g.length;c<l;c++)f=g[c].x+":"+g[c].y,void 0!==p[f]&&console.warn("THREE.ShapeUtils: Duplicate point",f,c),p[f]=c;var y=a(e,n),w=t.ShapeUtils.triangulate(y,!1);for(c=0,l=w.length;c<l;c++)for(h=w[c],u=0;u<3;u++)f=h[u].x+":"+h[u].y,d=p[f],void 0!==d&&(h[u]=d);return w.concat()},isClockWise:function(e){return t.ShapeUtils.area(e)<0},b2:function(){function t(t,e){var n=1-t;return n*n*e}function e(t,e){return 2*(1-t)*t*e}function n(t,e){return t*t*e}return function(i,r,o,s){return t(i,r)+e(i,o)+n(i,s)}}(),b3:function(){function t(t,e){var n=1-t;return n*n*n*e}function e(t,e){var n=1-t;return 3*n*n*t*e}function n(t,e){var n=1-t;return 3*n*t*t*e}function i(t,e){return t*t*t*e}return function(r,o,s,a,c){return t(r,o)+e(r,s)+n(r,a)+i(r,c)}}()},ze.prototype=Object.create(Ct.prototype),ze.prototype.constructor=ze,ze.prototype.addShapeList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];this.addShape(r,e)}},ze.prototype.addShape=function(e,i){function r(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function o(t,e,i){var r,o,s=1,a=t.x-e.x,c=t.y-e.y,l=i.x-t.x,u=i.y-t.y,h=a*a+c*c,f=a*u-c*l;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(l*l+u*u),g=e.x-c/d,m=e.y+a/d,v=i.x-u/p,y=i.y+l/p,w=((v-g)*u-(y-m)*l)/(a*u-c*l);r=g+a*w-t.x,o=m+c*w-t.y;var b=r*r+o*o;if(b<=2)return new n(r,o);s=Math.sqrt(b/2)}else{var x=!1;a>Number.EPSILON?l>Number.EPSILON&&(x=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(c)===Math.sign(u)&&(x=!0),x?(r=-c,o=a,s=Math.sqrt(h)):(r=a,o=c,s=Math.sqrt(h/2))}return new n(r/s,o/s)}function s(){if(A){var t=0,e=V*t;for(X=0;X<G;X++)W=O[X],h(W[2]+e,W[1]+e,W[0]+e);for(t=_+2*x,e=V*t,X=0;X<G;X++)W=O[X],h(W[0]+e,W[1]+e,W[2]+e)}else{for(X=0;X<G;X++)W=O[X],h(W[2],W[1],W[0]);for(X=0;X<G;X++)W=O[X],h(W[0]+V*_,W[1]+V*_,W[2]+V*_)}}function a(){var t=0;for(c(I,t),t+=I.length,F=0,T=B.length;F<T;F++)$=B[F],c($,t),t+=$.length}function c(t,e){var n,i;for(X=t.length;--X>=0;){n=X,i=X-1,i<0&&(i=t.length-1);var r=0,o=_+2*x;for(r=0;r<o;r++){var s=V*r,a=V*(r+1),c=e+n+s,l=e+i+s,u=e+i+a,h=e+n+a;f(c,l,u,h,t,r,o,n,i)}}}function u(t,e,n){L.vertices.push(new l(t,e,n))}function h(t,e,n){t+=k,e+=k,n+=k,L.faces.push(new dt(t,e,n,null,null,0));var i=M.generateTopUV(L,t,e,n);L.faceVertexUvs[0].push(i)}function f(t,e,n,i,r,o,s,a,c){t+=k,e+=k,n+=k,i+=k,L.faces.push(new dt(t,e,i,null,null,1)),L.faces.push(new dt(e,n,i,null,null,1));var l=M.generateSideWallUV(L,t,e,n,i);L.faceVertexUvs[0].push([l[0],l[1],l[3]]),L.faceVertexUvs[0].push([l[1],l[2],l[3]])}var d,p,g,m,v,y=void 0!==i.amount?i.amount:100,w=void 0!==i.bevelThickness?i.bevelThickness:6,b=void 0!==i.bevelSize?i.bevelSize:w-2,x=void 0!==i.bevelSegments?i.bevelSegments:3,A=void 0===i.bevelEnabled||i.bevelEnabled,E=void 0!==i.curveSegments?i.curveSegments:12,_=void 0!==i.steps?i.steps:1,S=i.extrudePath,C=!1,M=void 0!==i.UVGenerator?i.UVGenerator:ze.WorldUVGenerator;S&&(d=S.getSpacedPoints(_),C=!0,A=!1,p=void 0!==i.frames?i.frames:new Oe.FrenetFrames(S,_,(!1)),g=new l,m=new l,v=new l),A||(x=0,w=0,b=0);var $,F,T,L=this,k=this.vertices.length,R=e.extractPoints(E),D=R.shape,B=R.holes,P=!t.ShapeUtils.isClockWise(D);if(P){for(D=D.reverse(),F=0,T=B.length;F<T;F++)$=B[F],t.ShapeUtils.isClockWise($)&&(B[F]=$.reverse());P=!1}var O=t.ShapeUtils.triangulateShape(D,B),I=D;for(F=0,T=B.length;F<T;F++)$=B[F],D=D.concat($);for(var N,U,j,z,H,W,V=D.length,G=O.length,q=[],X=0,Y=I.length,K=Y-1,Z=X+1;X<Y;X++,K++,Z++)K===Y&&(K=0),Z===Y&&(Z=0),q[X]=o(I[X],I[K],I[Z]);var Q,J=[],tt=q.concat();for(F=0,T=B.length;F<T;F++){for($=B[F],Q=[],X=0,Y=$.length,K=Y-1,Z=X+1;X<Y;X++,K++,Z++)K===Y&&(K=0),Z===Y&&(Z=0),Q[X]=o($[X],$[K],$[Z]);J.push(Q),tt=tt.concat(Q)}for(N=0;N<x;N++){for(j=N/x,z=w*Math.cos(j*Math.PI/2),U=b*Math.sin(j*Math.PI/2),X=0,Y=I.length;X<Y;X++)H=r(I[X],q[X],U),u(H.x,H.y,-z);for(F=0,T=B.length;F<T;F++)for($=B[F],Q=J[F],X=0,Y=$.length;X<Y;X++)H=r($[X],Q[X],U),u(H.x,H.y,-z)}for(U=b,X=0;X<V;X++)H=A?r(D[X],tt[X],U):D[X],C?(m.copy(p.normals[0]).multiplyScalar(H.x),g.copy(p.binormals[0]).multiplyScalar(H.y),v.copy(d[0]).add(m).add(g),u(v.x,v.y,v.z)):u(H.x,H.y,0);var et;for(et=1;et<=_;et++)for(X=0;X<V;X++)H=A?r(D[X],tt[X],U):D[X],C?(m.copy(p.normals[et]).multiplyScalar(H.x),g.copy(p.binormals[et]).multiplyScalar(H.y),v.copy(d[et]).add(m).add(g),u(v.x,v.y,v.z)):u(H.x,H.y,y/_*et);for(N=x-1;N>=0;N--){for(j=N/x,z=w*Math.cos(j*Math.PI/2),U=b*Math.sin(j*Math.PI/2),X=0,Y=I.length;X<Y;X++)H=r(I[X],q[X],U),u(H.x,H.y,y+z);for(F=0,T=B.length;F<T;F++)for($=B[F],Q=J[F],X=0,Y=$.length;X<Y;X++)H=r($[X],Q[X],U),C?u(H.x,H.y+d[_-1].y,d[_-1].x+z):u(H.x,H.y,y+z)}s(),a()},ze.WorldUVGenerator={generateTopUV:function(t,e,i,r){var o=t.vertices,s=o[e],a=o[i],c=o[r];return[new n(s.x,s.y),new n(a.x,a.y),new n(c.x,c.y)]},generateSideWallUV:function(t,e,i,r,o){var s=t.vertices,a=s[e],c=s[i],l=s[r],u=s[o];return Math.abs(a.y-c.y)<.01?[new n(a.x,1-a.z),new n(c.x,1-c.z),new n(l.x,1-l.z),new n(u.x,1-u.z)]:[new n(a.y,1-a.z),new n(c.y,1-c.z),new n(l.y,1-l.z),new n(u.y,1-u.z)]}},He.prototype=Object.create(ze.prototype),He.prototype.constructor=He,We.prototype=Object.create(Ft.prototype),We.prototype.constructor=We,Ve.prototype=Object.create(Ct.prototype),Ve.prototype.constructor=Ve,Ge.prototype=Object.create(Ft.prototype),Ge.prototype.constructor=Ge,qe.prototype=Object.create(Ct.prototype),qe.prototype.constructor=qe,Xe.prototype=Object.create(Ct.prototype),Xe.prototype.constructor=Xe,Ye.prototype=Object.create(Ft.prototype),Ye.prototype.constructor=Ye,Ke.prototype=Object.create(Ct.prototype),Ke.prototype.constructor=Ke,Ze.prototype=Object.create(Ct.prototype),Ze.prototype.constructor=Ze,Ze.prototype.addShapeList=function(t,e){for(var n=0,i=t.length;n<i;n++)this.addShape(t[n],e);return this},Ze.prototype.addShape=function(e,n){void 0===n&&(n={});var i,r,o,s=void 0!==n.curveSegments?n.curveSegments:12,a=n.material,c=void 0===n.UVGenerator?ze.WorldUVGenerator:n.UVGenerator,u=this.vertices.length,h=e.extractPoints(s),f=h.shape,d=h.holes,p=!t.ShapeUtils.isClockWise(f);if(p){for(f=f.reverse(),i=0,r=d.length;i<r;i++)o=d[i],t.ShapeUtils.isClockWise(o)&&(d[i]=o.reverse());p=!1}var g=t.ShapeUtils.triangulateShape(f,d);for(i=0,r=d.length;i<r;i++)o=d[i],f=f.concat(o);var m,v,y=f.length,w=g.length;for(i=0;i<y;i++)m=f[i],this.vertices.push(new l(m.x,m.y,0));for(i=0;i<w;i++){v=g[i];var b=v[0]+u,x=v[1]+u,A=v[2]+u;this.faces.push(new dt(b,x,A,null,null,a)),this.faceVertexUvs[0].push(c.generateTopUV(this,b,x,A))}},Qe.prototype=Object.create(Ft.prototype),Qe.prototype.constructor=Qe,Je.prototype=Object.create(Ft.prototype),Je.prototype.constructor=Je,tn.prototype=Object.create(Ct.prototype),tn.prototype.constructor=tn,en.prototype=Object.create(tn.prototype),en.prototype.constructor=en,nn.prototype=Object.create(Ft.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(Ft.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(Ct.prototype),on.prototype.constructor=on,sn.prototype=Object.create(Ct.prototype),sn.prototype.constructor=sn;var Uc=Object.freeze({WireframeGeometry:Te,ParametricGeometry:Le,TetrahedronGeometry:Re,OctahedronGeometry:De,IcosahedronGeometry:Be,DodecahedronGeometry:Pe,PolyhedronGeometry:ke,TubeGeometry:Oe,TorusKnotGeometry:Ne,TorusKnotBufferGeometry:Ie,TorusGeometry:je,TorusBufferGeometry:Ue,TextGeometry:He,SphereBufferGeometry:We,SphereGeometry:Ve,RingGeometry:qe,RingBufferGeometry:Ge,PlaneBufferGeometry:kt,PlaneGeometry:Xe,LatheGeometry:Ke,LatheBufferGeometry:Ye,ShapeGeometry:Ze,ExtrudeGeometry:ze,EdgesGeometry:Qe,ConeGeometry:en,ConeBufferGeometry:nn,CylinderGeometry:tn,CylinderBufferGeometry:Je,CircleBufferGeometry:rn,CircleGeometry:on,BoxBufferGeometry:Lt,BoxGeometry:sn});an.prototype=Object.create(Q.prototype),an.prototype.constructor=an,an.prototype.isShadowMaterial=!0,cn.prototype=Object.create(Q.prototype),cn.prototype.constructor=cn,cn.prototype.isRawShaderMaterial=!0,ln.prototype={constructor:ln,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,i=0,r=n.length;i<r;i++){var o=n[i].toJSON(t);delete o.metadata,e.materials.push(o)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},un.prototype=Object.create(K.prototype),un.prototype.constructor=un,un.prototype.isMeshStandardMaterial=!0,un.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},hn.prototype=Object.create(un.prototype),hn.prototype.constructor=hn,hn.prototype.isMeshPhysicalMaterial=!0,hn.prototype.copy=function(t){return un.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},fn.prototype=Object.create(K.prototype),fn.prototype.constructor=fn,fn.prototype.isMeshPhongMaterial=!0,fn.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},dn.prototype=Object.create(K.prototype),dn.prototype.constructor=dn,dn.prototype.isMeshNormalMaterial=!0,dn.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},pn.prototype=Object.create(K.prototype),pn.prototype.constructor=pn,pn.prototype.isMeshLambertMaterial=!0,pn.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gn.prototype=Object.create(K.prototype),gn.prototype.constructor=gn,gn.prototype.isLineDashedMaterial=!0,gn.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var jc=Object.freeze({ShadowMaterial:an,SpriteMaterial:de,RawShaderMaterial:cn,ShaderMaterial:Q,PointsMaterial:Ee,MultiMaterial:ln,MeshPhysicalMaterial:hn,MeshStandardMaterial:un,MeshPhongMaterial:fn,MeshNormalMaterial:dn,MeshLambertMaterial:pn,MeshDepthMaterial:J,MeshBasicMaterial:pt,LineDashedMaterial:gn,LineBasicMaterial:be,Material:K});t.Cache={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},t.DefaultLoadingManager=new mn,Object.assign(vn.prototype,{load:function(e,n,i,r){void 0!==this.path&&(e=this.path+e);var o=this,s=t.Cache.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s;var a=new XMLHttpRequest;return a.open("GET",e,!0),a.addEventListener("load",function(i){var s=i.target.response;t.Cache.add(e,s),200===this.status?(n&&n(s),o.manager.itemEnd(e)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),n&&n(s),o.manager.itemEnd(e)):(r&&r(i),o.manager.itemError(e))},!1),void 0!==i&&a.addEventListener("progress",function(t){i(t)},!1),a.addEventListener("error",function(t){r&&r(t),o.manager.itemError(e)},!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType("text/plain"),a.send(null),o.manager.itemStart(e),a},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this}}),Object.assign(yn.prototype,{load:function(t,e,n,i){function r(r){c.load(t[r],function(t){var n=o._parser(t,!0);s[r]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=Fo),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,i)}var o=this,s=[],a=new Me;a.image=s;var c=new vn(this.manager);if(c.setPath(this.path),c.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,u=0,h=t.length;u<h;++u)r(u);else c.load(t,function(t){var n=o._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,r=0;r<i;r++){s[r]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)s[r].mipmaps.push(n.mipmaps[r*n.mipmapCount+c]),s[r].format=n.format,s[r].width=n.width,s[r].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Fo),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,i);return a},setPath:function(t){return this.path=t,this}});var zc=wn;Object.assign(wn.prototype,{load:function(t,e,n,i){var r=this,o=new me,s=new vn(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var n=r._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Eo,o.wrapT=void 0!==n.wrapT?n.wrapT:Eo,o.magFilter=void 0!==n.magFilter?n.magFilter:Fo,o.minFilter=void 0!==n.minFilter?n.minFilter:Lo,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Fo),o.needsUpdate=!0,e&&e(o,n))},n,i),o}}),Object.assign(bn.prototype,{load:function(t,e,n,i){var r=this,o=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(o.onload=function(){o.onload=null,URL.revokeObjectURL(o.src),e&&e(o),r.manager.itemEnd(t)},0===t.indexOf("data:"))o.src=t;else{var s=new vn;s.setPath(this.path),s.setResponseType("blob"),s.setWithCredentials(this.withCredentials),s.load(t,function(t){o.src=URL.createObjectURL(t)},n,i)}return r.manager.itemStart(t),o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(xn.prototype,{load:function(t,e,n,i){function r(n){s.load(t[n],function(t){o.images[n]=t,a++,6===a&&(o.needsUpdate=!0,e&&e(o))},void 0,i)}var o=new h,s=new bn(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);for(var a=0,c=0;c<t.length;++c)r(c);return o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(An.prototype,{load:function(t,e,n,r){var o=new i,s=new bn(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setWithCredentials(this.withCredentials),s.setPath(this.path),s.load(t,function(n){var i=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);o.format=i?Go:qo,o.image=n,o.needsUpdate=!0,void 0!==e&&e(o)},n,r),o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this}}),En.prototype=Object.assign(Object.create(lt.prototype),{constructor:En,isLight:!0,copy:function(t){return lt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),_n.prototype=Object.assign(Object.create(En.prototype),{constructor:_n,isHemisphereLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Sn.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Cn.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Cn,isSpotLightShadow:!0,update:function(e){var n=2*t.Math.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||500,o=this.camera;n===o.fov&&i===o.aspect&&r===o.far||(o.fov=n,o.aspect=i,o.far=r,o.updateProjectionMatrix())}}),Mn.prototype=Object.assign(Object.create(En.prototype),{constructor:Mn,isSpotLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),$n.prototype=Object.assign(Object.create(En.prototype),{constructor:$n,isPointLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Fn.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Fn}),Tn.prototype=Object.assign(Object.create(En.prototype),{constructor:Tn,isDirectionalLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ln.prototype=Object.assign(Object.create(En.prototype),{constructor:Ln,isAmbientLight:!0}),t.AnimationUtils={arraySlice:function(e,n,i){return t.AnimationUtils.isTypedArray(e)?new e.constructor(e.subarray(n,i)):e.slice(n,i)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(e),i},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,s=0;s!==i;++o)for(var a=n[o]*e,c=0;c!==e;++c)r[s++]=t[a+c];return r},flattenJSON:function(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];)o=t[r++];if(void 0!==o){var s=o[i];if(void 0!==s)if(Array.isArray(s)){do s=o[i],void 0!==s&&(e.push(o.time),n.push.apply(n,s)),o=t[r++];while(void 0!==o)}else if(void 0!==s.toArray){do s=o[i],void 0!==s&&(e.push(o.time),s.toArray(n,n.length)),o=t[r++];while(void 0!==o)}else do s=o[i],void 0!==s&&(e.push(o.time),n.push(s)),o=t[r++];while(void 0!==o)}}},kn.prototype={constructor:kn,evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}{if(t>=r)break t;var a=e[1];t<a&&(n=2,r=a);for(var s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}}for(;n<o;){var c=n+o>>>1;t<e[c]?o=c:n=c+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,o=0;o!==i;++o)e[o]=n[r+o];return e},interpolate_:function(t,e,n,i){throw new Error("call to abstract method")},intervalChanged_:function(t,e,n){}},Object.assign(kn.prototype,{beforeStart_:kn.prototype.copySampleValue_,afterEnd_:kn.prototype.copySampleValue_}),Rn.prototype=Object.assign(Object.create(kn.prototype),{constructor:Rn,DefaultSettings_:{endingStart:ps,endingEnd:ps},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case gs:r=t,s=2*e-n;break;case ms:r=i.length-2,s=e+i[r]-i[r+1];break;default:r=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case gs:o=t,a=2*n-e;break;case ms:o=1,a=n+i[1]-i[0];break;default:o=t-1,a=e}var c=.5*(n-e),l=this.valueSize;this._weightPrev=c/(e-s),this._weightNext=c/(a-n),this._offsetPrev=r*l,this._offsetNext=o*l},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(i-e),p=d*d,g=p*d,m=-h*g+2*h*p-h*d,v=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*g+(1.5+f)*p+.5*d,w=f*g-f*p,b=0;b!==s;++b)r[b]=m*o[l+b]+v*o[c+b]+y*o[a+b]+w*o[u+b];return r}}),Dn.prototype=Object.assign(Object.create(kn.prototype),{constructor:Dn,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,l=(n-e)/(i-e),u=1-l,h=0;h!==s;++h)r[h]=o[c+h]*u+o[a+h]*l;return r}}),Bn.prototype=Object.assign(Object.create(kn.prototype),{constructor:Bn,interpolate_:function(t,e,n,i){return this.copySampleValue_(t-1)}});var Hc;Hc={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:fs,InterpolantFactoryMethodDiscrete:function(t){return new Bn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Dn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Rn(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case hs:e=this.InterpolantFactoryMethodDiscrete;break;case fs:e=this.InterpolantFactoryMethodLinear;break;case ds:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(n)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return hs;case this.InterpolantFactoryMethodLinear:return fs;case this.InterpolantFactoryMethodSmooth:return ds}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(e,n){for(var i=this.times,r=i.length,o=0,s=r-1;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>n;)--s;if(++s,0!==o||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);var a=this.getValueSize();this.times=t.AnimationUtils.arraySlice(i,o,s),this.values=t.AnimationUtils.arraySlice(this.values,o*a,s*a)}return this},validate:function(){var e=!0,n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("invalid value size in track",this),e=!1);var i=this.times,r=this.values,o=i.length;0===o&&(console.error("track is empty",this),e=!1);for(var s=null,a=0;a!==o;a++){var c=i[a];if("number"==typeof c&&isNaN(c)){console.error("time is not a valid number",this,a,c),e=!1;break}if(null!==s&&s>c){console.error("out of order keys",this,a,c,s),e=!1;break}s=c}if(void 0!==r&&t.AnimationUtils.isTypedArray(r))for(var a=0,l=r.length;a!==l;++a){var u=r[a];if(isNaN(u)){console.error("value is not a valid number",this,a,u),e=!1;break}}return e},optimize:function(){for(var e=this.times,n=this.values,i=this.getValueSize(),r=this.getInterpolation()===ds,o=1,s=e.length-1,a=1;a<s;++a){var c=!1,l=e[a],u=e[a+1];if(l!==u&&(1!==a||l!==l[0]))if(r)c=!0;else for(var h=a*i,f=h-i,d=h+i,p=0;p!==i;++p){var g=n[h+p];if(g!==n[f+p]||g!==n[d+p]){c=!0;break}}if(c){if(a!==o){e[o]=e[a];for(var m=a*i,v=o*i,p=0;p!==i;++p)n[v+p]=n[m+p]}++o}}if(s>0){e[o]=e[s];for(var m=s*i,v=o*i,p=0;p!==i;++p)n[v+p]=n[m+p];++o}return o!==e.length&&(this.times=t.AnimationUtils.arraySlice(e,0,o),this.values=t.AnimationUtils.arraySlice(n,0,o*i)),this}},On.prototype=Object.assign(Object.create(Hc),{constructor:On,ValueTypeName:"vector"}),In.prototype=Object.assign(Object.create(kn.prototype),{constructor:In,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=(n-e)/(i-e),u=a+s;a!==u;a+=4)c.slerpFlat(r,0,o,a-s,o,a,l);return r}}),Nn.prototype=Object.assign(Object.create(Hc),{constructor:Nn,ValueTypeName:"quaternion",DefaultInterpolation:fs,InterpolantFactoryMethodLinear:function(t){return new In(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Un.prototype=Object.assign(Object.create(Hc),{constructor:Un,ValueTypeName:"number"}),jn.prototype=Object.assign(Object.create(Hc),{constructor:jn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:hs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),zn.prototype=Object.assign(Object.create(Hc),{constructor:zn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:hs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Hn.prototype=Object.assign(Object.create(Hc),{constructor:Hn,ValueTypeName:"color"}),Wn.prototype=Hc,Hc.constructor=Wn,Object.assign(Wn,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var n=Wn._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var i=[],r=[];t.AnimationUtils.flattenJSON(e.keys,i,r,"value"),e.times=i,e.values=r}return void 0!==n.parse?n.parse(e):new n(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var n,i=e.constructor;if(void 0!==i.toJSON)n=i.toJSON(e);else{n={name:e.name,times:t.AnimationUtils.convertArray(e.times,Array),values:t.AnimationUtils.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Un;case"vector":case"vector2":case"vector3":case"vector4":return On;case"color":return Hn;case"quaternion":return Nn;case"bool":case"boolean":return zn;case"string":return jn}throw new Error("Unsupported typeName: "+t)}}),Vn.prototype={constructor:Vn,resetDuration:function(){for(var t=this.tracks,e=0,n=0,i=t.length;n!==i;++n){var r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(Vn,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r)e.push(Wn.parse(n[r]).scale(i));return new Vn(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e},r=0,o=n.length;r!==o;++r)e.push(Wn.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,n,i,r){for(var o=n.length,s=[],a=0;a<o;a++){var c=[],l=[];c.push((a+o-1)%o,a,(a+1)%o),l.push(0,1,0);var u=t.AnimationUtils.getKeyframeOrder(c);c=t.AnimationUtils.sortedArray(c,1,u),l=t.AnimationUtils.sortedArray(l,1,u),
r||0!==c[0]||(c.push(o),l.push(l[0])),s.push(new Un(".morphTargetInfluences["+n[a].name+"]",c,l).scale(1/i))}return new Vn(e,(-1),s)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,s=t.length;o<s;o++){var a=t[o],c=a.name.match(r);if(c&&c.length>1){var l=c[1],u=i[l];u||(i[l]=u=[]),u.push(a)}}var h=[];for(var l in i)h.push(Vn.CreateFromMorphTargetSequence(l,i[l],e,n));return h},parseAnimation:function(e,n){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var i=function(e,n,i,r,o){if(0!==i.length){var s=[],a=[];t.AnimationUtils.flattenJSON(i,s,a,r),0!==s.length&&o.push(new e(n,s,a))}},r=[],o=e.name||"default",s=e.length||-1,a=e.fps||30,c=e.hierarchy||[],l=0;l<c.length;l++){var u=c[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var h={},f=0;f<u.length;f++)if(u[f].morphTargets)for(var d=0;d<u[f].morphTargets.length;d++)h[u[f].morphTargets[d]]=-1;for(var p in h){for(var g=[],m=[],d=0;d!==u[f].morphTargets.length;++d){var v=u[f];g.push(v.time),m.push(v.morphTarget===p?1:0)}r.push(new Un(".morphTargetInfluence["+p+"]",g,m))}s=h.length*(a||1)}else{var y=".bones["+n[l].name+"]";i(On,y+".position",u,"pos",r),i(Nn,y+".quaternion",u,"rot",r),i(On,y+".scale",u,"scl",r)}}if(0===r.length)return null;var w=new Vn(o,s,r);return w}}),Object.assign(Gn.prototype,{load:function(t,e,n,i){var r=this,o=new vn(r.manager);o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===i[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),i[t]}var i=this.textures,r=new jc[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.shading&&(r.shading=t.shading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=(new n).fromArray(o)}if(void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.materials)for(var s=0,a=t.materials.length;s<a;s++)r.materials.push(this.parse(t.materials[s]));return r}}),Object.assign(qn.prototype,{load:function(t,e,n,i){var r=this,o=new vn(r.manager);o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=new Ft,n=t.data.index,i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var r=new i[n.type](n.array);e.setIndex(new gt(r,1))}var o=t.data.attributes;for(var s in o){var a=o[s],r=new i[a.type](a.array);e.addAttribute(s,new gt(r,a.itemSize,a.normalized))}var c=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==c)for(var u=0,h=c.length;u!==h;++u){var f=c[u];e.addGroup(f.start,f.count,f.materialIndex)}var d=t.data.boundingSphere;if(void 0!==d){var p=new l;void 0!==d.center&&p.fromArray(d.center),e.boundingSphere=new et(p,d.radius)}return e}}),Xn.prototype={constructor:Xn,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:function(){var e,n,i;return function(r,o,s){function a(e,i,r,a,l){var u,h=o+e,f=Xn.Handlers.get(h);null!==f?u=f.load(h):(n.setCrossOrigin(s),u=n.load(h)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=Ao),1!==i[1]&&(u.wrapT=Ao)),void 0!==r&&u.offset.fromArray(r),void 0!==a&&("repeat"===a[0]&&(u.wrapS=Ao),"mirror"===a[0]&&(u.wrapS=_o),"repeat"===a[1]&&(u.wrapT=Ao),"mirror"===a[1]&&(u.wrapT=_o)),void 0!==l&&(u.anisotropy=l);var d=t.Math.generateUUID();return c[d]=u,d}void 0===e&&(e=new G),void 0===n&&(n=new An),void 0===i&&(i=new Gn);var c={},l={uuid:t.Math.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=Rr[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(h).getHex();break;case"colorSpecular":l.specular=e.fromArray(h).getHex();break;case"colorEmissive":l.emissive=e.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=a(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=a(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=a(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=a(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=a(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=a(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=a(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=a(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=a(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=a(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=br;break;case"doubleSided":l.side=xr;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=h;break;case"vertexColors":h===!0&&(l.vertexColors=Cr),"face"===h&&(l.vertexColors=Sr);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(c),i.parse(l)}}()},Xn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],o=e[n+1];if(r.test(t))return o}return null}},Object.assign(Yn.prototype,{load:function(t,e,n,i){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Xn.prototype.extractUrlBase(t),s=new vn(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(n){var i=JSON.parse(n),s=i.metadata;if(void 0!==s){var a=s.type;if(void 0!==a){if("object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var c=r.parse(i,o);e(c.geometry,c.materials)},n,i)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){function i(e){function i(t,e){return t&1<<e}var r,o,s,a,u,h,f,d,p,g,m,v,y,w,b,x,A,E,_,S,C,M,$,F,T,L,k,R=t.faces,D=t.vertices,B=t.normals,P=t.colors,O=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&O++;for(r=0;r<O;r++)c.faceVertexUvs[r]=[]}for(a=0,u=D.length;a<u;)E=new l,E.x=D[a++]*e,E.y=D[a++]*e,E.z=D[a++]*e,c.vertices.push(E);for(a=0,u=R.length;a<u;)if(g=R[a++],m=i(g,0),v=i(g,1),y=i(g,3),w=i(g,4),b=i(g,5),x=i(g,6),A=i(g,7),m){if(S=new dt,S.a=R[a],S.b=R[a+1],S.c=R[a+3],C=new dt,C.a=R[a+1],C.b=R[a+2],C.c=R[a+3],a+=4,v&&(p=R[a++],S.materialIndex=p,C.materialIndex=p),s=c.faces.length,y)for(r=0;r<O;r++)for(F=t.uvs[r],c.faceVertexUvs[r][s]=[],c.faceVertexUvs[r][s+1]=[],o=0;o<4;o++)d=R[a++],L=F[2*d],k=F[2*d+1],T=new n(L,k),2!==o&&c.faceVertexUvs[r][s].push(T),0!==o&&c.faceVertexUvs[r][s+1].push(T);if(w&&(f=3*R[a++],S.normal.set(B[f++],B[f++],B[f]),C.normal.copy(S.normal)),b)for(r=0;r<4;r++)f=3*R[a++],$=new l(B[f++],B[f++],B[f]),2!==r&&S.vertexNormals.push($),0!==r&&C.vertexNormals.push($);if(x&&(h=R[a++],M=P[h],S.color.setHex(M),C.color.setHex(M)),A)for(r=0;r<4;r++)h=R[a++],M=P[h],2!==r&&S.vertexColors.push(new G(M)),0!==r&&C.vertexColors.push(new G(M));c.faces.push(S),c.faces.push(C)}else{if(_=new dt,_.a=R[a++],_.b=R[a++],_.c=R[a++],v&&(p=R[a++],_.materialIndex=p),s=c.faces.length,y)for(r=0;r<O;r++)for(F=t.uvs[r],c.faceVertexUvs[r][s]=[],o=0;o<3;o++)d=R[a++],L=F[2*d],k=F[2*d+1],T=new n(L,k),c.faceVertexUvs[r][s].push(T);if(w&&(f=3*R[a++],_.normal.set(B[f++],B[f++],B[f])),b)for(r=0;r<3;r++)f=3*R[a++],$=new l(B[f++],B[f++],B[f]),_.vertexNormals.push($);if(x&&(h=R[a++],_.color.setHex(P[h])),A)for(r=0;r<3;r++)h=R[a++],_.vertexColors.push(new G(P[h]));c.faces.push(_)}}function r(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,i=t.skinWeights.length;n<i;n+=e){var r=t.skinWeights[n],s=e>1?t.skinWeights[n+1]:0,a=e>2?t.skinWeights[n+2]:0,l=e>3?t.skinWeights[n+3]:0;c.skinWeights.push(new o(r,s,a,l))}if(t.skinIndices)for(var n=0,i=t.skinIndices.length;n<i;n+=e){var u=t.skinIndices[n],h=e>1?t.skinIndices[n+1]:0,f=e>2?t.skinIndices[n+2]:0,d=e>3?t.skinIndices[n+3]:0;c.skinIndices.push(new o(u,h,f,d))}c.bones=t.bones,c.bones&&c.bones.length>0&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")}function s(e){if(void 0!==t.morphTargets)for(var n=0,i=t.morphTargets.length;n<i;n++){c.morphTargets[n]={},c.morphTargets[n].name=t.morphTargets[n].name,c.morphTargets[n].vertices=[];for(var r=c.morphTargets[n].vertices,o=t.morphTargets[n].vertices,s=0,a=o.length;s<a;s+=3){var u=new l;u.x=o[s]*e,u.y=o[s+1]*e,u.z=o[s+2]*e,r.push(u)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=c.faces,f=t.morphColors[0].colors,n=0,i=h.length;n<i;n++)h[n].color.fromArray(f,3*n)}}function a(){var e=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var i=0;i<n.length;i++){var r=Vn.parseAnimation(n[i],c.bones);r&&e.push(r)}if(c.morphTargets){var o=Vn.CreateClipsFromMorphTargetSequences(c.morphTargets,10);e=e.concat(o)}e.length>0&&(c.animations=e)}var c=new Ct,u=void 0!==t.scale?1/t.scale:1;if(i(u),r(),s(u),a(),c.computeFaceNormals(),c.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:c};var h=Xn.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:c,materials:h}}}),Object.assign(Kn.prototype,{load:function(t,e,n,i){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this,o=new vn(r.manager);o.load(t,function(t){r.parse(JSON.parse(t),e)},n,i)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseGeometries(t.geometries),i=this.parseImages(t.images,function(){void 0!==e&&e(s)}),r=this.parseTextures(t.textures,i),o=this.parseMaterials(t.materials,r),s=this.parseObject(t.object,n,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new Yn,i=new qn,r=0,o=t.length;r<o;r++){var s,a=t[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Uc[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Uc[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Uc[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Uc[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Uc[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Uc[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new Uc[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Uc[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Uc[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Uc[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Uc[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"BufferGeometry":s=i.parse(a);break;case"Geometry":s=n.parse(a.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),e[a.uuid]=s}return e},parseMaterials:function(t,e){var n={};if(void 0!==t){var i=new Gn;i.setTextures(e);for(var r=0,o=t.length;r<o;r++){var s=i.parse(t[r]);n[s.uuid]=s}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=Vn.parse(t[n]);e.push(i)}return e},parseImages:function(t,e){function n(t){return i.manager.itemStart(t),s.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemError(t)})}var i=this,r={};if(void 0!==t&&t.length>0){var o=new mn(e),s=new bn(o);s.setCrossOrigin(this.crossOrigin);for(var a=0,c=t.length;a<c;a++){var l=t[a],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:i.texturePath+l.url;r[l.uuid]=n(u)}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var o=0,s=t.length;o<s;o++){var a=t[o];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var c=new i(e[a.image]);c.needsUpdate=!0,c.uuid=a.uuid,void 0!==a.name&&(c.name=a.name),void 0!==a.mapping&&(c.mapping=n(a.mapping,xo)),void 0!==a.offset&&c.offset.fromArray(a.offset),void 0!==a.repeat&&c.repeat.fromArray(a.repeat),void 0!==a.wrap&&(c.wrapS=n(a.wrap[0],So),c.wrapT=n(a.wrap[1],So)),void 0!==a.minFilter&&(c.minFilter=n(a.minFilter,ko)),void 0!==a.magFilter&&(c.magFilter=n(a.magFilter,ko)),void 0!==a.anisotropy&&(c.anisotropy=a.anisotropy),void 0!==a.flipY&&(c.flipY=a.flipY),r[a.uuid]=c}return r},parseObject:function(){var t=new u;return function(e,n,i){function r(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),n[t]}function o(t){if(void 0!==t)return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}var s;switch(e.type){case"Scene":s=new he,void 0!==e.background&&Number.isInteger(e.background)&&(s.background=new G(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new ue(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new le(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new Dt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Bt(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new Ln(e.color,e.intensity);break;case"DirectionalLight":s=new Tn(e.color,e.intensity);break;case"PointLight":s=new $n(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":s=new Mn(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new _n(e.color,e.groundColor,e.intensity);break;case"Mesh":var a=r(e.geometry),c=o(e.material);s=a.bones&&a.bones.length>0?new we(a,c):new Tt(a,c);break;case"LOD":s=new ge;break;case"Line":s=new xe(r(e.geometry),o(e.material),e.mode);break;case"LineSegments":s=new Ae(r(e.geometry),o(e.material));break;case"PointCloud":case"Points":s=new _e(r(e.geometry),o(e.material));break;case"Sprite":s=new pe(o(e.material));break;case"Group":s=new Se;break;default:s=new lt}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var l in e.children)s.add(this.parseObject(e.children[l],n,i));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var f=u[h],l=s.getObjectByProperty("uuid",f.object);void 0!==l&&s.addLevel(l,f.distance)}return s}}()}),Zn.prototype={constructor:Zn,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(r),i.push(o),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e?e:t*i[o-1];for(var s,a=0,c=o-1;a<=c;)if(r=Math.floor(a+(c-a)/2),s=i[r]-n,s<0)a=r+1;else{if(!(s>0)){c=r;break}c=r-1}if(r=c,i[r]===n){var l=r/(o-1);return l}var u=i[r],h=i[r+1],f=h-u,d=(n-u)/f,l=(r+d)/(o-1);return l},getTangent:function(t){var e=1e-4,n=t-e,i=t+e;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n),o=this.getPoint(i),s=o.clone().sub(r);return s.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)}},Zn.create=function(t,e){return t.prototype=Object.create(Zn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Qn.prototype=Object.create(Zn.prototype),Qn.prototype.constructor=Qn,Qn.prototype.isLineCurve=!0,Qn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Qn.prototype.getPointAt=function(t){return this.getPoint(t)},Qn.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},Jn.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Jn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Qn(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,o=this.curves[i],s=o.getLength(),a=0===s?0:1-r/s;return o.getPointAt(a)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t||(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],s=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,a=o.getPoints(s),c=0;c<a.length;c++){var l=a[c];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new Ct,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new l(r.x,r.y,r.z||0))}return e}}),ti.prototype=Object.create(Zn.prototype),ti.prototype.constructor=ti,ti.prototype.isEllipseCurve=!0,ti.prototype.getPoint=function(t){for(var e=2*Math.PI,i=this.aEndAngle-this.aStartAngle,r=Math.abs(i)<Number.EPSILON;i<0;)i+=e;for(;i>e;)i-=e;i<Number.EPSILON&&(i=r?0:e),this.aClockwise!==!0||r||(i===e?i=-e:i-=e);var o=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(o),a=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),u=s-this.aX,h=a-this.aY;s=u*c-h*l+this.aX,a=u*l+h*c+this.aY}return new n(s,a)},t.CurveUtils={tangentQuadraticBezier:function(t,e,n,i){return 2*(1-t)*(n-e)+2*t*(i-n)},tangentCubicBezier:function(t,e,n,i,r){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*i*(1-t)-3*t*t*i+3*t*t*r},tangentSpline:function(t,e,n,i,r){var o=6*t*t-6*t,s=3*t*t-4*t+1,a=-6*t*t+6*t,c=3*t*t-2*t;return o+s+a+c},interpolate:function(t,e,n,i,r){var o=.5*(n-t),s=.5*(i-e),a=r*r,c=r*a;return(2*e-2*n+o+s)*c+(-3*e+3*n-2*o-s)*a+o*r+e}},ei.prototype=Object.create(Zn.prototype),ei.prototype.constructor=ei,ei.prototype.isSplineCurve=!0,ei.prototype.getPoint=function(e){var i=this.points,r=(i.length-1)*e,o=Math.floor(r),s=r-o,a=i[0===o?o:o-1],c=i[o],l=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2],h=t.CurveUtils.interpolate;return new n(h(a.x,c.x,l.x,u.x,s),h(a.y,c.y,l.y,u.y,s))},ni.prototype=Object.create(Zn.prototype),ni.prototype.constructor=ni,ni.prototype.getPoint=function(e){var i=t.ShapeUtils.b3;return new n(i(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},ni.prototype.getTangent=function(e){var i=t.CurveUtils.tangentCubicBezier;return new n(i(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},ii.prototype=Object.create(Zn.prototype),ii.prototype.constructor=ii,ii.prototype.getPoint=function(e){var i=t.ShapeUtils.b2;return new n(i(e,this.v0.x,this.v1.x,this.v2.x),i(e,this.v0.y,this.v1.y,this.v2.y))},ii.prototype.getTangent=function(e){var i=t.CurveUtils.tangentQuadraticBezier;return new n(i(e,this.v0.x,this.v1.x,this.v2.x),i(e,this.v0.y,this.v1.y,this.v2.y)).normalize()};var Wc=Object.assign(Object.create(Jn.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var i=new Qn(this.currentPoint.clone(),new n(t,e));this.curves.push(i),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,i,r){var o=new ii(this.currentPoint.clone(),new n(t,e),new n(i,r));this.curves.push(o),this.currentPoint.set(i,r)},bezierCurveTo:function(t,e,i,r,o,s){var a=new ni(this.currentPoint.clone(),new n(t,e),new n(i,r),new n(o,s));this.curves.push(a),this.currentPoint.set(o,s)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new ei(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,o){var s=this.currentPoint.x,a=this.currentPoint.y;this.absarc(t+s,e+a,n,i,r,o)},absarc:function(t,e,n,i,r,o){this.absellipse(t,e,n,n,i,r,o)},ellipse:function(t,e,n,i,r,o,s,a){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+c,e+l,n,i,r,o,s,a)},absellipse:function(t,e,n,i,r,o,s,a){var c=new ti(t,e,n,i,r,o,s,a);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)}});ri.prototype=Object.assign(Object.create(Wc),{constructor:ri,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),oi.prototype=Wc,Wc.constructor=oi,si.prototype={moveTo:function(t,e){this.currentPath=new oi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,o){this.currentPath.bezierCurveTo(t,e,n,i,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(e,n){function i(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new ri;o.curves=r.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var s=e[r],a=e[o],c=a.x-s.x,l=a.y-s.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(s=e[o],c=-c,a=e[r],l=-l),t.y<s.y||t.y>a.y)continue;if(t.y===s.y){if(t.x===s.x)return!0}else{var u=l*(t.x-s.x)-c*(t.y-s.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(t.y!==s.y)continue;if(a.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=a.x)return!0}}return i}var o=t.ShapeUtils.isClockWise,s=this.subPaths;if(0===s.length)return[];if(n===!0)return i(s);var a,c,l,u=[];if(1===s.length)return c=s[0],l=new ri,l.curves=c.curves,u.push(l),u;var h=!o(s[0].getPoints());h=e?!h:h;var f,d=[],p=[],g=[],m=0;p[m]=void 0,g[m]=[];for(var v=0,y=s.length;v<y;v++)c=s[v],f=c.getPoints(),a=o(f),a=e?!a:a,a?(!h&&p[m]&&m++,p[m]={s:new ri,p:f},p[m].s.curves=c.curves,h&&m++,g[m]=[]):g[m].push({h:c,p:f[0]});if(!p[0])return i(s);if(p.length>1){for(var w=!1,b=[],x=0,A=p.length;x<A;x++)d[x]=[];for(var x=0,A=p.length;x<A;x++)for(var E=g[x],_=0;_<E.length;_++){for(var S=E[_],C=!0,M=0;M<p.length;M++)r(S.p,p[M].p)&&(x!==M&&b.push({froms:x,tos:M,hole:_}),C?(C=!1,d[M].push(S)):w=!0);C&&d[x].push(S)}b.length>0&&(w||(g=d))}for(var $,v=0,F=p.length;v<F;v++){l=p[v].s,u.push(l),$=g[v];for(var T=0,L=$.length;T<L;T++)l.holes.push($[T].h)}return u}},Object.assign(ai.prototype,{isFont:!0,generateShapes:function(e,n,i){function r(t){for(var e=String(t).split(""),i=n/s.resolution,r=0,a=[],c=0;c<e.length;c++){var l=o(e[c],i,r);r+=l.offset,a.push(l.path)}return a}function o(e,n,r){var o=s.glyphs[e]||s.glyphs["?"];if(o){var a,c,l,u,h,f,d,p,g,m,v,y=new si,w=[],b=t.ShapeUtils.b2,x=t.ShapeUtils.b3;if(o.o)for(var A=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),E=0,_=A.length;E<_;){var S=A[E++];switch(S){case"m":a=A[E++]*n+r,c=A[E++]*n,y.moveTo(a,c);break;case"l":a=A[E++]*n+r,c=A[E++]*n,y.lineTo(a,c);break;case"q":if(l=A[E++]*n+r,u=A[E++]*n,d=A[E++]*n+r,p=A[E++]*n,y.quadraticCurveTo(d,p,l,u),v=w[w.length-1]){h=v.x,f=v.y;for(var C=1;C<=i;C++){var M=C/i;b(M,h,d,l),b(M,f,p,u)}}break;case"b":if(l=A[E++]*n+r,u=A[E++]*n,d=A[E++]*n+r,p=A[E++]*n,g=A[E++]*n+r,m=A[E++]*n,y.bezierCurveTo(d,p,g,m,l,u),v=w[w.length-1]){h=v.x,f=v.y;for(var C=1;C<=i;C++){var M=C/i;x(M,h,d,g,l),x(M,f,p,m,u)}}}}return{offset:o.ha*n,path:y}}}void 0===n&&(n=100),void 0===i&&(i=4);for(var s=this.data,a=r(e),c=[],l=0,u=a.length;l<u;l++)Array.prototype.push.apply(c,a[l].toShapes());return c}}),Object.assign(ci.prototype,{load:function(t,e,n,i){var r=this,o=new vn(this.manager);o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(i){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),
n=JSON.parse(t.substring(65,t.length-2))}var o=r.parse(n);e&&e(o)},n,i)},parse:function(t){return new ai(t)}});var Vc;Object.assign(ui.prototype,{load:function(t,e,n,i){var r=new vn(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){var n=li();n.decodeAudioData(t,function(t){e(t)})},n,i)}}),Object.assign(hi.prototype,{update:function(){var e,n,i,r,o,s,a,c=new u,l=new u;return function(u){var h=e!==this||n!==u.focus||i!==u.fov||r!==u.aspect*this.aspect||o!==u.near||s!==u.far||a!==u.zoom;if(h){e=this,n=u.focus,i=u.fov,r=u.aspect*this.aspect,o=u.near,s=u.far,a=u.zoom;var f,d,p=u.projectionMatrix.clone(),g=this.eyeSep/2,m=g*o/n,v=o*Math.tan(t.Math.DEG2RAD*i*.5)/a;l.elements[12]=-g,c.elements[12]=g,f=-v*r+m,d=v*r+m,p.elements[0]=2*o/(d-f),p.elements[8]=(d+f)/(d-f),this.cameraL.projectionMatrix.copy(p),f=-v*r-m,d=v*r-m,p.elements[0]=2*o/(d-f),p.elements[8]=(d+f)/(d-f),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(c)}}()}),fi.prototype=Object.create(lt.prototype),fi.prototype.constructor=fi,di.prototype=Object.assign(Object.create(lt.prototype),{constructor:di,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new l,e=new c,n=new l,i=new l;return function(r){lt.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),o.setPosition(t.x,t.y,t.z),o.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z)}}()}),pi.prototype=Object.assign(Object.create(lt.prototype),{constructor:pi,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.source.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.start(0,this.startTime),t.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=t)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),gi.prototype=Object.assign(Object.create(pi.prototype),{constructor:gi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new l;return function(e){lt.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(mi.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),vi.prototype={constructor:vi,accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==i;++s)n[r+s]=n[s];o=e}else{o+=e;var a=e/o;this._mixBufferRegion(n,r,0,a,i)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var s=3*e;this._mixBufferRegion(n,i,s,1-r,e)}for(var a=e,c=e+e;a!==c;++a)if(n[a]!==n[a+e]){o.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,i,r){c.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var o=1-i,s=0;s!==r;++s){var a=e+s;t[a]=t[a]*o+t[n+s]*i}}},yi.prototype={constructor:yi,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=yi.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[n])return void console.error("  can not bind to objectName of node, undefined",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[o]}}var a=t[i];if(void 0===a){var c=e.nodeName;return void console.error("  trying to update property for track: "+c+"."+i+" but it wasn't found.",t)}var l=this.Versioning.None;void 0!==t.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(t.geometry.morphTargets[s].name===r){r=s;break}}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):void 0!==a.length?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(yi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:yi.prototype.getValue,_setValue_unbound:yi.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),yi.Composite=function(t,e,n){var i=n||yi.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)},yi.Composite.prototype={constructor:yi.Composite,getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},yi.create=function(t,e,n){return t&&t.isAnimationObjectGroup?new yi.Composite(t,e,n):new yi(t,e,n)},yi.parseTrackName=function(t){var e=/^((?:\w+[\/:])*)(\w+)?(?:\.(\w+)(?:\[(.+)\])?)?\.(\w+)(?:\[(.+)\])?$/,n=e.exec(t);if(!n)throw new Error("cannot parse trackName at all: "+t);var i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]};if(null===i.propertyName||0===i.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return i},yi.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=function(t){for(var n=0;n<t.bones.length;n++){var i=t.bones[n];if(i.name===e)return i}return null},i=n(t.skeleton);if(i)return i}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e)return i;var o=r(i.children);if(o)return o}return null},o=r(t.children);if(o)return o}return null},wi.prototype={constructor:wi,isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,n=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,o=this._paths,s=this._parsedPaths,a=this._bindings,c=a.length,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],f=h.uuid,d=r[f];if(void 0===d){d=n++,r[f]=d,e.push(h);for(var p=0,g=c;p!==g;++p)a[p].push(new yi(h,o[p],s[p]))}else if(d<i){var m=e[d],v=--i,y=e[v];r[y.uuid]=d,e[d]=y,r[f]=v,e[v]=h;for(var p=0,g=c;p!==g;++p){var w=a[p],b=w[v],x=w[d];w[d]=b,void 0===x&&(x=new yi(h,o[p],s[p])),w[v]=x}}else e[d]!==m&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=i},remove:function(t){for(var e=this._objects,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,s=0,a=arguments.length;s!==a;++s){var c=arguments[s],l=c.uuid,u=i[l];if(void 0!==u&&u>=n){var h=n++,f=e[h];i[f.uuid]=u,e[u]=f,i[l]=h,e[h]=c;for(var d=0,p=o;d!==p;++d){var g=r[d],m=g[h],v=g[u];g[u]=m,g[h]=v}}}this.nCachedObjects_=n},uncache:function(t){for(var e=this._objects,n=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,o=this._bindings,s=o.length,a=0,c=arguments.length;a!==c;++a){var l=arguments[a],u=l.uuid,h=r[u];if(void 0!==h)if(delete r[u],h<i){var f=--i,d=e[f],p=--n,g=e[p];r[d.uuid]=h,e[h]=d,r[g.uuid]=f,e[f]=g,e.pop();for(var m=0,v=s;m!==v;++m){var y=o[m],w=y[f],b=y[p];y[h]=w,y[f]=b,y.pop()}}else{var p=--n,g=e[p];r[g.uuid]=h,e[h]=g,e.pop();for(var m=0,v=s;m!==v;++m){var y=o[m];y[h]=y[p],y.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,s=this._parsedPaths,a=this._objects,c=a.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,n[t]=i,o.push(t),s.push(e),r.push(u);for(var h=l,f=a.length;h!==f;++h){var d=a[h];u[h]=new yi(d,t,e)}return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s],c=t[s];e[c]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}},bi.prototype={constructor:bi,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,o=r/i,s=i/r;t.warp(1,o,e),this.warp(s,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,s=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var a=o.parameterPositions,c=o.sampleValues;return a[0]=r,a[1]=r+n,c[0]=t/s,c[1]=e/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){var r=this._startTime;if(null!==r){var o=(t-r)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var s=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(s),l[u].accumulate(i,a)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(i===cs){r===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=i===us;if(r===-1&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var s=Math.floor(e/n);e-=n*s,r+=Math.abs(s);var a=this.repetitions-r;if(a<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===a){var c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1===(1&r))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=gs,i.endingEnd=gs):(t?i.endingStart=this.zeroSlopeAtStart?gs:ps:i.endingStart=ms,e?i.endingEnd=this.zeroSlopeAtEnd?gs:ps:i.endingEnd=ms)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=e,s[1]=r+t,a[1]=n,this}},Object.assign(xi.prototype,e.prototype,{clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Vn.findByName(n,t):t,o=null!==r?r.uuid:t,s=this._actionsByClip[o],a=null;if(void 0!==s){var c=s.actionByRoot[i];if(void 0!==c)return c;a=s.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var l=new bi(this,r,e);return this._bindAction(l,a),this._addInactiveAction(l,o,i),l},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Vn.findByName(n,t):t,o=r?r.uuid:t,s=this._actionsByClip[o];return void 0!==s?s.actionByRoot[i]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(var r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,s=0;s!==n;++s){var a=e[s];a.enabled&&a._update(i,t,r,o)}for(var c=this._bindings,l=this._nActiveBindings,s=0;s!==l;++s)c[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,s=0,a=o.length;s!==a;++s){var c=o[s];this._deactivateAction(c);var l=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,e[l]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,o=r[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var s=this._bindingsByRootAndName,a=s[e];if(void 0!==a)for(var c in a){var l=a[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Object.assign(xi.prototype,{_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,s=t._interpolants,a=n.uuid,c=this._bindingsByRootAndName,l=c[a];void 0===l&&(l={},c[a]=l);for(var u=0;u!==r;++u){var h=i[u],f=h.name,d=l[f];if(void 0!==d)o[u]=d;else{if(d=o[u],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,a,f));continue}var p=e&&e._propertyBindings[u].binding.parsedPath;d=new vi(yi.create(n,f,p),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,a,f),o[u]=d}s[u].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,o=0,s=r.length;o!==s;++o){var a=r[o];0===a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var s=o.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,c=a[a.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,a[l]=c,a.pop(),t._byClipCacheIndex=null;var u=s.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],o=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=e[e.length-1],c=t._cacheIndex;a._cacheIndex=c,e[c]=a,e.pop(),delete s[r];t:{for(var l in s)break t;delete o[i]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new Dn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1)}),Ai.prototype={constructor:Ai,onUpdate:function(t){return this.dynamic=!0,this.onUpdateCallback=t,this}},Ei.prototype=Object.create(Ft.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isInstancedBufferGeometry=!0,Ei.prototype.addGroup=function(t,e,n){this.groups.push({start:t,count:e,instances:n})},Ei.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var i in n){var r=n[i];this.addAttribute(i,r.clone())}for(var o=t.groups,s=0,a=o.length;s<a;s++){var c=o[s];this.addGroup(c.start,c.count,c.instances)}return this},_i.prototype={constructor:_i,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}},Si.prototype={constructor:Si,isInterleavedBuffer:!0,set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)}},Ci.prototype=Object.create(Si.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isInstancedInterleavedBuffer=!0,Ci.prototype.copy=function(t){return Si.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Mi.prototype=Object.create(gt.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isInstancedBufferAttribute=!0,Mi.prototype.copy=function(t){return gt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},$i.prototype={constructor:$i,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var n=[];return Ti(t,this,n,e),n.sort(Fi),n},intersectObjects:function(t,e){var n=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=t.length;i<r;i++)Ti(t[i],this,n,e);return n.sort(Fi),n}},Li.prototype={constructor:Li,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},Ri.prototype={constructor:Ri,set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius.copy(t.radius),this.phi.copy(t.phi),this.theta.copy(t.theta),this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(t.Math.clamp(e.y/this.radius,-1,1))),this}},Di.prototype=Object.create(Tt.prototype),Di.prototype.constructor=Di,Di.prototype.createAnimation=function(t,e,n,i){var r={start:e,end:n,length:n-e+1,fps:i,duration:(n-e)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=r,this.animationsList.push(r)},Di.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,i={},r=this.geometry,o=0,s=r.morphTargets.length;o<s;o++){var a=r.morphTargets[o],c=a.name.match(n);if(c&&c.length>1){var l=c[1];i[l]||(i[l]={start:1/0,end:-(1/0)});var u=i[l];o<u.start&&(u.start=o),o>u.end&&(u.end=o),e||(e=l)}}for(var l in i){var u=i[l];this.createAnimation(l,u.start,u.end,t)}this.firstAnimation=e},Di.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},Di.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},Di.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},Di.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},Di.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},Di.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},Di.prototype.getAnimationTime=function(t){var e=0,n=this.animationsMap[t];return n&&(e=n.time),e},Di.prototype.getAnimationDuration=function(t){var e=-1,n=this.animationsMap[t];return n&&(e=n.duration),e},Di.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},Di.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},Di.prototype.update=function(e){for(var n=0,i=this.animationsList.length;n<i;n++){
var r=this.animationsList[n];if(r.active){var o=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var s=r.start+t.Math.clamp(Math.floor(r.time/o),0,r.length-1),a=r.weight;s!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[s]=0,r.lastFrame=r.currentFrame,r.currentFrame=s);var c=r.time%o/o;r.directionBackwards&&(c=1-c),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=c*a,this.morphTargetInfluences[r.lastFrame]=(1-c)*a):this.morphTargetInfluences[r.currentFrame]=a}}},Bi.prototype=Object.create(lt.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isImmediateRenderObject=!0,Pi.prototype=Object.create(Ae.prototype),Pi.prototype.constructor=Pi,Pi.prototype.update=function(){var t=new l,e=new l,n=new nt;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var a=s.vertices,c=s.faces,l=0,u=0,h=c.length;u<h;u++)for(var f=c[u],d=0,p=f.vertexNormals.length;d<p;d++){var g=a[f[i[d]]],m=f.vertexNormals[d];t.copy(g).applyMatrix4(r),e.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1}else if(s&&s.isBufferGeometry)for(var v=s.attributes.position,y=s.attributes.normal,l=0,d=0,p=v.count;d<p;d++)t.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(r),e.set(y.getX(d),y.getY(d),y.getZ(d)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1;return o.needsUpdate=!0,this}}(),Oi.prototype=Object.create(lt.prototype),Oi.prototype.constructor=Oi,Oi.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Oi.prototype.update=function(){var t=new l,e=new l;return function(){var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),Ii.prototype=Object.create(Ae.prototype),Ii.prototype.constructor=Ii,Ii.prototype.getBoneList=function(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.getBoneList(t.children[n]));return e},Ii.prototype.update=function(){for(var t=this.geometry,e=(new u).getInverse(this.root.matrixWorld),n=new u,i=0,r=0;r<this.bones.length;r++){var o=this.bones[r];o.parent&&o.parent.isBone&&(n.multiplyMatrices(e,o.matrixWorld),t.vertices[i].setFromMatrixPosition(n),n.multiplyMatrices(e,o.parent.matrixWorld),t.vertices[i+1].setFromMatrixPosition(n),i+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},Ni.prototype=Object.create(Tt.prototype),Ni.prototype.constructor=Ni,Ni.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ni.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},Ui.prototype=Object.create(lt.prototype),Ui.prototype.constructor=Ui,Ui.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},Ui.prototype.update=function(){var t=new l;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),ji.prototype=Object.create(Ae.prototype),ji.prototype.constructor=ji,ji.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},zi.prototype=Object.create(Ae.prototype),zi.prototype.constructor=zi,zi.prototype.update=function(){var t=new l,e=new l,n=new nt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,a=o.faces,c=0,l=0,u=a.length;l<u;l++){var h=a[l],f=h.normal;t.copy(s[h.a]).add(s[h.b]).add(s[h.c]).divideScalar(3).applyMatrix4(i),e.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),r.setXYZ(c,t.x,t.y,t.z),c+=1,r.setXYZ(c,e.x,e.y,e.z),c+=1}return r.needsUpdate=!0,this}}(),Hi.prototype=Object.create(lt.prototype),Hi.prototype.constructor=Hi,Hi.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},Hi.prototype.update=function(){var t=new l,e=new l,n=new l;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t);var i=this.children[0],r=this.children[1];i.lookAt(n),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.lookAt(n),r.scale.z=n.length()}}(),Wi.prototype=Object.create(Ae.prototype),Wi.prototype.constructor=Wi,Wi.prototype.update=function(){function t(t,o,s,a){i.set(o,s,a).unproject(r);var c=n[t];if(void 0!==c)for(var l=0,u=c.length;l<u;l++)e.vertices[c[l]].copy(i)}var e,n,i=new l,r=new Rt;return function(){e=this.geometry,n=this.pointMap;var i=1,o=1;r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-i,-o,-1),t("n2",i,-o,-1),t("n3",-i,o,-1),t("n4",i,o,-1),t("f1",-i,-o,1),t("f2",i,-o,1),t("f3",-i,o,1),t("f4",i,o,1),t("u1",.7*i,1.1*o,-1),t("u2",.7*-i,1.1*o,-1),t("u3",0,2*o,-1),t("cf1",-i,0,1),t("cf2",i,0,1),t("cf3",0,-o,1),t("cf4",0,o,1),t("cn1",-i,0,-1),t("cn2",i,0,-1),t("cn3",0,-o,-1),t("cn4",0,o,-1),e.verticesNeedUpdate=!0}}(),Vi.prototype=Object.create(Tt.prototype),Vi.prototype.constructor=Vi,Vi.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.getCenter(this.position)},Gi.prototype=Object.create(Ae.prototype),Gi.prototype.constructor=Gi,Gi.prototype.update=function(){var t=new tt;return function(e){if(e&&e.isBox3?t.copy(e):t.setFromObject(e),!t.isEmpty()){var n=t.min,i=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Gc=new Ft;Gc.addAttribute("position",new Et([0,0,0,0,1,0],3));var qc=new Je(0,.5,1,5,1);qc.translate(0,-.5,0),qi.prototype=Object.create(lt.prototype),qi.prototype.constructor=qi,qi.prototype.setDirection=function(){var t,e=new l;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),qi.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},qi.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Xi.prototype=Object.create(Ae.prototype),Xi.prototype.constructor=Xi,t.CatmullRomCurve3=function(){function t(){}var e=new l,n=new t,i=new t,r=new t;return t.prototype.init=function(t,e,n,i){this.c0=t,this.c1=n,this.c2=-3*t+3*e-2*n-i,this.c3=2*t-2*e+n+i},t.prototype.initNonuniformCatmullRom=function(t,e,n,i,r,o,s){var a=(e-t)/r-(n-t)/(r+o)+(n-e)/o,c=(n-e)/o-(i-e)/(o+s)+(i-n)/s;a*=o,c*=o,this.init(e,n,a,c)},t.prototype.initCatmullRom=function(t,e,n,i,r){this.init(e,n,r*(n-t),r*(i-e))},t.prototype.calc=function(t){var e=t*t,n=e*t;return this.c0+this.c1*t+this.c2*e+this.c3*n},Zn.create(function(t){this.points=t||[],this.closed=!1},function(t){var o,s,a,c,u=this.points;c=u.length,c<2&&console.log("duh, you need at least 2 points"),o=(c-(this.closed?0:1))*t,s=Math.floor(o),a=o-s,this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/u.length)+1)*u.length:0===a&&s===c-1&&(s=c-2,a=1);var h,f,d,p;if(this.closed||s>0?h=u[(s-1)%c]:(e.subVectors(u[0],u[1]).add(u[0]),h=e),f=u[s%c],d=u[(s+1)%c],this.closed||s+2<c?p=u[(s+2)%c]:(e.subVectors(u[c-1],u[c-2]).add(u[c-1]),p=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var g="chordal"===this.type?.5:.25,m=Math.pow(h.distanceToSquared(f),g),v=Math.pow(f.distanceToSquared(d),g),y=Math.pow(d.distanceToSquared(p),g);v<1e-4&&(v=1),m<1e-4&&(m=v),y<1e-4&&(y=v),n.initNonuniformCatmullRom(h.x,f.x,d.x,p.x,m,v,y),i.initNonuniformCatmullRom(h.y,f.y,d.y,p.y,m,v,y),r.initNonuniformCatmullRom(h.z,f.z,d.z,p.z,m,v,y)}else if("catmullrom"===this.type){var w=void 0!==this.tension?this.tension:.5;n.initCatmullRom(h.x,f.x,d.x,p.x,w),i.initCatmullRom(h.y,f.y,d.y,p.y,w),r.initCatmullRom(h.z,f.z,d.z,p.z,w)}var b=new l(n.calc(a),i.calc(a),r.calc(a));return b})}(),Yi.prototype=Object.create(t.CatmullRomCurve3.prototype);var Xc=Zn.create(function(t){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===t?[]:t},function(e){var n=this.points,i=(n.length-1)*e,r=Math.floor(i),o=i-r,s=n[0==r?r:r-1],a=n[r],c=n[r>n.length-2?n.length-1:r+1],u=n[r>n.length-3?n.length-1:r+2],h=t.CurveUtils.interpolate;return new l(h(s.x,a.x,c.x,u.x,o),h(s.y,a.y,c.y,u.y,o),h(s.z,a.z,c.z,u.z,o))});t.CubicBezierCurve3=Zn.create(function(t,e,n,i){this.v0=t,this.v1=e,this.v2=n,this.v3=i},function(e){var n=t.ShapeUtils.b3;return new l(n(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),n(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),t.QuadraticBezierCurve3=Zn.create(function(t,e,n){this.v0=t,this.v1=e,this.v2=n},function(e){var n=t.ShapeUtils.b2;return new l(n(e,this.v0.x,this.v1.x,this.v2.x),n(e,this.v0.y,this.v1.y,this.v2.y),n(e,this.v0.z,this.v1.z,this.v2.z))}),t.LineCurve3=Zn.create(function(t,e){this.v1=t,this.v2=e},function(t){if(1===t)return this.v2.clone();var e=new l;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),Ki.prototype=Object.create(ti.prototype),Ki.prototype.constructor=Ki,t.SceneUtils={createMultiMaterialObject:function(t,e){for(var n=new Se,i=0,r=e.length;i<r;i++)n.add(new Tt(t,e[i]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){var i=new u;i.getInverse(n.matrixWorld),t.applyMatrix(i),e.remove(t),n.add(t)}};var Yc=0,Kc=1;Object.assign(q.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(tt.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(ht.prototype,{center:function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)}}),Object.assign(nt.prototype,{multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)}}),Object.assign(u.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(t){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(it.prototype,{isIntersectionLine:function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)}}),Object.assign(c.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)}}),Object.assign(st.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(ri.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ze(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ze(this,t)}}),Object.assign(l.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)}}),Object.assign(lt.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(t){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(lt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ge.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Dt.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(En.prototype,{onlyShadow:{set:function(t){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(t){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(t){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(gt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(Ft.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ft.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(K.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(t){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new G}}}),Object.defineProperties(fn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(t){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Q.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),e.prototype=Object.assign(Object.create({constructor:e,apply:function(t){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(t,this)}}),e.prototype),Object.assign(ce.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(ce.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(ot.prototype,{cullFace:{get:function(){return this.renderReverseSided?fr:hr},set:function(t){var e=t!==hr;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(s.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.assign(pi.prototype,{load:function(t){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var e=this,n=new ui;return n.load(t,function(t){e.setBuffer(t)}),this}}),Object.assign(mi.prototype,{getData:function(t){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}});var Zc={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},Qc={crossOrigin:void 0,loadTexture:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new An;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},loadTextureCube:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new xn;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};Object.defineProperty(t,"AudioContext",{get:function(){return t.getAudioContext()}}),t.WebGLRenderTargetCube=a,t.WebGLRenderTarget=s,t.WebGLRenderer=ce,t.ShaderLib=Bc,t.UniformsLib=Dc,t.ShaderChunk=Rc,t.FogExp2=le,t.Fog=ue,t.Scene=he,t.LensFlare=fe,t.Sprite=pe,t.LOD=ge,t.SkinnedMesh=we,t.Skeleton=ve,t.Bone=ye,t.Mesh=Tt,t.LineSegments=Ae,t.Line=xe,t.Points=_e,t.Group=Se,t.VideoTexture=Ce,t.DataTexture=me,t.CompressedTexture=Me,t.CubeTexture=h,t.CanvasTexture=$e,t.DepthTexture=Fe,t.TextureIdCount=r,t.Texture=i,t.MaterialIdCount=Z,t.CompressedTextureLoader=yn,t.BinaryTextureLoader=wn,t.DataTextureLoader=zc,t.CubeTextureLoader=xn,t.TextureLoader=An,t.ObjectLoader=Kn,t.MaterialLoader=Gn,t.BufferGeometryLoader=qn,t.LoadingManager=mn,t.JSONLoader=Yn,t.ImageLoader=bn,t.FontLoader=ci,t.XHRLoader=vn,t.Loader=Xn,t.AudioLoader=ui,t.SpotLightShadow=Cn,t.SpotLight=Mn,t.PointLight=$n,t.HemisphereLight=_n,t.DirectionalLightShadow=Fn,t.DirectionalLight=Tn,t.AmbientLight=Ln,t.LightShadow=Sn,t.Light=En,t.StereoCamera=hi,t.PerspectiveCamera=Dt,t.OrthographicCamera=Bt,t.CubeCamera=fi,t.Camera=Rt,t.AudioListener=di,t.PositionalAudio=gi,t.getAudioContext=li,t.AudioAnalyser=mi,t.Audio=pi,t.VectorKeyframeTrack=On,t.StringKeyframeTrack=jn,t.QuaternionKeyframeTrack=Nn,t.NumberKeyframeTrack=Un,t.ColorKeyframeTrack=Hn,t.BooleanKeyframeTrack=zn,t.PropertyMixer=vi,t.PropertyBinding=yi,t.KeyframeTrack=Wn,t.AnimationObjectGroup=wi,t.AnimationMixer=xi,t.AnimationClip=Vn,t.Uniform=Ai,t.InstancedBufferGeometry=Ei,t.BufferGeometry=Ft,t.GeometryIdCount=Mt,t.Geometry=Ct,t.InterleavedBufferAttribute=_i,t.InstancedInterleavedBuffer=Ci,t.InterleavedBuffer=Si,t.InstancedBufferAttribute=Mi,t.DynamicBufferAttribute=St,t.Float64Attribute=_t,t.Float32Attribute=Et,t.Uint32Attribute=At,t.Int32Attribute=xt,t.Uint16Attribute=bt,t.Int16Attribute=wt,t.Uint8ClampedAttribute=yt,t.Uint8Attribute=vt,t.Int8Attribute=mt,t.BufferAttribute=gt,t.Face3=dt,t.Object3DIdCount=ut,t.Object3D=lt,t.Raycaster=$i,t.Layers=ct,t.EventDispatcher=e,t.Clock=Li,t.QuaternionLinearInterpolant=In,t.LinearInterpolant=Dn,t.DiscreteInterpolant=Bn,t.CubicInterpolant=Rn,t.Interpolant=kn,t.Triangle=ft,t.Spline=ki,t.Spherical=Ri,t.Plane=it,t.Frustum=rt,t.Sphere=et,t.Ray=st,t.Matrix4=u,t.Matrix3=nt,t.Box3=tt,t.Box2=q,t.Line3=ht,t.Euler=at,t.Vector4=o,t.Vector3=l,t.Vector2=n,t.Quaternion=c,t.Color=G,t.MorphBlendMesh=Di,t.ImmediateRenderObject=Bi,t.VertexNormalsHelper=Pi,t.SpotLightHelper=Oi,t.SkeletonHelper=Ii,t.PointLightHelper=Ni,t.HemisphereLightHelper=Ui,t.GridHelper=ji,t.FaceNormalsHelper=zi,t.DirectionalLightHelper=Hi,t.CameraHelper=Wi,t.BoundingBoxHelper=Vi,t.BoxHelper=Gi,t.ArrowHelper=qi,t.AxisHelper=Xi,t.ClosedSplineCurve3=Yi,t.SplineCurve3=Xc,t.ArcCurve=Ki,t.EllipseCurve=ti,t.SplineCurve=ei,t.CubicBezierCurve=ni,t.QuadraticBezierCurve=ii,t.LineCurve=Qn,t.Shape=ri,t.ShapePath=si,t.Path=oi,t.Font=ai,t.CurvePath=Jn,t.Curve=Zn,t.WireframeGeometry=Te,t.ParametricGeometry=Le,t.TetrahedronGeometry=Re,t.OctahedronGeometry=De,t.IcosahedronGeometry=Be,t.DodecahedronGeometry=Pe,t.PolyhedronGeometry=ke,t.TubeGeometry=Oe,t.TorusKnotGeometry=Ne,t.TorusKnotBufferGeometry=Ie,t.TorusGeometry=je,t.TorusBufferGeometry=Ue,t.TextGeometry=He,t.SphereBufferGeometry=We,t.SphereGeometry=Ve,
t.RingGeometry=qe,t.RingBufferGeometry=Ge,t.PlaneBufferGeometry=kt,t.PlaneGeometry=Xe,t.LatheGeometry=Ke,t.LatheBufferGeometry=Ye,t.ShapeGeometry=Ze,t.ExtrudeGeometry=ze,t.EdgesGeometry=Qe,t.ConeGeometry=en,t.ConeBufferGeometry=nn,t.CylinderGeometry=tn,t.CylinderBufferGeometry=Je,t.CircleBufferGeometry=rn,t.CircleGeometry=on,t.BoxBufferGeometry=Lt,t.BoxGeometry=sn,t.ShadowMaterial=an,t.SpriteMaterial=de,t.RawShaderMaterial=cn,t.ShaderMaterial=Q,t.PointsMaterial=Ee,t.MultiMaterial=ln,t.MeshPhysicalMaterial=hn,t.MeshStandardMaterial=un,t.MeshPhongMaterial=fn,t.MeshNormalMaterial=dn,t.MeshLambertMaterial=pn,t.MeshDepthMaterial=J,t.MeshBasicMaterial=pt,t.LineDashedMaterial=gn,t.LineBasicMaterial=be,t.Material=K,t.REVISION=cr,t.MOUSE=lr,t.CullFaceNone=ur,t.CullFaceBack=hr,t.CullFaceFront=fr,t.CullFaceFrontBack=dr,t.FrontFaceDirectionCW=pr,t.FrontFaceDirectionCCW=gr,t.BasicShadowMap=mr,t.PCFShadowMap=vr,t.PCFSoftShadowMap=yr,t.FrontSide=wr,t.BackSide=br,t.DoubleSide=xr,t.FlatShading=Ar,t.SmoothShading=Er,t.NoColors=_r,t.FaceColors=Sr,t.VertexColors=Cr,t.NoBlending=Mr,t.NormalBlending=$r,t.AdditiveBlending=Fr,t.SubtractiveBlending=Tr,t.MultiplyBlending=Lr,t.CustomBlending=kr,t.BlendingMode=Rr,t.AddEquation=Dr,t.SubtractEquation=Br,t.ReverseSubtractEquation=Pr,t.MinEquation=Or,t.MaxEquation=Ir,t.ZeroFactor=Nr,t.OneFactor=Ur,t.SrcColorFactor=jr,t.OneMinusSrcColorFactor=zr,t.SrcAlphaFactor=Hr,t.OneMinusSrcAlphaFactor=Wr,t.DstAlphaFactor=Vr,t.OneMinusDstAlphaFactor=Gr,t.DstColorFactor=qr,t.OneMinusDstColorFactor=Xr,t.SrcAlphaSaturateFactor=Yr,t.NeverDepth=Kr,t.AlwaysDepth=Zr,t.LessDepth=Qr,t.LessEqualDepth=Jr,t.EqualDepth=to,t.GreaterEqualDepth=eo,t.GreaterDepth=no,t.NotEqualDepth=io,t.MultiplyOperation=ro,t.MixOperation=oo,t.AddOperation=so,t.NoToneMapping=ao,t.LinearToneMapping=co,t.ReinhardToneMapping=lo,t.Uncharted2ToneMapping=uo,t.CineonToneMapping=ho,t.UVMapping=fo,t.CubeReflectionMapping=po,t.CubeRefractionMapping=go,t.EquirectangularReflectionMapping=mo,t.EquirectangularRefractionMapping=vo,t.SphericalReflectionMapping=yo,t.CubeUVReflectionMapping=wo,t.CubeUVRefractionMapping=bo,t.TextureMapping=xo,t.RepeatWrapping=Ao,t.ClampToEdgeWrapping=Eo,t.MirroredRepeatWrapping=_o,t.TextureWrapping=So,t.NearestFilter=Co,t.NearestMipMapNearestFilter=Mo,t.NearestMipMapLinearFilter=$o,t.LinearFilter=Fo,t.LinearMipMapNearestFilter=To,t.LinearMipMapLinearFilter=Lo,t.TextureFilter=ko,t.UnsignedByteType=Ro,t.ByteType=Do,t.ShortType=Bo,t.UnsignedShortType=Po,t.IntType=Oo,t.UnsignedIntType=Io,t.FloatType=No,t.HalfFloatType=Uo,t.UnsignedShort4444Type=jo,t.UnsignedShort5551Type=zo,t.UnsignedShort565Type=Ho,t.UnsignedInt248Type=Wo,t.AlphaFormat=Vo,t.RGBFormat=Go,t.RGBAFormat=qo,t.LuminanceFormat=Xo,t.LuminanceAlphaFormat=Yo,t.RGBEFormat=Ko,t.DepthFormat=Zo,t.DepthStencilFormat=Qo,t.RGB_S3TC_DXT1_Format=Jo,t.RGBA_S3TC_DXT1_Format=ts,t.RGBA_S3TC_DXT3_Format=es,t.RGBA_S3TC_DXT5_Format=ns,t.RGB_PVRTC_4BPPV1_Format=is,t.RGB_PVRTC_2BPPV1_Format=rs,t.RGBA_PVRTC_4BPPV1_Format=os,t.RGBA_PVRTC_2BPPV1_Format=ss,t.RGB_ETC1_Format=as,t.LoopOnce=cs,t.LoopRepeat=ls,t.LoopPingPong=us,t.InterpolateDiscrete=hs,t.InterpolateLinear=fs,t.InterpolateSmooth=ds,t.ZeroCurvatureEnding=ps,t.ZeroSlopeEnding=gs,t.WrapAroundEnding=ms,t.TrianglesDrawMode=vs,t.TriangleStripDrawMode=ys,t.TriangleFanDrawMode=ws,t.LinearEncoding=bs,t.sRGBEncoding=xs,t.GammaEncoding=As,t.RGBEEncoding=Es,t.LogLuvEncoding=_s,t.RGBM7Encoding=Ss,t.RGBM16Encoding=Cs,t.RGBDEncoding=Ms,t.BasicDepthPacking=$s,t.RGBADepthPacking=Fs,t.CubeGeometry=sn,t.Face4=Zi,t.LineStrip=Yc,t.LinePieces=Kc,t.MeshFaceMaterial=ln,t.PointCloud=Qi,t.Particle=pe,t.ParticleSystem=Ji,t.PointCloudMaterial=tr,t.ParticleBasicMaterial=er,t.ParticleSystemMaterial=nr,t.Vertex=ir,t.EdgesHelper=rr,t.WireframeHelper=or,t.GeometryUtils=Zc,t.ImageUtils=Qc,t.Projector=sr,t.CanvasRenderer=ar,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";function i(t){this.manager=void 0!==t?t:r.DefaultLoadingManager}Object.defineProperty(e,"__esModule",{value:!0});var r=n(689);Object.assign(i.prototype,r.EventDispatcher.prototype,{load:function(t,e,n,i){var o=this,s=new r.XHRLoader(this.manager);s.setPath(this.path),s.load(t,function(t){e(o.parse(t))},n,i)},setPath:function(t){this.path=t},setTexturePath:function(t){this.texturePath=t},setBaseUrl:function(t){console.warn("MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(t)},setCrossOrigin:function(t){this.crossOrigin=t},setMaterialOptions:function(t){this.materialOptions=t},parse:function(t){for(var e=t.split("\n"),n={},r=/\s+/,o={},s=0;s<e.length;s++){var a=e[s];if(a=a.trim(),0!==a.length&&"#"!==a.charAt(0)){var c=a.indexOf(" "),l=c>=0?a.substring(0,c):a;l=l.toLowerCase();var u=c>=0?a.substring(c+1):"";if(u=u.trim(),"newmtl"===l)n={name:u},o[u]=n;else if(n)if("ka"===l||"kd"===l||"ks"===l){var h=u.split(r,3);n[l]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else n[l]=u}}var f=new i.MaterialCreator(this.texturePath||this.path,this.materialOptions);return f.setCrossOrigin(this.crossOrigin),f.setManager(this.manager),f.setMaterials(o),f}}),i.MaterialCreator=function(t,e){this.baseUrl=t||"",this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:r.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:r.RepeatWrapping},i.MaterialCreator.prototype={constructor:i.MaterialCreator,setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var n in t){var i=t[n],r={};e[n]=r;for(var o in i){var s=!0,a=i[o],c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(a=[a[0]/255,a[1]/255,a[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===a[0]&&0===a[1]&&0===a[2]&&(s=!1)}s&&(r[c]=a)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){function e(t,e){if(!o[t]){var i=n.getTextureParams(e,o),r=n.loadTexture(s(n.baseUrl,i.url));r.repeat.copy(i.scale),r.offset.copy(i.offset),r.wrapS=n.wrap,r.wrapT=n.wrap,o[t]=r}}var n=this,i=this.materialsInfo[t],o={name:t,side:this.side},s=function(t,e){return"string"!=typeof e||""===e?"":/^https?:\/\//i.test(e)?e:t+e};for(var a in i){var c=i[a];if(""!==c)switch(a.toLowerCase()){case"kd":o.color=(new r.Color).fromArray(c);break;case"ks":o.specular=(new r.Color).fromArray(c);break;case"map_kd":e("map",c);break;case"map_ks":e("specularMap",c);break;case"map_bump":case"bump":e("bumpMap",c);break;case"ns":o.shininess=parseFloat(c);break;case"d":c<1&&(o.opacity=c,o.transparent=!0);break;case"Tr":c>0&&(o.opacity=1-c,o.transparent=!0)}}return this.materials[t]=new r.MeshPhongMaterial(o),this.materials[t]},getTextureParams:function(t,e){var n,i={scale:new r.Vector2(1,1),offset:new r.Vector2(0,0)},o=t.split(/\s+/);return n=o.indexOf("-bm"),n>=0&&(e.bumpScale=parseFloat(o[n+1]),o.splice(n,2)),n=o.indexOf("-s"),n>=0&&(i.scale.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),n=o.indexOf("-o"),n>=0&&(i.offset.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),i.url=o.join(" ").trim(),i},loadTexture:function(t,e,n,i,o){var s,a=r.Loader.Handlers.get(t),c=void 0!==this.manager?this.manager:r.DefaultLoadingManager;return null===a&&(a=new r.TextureLoader(c)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),s=a.load(t,n,i,o),void 0!==e&&(s.mapping=e),s}},e.MTLLoader=i},function(t,e,n){"use strict";function i(t){this.manager=void 0!==t?t:r.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(689);i.prototype={constructor:i,load:function(t,e,n,i){var o=this,s=new r.XHRLoader(o.manager);s.setPath(this.path),s.load(t,function(t){e(o.parse(t))},n,i)},setPath:function(t){this.path=t},setMaterials:function(t){this.materials=t},_createParserState:function(){var t={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=e!==!1);this.object&&"function"==typeof this.object._finalize&&this.object._finalize();var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object={name:t||"",fromDeclaration:e!==!1,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){return{index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:this.groupEnd,groupEnd:-1,groupCount:-1,inherited:!1}}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();return e&&e.groupEnd===-1&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t!==!1&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize()},parseVertexIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0]),r.push(i[t+1]),r.push(i[t+2]),r.push(i[e+0]),r.push(i[e+1]),r.push(i[e+2]),r.push(i[n+0]),r.push(i[n+1]),r.push(i[n+2])},addVertexLine:function(t){var e=this.vertices,n=this.object.geometry.vertices;n.push(e[t+0]),n.push(e[t+1]),n.push(e[t+2])},addNormal:function(t,e,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[t+0]),r.push(i[t+1]),r.push(i[t+2]),r.push(i[e+0]),r.push(i[e+1]),r.push(i[e+2]),r.push(i[n+0]),r.push(i[n+1]),r.push(i[n+2])},addUV:function(t,e,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0]),r.push(i[t+1]),r.push(i[e+0]),r.push(i[e+1]),r.push(i[n+0]),r.push(i[n+1])},addUVLine:function(t){var e=this.uvs,n=this.object.geometry.uvs;n.push(e[t+0]),n.push(e[t+1])},addFace:function(t,e,n,i,r,o,s,a,c,l,u,h){var f,d=this.vertices.length,p=this.parseVertexIndex(t,d),g=this.parseVertexIndex(e,d),m=this.parseVertexIndex(n,d);if(void 0===i?this.addVertex(p,g,m):(f=this.parseVertexIndex(i,d),this.addVertex(p,g,f),this.addVertex(g,m,f)),void 0!==r){var v=this.uvs.length;p=this.parseUVIndex(r,v),g=this.parseUVIndex(o,v),m=this.parseUVIndex(s,v),void 0===i?this.addUV(p,g,m):(f=this.parseUVIndex(a,v),this.addUV(p,g,f),this.addUV(g,m,f))}if(void 0!==c){var y=this.normals.length;p=this.parseNormalIndex(c,y),g=c===l?p:this.parseNormalIndex(l,y),m=c===u?p:this.parseNormalIndex(u,y),void 0===i?this.addNormal(p,g,m):(f=this.parseNormalIndex(h,y),this.addNormal(p,g,f),this.addNormal(g,m,f))}},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,r=0,o=t.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(t[r],n));for(var s=0,o=e.length;s<o;s++)this.addUVLine(this.parseUVIndex(e[s],i))}};return t.startObject("",!1),t},parse:function(t){console.time("OBJLoader");var e=this._createParserState();t.indexOf("\r\n")!==-1&&(t=t.replace("\r\n","\n"));for(var n=t.split("\n"),i="",o="",s="",a=0,c=[],l="function"==typeof"".trimLeft,u=0,h=n.length;u<h;u++)if(i=n[u],i=l?i.trimLeft():i.trim(),a=i.length,0!==a&&(o=i.charAt(0),"#"!==o))if("v"===o)if(s=i.charAt(1)," "===s&&null!==(c=this.regexp.vertex_pattern.exec(i)))e.vertices.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));else if("n"===s&&null!==(c=this.regexp.normal_pattern.exec(i)))e.normals.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));else{if("t"!==s||null===(c=this.regexp.uv_pattern.exec(i)))throw new Error("Unexpected vertex/normal/uv line: '"+i+"'");e.uvs.push(parseFloat(c[1]),parseFloat(c[2]))}else if("f"===o)if(null!==(c=this.regexp.face_vertex_uv_normal.exec(i)))e.addFace(c[1],c[4],c[7],c[10],c[2],c[5],c[8],c[11],c[3],c[6],c[9],c[12]);else if(null!==(c=this.regexp.face_vertex_uv.exec(i)))e.addFace(c[1],c[3],c[5],c[7],c[2],c[4],c[6],c[8]);else if(null!==(c=this.regexp.face_vertex_normal.exec(i)))e.addFace(c[1],c[3],c[5],c[7],void 0,void 0,void 0,void 0,c[2],c[4],c[6],c[8]);else{if(null===(c=this.regexp.face_vertex.exec(i)))throw new Error("Unexpected face line: '"+i+"'");e.addFace(c[1],c[2],c[3],c[4])}else if("l"===o){var f=i.substring(1).trim().split(" "),d=[],p=[];if(i.indexOf("/")===-1)d=f;else for(var g=0,m=f.length;g<m;g++){var v=f[g].split("/");""!==v[0]&&d.push(v[0]),""!==v[1]&&p.push(v[1])}e.addLineGeometry(d,p)}else if(null!==(c=this.regexp.object_pattern.exec(i))){var y=c[0].substr(1).trim();e.startObject(y)}else if(this.regexp.material_use_pattern.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(this.regexp.material_library_pattern.test(i))e.materialLibraries.push(i.substring(7).trim());else{if(null===(c=this.regexp.smoothing_pattern.exec(i))){if("\0"===i)continue;throw new Error("Unexpected line: '"+i+"'")}var w=c[1].trim().toLowerCase();e.object.smooth="1"===w||"on"===w;var b=e.object.currentMaterial();b&&(b.smooth=e.object.smooth)}e.finalize();var x=new r.Group;x.materialLibraries=[].concat(e.materialLibraries);for(var u=0,h=e.objects.length;u<h;u++){var A=e.objects[u],E=A.geometry,_=A.materials,S="Line"===E.type;if(0!==E.vertices.length){var C=new r.BufferGeometry;C.addAttribute("position",new r.BufferAttribute(new Float32Array(E.vertices),3)),E.normals.length>0?C.addAttribute("normal",new r.BufferAttribute(new Float32Array(E.normals),3)):C.computeVertexNormals(),E.uvs.length>0&&C.addAttribute("uv",new r.BufferAttribute(new Float32Array(E.uvs),2));for(var M=[],$=0,F=_.length;$<F;$++){var T=_[$],b=void 0;if(null!==this.materials&&(b=this.materials.create(T.name),S&&b&&!(b instanceof r.LineBasicMaterial))){var L=new r.LineBasicMaterial;L.copy(b),b=L}b||(b=S?new r.LineBasicMaterial:new r.MeshPhongMaterial,b.name=T.name),b.shading=T.smooth?r.SmoothShading:r.FlatShading,M.push(b)}var k;if(M.length>1){for(var $=0,F=_.length;$<F;$++){var T=_[$];C.addGroup(T.groupStart,T.groupCount,$)}var R=new r.MultiMaterial(M);k=S?new r.LineSegments(C,R):new r.Mesh(C,R)}else k=S?new r.LineSegments(C,M[0]):new r.Mesh(C,M[0]);k.name=A.name,x.add(k)}}return console.timeEnd("OBJLoader"),x}},e.OBJLoader=i}]);
//# sourceMappingURL=app.490b72d3e1512ab741f6.js.map